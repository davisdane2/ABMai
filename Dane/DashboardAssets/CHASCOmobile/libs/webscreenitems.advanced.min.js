/* SCADA Innovation/WebUX 7.700.106.1 File version: 7.700.106.1  Copyright (C) Siemens AG 2018. All Rights Reserved. */
var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},"function"==typeof define&&define.amd&&define("PWC.HmiAC",function(){return PWC.HmiAC}),PWC.HmiAC.Design=PWC.HmiAC.Design||{},PWC.HmiAC.Design.Inheritance=function(){var a=function(a,b){for(var c in b.prototype)c&&(a.prototype[c]||(a.prototype[c]=b.prototype[c]));a.prototype.constructor=a,a.baseCtor=b,a.basePrototype=b.prototype};return{Extend:a}}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.Column=function(a){"use strict";var b=PWC.Lib.Config.Properties,c="AlarmViewColumn",d=PWC.HmiAC.ColumnToAttributeMap;this.columnName=b.getPropPart(a,c,"Name"),""===b.getPropPart(a,c,"DisplayName")||void 0===b.getPropPart(a,c,"DisplayName")?(this.columnHeader=b.getPropPart(a,c,"Name"),a.DisplayName=this.columnHeader):this.columnHeader=b.getPropPart(a,c,"DisplayName"),this.columnSource=b.getPropPart(a,c,"Source"),this.alignment=b.getPropPart(a,c,"Alignment"),this.columnWidth=b.getPropPart(a,c,"Width"),this.lengthInChars=b.getPropPart(a,c,"Width"),this.showDate=b.getPropPart(a,c,"ShowDate"),this.dateFormat=b.getPropPart(a,c,"DateFormat"),this.timeFormat=b.getPropPart(a,c,"TimeFormat"),this.showText=b.getPropPart(a,c,"ShowText"),this.showIcon=b.getPropPart(a,c,"ShowIcon"),this.columnType=this.showIcon?PWC.Components.Grid.ColumnDataType.Image:PWC.Components.Grid.ColumnDataType.Text,this.showTitleText=b.getPropPart(a,c,"ShowTitleText"),this.useAlarmColors=b.getPropPart(a,c,"UseAlarmColors"),this.sortIndex=b.getPropPart(a,c,"SortIndex"),this.sortOrder=b.getPropPart(a,c,"SortOrder"),this.flash=b.getPropPart(a,c,"ColumnFlashing"),this.visible=b.getPropPart(a,c,"Visible"),this.selected=1,this.index=b.getPropPart(a,c,"Index"),this.leadingZeros=b.getPropPart(a,c,"LeadingZeros"),this.exponentialFormat=b.getPropPart(a,c,"ExponentialFormat"),this.autoDecimalPrecision=b.getPropPart(a,c,"AutoDecimalPrecision"),this.decimalPrecision=b.getPropPart(a,c,"DecimalPrecision"),this.flashingTypes=0,this.flash?this.flashingTypes=this.flash-1:this.flash=!1,null!==d[this.columnName]&&(this.attributeName=d[this.columnName]),this.setAlignment=function(a){this.alignment=a},this.setColumnWidth=function(a){this.columnWidth=a},this.setLengthInChars=function(a){this.lengthInChars=a},this.setShowDate=function(a){this.showDate=a},this.setDateFormat=function(a){this.dateFormat=a},this.setTimeFormat=function(a){this.timeFormat=a},this.setShowText=function(a){this.showText=a},this.setShowTitleText=function(a){this.showTitleText=a},this.setFlashing=function(a){this.flash=a},this.setFlashingTypes=function(a){this.flashingTypes=a},this.setUseAlarmColors=function(a){this.useAlarmColors=a},this.setVisible=function(a){this.visible=a},this.setSelected=function(a){this.selected=a},this.setIndex=function(a){this.index=a},this.setShowIcon=function(a){this.showIcon=a},this.setLeadingZeros=function(a){this.leadingZeros=a},this.setSortIndex=function(a){this.sortIndex=a},this.setSortOrder=function(a){this.sortOrder=a},this.setColumnHeader=function(a){this.columnHeader=a}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ColumnData=function(){"use strict";this.columnName=null,this.columnValue=null,this.columnStyle=null};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.Row=function(){"use strict";this.columnDataCollection=[],this.style=null};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.Grid=function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o=a,p=[],q=[],r="ModificationTime/Time",s="Number",t="Frequence",u=0,v=[],w=[],x=[],y=1e3,z={},A=[],B=function(a){var b,d,e,f=PWC.Components.Grid.GridColumnModel,g=a.length;for(w=[],i=[],l===PWC.HmiAC.DataSource.HitList?m=a:c=a,b=0;g>b;++b)e=a[b],e.visible&&e.selected&&(d=new f,d.name=e.columnName,d.header=e.columnHeader,d.attributeName=e.attributeName,d.index=e.index,d.visible=!0,d.sortOrder=e.sortOrder,d.sortIndex=e.sortIndex,d.displayName=e.columnHeader,d.width=e.columnWidth,d.lengthInChars=e.lengthInChars,d.leadingZeros=e.leadingZeros,d.decimalPrecision=e.decimalPrecision,d.alignment=e.alignment,d.dateFormat=e.dateFormat,d.timeFormat=e.timeFormat,d.showIcon=e.showIcon?!0:!1,d.showText=e.showText?!0:!1,d.showDate=e.showDate,d.showTitleIcon=!1,d.showTitleText=e.showTitleText?!0:!1,d.selected=e.selected,d.columnDataType=e.columnType,d.columnSource=e.columnSource,d.exponentialFormat=e.exponentialFormat,d.autoDecimalPrecision=e.autoDecimalPrecision,d.decimalPrecision=e.decimalPrecision,d.flashing=e.flash,d.useColumnForeColor=d.useColoumnBackgroundColor=e.useAlarmColors,d.flashingType=e.flashingTypes,i.push(d),w.push({columnName:e.columnName,index:b}));V(),o.gridColumns=i},C=function(a,b,c){var d,e=0,f=i.length;if(c){for(e;f>e&&(d=i[e],d.name!==c);++e);d[a]=b}else for(e;f>e;++e)i[e][a]=b},D=function(a){l=a,z={}},E=function(){return l},F=function(a,c,e){var f=new PWC.Components.Grid.IGridHost;return f.getCellData=Z,f.getCellStyle=$,f.onSelection=K,f.onCellDoubleClick=N,f.onRowHeaderDoubleClick=N,f.onColumnResize=I,f.onSortButtonClicked=J,f.getRowFlashInfo=G,f.onSelectionBegin=H,b=new PWC.Components.Grid.GridControl(a,c),d=b.init(o,f,e),mb(o.defaultSortOrder),j=new PWC.Components.Grid.SelectionInfo,b.setRecordLevelSelection(!0,j),d},G=function(a){return p[a]?p[a].FLASHING?!0:!1:void 0},H=function(a,b){b&&p[a].isRowSelected&&(p[a].isRowSelected=!1)},I=function(a,b){var c=w[a].index;x.onColumnResize&&x.onColumnResize(c,b)},J=function(a,b,c){k===PWC.HmiAC.SelectionType.None&&null!==h&&(p[h].isCellSelected=!1),x.onSortButtonClicked&&x.onSortButtonClicked(a,b,c)},K=function(a){var b,c;for(q=a.rowSelection,g=a.selectedCellColumnIndex,h=a.selectedCellRowIndex,c=q.length,L(),b=0;c>b;b+=1)p[q[b]].isRowSelected=!0;null!==h&&(p[h].isCellSelected=!0),x.onSelection&&x.onSelection(a)},L=function(){var a=0,b=p.length;for(a;b>a;a+=1)p[a].isRowSelected=!1,p[a].isCellSelected=!1;for(null!==h&&p[h]&&(p[h].isCellSelected=!0),a=0;a<q.length;a++)p[q[a]]&&(p[q[a]].isRowSelected=!0)},M=function(){j.clearSelection(),j.setCellRowSelection(null)},N=function(a,b){x.onDoubleClick&&x.onDoubleClick(a,b)},O=function(a){b.subscribeEvent(a)},P=function(a){b.unSubscribeEvent(a)},Q=function(){var a=0,b=p.length;for(M(),a;b>a;a+=1)p[a].isRowSelected&&j.addToSelection(a),p[a].isCellSelected&&(j.setCellRowSelection(a),p[a].isCellSelected=!1)},R=function(a){k=PWC.HmiAC.SelectionType[a]},S=function(a,b){var c,f,g,h=[],i=!1;if(a&&d)if(c=a.columnDataCollection){for(f=c.length,v=[],g=0;f>g;++g)c[g]?(v[g]=c[g].columnName,h[c[g].columnName]=c[g].columnValue):PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.Error,"ColumnData is null or undefined");l===PWC.HmiAC.DataSource.ShortArchive&&u===y?(e?(A.splice(0,1),A[u-1]=h):(A.splice(u-1,1),A.splice(0,0,h)),p=A.slice(0),i=!0):l===PWC.HmiAC.DataSource.LongArchive?(void 0===z[b]?z[b]=1:z[b]+=1,z[b]<=y&&(p[u]=h,A[u]=h,u++,i=!0)):(p[u]=h,A[u]=h,u++,i=!0)}else PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.Error,"ColumnDataCollection is null or undefined");else PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.Error,"Row object is null or undefined");return i},T=function(){var a;return a=b.load(p.length),K(b.getSelection()),a},U=function(){f?W():X(),Q()},V=function(){var a,b,c,d=i.length;for(a=0;d-1>a;a++)for(b=a+1;d>b;b++)i[a].index>i[b].index&&(c=i[a],i[a]=i[b],i[b]=c,c=w[a],w[a]=w[b],w[b]=c)},W=function(){var a,b,c,d,e=[],f=i.length,g=new PWC.HmiAC.SortClass;for(c=0;f>c;c++)switch(i[c].sortIndex){case PWC.HmiAC.SortLevel.One:e[0]=c;break;case PWC.HmiAC.SortLevel.Two:e[1]=c;break;case PWC.HmiAC.SortLevel.Three:e[2]=c;break;case PWC.HmiAC.SortLevel.Four:e[3]=c}if(b=e.length,0===b)X();else for(d=0;b>d;d++)c=e[d],a=i[c].attributeName?i[c].attributeName:i[c].name,g.messageBlock.push(a),g.sortOrder.push(i[c].sortOrder),p=p.sort(g.mySort)},X=function(){p=p.sort(l===PWC.HmiAC.DataSource.HitList?function(a,b){return b[t]!==a[t]?b[t]-a[t]:b[s]===a[s]?0:a[s]-b[s]}:e?function(a,b){return a[r]!==b[r]?a[r]-b[r]:a[s]===b[s]?0:a[s]-b[s]}:function(a,b){return b[r]!==a[r]?b[r]-a[r]:b[s]===a[s]?0:b[s]-a[s]}),A=p.slice(0)},Y=function(a){r=a},Z=function(a,b){var c=new PWC.Components.Grid.CellData,d=i[b],e=p[a],f=w[b].columnName;return c.value=e[f],c.style.fill=e.style.fill,c.style.forecolor=e.style.forecolor,22===d.columnSource&&(c.style.fontStrikeOut=1===e.INVALIDTIME?1:0),c},$=function(a,b){var c={},d=i[b],e=p[a];return e&&(c.fill=e.style.fill,c.forecolor=e.style.forecolor,22===d.columnSource&&(c.fontStrikeOut=1===e.INVALIDTIME?1:0)),c},_=function(a){var b;return null!==a&&u>a&&(b=p[a]),b},ab=function(a,b){var c,d,e=[],f=v.length,g=[];if(f>0)for(c=0;u>c;++c)d=_(c),d&&d[a]&&b&&d[a].toString()===b.toString()&&e.push(c),d=A[c],d&&d[a]&&b&&d[a].toString()===b.toString()&&g.push(c);return{atcualIndices:e,originalIndices:g}},bb=function(a){var b,c,d=p.length;for(b=0;d>b;b++)if(a===parseInt(p[b].Number)){c=p[b];break}return c},cb=function(a,c){null===a||isNaN(a)?PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.ERROR,"Invalid Row Index"):b?u>a?(u-=1,p.splice(a,1),A.splice(c,1),j.removeFromSelection(a)):PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.ERROR,"No rows are added or RowIndex is more than row count"):PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.ERROR," Grid is not created")},db=function(a,c,d){var e,f,g,h,i=[],j=p[a].isCellSelected,k=p[a].isRowSelected,l=" ";if(null!==a&&u>a&&c&&c.columnDataCollection&&b){for(f=v.length,e=0;f>e;++e)h=c.columnDataCollection[e],g=h?c.columnDataCollection[e].columnValue:l,i[v[e]]=g;i.isCellSelected=j,i.isRowSelected=k,p[a]=i,A[d]=i}},eb=function(){var a,c,d,e=[];if(a=b.getDisplayedRowInfo(),b){c=a.startIndex,d=a.endIndex,d>u&&(d=u);for(var f=c;d>=f;f++)e.push(f);return e}},fb=function(){return u},gb=function(){return p},hb=function(a){p=a,T()},ib=function(){return b.getSelection()},jb=function(a){f=a},kb=function(){b.unLoad(),u=0,K(b.getSelection()),p.length=0,A.length=0},lb=function(a){i=a},mb=function(a){e=a,b.setAutoScrollToLatest(e)},nb=function(a){a?b.onPropertyChange(a):b.onPropertyChange()},ob=function(a){a?(b.resume(),f=!1):(b.pause(),f=!0)},pb=function(a){b.setFlashStatus(a)},qb=function(){b.handleFlashing()},rb=function(){b.resume()},sb=function(){b.pause()},tb=function(){h=j.getCellRowSelection(),u-1>h&&(h=null===h?0:h+1,b.setSelection([h],g,h,!0),K(b.getSelection()))},ub=function(){null!==h&&(h>0&&(h-=1),b.setSelection([h],g,h,!0),K(b.getSelection()))},vb=function(){b.setSelection([0],g,0,!0),K(b.getSelection())},wb=function(){var a=u-1;b.setSelection([a],g,a,!0),K(b.getSelection())},xb=function(){return h},yb=function(){return q},zb=function(){return i},Ab=function(){return c},Bb=function(a){c=a},Cb=function(){return m},Db=function(a){m=a},Eb=function(a){return w[a].index},Fb=function(a,b){x[a]=b},Gb=function(a){x[a]=null},Hb=function(){var a={};return PWC.Lib.HmiTypes.HmiObject.getRelPosToTLSW(n,a),a.adaptScreenToWindowFactor},Ib=function(a){a.type===PWC.Lib.HmiTypes.HmiObjectTypes.TYPE_HMI_SCREEN&&a.container.type===PWC.Lib.HmiTypes.HmiObjectTypes.TYPE_HMI_TOPLEVELSCREENWINDOW?b.setAdoptGridToScreen(!1):(n=a,b.setAdoptGridToScreen(!0,Hb))},Jb=function(){b.unInit()},Kb=function(){o=null,b=null,c=null,p.length=0,q.length=0,v.length=0,w.length=0,x.length=0,n=null,i&&(i.length=0),m&&(m.length=0)};return PWC.HmiAC.SortClass=function(){var a=this;this.messageBlock=[],this.sortOrder=[],this.mySort=function(b,c){for(var d=0;d<a.messageBlock.length;d++){if(isNaN(b[a.messageBlock[d]])||isNaN(c[a.messageBlock[d]])){if(b[a.messageBlock[d]]===c[a.messageBlock[d]])continue;return b[a.messageBlock[d]]=b[a.messageBlock[d]]?b[a.messageBlock[d]]:"",c[a.messageBlock[d]]=c[a.messageBlock[d]]?c[a.messageBlock[d]]:"",1===a.sortOrder[d]?b[a.messageBlock[d]]>c[a.messageBlock[d]]?1:b[a.messageBlock[d]]<c[a.messageBlock[d]]?-1:0:b[a.messageBlock[d]]>c[a.messageBlock[d]]?-1:b[a.messageBlock[d]]<c[a.messageBlock[d]]?1:0}if(b[a.messageBlock[d]]!==c[a.messageBlock[d]])return 1===a.sortOrder[d]?b[a.messageBlock[d]]-c[a.messageBlock[d]]:c[a.messageBlock[d]]-b[a.messageBlock[d]]}return e?b[r]!==c[r]?b[r]-c[r]:b[s]===c[s]?0:b[s]-c[s]:c[r]!==b[r]?c[r]-b[r]:c[s]===b[s]?0:c[s]-b[s]}},{addColumns:B,render:F,addRow:S,getRowDataCollection:gb,updateRowDataCollection:hb,setSortOrder:mb,renderRows:T,onPropertyChange:nb,resume:rb,pause:sb,moveToNext:tb,moveToPrevious:ub,moveToFirst:vb,moveToLast:wb,getRow:_,searchRow:ab,removeRow:cb,updateRow:db,getRowCount:fb,getVisibleIndicies:eb,getSelectedIndices:yb,getSelectedRowIndex:xb,onSelection:K,emptyGridData:kb,subscribeEvents:O,unSubScribeEvents:P,getColumnInfo:zb,getSelection:ib,addEventListener:Fb,removeEventListener:Gb,setColumnInfo:lb,setAutoScroll:ob,setSelectionMode:jb,setDefaultSortColumn:Y,handleFlashing:qb,updateColumn:C,getColumnCollection:Ab,setFlashStatus:pb,setSelectionType:R,clearGridSelection:M,clearDataSelection:L,getColumnIndex:Eb,setAlarmDataSourceType:D,gridCleanup:Jb,getHitListColumnCollection:Cb,setHitListColumnCollection:Db,setColumnCollection:Bb,getMessageByNumber:bb,sortData:U,adaptScreenToWindowFactor:Ib,getAlarmDataSourceType:E,onCleanUp:Kb}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.FormatDuration=function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k=function(k){a=Math.floor(k),b=c=Math.floor(a/60),a%=60,d=e=Math.floor(c/60),c%=60,f=Math.floor(d/24),d>=24&&(d%=24),g=10>d?"0"+d:d,h=10>c?"0"+c:c,i=10>a?"0"+a:a,j=1e3*k%1e3,10>j?j="00"+j:100>j&&(j="0"+j)},l=function(e,l){var m;return k(l),0===f&&(m=e.indexOf("d"),e=e.substr(m+2),g=d,0===d&&(m=e.indexOf(":"),e=e.substr(m+1),h=c,0===b&&(m=e.indexOf(":"),e=e.substr(m+1),i=a,0===a&&(i=a)))),e.replace("d",f).replace("HH",g).replace("H",d).replace("mm",h).replace("ms",j).replace("m",b).replace("ss",i)},m=function(a,c){return k(c),-1===a.indexOf("d")&&(d=e),a.replace("d",f).replace("HH",g).replace("H",d).replace("mm",h).replace("ms",j).replace("m",b).replace("ss",i)};return{getAutomaticDurationFormat:l,getCustomDurationFormat:m}}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ControlType={Text:1,Int:2,SInt:3,WInt:4,Float:5,Bool:6,Color:7,Toggle:8,Collection:9,FloatPositive:10,ReadOnly:11,DateTime:12},PWC.HmiAC.SelectionType={None:0,SingleSelection:1,MultipleSelection:2},PWC.HmiAC.SelectionColorFor={None:0,Cell:1,Row:2,CellandRow:3},PWC.HmiAC.SelectionBorder={None:0,Cell:1,Row:2},PWC.HmiAC.HammerEvents={PAN:"pan",PAN_START:"panstart",PAN_END:"panend",TWO_FINGER_SINGLE_TAP:"twoFingerSingleTap",SINGLE_TAP:"singleTap",PINCH:"pinch"},PWC.HmiAC.WindowTitle={No:0,Narrow:1},PWC.HmiAC.TimeRangePropNames={TimeRange:"TimeRange",RangeType:"RangeType",StartTime:"StartTime",EndTime:"EndTime",RangeBase:"RangeBase",RangeFactor:"RangeFactor",MeasurementPoints:"MeasurementPoints"},PWC.HmiAC.SourceControlType={TrendControl:0,TableControl:1},PWC.HmiAC.QualityLowerLimit={Bad:0,Uncertain:64,InitialValue:76,Good:128},PWC.HmiAC.QualityCode={Bad:0,Uncertain:1,Good:2},PWC.HmiAC.TimeRangeBase={"500 ms":0,"1 second":1,"1 minute":2,"1 hour":3,"1 day":4},PWC.HmiAC.TimeRangeType={"Time range":0,"Start to end time":1,"Number of measurement points":2};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ColumnData=function(){"use strict";this.columnName=null,this.columnValue=null,this.style={forecolor:null,fill:null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.StatusbarPropId={Name:0,BackColor:1,ForeColor:2,StatusbarElements:3,UseBackColor:4,Visible:5,ShowToolTips:6,StatusbarAttribute:7,StatusbarElementSizeMsg:8},PWC.HmiAC.StatusbarElementPropId={AutoSize:0,Id:1,Icon:2,Index:3,Name:4,Text:5,ToolTipText:6,UserDefined:7,Visible:8,Width:9,Offset:10,Position:11,DefaultWidth:12},PWC.HmiAC.ToolbarPropId={Name:0,BackColor:1,FocusColor:2,FocusWidth:3,UseBackColor:4,Visible:5,ShowToolTips:6,ToolbarButtons:7,Alignment:8,UseHotKeys:9},PWC.HmiAC.ToolbarElementPropId={Active:0,Authorization:1,BeginGroup:2,Checked:3,Enabled:4,HotKey:5,Id:6,Icon:7,IconSize:8,Index:9,Name:10,Parent:11,ParentProperty:12,ShowToolTips:13,ToolTipText:14,UserDefined:15,Visible:16,Offset:17,Position:18},PWC.HmiAC.ToolBarAlignment={Top:0,Bottom:1,Left:2,Right:3};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.StatusBarPropertySet=function(a){this.StatusBarProp={Name:"Name",BackColor:a.getText("TBID_HmiWindowPB_Statusbar_Backgroundcolor"),ForeColor:a.getText("TBID_HmiWindowPB_Statusbar_Fontcolor"),StatusbarElements:a.getText("TBID_HmiWindowPB_Statusbar_StatusbarElements"),UseBackColor:a.getText("TBID_HmiWindowPB_Statusbar_Show"),Visible:a.getText("TBID_HmiWindowPB_Statusbar_Showstatusbar"),ShowToolTips:a.getText("TBID_HmiWindowPB_Statusbar_Tooltips"),StatusbarAttribute:a.getText("TBID_HmiWindowPB_Statusbar_StatusbarAttribute"),StatusbarElementSizeMsg:a.getText("TBID_HmiWindowPB_Statusbar_StatusbarElementSizeMsg")},this.StatusBarElementProp={AutoSize:a.getText("TBID_HmiWindowPB_Statusbar_Automatic"),Id:a.getText("TBID_HmiWindowPB_Statusbar_Objectid"),Icon:"Icon",Index:"Index",Name:a.getText("TBID_HmiWindowPB_Statusbar_Objectname"),Text:"Text",ToolTipText:"ToolTipText",UserDefined:"UserDefined",Visible:"Visible",Width:a.getText("TBID_HmiWindowPB_Statusbar_Widthinpixel"),Offset:"Offset",Position:"Position",DefaultWidth:"DefaultWidth"}},PWC.HmiAC.ToolBarPropertySet=function(a){this.ToolBarProp={Visible:"Visible",ShowToolTips:a.getText("TBID_HmiWindowPB_Toolbar_Tooltips"),UseHotKeys:a.getText("TBID_HmiWindowPB_Toolbar_Shortcuts"),Alignment:a.getText("TBID_HmiWindowPB_Toolbar_Alignment"),UseBackColor:a.getText("TBID_HmiWindowPB_Toolbar_Show"),BackColor:a.getText("TBID_HmiWindowPB_Toolbar_Backgroundcolor"),ToolbarKeyFunctions:a.getText("TBID_HmiWindowPB_Toolbar_Keyfunctions"),ToolbarGroup:a.getText("TBID_HmiWindowPB_Toolbar_ToolbarGroup"),ObjectId:a.getText("TBID_HmiWindowPB_Toolbar_ObjectId")},this.ToolBarElementProp={Name:a.getText("TBID_HmiWindowPB_Toolbar_Objectname"),Id:a.getText("TBID_HmiWindowPB_Toolbar_ObjectId"),Active:a.getText("TBID_HmiWindowPB_Toolbar_Active"),Index:"Index",Authorization:a.getText("TBID_HmiWindowPB_Toolbar_OperatorAuthontication"),UserDefined:"UserDefined",Visible:"Visible",ShowToolTips:"ShowToolTips",Checked:"Checked",HotKey:a.getText("TBID_HmiWindowPB_Toolbar_Shortcutkey"),ToolTipText:"ToolTipText",Enabled:"Enabled",Separator:a.getText("TBID_HmiWindowPB_Toolbar_Separator")}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PopulateStatusBarList=function(){var a=function(a,b,c,d){var e,f,g=PWC.HmiAC.StatusbarPropId,h=PWC.HmiAC.StatusbarElementPropId,i=c.StatusbarElements,j=[],k=PWC.Lib.Canvas.Converters,l=PWC.Lib.Config.Properties,m=l.getPropPart(c,"StatusBar","BackColor",k.enumConverter.Color),n=l.getPropPart(c,"StatusBar","ForeColor",k.enumConverter.Color),o=new PWC.HmiAC.StatusBarPropertySet(b),p=o.StatusBarProp,q=o.StatusBarElementProp,r=i.length,s=[],t=PWC.HmiAC.ControlType,u=PWC.HmiAC.CreateProperty;for(s.push(u.create(null,PWC.HmiAC.CommonTabNames.StatusBar,a,"complex")),s.push(u.create(a,p.Visible,g.Visible,t.Bool,c.Visible)),s.push(u.create(a,p.UseBackColor,g.UseBackColor,t.Bool,c.UseBackColor)),s.push(u.create(a,p.BackColor,g.BackColor,t.Color,m)),s.push(u.create(a,p.ShowToolTips,g.ShowToolTips,t.Bool,c.ShowToolTips)),s.push(u.create(a,p.ForeColor,g.ForeColor,t.Color,n)),s.push(u.create(a,p.StatusbarElements,g.StatusbarElements,t.ReadOnly,"Statusbar elements")),s.push(u.create(a,p.StatusbarAttribute,g.StatusbarAttribute,t.Text)),s.push(u.create(a,null,null,t.Text,p.StatusbarElementSizeMsg)),s.push(u.create(a,null,null,t.Text,p.StatusbarElements)),s.push(u.create(a,d)),f=0;r>f;f++)j.push(i[f].Name);for(f=0;r>f;f++)s.push(u.create(null,i[f].Name,a,"subcomplex")),s.push(u.create(a,q.Name,h.Name,t.Collection,j)),s.push(u.create(a,q.Width,h.Width,t.WInt,i[f].Width)),e="Date"===i[f].Name?70:"Time"===i[f].Name?75:4,s.push(u.create(a,q.Id,h.Id,t.Collection,i[f].ID)),s.push(u.create(a,q.AutoSize,h.AutoSize,t.Bool,i[f].AutoSize=i[f].AutoSize?!0:!1)),s.push(u.create(a,q.Index,h.Index,t.Int,i[f].Index)),s.push(u.create(a,q.ToolTipText,h.ToolTipText,t.Text,i[f].ToolTipText)),s.push(u.create(a,q.UserDefined,h.UserDefined,t.Bool,i[f].UserDefined)),s.push(u.create(a,q.Visible,h.Visible,t.Bool,i[f].Visible)),s.push(u.create(a,q.DefaultWidth,h.DefaultWidth,t.WInt,e));return o=null,s};return{getList:a}}(),PWC.HmiAC.PopulateToolBarList=function(){var a=function(a,b,c,d){var e,f,g=PWC.HmiAC.ToolbarPropId,h=PWC.HmiAC.ToolBarAlignment,i=PWC.HmiAC.ToolbarElementPropId,j=PWC.HmiAC.FunctionKeyCodes,k=c.ToolbarButtons,l=[],m=PWC.Lib.Canvas.Converters,n=PWC.Lib.Config.Properties,o=n.getPropPart(c,"ToolBar","BackColor",m.enumConverter.Color),p=new PWC.HmiAC.ToolBarPropertySet(b),q=p.ToolBarProp,r=p.ToolBarElementProp,s=k.length,t=[],u=PWC.HmiAC.ControlType,v=PWC.HmiAC.CreateProperty;for(t.push(v.create(null,PWC.HmiAC.CommonTabNames.ToolBar,a,"complex")),t.push(v.create(a,q.Visible,g.Visible,u.Bool,c.Visible)),t.push(v.create(a,q.ShowToolTips,g.ShowToolTips,u.Bool,c.ShowToolTips)),t.push(v.create(a,q.UseHotKeys,g.UseHotKeys,u.Bool,c.UseHotKeys)),t.push(v.create(a,q.Alignment,g.Alignment,u.Collection,Object.keys(h))),t.push(v.create(a,q.UseBackColor,g.UseBackColor,u.Bool,c.UseBackColor)),t.push(v.create(a,q.BackColor,g.BackColor,u.Color,o)),t.push(v.create(a,q.ToolbarKeyFunctions,null,u.Text,null)),t.push(v.create(a,q.ToolbarGroup,null,u.Text,null)),t.push(v.create(a,r.Name,i.Name,u.Collection,l)),t.push(v.create(a,d)),e=0;s>e;e++)l.push(k[e].Name);for(e=0;s>e;e++)f=j[k[e].HotKey],f||(f=String.fromCharCode(k[e].HotKey)),t.push(v.create(null,k[e].Name,a,"subcomplex")),t.push(v.create(a,r.Id,i.Id,u.Collection,k[e].ID)),t.push(v.create(a,r.Active,i.Active,u.Bool,k[e].Active)),t.push(v.create(a,r.Index,i.Index,u.Int,k[e].Index)),t.push(v.create(a,r.Authorization,i.Authorization,u.Bool,k[e].Authorization)),t.push(v.create(a,r.UserDefined,i.UserDefined,u.Bool,k[e].UserDefined)),t.push(v.create(a,r.Visible,i.Visible,u.Bool,k[e].Visible)),t.push(v.create(a,r.ShowToolTips,i.ShowToolTips,u.Bool,k[e].ShowToolTips)),t.push(v.create(a,r.Checked,i.Checked,u.Bool,k[e].Checked)),t.push(v.create(a,r.HotKey,i.HotKey,u.Text,f)),t.push(v.create(a,r.ToolTipText,i.ToolTipText,u.Text,k[e].ToolTipText)),t.push(v.create(a,r.Enabled,i.Enabled,u.Bool,k[e].Enabled)),t.push(v.create(a,r.Separator,i.BeginGroup,u.Bool,k[e].BeginGroup));return t};return{getList:a}}(),PWC.HmiAC.StatusBarAndToolBar=function(){var a,b=function(b){a=b},c=function(a,b,c){a.gfxWebLib.connection.sendPartPropertiesByName(a.rtoid,b,c,!0,!1)},d=function(b,d,e){var f,g,h,i,j,k,l,m,n,o={},p=!1,q={},r=b.length,s=PWC.HmiAC.Common.HelperUtil.hexStrToDecColor;for(d?(f=PWC.HmiAC.StatusbarPropId,m="Statusbar"):(f=PWC.HmiAC.ToolbarPropId,l=PWC.HmiAC.ToolBarAlignment,m="Toolbar"),k=Object.keys(f),n=0;r>n;n++)q=b[n],j=q.Id,isNaN(j)&&-1!==j.indexOf("-")?(g=j.split("-"),j=parseInt(g[1],10),h=parseInt(g[0],10),a(j,q.value,h)):(i=f.BackColor===j||d&&f.ForeColor===j||!d&&f.FocusColor===j?s(q.value):d||f.Alignment!==j?q.value:l[q.value],o[k[j]]=i,p=!0);p&&c(e,m,o)};return{updateProps:c,update:d,setUpdateFuntion:b}}(),PWC.HmiAC.UpdateStatusBarTab=function(){var a,b=PWC.HmiAC.StatusBarAndToolBar,c=function(c,d,e){var f=PWC.HmiAC.StatusbarElementPropId;switch(c){case f.Visible:b.updateProps(a,"Statusbar:StatusbarElements."+(e+1),{Visible:d});break;case f.AutoSize:b.updateProps(a,"Statusbar:StatusbarElements."+(e+1),{AutoSize:d});break;case f.Width:b.updateProps(a,"Statusbar:StatusbarElements."+(e+1),{Width:parseInt(d,10)})}},d=function(d,e,f){a=f,b.setUpdateFuntion(c),b.update(d,e,a)};return{update:d}}(),PWC.HmiAC.UpdateToolBarTab=function(){var a,b=PWC.HmiAC.StatusBarAndToolBar,c=function(c,d,e){var f=PWC.HmiAC.ToolbarElementPropId;switch(c){case f.Visible:b.updateProps(a,"Toolbar:ToolbarButtons."+(e+1),{Visible:d});break;case f.Active:b.updateProps(a,"Toolbar:ToolbarButtons."+(e+1),{Active:d});break;case f.BeginGroup:b.updateProps(a,"Toolbar:ToolbarButtons."+(e+1),{BeginGroup:d});break;case f.HotKey:}},d=function(d,e,f){a=f,b.setUpdateFuntion(c),b.update(d,e,a)};return{update:d}}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.Common=PWC.HmiAC.Common||{},PWC.HmiAC.Common.HelperUtil=function(){"use strict";var a,b,c,d="",e="",f=function(a,b){var c=a.length+b,d=a;return c>a.length?d=a+new Array(Math.max(b+1,0)).join(0):c<a.length&&(d=0>c?"0."+new Array(Math.max(1-c,0)).join(0)+a:a.substring(0,c)+"."+a.substring(c)),d};return function(){var a=document.createElementNS("http://www.w3.org/2000/svg","svg"),b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttribute("id","testSafari"),a.appendChild(b),a.getElementById("testSafari")||(c=function(a,b,c){var d,e=a.getElementsByTagName(b),f=e.length;for(d=0;f>d;d++)if(c===e[d].id)return e[d]})}(),{hexStrToDecColor:function(a){for(var b=a.substring(1),c=b.length,d="";c>0;)d+=b.slice(c-2,c),c-=2;return parseInt(d,16)},setMaxDecimalandPowerLength:function(c,f){for(a=c,d="",e="",b=f;c>0;)d+="0",c--;for(;f>0;)e+="0",f--},getMaxDecimalZeroes:function(){return d},getExponentNotation:function(c,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u=0;if(h=h>a?a:h,k="+",j="",c.indexOf("e")>-1&&(p=c.split("e"),q=+p[1],r=p[0],c.indexOf(".")>-1?(r=r.split("."),s=r[0],t=r[1],s=Number(s).toString(),"0"===s?s="":u=s.length,c=f(s+t,q-t.length)):(s=Number(r).toString(),c=f(s,q))),i=c.replace(".",""),0===Number(c))l="0",n=e;else{if(0>c?(i=i.slice(1),j="-",n=c.split(".")[0].length-2):n=c.split(".")[0].length-1,"0"===i[0])for(;"0"===i[0];)i=i.slice(1),n-=1;l=i[0],0>n&&(n=Math.abs(n),k="-")}return m=i.slice(1),m=m.slice(0,m.length>a?a:m.length),g||(m=(m+d).slice(0,h+1)),m.length>0?g?o=0===+m?l:l+"."+m:(o=Number(l+"."+m).toFixed(h),"10"===o.split(".")[0]&&("-"===k?n-=1:n+=1,o=1..toFixed(h))):o=l,n=e.slice(0,b-n.toString().length)+n.toString(),j+o+"e"+k+n},getDecimalPrecision:function(b,c){var e,f,g,h,i,j=parseInt(b.decimalPrecision,10),k=void 0===c?"":c.toString();return j=j>a?a:j,h=k.split("."),e=h[0],e=void 0===e?"":e,g=h[1],g=void 0===g?"":g,g=g.length>a?g.slice(0,a):g,f=e.length,c=e+(""===g?"":"."+g),b.autoDecimalPrecision||(0===j?c=Number(k).toFixed(0):(i=j-g.length,i>0?(g+=d.slice(0,i),c=e+"."+g):0>=i&&(c=Number(k).toFixed(j)))),b.exponentialFormat&&(c=this.getExponentNotation(k,b.autoDecimalPrecision,j)),c},getQualityOfValue:function(a){var b,c=PWC.HmiAC.QualityLowerLimit;return b=a>=c.Good?PWC.HmiAC.QualityCode.Good:PWC.HmiAC.QualityCode.Uncertain},updateConnectionState:function(a,b,c){var d,e,f,g,h=c.gfxWebLib.textbib,i=Object.keys(b);if(g=i.length,a>0)if(0===g)d=5,e=h.getText("TBID_StatusBar_ConState_AllConnected");else if(a===g)for(d=6,e=h.getText("TBID_StatusBar_ConState_AllDisconnected")+": ",f=0;g>f;f++)e+="\n"+i[f]+': "'+b[i[f]]+'" ';else for(d=9,e=h.getText("TBID_StatusBar_ConState_SomeDisconnected")+": ",f=0;g>f;f++)e+="\n"+i[f]+': "'+b[i[f]]+'" ';else d=10,e=h.getText("TBID_StatusBar_ConState_NoConnectionSetUp");PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.tooltip(c,PWC.HmiAC.StatusBarButtons.ConnectionState,e),PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.icon(c,PWC.HmiAC.StatusBarButtons.ConnectionState,d)},getElementByIDSafariHack:function(a,b,d){return!a.parentNode&&c?c(a,b,d):void 0}}}(),PWC.HmiAC.Common.SortClass=function(){var a=this,b=!1,c=null;this.messageBlock=[],this.sortOrder=[],this.setDefaultSortColumn=function(a){c=a},this.setDefaultSortOrder=function(a){b=a},this.mySort=function(c,d){for(var e=a.messageBlock.length,f=0;e>f;f++){if(!c[a.messageBlock[f]]&&d[a.messageBlock[f]])return 1===a.sortOrder[f]?-1:1;if(c[a.messageBlock[f]]&&!d[a.messageBlock[f]])return 1===a.sortOrder[f]?1:-1;if(c[a.messageBlock[f]]||d[a.messageBlock[f]]){if(isNaN(c[a.messageBlock[f]].value)&&isNaN(d[a.messageBlock[f]].value)){if(c[a.messageBlock[f]].value===d[a.messageBlock[f]].value)continue;return 1===a.sortOrder[f]?c[a.messageBlock[f]].value.localeCompare(d[a.messageBlock[f]].value):d[a.messageBlock[f]].value.localeCompare(c[a.messageBlock[f]].value)}if(c[a.messageBlock[f]].value===d[a.messageBlock[f]].value)continue;return 1===a.sortOrder[f]?c[a.messageBlock[f]].value-d[a.messageBlock[f]].value:d[a.messageBlock[f]].value-c[a.messageBlock[f]].value}}return b?a.defaultSort(c,d):void 0},this.defaultSort=function(a,d){return b?a[c].value!==d[c].value?a[c].value-d[c].value:0:d[c].value!==a[c].value?d[c].value-a[c].value:0}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ColumnHeaderAlignment={Left:0,Center:1,Right:2,JustifyToTableContent:3},PWC.HmiAC.ParameterPropId={ColumnTitles:0,RowTitles:1,ColumnTitleAlignment:2,RowTitleAlignment:3,ShortenTitleContent:4,ShortenCellContent:5,AutoCompleteColumns:6,AutoCompleteRows:7,ColumnResize:8,ShowSortIndex:9,ShowSortIcon:10,SortMode:11,SortSequence:12,ShowSortButton:13,CellSpaceTop:14,CellSpaceRight:15,CellSpaceBottom:16,CellSpaceLeft:17},PWC.HmiAC.EffectsPropId={TableColor:0,TableForeColor:1,TableColor2:2,TableForeColor2:3,BackColor:4,TitleColor:5,TitleForeColor:6,TitleLightShadowColor:7,TitleDarkShadowColor:8,SelectedTitleColor:9,SelectedTitleForeColor:10,TableGridLineColor:11,TitleGridLineColor:12,GridLineWidth:13,BorderColor:14,BorderWidth:15,WindowSeparatorColor:16,WindowSeparatorWeight:17,UseTableColor2:18,Title3D:19,UseSelectedTitleColor:20,HorizontalGridLines:21,VerticalGridLines:22},PWC.HmiAC.FontPropId={FontName:0,FontSize:1,FontBold:2,FontUnderline:3,FontItalic:4,FontStrikeOut:5,FontArray:6,FontProperties:7,Effects:8,SampleText:9},PWC.HmiAC.Fonts={Font:"Font",StatusBarFont:"StatusBarFont",TitleFont:"TitleFont"},PWC.HmiAC.SelectionColorFor={None:0,Cell:1,Row:2,CellAndRow:3},PWC.HmiAC.SelectionBorder={None:0,Cell:1,Row:2},PWC.HmiAC.SelectionPropId={SelectionType:0,SelectionRect:1,SelectionRectColor:2,SelectionRectWidth:3,AutoSelectionRectColor:4,SelectionColoring:5,AutoSelectionColors:6,SelectedCellForeColor:7,SelectedCellColor:8,SelectedRowForeColor:9,SelectedRowColor:10},PWC.HmiAC.AlarmSortByColumnHeader={None:0,"With click":1,"With double-click":2},PWC.HmiAC.AlarmMouseClickSort={"Up/down/none":0,"Up/down":1},PWC.HmiAC.GeneralCommonPropId={TitleBarStyle:0,TitleBarText:1,WindowMovingEnabled:2,WindowCloseEnabled:3,WindowSizingEnabled:4,Style:5,HorizontalScrollbarMode:6,VerticalScrollbarMode:7,CurrentPrintJob:8,TimeBase:9,ScrollbarMode:99},PWC.HmiAC.WindowStyle={"Project setting":0,Classic:1,Standard:2,"Basic Process Control":3},PWC.HmiAC.GeneralUpdateType={HmiObjectChange:0,GridPropChange:1,TimeBaseChange:2},PWC.HmiAC.CommonTabNames={Effects:"Effects",Selection:"Selection",StatusBar:"StatusBar",ToolBar:"ToolBar",Font:"Font",Parameter:"Parameter"};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ParameterPropertySet=function(a){this.ParameterProperties={ColumnHeader:a.getText("TBID_AlgCtrl_Parameter_ColumnHeader"),RowHeader:a.getText("TBID_AlgCtrl_Parameter_RowHeader"),ColumnTitleAlignment:a.getText("TBID_AlgCtrl_Parameter_ColumnTitleAlignment"),RowTitleAlignment:a.getText("TBID_AlgCtrl_Parameter_RowTitleAlignment"),ShortenTitleContent:a.getText("TBID_AlgCtrl_Parameter_ShortenTitleContent"),ShortenCellContent:a.getText("TBID_AlgCtrl_Parameter_ShortenCellContent"),AutoCompleteColumns:a.getText("TBID_AlgCtrl_Parameter_AutoCompleteColumns"),AutoCompleteRows:a.getText("TBID_AlgCtrl_Parameter_AutoCompleteRows"),ColumnWidth:a.getText("TBID_AlgCtrl_Parameter_ColumnWidth"),ShowSortIndex:a.getText("TBID_AlgCtrl_Parameter_ShowSortIndex"),ShowSortIcon:a.getText("TBID_AlgCtrl_Parameter_ShowSortSymbol"),ShowSortButton:a.getText("TBID_AlgCtrl_Parameter_UseSortKey"),SortByColumnHeader:a.getText("TBID_AlgCtrl_Parameter_SortByColumnHeader"),MouseClickSort:a.getText("TBID_AlgCtrl_Parameter_MouseClickSort"),LableColumnHeader:a.getText("TBID_AlgCtrl_Parameter_Lable_ColumnHeader"),LableShow:a.getText("TBID_AlgCtrl_Parameter_Lable_Show"),LableShortenContents:a.getText("TBID_AlgCtrl_Parameter_Lable_ShortenContents"),LableChangeWidth:a.getText("TBID_AlgCtrl_Parameter_Lable_ChangeWidth"),LableAlignment:a.getText("TBID_AlgCtrl_Parameter_Lable_Alignment"),LableRowLable:a.getText("TBID_AlgCtrl_Parameter_Lable_RowLable"),LableSort:a.getText("TBID_AlgCtrl_Parameter_Lable_Sort"),LableSortByColumnHeader:a.getText("TBID_AlgCtrl_Parameter_Lable_SortByColumnHeader"),LableMouseClickSort:a.getText("TBID_AlgCtrl_Parameter_Lable_MouseClickSort"),LableShowSortIcon:a.getText("TBID_AlgCtrl_Parameter_Lable_ShowSortSymbol"),LableShowSortIndex:a.getText("TBID_AlgCtrl_Parameter_Lable_ShowSortIndex"),LableUseSortKey:a.getText("TBID_AlgCtrl_Parameter_Lable_UseSortKey"),LableTableContent:a.getText("TBID_AlgCtrl_Parameter_Lable_TableContent"),LableShowEmptyColumns:a.getText("TBID_AlgCtrl_Parameter_Lable_ShowEmptyColumns"),LableShowEmptyRows:a.getText("TBID_AlgCtrl_Parameter_Lable_ShowEmptyRows")}
},PWC.HmiAC.FontPropertySet=function(a){this.FontProp={FontFor:a.getText("TBID_AlgCtrl_Font_FontFor"),FontName:a.getText("TBID_AlgCtrl_Font_FontName"),FontArray:a.getText("TBID_AlgCtrl_Font_FontArray"),FontSize:a.getText("TBID_AlgCtrl_Font_FontSize"),FontBold:a.getText("TBID_AlgCtrl_Font_FontBold"),FontItalic:a.getText("TBID_AlgCtrl_Font_FontItalic"),FontStrikeOut:a.getText("TBID_AlgCtrl_Font_FontStrikeOut"),FontUnderline:a.getText("TBID_AlgCtrl_Font_FontUnderline"),LableProperties:a.getText("TBID_AlgCtrl_Font_Lable_Properties"),LableFont:a.getText("TBID_AlgCtrl_Font_Lable_Font"),LableFontSize:a.getText("TBID_AlgCtrl_Font_Lable_FontSize"),LableEffects:a.getText("TBID_AlgCtrl_Font_Lable_Effects"),LableBold:a.getText("TBID_AlgCtrl_Font_Lable_Bold"),LableItalic:a.getText("TBID_AlgCtrl_Font_Lable_Italic"),LableUnderline:a.getText("TBID_AlgCtrl_Font_Lable_Underline"),LableStrikethrough:a.getText("TBID_AlgCtrl_Font_Lable_Strikethrough"),LableSampleText:a.getText("TBID_AlgCtrl_Font_Lable_SampleText")}},PWC.HmiAC.EffectsPropertySet=function(a){this.Effects={RowColorOneBackground:a.getText("TBID_AlgCtrl_Effects_RowColorOneBackground"),RowColorOneFont:a.getText("TBID_AlgCtrl_Effects_RowColorOneFont"),RowColorTwoBackground:a.getText("TBID_AlgCtrl_Effects_RowColorTwoBackground"),RowColorTwoFont:a.getText("TBID_AlgCtrl_Effects_RowColorTwoFont"),TableBackgroundColor:a.getText("TBID_AlgCtrl_Effects_TableBackgroundColor"),TitleBackground:a.getText("TBID_AlgCtrl_Effects_TitleBackground"),TitleFont:a.getText("TBID_AlgCtrl_Effects_TitleFont"),TitleLightShadowColor:a.getText("TBID_AlgCtrl_Effects_TitleBorderShadeLight"),TitleDarkShadowColor:a.getText("TBID_AlgCtrl_Effects_TitleShadeDark"),TitleSelectionBackground:a.getText("TBID_AlgCtrl_Effects_TitleSelectionBackground"),TitleSelectionFont:a.getText("TBID_AlgCtrl_Effects_TitleSelectionFont"),ContentSeparatorColor:a.getText("TBID_AlgCtrl_Effects_ContentSeparatorColor"),TitleSeparatorColor:a.getText("TBID_AlgCtrl_Effects_TitleSeparatorColor"),SeparatorWeight:a.getText("TBID_AlgCtrl_Effects_SeparatorWeight"),BorderColor:a.getText("TBID_AlgCtrl_Effects_GeneralBorderColor"),BorderWidth:a.getText("TBID_AlgCtrl_Effects_GeneralBorderWeight"),WindowSeparatorColor:a.getText("TBID_AlgCtrl_Effects_WindowSeparatorColor"),WindowSeparatorWeight:a.getText("TBID_AlgCtrl_Effects_WindowSeparatorWeight"),UseRowColorTwo:a.getText("TBID_AlgCtrl_Effects_UseRowColorTwo"),UseShadingColor:a.getText("TBID_AlgCtrl_Effects_UseShadingColor"),UseSelectedTitleColor:a.getText("TBID_AlgCtrl_Effects_UseSelectedTitleColor"),SeparatorHorizontal:a.getText("TBID_AlgCtrl_Effects_SeparatorHorizontal"),SeparatorVertical:a.getText("TBID_AlgCtrl_Effects_SeparatorVertical"),LableTableContent:a.getText("TBID_AlgCtrl_EffectsLabel_TableContent"),LableRowColor1:a.getText("TBID_AlgCtrl_EffectsLabel_RowColor1"),LableBackground:a.getText("TBID_AlgCtrl_EffectsLabel_Background"),LableFont:a.getText("TBID_AlgCtrl_EffectsLabel_Font"),LableRowColor2:a.getText("TBID_AlgCtrl_EffectsLabel_RowColor2"),LableColor:a.getText("TBID_AlgCtrl_EffectsLabel_Color"),LableSeperatorLines:a.getText("TBID_AlgCtrl_EffectsLabel_SeperatorLines"),LableColorOfSeperatorLine:a.getText("TBID_AlgCtrl_EffectsLabel_ColorOfSeperatorLine"),LableContents:a.getText("TBID_AlgCtrl_EffectsLabel_Contents"),LableTitle:a.getText("TBID_AlgCtrl_EffectsLabel_Title"),LableWeight:a.getText("TBID_AlgCtrl_EffectsLabel_Weight"),LableHorizontal:a.getText("TBID_AlgCtrl_EffectsLabel_Horizontal"),LableVertical:a.getText("TBID_AlgCtrl_EffectsLabel_Vertical"),LableTableTitle:a.getText("TBID_AlgCtrl_EffectsLabel_TableTitle"),LableFontColorOfTheTitle:a.getText("TBID_AlgCtrl_EffectsLabel_FontColorOfTheTitle"),LableShadingColor:a.getText("TBID_AlgCtrl_EffectsLabel_ShadingColor"),LableLight:a.getText("TBID_AlgCtrl_EffectsLabel_Light"),LableDark:a.getText("TBID_AlgCtrl_EffectsLabel_Dark"),LableSelectionColor:a.getText("TBID_AlgCtrl_EffectsLabel_SelectionColor"),LableGeneral:a.getText("TBID_AlgCtrl_EffectsLabel_General"),LableBorder:a.getText("TBID_AlgCtrl_EffectsLabel_Border"),LableWindowSeperatorLines:a.getText("TBID_AlgCtrl_EffectsLabel_WindowSeperatorLines")}},PWC.HmiAC.SelectionPropertySet=function(a){this.SelectionProps={SelectableRows:a.getText("TBID_AlgCtrl_Selection_SelectableRows"),SelectionBorder:a.getText("TBID_AlgCtrl_Selection_SelectionBorder"),SelectionBorderColor:a.getText("TBID_AlgCtrl_Selection_SelectionBorderColor"),SelectionBorderWidth:a.getText("TBID_AlgCtrl_Selection_SelectionBorderWidth"),SelectionBorderAutoColor:a.getText("TBID_AlgCtrl_Selection_SelectionBorderAutoColor"),SelectionColorFor:a.getText("TBID_AlgCtrl_Selection_SelectionColorFor"),SelectionAutoColor:a.getText("TBID_AlgCtrl_Selection_SelectionAutoColor"),SelectedCellForeColor:a.getText("TBID_AlgCtrl_Selection_SelectedCellForeColor"),SelectedBackground:a.getText("TBID_AlgCtrl_Selection_SelectedBackground"),SelectedRowForeColor:a.getText("TBID_AlgCtrl_Selection_SelectedRowForeColor"),SelectedRowBackgroundColor:a.getText("TBID_AlgCtrl_Selection_SelectedRowBackgroundColor"),LableSelection:a.getText("TBID_AlgCtrl_Selection_Label_Selection"),LableSelectableRows:a.getText("TBID_AlgCtrl_Selection_Label_SelectableRows"),LableSelectionBorder:a.getText("TBID_AlgCtrl_Selection_Label_SelectionBorder"),LableAutomaticColorAssignment:a.getText("TBID_AlgCtrl_Selection_Label_AutomaticColorAssignment"),LableColor:a.getText("TBID_AlgCtrl_Selection_Label_Color"),LableWeight:a.getText("TBID_AlgCtrl_Selection_Label_Weight"),LableSelectionColors:a.getText("TBID_AlgCtrl_Selection_Label_SelectionColors"),LableSelectionColorsFor:a.getText("TBID_AlgCtrl_Selection_Label_SelectionColorsFor"),LableSelectionCell:a.getText("TBID_AlgCtrl_Selection_Label_SelectionCell"),LableSelectionRow:a.getText("TBID_AlgCtrl_Selection_Label_SelectionRow"),LableBackground:a.getText("TBID_AlgCtrl_Selection_Label_Background"),LableFont:a.getText("TBID_AlgCtrl_Selection_Label_Font")}},PWC.HmiAC.GeneralCommonPropertySet=function(a){this.GeneralCommonProps={WindowTitle:a.getText("TBID_AlgCtrl_General_WindowTitle"),Text:a.getText("TBID_AlgCtrl_General_Text"),Movable:a.getText("TBID_AlgCtrl_General_Movable"),Closable:a.getText("TBID_AlgCtrl_General_Closable"),Sizable:a.getText("TBID_AlgCtrl_General_Sizable"),HorizontalScrollbarMode:a.getText("TBID_AlgCtrl_General_ColumnScrollbar"),VerticalScrollbarMode:a.getText("TBID_AlgCtrl_General_RowScrollbar"),TimeBase:a.getText("TBID_AlgCtrl_General_TimeBase"),Style:a.getText("TBID_HmiWindowPB_General_Style"),CurrentPrintJob:a.getText("TBID_HmiWindowPB_General_PrintJob"),LableWindow:a.getText("TBID_AlgCtrl_General_Lable_Window"),LableWindowTitle:a.getText("TBID_AlgCtrl_General_Lable_WindowTitle"),LableText:a.getText("TBID_AlgCtrl_General_Lable_Text"),LableMovable:a.getText("TBID_AlgCtrl_General_Lable_Movable"),LableClosable:a.getText("TBID_AlgCtrl_General_Lable_Closable"),LableSizable:a.getText("TBID_AlgCtrl_General_Lable_Sizable"),LableStyle:a.getText("TBID_AlgCtrl_General_Lable_Style"),LableRowScrollbar:a.getText("TBID_AlgCtrl_General_Lable_RowScrollbar"),LableColumnScrollbar:a.getText("TBID_AlgCtrl_General_Lable_ColumnScrollbar"),LablePrintJob:a.getText("TBID_AlgCtrl_General_Lable_PrintJob"),LableTimeBase:a.getText("TBID_AlgCtrl_General_Lable_TimeBase"),ScrollbarMode:a.getText("TBID_TrendPB_General_Scrollbar")}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.CreateProperty=function(){var a,b,c,d=function(d,e,f,h,i){return void 0===b&&(b=g("parentId name pId value controlType")),void 0===c&&(c=g("name pId value type")),d?(a&&(i=a.get(e,d)),new b(d,e,f,i,h)):new c(e,f,i,h)},e=function(b){a=new b},f=function(){a=null},g=function(a){function b(){for(c=0;e>c;c++)this[d[c]]=arguments[c]}var c,d=a.split(" "),e=d.length;return b};return{create:d,setContext:e,cleanUp:f}}(),PWC.HmiAC.PopulateParameterList=function(){var a,b,c=function(){var c=function(a){return d(a)},d=function(c){var d,e,f=[],g=b.ParameterProperties;switch(c){case g.ColumnHeader:d=a.columnTitles;break;case g.RowHeader:d=a.rowTitles;break;case g.AutoCompleteColumns:d=a.autoCompleteColumns;break;case g.AutoCompleteRows:d=a.autoCompleteRows;break;case g.ShortenTitleContent:d=a.shortenTitleContent;break;case g.ShortenCellContent:d=a.shortenCellContent;break;case g.ColumnTitleAlignment:for(e in PWC.HmiAC.ColumnHeaderAlignment)f.push(e);d=f;break;case g.RowTitleAlignment:for(e in PWC.HmiAC.DefaultAlignment)f.push(e);d=f;break;case g.ColumnWidth:d=a.columnResize;break;case g.ShowSortIndex:d=a.showSortIndex;break;case g.ShowSortIcon:d=a.showSortIcon;break;case g.SortByColumnHeader:d=Object.keys(PWC.HmiAC.AlarmSortByColumnHeader);break;case g.MouseClickSort:d=Object.keys(PWC.HmiAC.AlarmMouseClickSort);break;case g.ShowSortButton:d=a.useSortKey}return d};return{get:c}},d=function(d,e,f,g){var h,i=PWC.HmiAC.ParameterPropId,j=PWC.HmiAC.ControlType,k=PWC.HmiAC.CreateProperty,l=[];return a=e,k.setContext(c),b=new PWC.HmiAC.ParameterPropertySet(f),h=b.ParameterProperties,l.push(k.create(null,PWC.HmiAC.CommonTabNames.Parameter,d,"complex")),l.push(k.create(d,h.ColumnHeader,i.ColumnTitles,j.Bool)),l.push(k.create(d,h.RowHeader,i.RowTitles,j.Bool)),l.push(k.create(d,h.ColumnTitleAlignment,i.ColumnTitleAlignment,j.Collection)),l.push(k.create(d,h.RowTitleAlignment,i.RowTitleAlignment,j.Collection)),l.push(k.create(d,h.ShortenTitleContent,i.ShortenTitleContent,j.Bool)),l.push(k.create(d,h.ShortenCellContent,i.ShortenCellContent,j.Bool)),l.push(k.create(d,h.AutoCompleteColumns,i.AutoCompleteColumns,j.Bool)),l.push(k.create(d,h.AutoCompleteRows,i.AutoCompleteRows,j.Bool)),l.push(k.create(d,h.LableColumnHeader)),l.push(k.create(d,h.LableShow)),l.push(k.create(d,h.LableShortenContents)),l.push(k.create(d,h.LableChangeWidth)),l.push(k.create(d,h.LableAlignment)),l.push(k.create(d,h.LableRowLable)),l.push(k.create(d,h.LableSort)),l.push(k.create(d,h.LableSortByColumnHeader)),l.push(k.create(d,h.LableMouseClickSort)),l.push(k.create(d,h.LableShowSortIcon)),l.push(k.create(d,h.LableShowSortIndex)),l.push(k.create(d,h.LableUseSortKey)),l.push(k.create(d,h.LableTableContent)),l.push(k.create(d,h.LableShowEmptyColumns)),l.push(k.create(d,h.LableShowEmptyRows)),l.push(k.create(d,h.ColumnWidth,i.ColumnResize,j.Bool)),l.push(k.create(d,h.ShowSortIndex,i.ShowSortIndex,j.Bool)),l.push(k.create(d,h.ShowSortIcon,i.ShowSortIcon,j.Bool)),l.push(k.create(d,h.SortByColumnHeader,i.SortMode,j.Collection)),l.push(k.create(d,h.MouseClickSort,i.SortSequence,j.Collection)),l.push(k.create(d,h.ShowSortButton,i.ShowSortButton,j.Bool)),l.push(k.create(d,g)),b=null,k.cleanUp(),l};return{getList:d}}(),PWC.HmiAC.UpdateParameterTab=function(){var a=function(a,b,c,d,e,f){var g,h=PWC.HmiAC.ColumnHeaderAlignment,i=PWC.HmiAC.ParameterPropId,j=Object.keys(i),k=PWC.HmiAC.AlarmSortByColumnHeader,l=PWC.HmiAC.AlarmMouseClickSort,m=PWC.Lib.Config.Properties,n=!0;switch(b){case i.CellSpaceTop:d.cellSpaceTop=c;break;case i.CellSpaceRight:d.cellSpaceRight=c;break;case i.CellSpaceBottom:d.cellSpaceBottom=c;break;case i.CellSpaceLeft:d.cellSpaceLeft=c;break;case i.ShortenCellContent:e&&(c=Number(c)),d.shortenCellContent=c;break;case i.ShortenTitleContent:e&&(c=Number(c)),d.shortenTitleContent=c;break;case i.RowTitleAlignment:e&&(c=h[c]),d.rowTitleAlignment=c;break;case i.ColumnTitleAlignment:e&&(c=h[c]),d.columnTitleAlignment=c;break;case i.RowTitles:e&&(c=Number(c)),d.rowTitles=c;break;case i.ColumnTitles:e&&(c=Number(c)),d.columnTitles=c;break;case i.AutoCompleteColumns:e&&(c=Number(c)),d.autoCompleteColumns=c;break;case i.AutoCompleteRows:e&&(c=Number(c)),d.autoCompleteRows=c;break;case i.ColumnResize:e&&(c=Number(c)),d.columnResize=c;break;case i.ShowSortIndex:e&&(c=Number(c)),d.showSortIndex=c;break;case i.ShowSortIcon:e&&(c=Number(c)),d.showSortIcon=c;break;case i.SortMode:e&&(c=k[c]),d.sortMode=c;break;case i.SortSequence:e&&(c=l[c]),d.sortSequence=c;break;case i.ShowSortButton:e&&(c=Number(c)),d.useSortKey=c;break;default:n=!1}return void 0!==(g=j[b])&&(m.setProp(a,g,c),e&&(f[g]=c)),n};return{update:a}}(),PWC.HmiAC.PopulateFontList=function(){var a,b,c,d,e=function(){var c=function(a,b){return e(a,b)},e=function(c,e){var f,g,h={},i=[],j=a.props.table,k=b.FontProp;switch(e){case d.StatusBarFont:h=a.props.Statusbar.Font;break;case d.TitleFont:h.FontSize=j.titleFontSize,h.FontUnderline=j.titleFontUnderline,h.FontStrikeOut=j.titleFontStrikeOut,h.FontBold=j.titleFontBold,h.FontItalic=j.titleFontItalic;break;default:h.FontSize=j.tableFontSize,h.FontUnderline=j.tableFontUnderline,h.FontStrikeOut=j.tableFontStrikeOut,h.FontBold=j.tableFontBold,h.FontItalic=j.tableFontItalic}switch(c){case k.FontFor:for(g in PWC.HmiAC.Fonts)i.push(g);f=i;break;case k.FontName:f=Object.keys(PWC.HmiAC.FontType);break;case k.FontSize:f=h.FontSize;break;case k.FontArray:f=Object.keys(PWC.HmiAC.FontSize);break;case k.FontBold:f=h.FontBold;break;case k.FontItalic:f=h.FontItalic;break;case k.FontStrikeOut:f=h.FontStrikeOut;break;case k.FontUnderline:f=h.FontUnderline}return f};return{get:c}},f=function(a,b){var d=PWC.HmiAC.FontPropId,e=PWC.HmiAC.ControlType,f=[];return f.push(c.create(a,b.FontFor,d.FontFor,e.Collection)),f.push(c.create(a,b.FontName,d.FontName,e.Collection)),f.push(c.create(a,b.FontArray,d.FontArray,e.Collection)),f.push(c.create(a,b.FontSize,d.FontSize,e.WInt)),f.push(c.create(a,b.FontBold,d.FontBold,e.Bool)),f.push(c.create(a,b.FontItalic,d.FontItalic,e.Bool)),f.push(c.create(a,b.FontStrikeOut,d.FontStrikeOut,e.Bool)),f.push(c.create(a,b.FontUnderline,d.FontUnderline,e.Bool)),f},g=function(g,h,i){var j,k=PWC.HmiAC.Fonts,l=g.Font,m=g.StatusBarFont,n=g.TitleFont,o=[];return a=h,d=g,c=PWC.HmiAC.CreateProperty,c.setContext(e),b=new PWC.HmiAC.FontPropertySet(a.gfxWebLib.textbib),j=b.FontProp,o.push(c.create(null,PWC.HmiAC.CommonTabNames.Font,l,"complex")),o.push(c.create(null,k.Font,l,"subcomplex")),o=o.concat(f(l,j)),o.push(c.create(null,k.StatusBarFont,m,"subcomplex")),o=o.concat(f(m,j)),o.push(c.create(null,k.TitleFont,n,"subcomplex")),o=o.concat(f(n,j)),o.push(c.create(null,null,null,"subcomplex")),o.push(c.create(n,j.LableProperties)),o.push(c.create(n,j.LableFont)),o.push(c.create(n,j.LableFontSize)),o.push(c.create(n,j.LableEffects)),o.push(c.create(n,j.LableBold)),o.push(c.create(n,j.LableItalic)),o.push(c.create(n,j.LableUnderline)),o.push(c.create(n,j.LableStrikethrough)),o.push(c.create(n,j.LableSampleText)),o.push(c.create(g,i)),b=null,c.cleanUp(),o};return{getList:g}}(),PWC.HmiAC.UpdateFontTab=function(){var a=PWC.Lib.Config.Properties,b=function(b,c,d){a.setPropPart(b,c,d)},c=function(c,d,e,f,g,h,i,j){var k,l=PWC.HmiAC.FontPropId,m=Object.keys(l),n=!0,o=a.getPropPart(g,"Font",PWC.HmiAC.TableControl.FontProps.FontDescription);switch(e=parseInt(e,10),d){case h.StatusBarFont:switch(e){case l.FontName:break;case l.FontSize:break;case l.FontBold:break;case l.FontItalic:break;case l.FontUnderline:break;case l.FontStrikeOut:break;default:n=!1}break;case h.TitleFont:switch(e){case l.FontName:i.titleFontName=f;break;case l.FontSize:f=parseInt(f,10),0!==f&&(1===f&&(f=2),i.titleFontSize=f);break;case l.FontBold:f=Number(f),i.titleFontBold=f,0!==o&&(f=f?PWC.HmiAC.TableControl.FontDescriptionProps.FONT_BOLD_WEIGHT:PWC.HmiAC.TableControl.FontDescriptionProps.FONT_NOT_BOLD_WEIGHT);break;case l.FontItalic:f=Number(f),i.titleFontItalic=f;break;case l.FontUnderline:f=Number(f),i.titleFontUnderline=f;break;case l.FontStrikeOut:f=Number(f),i.titleFontStrikeOut=f;break;default:n=!1}n&&(0===o?k=m[e]:(k=PWC.HmiAC.TableControl.FontProps.FontDescription,o=o.split(","),o[PWC.HmiAC.TableControl.FontDescriptionProps[m[e]]]=f,f=o.join(",")),b(g,k,f)),j&&c.connection.sendPartPropertyByName(c.rtoid,"TitleFont",m[e],f,!1,!1);break;default:switch(e){case l.FontName:i.tableFontName=f;break;case l.FontSize:f=parseInt(f,10),0!==f&&(1===f&&(f=2),i.tableFontSize=f);break;case l.FontBold:f=Number(f),i.tableFontBold=f,0!==o&&(f=f?PWC.HmiAC.TableControl.FontDescriptionProps.FONT_BOLD_WEIGHT:PWC.HmiAC.TableControl.FontDescriptionProps.FONT_NOT_BOLD_WEIGHT);break;case l.FontItalic:f=Number(f),i.tableFontItalic=f;break;case l.FontUnderline:f=Number(f),i.tableFontUnderline=f;break;case l.FontStrikeOut:f=Number(f),i.tableFontStrikeOut=f;break;default:n=!1}n&&(0===o?k=m[e]:(k=PWC.HmiAC.TableControl.FontProps.FontDescription,o=o.split(","),o[PWC.HmiAC.TableControl.FontDescriptionProps[m[e]]]=f,f=o.join(",")),b(g,k,f)),j&&c.connection.sendPartPropertyByName(c.rtoid,"TableFont",m[e],f,!1,!1)}return n};return{update:c}}(),PWC.HmiAC.PopulateEffectsList=function(){var a,b,c,d=function(){var d=function(a){return e(a)},e=function(d){var e,f=c.Effects;switch(d){case f.RowColorOneBackground:e=a.tableColor;break;case f.RowColorOneFont:e=a.tableForeColor;break;case f.UseRowColorTwo:e=a.useTableColor2;break;case f.RowColorTwoBackground:e=a.tableColor2;break;case f.RowColorTwoFont:e=a.tableForeColor2;break;case f.TableBackgroundColor:e=a.backgroundColor;break;case f.TitleBackground:e=a.titleColor;break;case f.TitleFont:e=a.titleForeColor;break;case f.UseShadingColor:e=a.title3D;break;case f.TitleDarkShadowColor:e=a.titleDarkShadowColor;break;case f.TitleLightShadowColor:e=a.titleLightShadowColor;break;case f.SeparatorWeight:e=a.gridLineWidth;break;case f.SeparatorHorizontal:e=a.horizontalGridLines;break;case f.SeparatorVertical:e=a.verticalGridLines;break;case f.TitleSelectionBackground:e=a.selectedTitleColor;break;case f.TitleSelectionFont:e=a.selectedTitleForeColor;break;case f.UseSelectedTitleColor:e=a.useSelectedTitleColor;break;case f.TitleSeparatorColor:e=a.titleGridLineColor;break;case f.WindowSeparatorColor:e=a.borderColor;break;case f.WindowSeparatorWeight:e=a.borderWidth;break;case f.ContentSeparatorColor:e=a.tableGridLineColor;break;case f.TitleSeparatorColor:e=a.titleGridLineColor;break;case f.BorderColor:e=PWC.Lib.Canvas.Converters.convertTo(PWC.Lib.Canvas.Converters.enumConverter.Color,b.borderColor);break;case f.BorderWidth:e=b.borderWidth}return e};return{get:d}},e=function(e,f,g,h,i){var j,k=PWC.HmiAC.CreateProperty,l=PWC.HmiAC.EffectsPropId,m=PWC.HmiAC.ControlType,n=[];return b=i,a=f,c=new PWC.HmiAC.EffectsPropertySet(g),j=c.Effects,k.setContext(d),n.push(k.create(null,PWC.HmiAC.CommonTabNames.Effects,e,"complex")),n.push(k.create(e,j.RowColorOneBackground,l.TableColor,m.Color)),n.push(k.create(e,j.RowColorOneFont,l.TableForeColor,m.Color)),n.push(k.create(e,j.RowColorTwoBackground,l.TableColor2,m.Color)),n.push(k.create(e,j.RowColorTwoFont,l.TableForeColor2,m.Color)),n.push(k.create(e,j.TableBackgroundColor,l.BackColor,m.Color)),n.push(k.create(e,j.TitleBackground,l.TitleColor,m.Color)),n.push(k.create(e,j.TitleFont,l.TitleForeColor,m.Color)),n.push(k.create(e,j.TitleLightShadowColor,l.TitleLightShadowColor,m.Color)),n.push(k.create(e,j.TitleDarkShadowColor,l.TitleDarkShadowColor,m.Color)),n.push(k.create(e,j.TitleSelectionBackground,l.SelectedTitleColor,m.Color)),n.push(k.create(e,j.TitleSelectionFont,l.SelectedTitleForeColor,m.Color)),n.push(k.create(e,j.ContentSeparatorColor,l.TableGridLineColor,m.Color)),n.push(k.create(e,j.TitleSeparatorColor,l.TitleGridLineColor,m.Color)),n.push(k.create(e,j.SeparatorWeight,l.GridLineWidth,m.WInt)),n.push(k.create(e,j.SeparatorHorizontal,l.HorizontalGridLines,m.Bool)),n.push(k.create(e,j.SeparatorVertical,l.VerticalGridLines,m.Bool)),n.push(k.create(e,j.BorderColor,l.BorderColor,m.Color)),n.push(k.create(e,j.BorderWidth,l.BorderWidth,m.WInt)),n.push(k.create(e,j.WindowSeparatorColor,l.WindowSeparatorColor,m.Color)),n.push(k.create(e,j.WindowSeparatorWeight,l.WindowSeparatorWeight,m.WInt)),n.push(k.create(e,j.UseRowColorTwo,l.UseTableColor2,m.SInt)),n.push(k.create(e,j.UseShadingColor,l.Title3D,m.SInt)),n.push(k.create(e,j.UseSelectedTitleColor,l.UseSelectedTitleColor,m.SInt)),n.push(k.create(e,j.LableTableContent)),n.push(k.create(e,j.LableRowColor1)),n.push(k.create(e,j.LableBackground)),n.push(k.create(e,j.LableFont)),n.push(k.create(e,j.LableRowColor2)),n.push(k.create(e,j.LableColor)),n.push(k.create(e,j.LableSeperatorLines)),n.push(k.create(e,j.LableColorOfSeperatorLine)),n.push(k.create(e,j.LableContents)),n.push(k.create(e,j.LableTitle)),n.push(k.create(e,j.LableWeight)),n.push(k.create(e,j.LableHorizontal)),n.push(k.create(e,j.LableVertical)),n.push(k.create(e,j.LableTableTitle)),n.push(k.create(e,j.LableFontColorOfTheTitle)),n.push(k.create(e,j.LableShadingColor)),n.push(k.create(e,j.LableLight)),n.push(k.create(e,j.LableDark)),n.push(k.create(e,j.LableSelectionColor)),n.push(k.create(e,j.LableGeneral)),n.push(k.create(e,j.LableBorder)),n.push(k.create(e,j.LableWindowSeperatorLines)),n.push(k.create(e,h)),c=null,k.cleanUp(),n};return{getList:e}}(),PWC.HmiAC.UpdateEffectsTab=function(){var a=function(a,b,c,d,e,f){var g,h,i,j=PWC.Lib.Config.Properties,k=PWC.HmiAC.Common.HelperUtil,l=PWC.HmiAC.EffectsPropId,m=Object.keys(l),n=PWC.Lib.Canvas.Converters,o=n.enumConverter.Color,p=!0;switch(b){case l.TableColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.tableColor=g,c=h;break;case l.TableForeColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.tableForeColor=g,c=h;break;case l.UseTableColor2:e&&(c=Number(c)),d.useTableColor2=c;break;case l.TableColor2:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.tableColor2=g,c=h;break;case l.TableForeColor2:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.tableForeColor2=g,c=h;break;case l.BackColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.backgroundColor=g,c=h;break;case l.TitleColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.titleColor=g,c=h;break;case l.TitleForeColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.titleForeColor=g,c=h;break;case l.Title3D:e&&(c=Number(c)),d.title3D=c;break;case l.TitleDarkShadowColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.titleDarkShadowColor=g,c=h;break;case l.TitleLightShadowColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.titleLightShadowColor=g,c=h;break;case l.UseSelectedTitleColor:e&&(c=Number(c)),d.useSelectedTitleColor=c;break;case l.SelectedTitleColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.selectedTitleColor=g,c=h;break;case l.SelectedTitleForeColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.selectedTitleForeColor=g,c=h;break;case l.HorizontalGridLines:e&&(c=Number(c)),d.horizontalGridLines=c;break;case l.VerticalGridLines:e&&(c=Number(c)),d.verticalGridLines=c;break;case l.GridLineWidth:c=parseInt(c,10),d.gridLineWidth=c;break;case l.TableGridLineColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.tableGridLineColor=g,c=h;break;case l.TitleGridLineColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.titleGridLineColor=g,c=h;break;case l.WindowSeparatorWeight:c=parseInt(c,10),d.borderWidth=c;break;case l.WindowSeparatorColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),d.borderColor=g,c=h;break;case l.BorderColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=n.convertTo(o,c),h=c),a.props.BorderColor=c,e&&a.gfxWebLib.connection.sendPropertyByName(a.rtoid,"BorderColor",h,!0,!1);break;case l.BorderWidth:c=parseInt(c,10),e&&a.gfxWebLib.connection.sendPropertyByName(a.rtoid,"BorderWidth",c,!1,!1);break;default:p=!1}return void 0!==(i=m[b])&&(j.setProp(a,i,c),e&&(f[i]=c)),p};return{update:a}}(),PWC.HmiAC.PopulateSelectionList=function(){var a,b,c=function(){var c=function(a){return d(a)},d=function(c){var d,e,f=[],g=b.SelectionProps;switch(c){case g.SelectableRows:for(e in PWC.HmiAC.SelectionType)f.push(e);d=f;break;case g.SelectionBorder:for(e in PWC.HmiAC.SelectionBorder)f.push(e);d=f;break;case g.SelectionColorFor:for(e in PWC.HmiAC.SelectionColorFor)f.push(e);d=f;break;case g.SelectionBorderColor:d=a.selectionRectColor;break;case g.SelectionBorderWidth:d=a.selectionRectWidth;break;case g.SelectionBorderAutoColor:d=a.autoSelectionRectColor;break;case g.SelectionAutoColor:d=a.autoSelectionColors;break;case g.SelectedCellForeColor:d=a.selectedCellForeColor;break;case g.SelectedBackground:d=a.selectedCellColor;break;case g.SelectedRowForeColor:d=a.selectedRowForeColor;break;case g.SelectedRowBackgroundColor:d=a.selectedRowColor}return d};return{get:c}},d=function(d,e,f,g){var h,i=PWC.HmiAC.CreateProperty,j=PWC.HmiAC.SelectionPropId,k=PWC.HmiAC.ControlType,l=[];return a=e,b=new PWC.HmiAC.SelectionPropertySet(f),h=b.SelectionProps,i.setContext(c),l.push(i.create(null,PWC.HmiAC.CommonTabNames.Selection,d,"complex")),l.push(i.create(d,h.SelectableRows,j.SelectionType,k.Collection)),l.push(i.create(d,h.SelectionBorder,j.SelectionRect,k.Collection)),l.push(i.create(d,h.SelectionBorderColor,j.SelectionRectColor,k.Color)),l.push(i.create(d,h.SelectionBorderWidth,j.SelectionRectWidth,k.WInt)),l.push(i.create(d,h.SelectionBorderAutoColor,j.AutoSelectionRectColor,k.Bool)),l.push(i.create(d,h.SelectionAutoColor,j.AutoSelectionColors,k.Bool)),l.push(i.create(d,h.SelectedCellForeColor,j.SelectedCellForeColor,k.Color)),l.push(i.create(d,h.SelectedBackground,j.SelectedCellColor,k.Color)),l.push(i.create(d,h.SelectionColorFor,j.SelectionColoring,k.Collection)),l.push(i.create(d,h.SelectedRowForeColor,j.SelectedRowForeColor,k.Color)),l.push(i.create(d,h.SelectedRowBackgroundColor,j.SelectedRowColor,k.Color)),l.push(i.create(d,h.LableSelection)),l.push(i.create(d,h.LableSelectableRows)),l.push(i.create(d,h.LableSelectionBorder)),l.push(i.create(d,h.LableAutomaticColorAssignment)),l.push(i.create(d,h.LableColor)),l.push(i.create(d,h.LableWeight)),l.push(i.create(d,h.LableSelectionColors)),l.push(i.create(d,h.LableSelectionColorsFor)),l.push(i.create(d,h.LableSelectionCell)),l.push(i.create(d,h.LableSelectionRow)),l.push(i.create(d,h.LableBackground)),l.push(i.create(d,h.LableFont)),l.push(i.create(d,g)),b=null,i.cleanUp(),l};return{getList:d}}(),PWC.HmiAC.UpdateSelectionTab=function(){var a=function(a,b,c,d,e,f){var g,h,i,j=PWC.Lib.Config.Properties,k=PWC.HmiAC.Common.HelperUtil,l=PWC.HmiAC.SelectionType,m=PWC.HmiAC.SelectionColorFor,n=PWC.HmiAC.SelectionBorder,o=PWC.HmiAC.SelectionPropId,p=Object.keys(o),q=PWC.Lib.Canvas.Converters,r=q.enumConverter.Color,s=!0;switch(b){case o.SelectionType:e&&(c=l[c]),d.selectionType=c;break;case o.SelectionRect:e&&(c=n[c]),d.selectionRect=c;break;case o.SelectionRectColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=q.convertTo(r,c),h=c),d.selectionRectColor=g,c=h;break;case o.SelectionRectWidth:c=parseInt(c,10),d.selectionRectWidth=c;break;case o.AutoSelectionRectColor:e&&(c=Number(c)),d.autoSelectionRectColor=c;break;case o.SelectionColoring:e&&(c=m[c]),d.selectionColoring=c;break;case o.AutoSelectionColors:e&&(c=Number(c)),d.autoSelectionColors=c;break;case o.SelectedCellForeColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=q.convertTo(r,c),h=c),d.selectedCellForeColor=g,c=h;break;case o.SelectedCellColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=q.convertTo(r,c),h=c),d.selectedCellColor=g,c=h;break;case o.SelectedRowForeColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=q.convertTo(r,c),h=c),d.selectedRowForeColor=g;break;case o.SelectedRowColor:e?(g=c,h=k.hexStrToDecColor(c)):(g=q.convertTo(r,c),h=c),d.selectedRowColor=g,c=h;break;default:s=!1}return void 0!==(i=p[b])&&(j.setProp(a,i,c),e&&(f[i]=c)),s};return{update:a}}(),PWC.HmiAC.PopulateGeneralList=function(){var a,b,c,d=PWC.Lib.Config.Properties,e=function(){var c=function(a){return e(a)},e=function(c){var e,f,g=[],h=b.GeneralCommonProps;switch(c){case h.WindowTitle:for(f in PWC.HmiAC.WindowTitle)g.push(f);e=g;break;case h.Text:e=d.getProp(a,"TitleBarText");break;case h.Movable:e=d.getProp(a,"WindowMovingEnabled");break;case h.Closable:e=d.getProp(a,"WindowCloseEnabled");break;case h.Sizable:e=d.getProp(a,"WindowSizingEnabled");break;case h.HorizontalScrollbarMode:case h.VerticalScrollbarMode:case h.ScrollbarMode:for(f in PWC.HmiAC.ScrollMode)g.push(f);e=g;break;case h.TimeBase:for(f in PWC.HmiAC.TimeBase)g.push(f);e=g;break;case h.Style:for(f in PWC.HmiAC.WindowStyle)g.push(f);e=g;break;case h.CurrentPrintJob:e="PrintJob"}return e};return{get:c}},f=function(d,f,g){var h,i=PWC.HmiAC.GeneralCommonPropId,j=PWC.HmiAC.ControlType,k=[];return a=f,b=new PWC.HmiAC.GeneralCommonPropertySet(f.gfxWebLib.textbib),h=b.GeneralCommonProps,c=PWC.HmiAC.CreateProperty,c.setContext(e),k.push(c.create(null,null,null,"subcomplex")),k.push(c.create(d,h.LableWindow)),k.push(c.create(d,h.LableWindowTitle)),k.push(c.create(d,h.LableText)),k.push(c.create(d,h.LableMovable)),k.push(c.create(d,h.LableClosable)),k.push(c.create(d,h.LableSizable)),k.push(c.create(d,h.LableStyle)),k.push(c.create(d,h.LableRowScrollbar)),k.push(c.create(d,h.LableColumnScrollbar)),k.push(c.create(d,h.LablePrintJob)),k.push(c.create(d,h.LableTimeBase)),k.push(c.create(d,h.WindowTitle,i.TitleBarStyle,j.Collection)),k.push(c.create(d,h.Text,i.TitleBarText,j.Text)),k.push(c.create(d,h.Movable,i.WindowMovingEnabled,j.Bool)),k.push(c.create(d,h.Closable,i.WindowCloseEnabled,j.Bool)),k.push(c.create(d,h.Sizable,i.WindowSizingEnabled,j.Bool)),k.push(c.create(d,h.VerticalScrollbarMode,i.VerticalScrollbarMode,j.Collection)),k.push(c.create(d,h.HorizontalScrollbarMode,i.HorizontalScrollbarMode,j.Collection)),k.push(c.create(d,h.TimeBase,i.TimeBase,j.Collection)),k.push(c.create(d,h.Style,i.Style,j.Collection)),k.push(c.create(d,h.CurrentPrintJob,i.CurrentPrintJob,j.Text)),k.push(c.create(d,g)),k.push(c.create(d,h.ScrollbarMode,i.ScrollbarMode,j.Collection)),b=null,c.cleanUp(),k};return{getList:f}}(),PWC.HmiAC.UpdateGeneralTab=function(){var a=PWC.Lib.Config.Properties,b=function(b,c,d,e,f,g){var h,i,j=PWC.HmiAC.WindowTitle,k=PWC.HmiAC.ScrollMode,l=PWC.HmiAC.TimeBase,m=PWC.HmiAC.GeneralCommonPropId,n=Object.keys(m);switch(c){case m.TitleBarStyle:h=j[d],a.setProp(b,n[c],h);break;case m.TitleBarText:a.setProp(b,n[c],d);break;case m.WindowMovingEnabled:case m.WindowCloseEnabled:case m.WindowSizingEnabled:i=d?1:0,a.setProp(b,n[c],i);break;case m.HorizontalScrollbarMode:d=f?d:Object.keys(k)[d],d=k[d],e.horizontalScrollbarMode=d,a.setProp(b,n[c],d),g[n[c]]=d;break;case m.VerticalScrollbarMode:d=f?d:Object.keys(k)[d],d=k[d],e.verticalScrollbarMode=d,a.setProp(b,n[c],d),g[n[c]]=d;break;case m.ScrollbarMode:d=k[d],g[n[c]]=d;break;case m.TimeBase:d=f?l[d]:d,a.setProp(b,n[c],d),g[n[c]]=d;break;case m.Style:break;case m.CurrentPrintJob:}};return{update:b}}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TimeRangeSelection=function(){var a,b,c,d,e,f,g=function(a,b,d){c.setTimeRangePropsData(d,a,b)},h=function(){var b,d,e=c.topLevelScreenWindowDiv,g=document.createElement("div");e.appendChild(g),d=a.data.errorMsg.split(":"),d.length>1&&(b=d[0],d=d[1]),b||(d=d[0]),PWC.Components.GenericDialog.ShowWarning(d,g,b,function(){return f=!0,!1}),f=!1};this.type="TimeRangeSelection",this.data={okButtonId:"OKBtn",cancelButtonId:"CancelBtn",applyButtonId:"ApplyBtn",selectedIndex:null},this.create=function(f,g){var h,i;return c=g.subscribe(this.type),d=c.type,e=c.textbib,a=this,b=c.topLevelScreenWindowDiv,i={type:this.type,rtoid:f,appDir:c.appDir,parentDiv:b},h=this.createControl(i)},this.getData=function(){var a,b=c.timeRangePropsData.rangePropsIds,f=c.timeRangePropsData.rangeProps;this.data.propId=b,this.data.errorMsg="",this.data.selectedIndex=0,a=f[this.data.selectedIndex],d===PWC.HmiAC.SourceControlType.TrendControl?(this.data.headerName=e.getText("TBID_TrendPB_Trend_TrendName"),this.data.parentType="TimeAxis"):d===PWC.HmiAC.SourceControlType.TableControl&&(this.data.headerName=e.getText("TBID_TableCtrlPB_TimeColumns_TimeColumns"),this.data.parentType="TimeColumn"),this.data.timeRangeName=e.getText("TBID_TimeRangeDialog_Timerange"),this.data.rangeTypeName=e.getText("TBID_TimeRangeDialog_Setting"),this.data.startTimeName=e.getText("TBID_TimeRangeDialog_StartTime"),this.data.endTimeName=e.getText("TBID_TimeRangeDialog_EndTime"),this.data.pointCountName=e.getText("TBID_TimeRangeDialog_NoOfMeasurePoints"),this.data.StartTimeMsg=e.getText("TBID_TimeRangeDialog_StartTimeMsg"),this.data.MeasurementPointMsg=e.getText("TBID_TimeRangeDialog_MeasurementPointMsg"),this.data.TimeRangeMsg=e.getText("TBID_TimeRangeDialog_TimeRangeMsg"),this.data.okButtonText=e.getText("TBID_HmiWindow_OKButton"),this.data.cancelButtonText=e.getText("TBID_HmiWindow_CancelButton"),this.data.applyButtonText=e.getText("TBID_HmiWindow_ApplyButton"),this.data.propNames=PWC.HmiAC.TimeRangePropNames,d===PWC.HmiAC.SourceControlType.TableControl?(this.data.settingList=Object.keys(PWC.HmiAC.TimeRangeType),this.data.rangeBaseList=Object.keys(PWC.HmiAC.TimeRangeBase)):(this.data.settingList=Object.keys(PWC.HmiAC.RangeType),this.data.rangeBaseList=Object.keys(PWC.HmiAC.RangeBase)),this.data.timeProps=f,this.data.timeNames=[],this.data.settingRegexList=[],this.data.rangeBaseRegexList=[],this.data.isOnlineTrend=f.isOnlineTrend?!0:!1,this.data.isOnlineTrend&&(this.data.trendToTimeAxisMapper={},this.data.timeAxisToSelectedIndexMapper={});
for(var g=0;g<f.length;g++)this.data.timeNames.push(f[g].name),this.data.isOnlineTrend&&(this.data.trendToTimeAxisMapper[f[g].name]=f[g].timeAxisName,this.data.timeAxisToSelectedIndexMapper[f[g].timeAxisName]=g),this.data.timeProps[g].startTime=new Date(f[g].startTime),this.data.timeProps[g].endTime=new Date(f[g].endTime),this.data.settingRegexList[g]=this.data.settingList[f[g].setting],this.data.rangeBaseRegexList[g]=this.data.rangeBaseList[f[g].rangeBase];return f.length>0?this.data.selectedTimeObjectRegex=f[this.data.selectedIndex].name:this.data.settingRegexList.undefined=this.data.settingList[0],this.data.pointCountRangeFactorRegex=/^\+?[0-9]\d*$/,this.data.dateTimeRegex=[],this.data.dateTimeRegex.push(/^(((0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9])|((0[0-9]|1[0-9]|2[0-3]):[0-5][0-9].*(000)))$/),this.data.dateTimeRegex.push(/^((1[7-9])|([2-9][0-9]))[0-9]{2}-((0[1-9])|(1[0-2]))-((0[1-9])|([1-2][0-9])|(3[0-1]))$/),this.data},this.update=function(b,d){var e,f,i,j,k,l,m=!1,n=b.currentTarget.id,o=d.length;if(a.data.errorMsg)return h(),b.stopPropagation(),m=!1;for(k=0;o>k;k++)i=d[k],j=i.elemId.split("-"),f=j.length>1?-1!==j[1].indexOf("_")?j[1]:parseInt(j[1],10):j,e=i.updatedValue,isNaN(f)&&-1!==f.indexOf("_")?(j=f.split("_"),f=j[0],f=parseInt(f,10),l=parseInt(""===j[1]?0:j[1],10)):(f=parseInt(f,0),l=0),(n===a.data.applyButtonId||n===a.data.okButtonId)&&(g(f,e,l),m=!0);return PWC.HmiAC.PostPropertyUpdate.Redraw&&c.reload(),PWC.HmiAC.PostPropertyUpdate.Update=!1,PWC.HmiAC.PostPropertyUpdate.Redraw=!1,m},this.clean=function(){var a=document.getElementById("TimeRangeSelection"),c=document.getElementById("TimeRangeSelection_divModal");b&&a&&(b.removeChild(a),c&&b.removeChild(c),b=null)}},PWC.HmiAC.TimeRangeSelection.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.TimeRangeSelection,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("TimeRangeSelection",new PWC.HmiAC.TimeRangeSelection)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.FontPart=function(a){"use strict";var b,c=PWC.Lib.Config.Properties,d=600,e=400,f={FontType:a||"Font",Font:"Font",FontName:"FontName",FontSize:"FontSize",FontBold:"FontBold",FontItalic:"FontItalic",FontUnderline:"FontUnderline",FontStrikeOut:"FontStrikeOut",FontDescription:"FontDescription"},g={FontName:0,FontSize:1,FontItalic:2,FontUnderline:3,FontStrikeOut:4,FontBold:5};this.initialize=function(a,e){b=e,this.screenItem=a,this.font=PWC.Lib.jQL.extend({},c.getProp(a,f.FontType)),this.fontDescriptionProp=c.getPropPart(this.font,f.Font,f.FontDescription),0===this.fontDescriptionProp?(this.fontName=c.getPropPart(this.font,f.Font,f.FontName),this.fontSize=c.getPropPart(this.font,f.Font,f.FontSize),this.fontBold=c.getPropPart(this.font,f.Font,f.FontBold),this.fontItalic=c.getPropPart(this.font,f.Font,f.FontItalic),this.fontUnderline=c.getPropPart(this.font,f.Font,f.FontUnderline),this.fontStrikeOut=c.getPropPart(this.font,f.Font,f.FontStrikeOut)):(this.fontDescriptionArray=this.fontDescriptionProp.split(","),this.fontName=this.fontDescriptionArray[g.FontName],this.fontSize=+this.fontDescriptionArray[g.FontSize],this.fontBold=+this.fontDescriptionArray[g.FontBold]<d?0:1,this.fontItalic=+this.fontDescriptionArray[g.FontItalic],this.fontUnderline=+this.fontDescriptionArray[g.FontUnderline],this.fontStrikeOut=+this.fontDescriptionArray[g.FontStrikeOut]),PWC.HmiAC.FontType.hasOwnProperty(this.fontName)||(PWC.HmiAC.FontType[this.fontName]=Object.keys(PWC.HmiAC.FontType).length),this.fontStyle=[],this.fontStyle[0]=1===this.fontBold?"bold":"none",this.fontStyle[1]=1===this.fontItalic?"italic":"none",this.fontStyle[2]=" ",1===this.fontUnderline&&(this.fontStyle[2]="underline"+this.fontStyle[2]),this.fontStrikeOut&&(this.fontStyle[2]+="line-through")},this.setFont=function(a,b){0===this.fontDescriptionProp?this.font[a]=b:(this.fontDescriptionArray[g[a]]=b,this.font[f.FontDescription]=this.fontDescriptionProp=this.fontDescriptionArray.join(",")),c.setProp(this.screenItem,f.FontType,this.font)},this.OnUpdate=function(a,c){var g=PWC.HmiAC.FontPropId,h=!1;switch(a){case g.FontName:this.setFont(f.FontName,c),this.fontName=c,h=!0;break;case g.FontSize:c=parseInt(c,10),c>0&&(this.setFont(f.FontSize,c),this.fontSize=c),h=!0;break;case g.FontBold:c?(0===this.fontDescriptionProp?this.setFont(f.FontBold,1):this.setFont(f.FontBold,d),this.fontStyle[0]="bold"):(0===this.fontDescriptionProp?this.setFont(f.FontBold,0):this.setFont(f.FontBold,e),this.fontStyle[0]="none"),this.fontBold=c,h=!0;break;case g.FontItalic:c?(this.setFont(f.FontItalic,1),this.fontStyle[1]="italic"):(this.setFont(f.FontItalic,0),this.fontStyle[1]="none"),this.fontItalic=c,b&&PWC.Lib.jQL.getElementsByClassName(b,"fontClass").attr("font-style",this.fontStyle[1]);break;case g.FontUnderline:c?(this.setFont(f.FontUnderline,1),this.fontStyle[2]="underline"):(this.setFont(f.FontUnderline,0),this.fontStyle[2]=""),this.fontUnderline=c,this.fontStrikeOut&&(this.fontStyle[2]+=" line-through"),b&&PWC.Lib.jQL.getElementsByClassName(b,"fontClass").attr("text-decoration",this.fontStyle[2]);break;case g.FontStrikeOut:c?(this.setFont(f.FontStrikeOut,1),this.fontStyle[2]="line-through"):(this.setFont(f.FontStrikeOut,0),this.fontStyle[2]=""),this.fontStrikeOut=c,this.fontUnderline&&(this.fontStyle[2]+=" underline"),b&&PWC.Lib.jQL.getElementsByClassName(b,"fontClass").attr("text-decoration",this.fontStyle[2])}return h},this.cleanUp=function(){b=null,c=null,f=g=null,this.screenItem=this.fontStyle=this.font=null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.AlarmView=function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o=a,p=!1,q=new PWC.Components.Grid.GridModel,r=24,s=PWC.HmiAC.ColumnData,t=PWC.Lib.Config.Properties,u=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar,v=PWC.Lib.Canvas.Converters.toRGB,w=PWC.Lib.Canvas.Converters,x=[],y=[],z=o.gfxWebLib,A=new PWC.Lib.GfxWebLib(z.appMode,z.appType,{basePath:z.connection.getAppDir(),imagePath:z.connection.getImageUrl()}),B=z.textbib,C=PWC.HmiAC.ToolBarButtons,D=z.flashing.getFlashingRates(),E=!1,F=!1,G=0,H=B.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,I=B.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,J=!1,K=[],L=[],M="",N={pending:0,toAcknowledge:0,lockedCount:0,hiddenCount:0},O=function(){var a=[],c=[],e=[],f={};a[0]=q.defaultSortOrder?0===b.getRowCount()?0:b.getRowCount()-1:0,c=b.getSelectedIndices(),x._toggle?d===PWC.HmiAC.DataSource.Online&&(void 0===c||0===c.length?(e=b.getVisibleIndicies(),void 0!==e&&e.length>0?(f=Q(e),f.GROUPCOUNT>0?(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!0)):f.SINGLECOUNT>0?(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1)):(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1))):(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1))):void 0!==c&&c.length>1?(f=Q(c),f.GROUPCOUNT>0?(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!0)):(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1))):void 0!==c&&1===c.length&&(f=Q(c),f.GROUPCOUNT>0?(u.enable(o,C.QuitSingle,!0),u.enable(o,C.QuitVisible,!0)):f.SINGLECOUNT>0?(u.enable(o,C.QuitSingle,!0),u.enable(o,C.QuitVisible,!1)):(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1)))):d===PWC.HmiAC.DataSource.Online&&(e=b.getVisibleIndicies(),void 0!==e&&e.length>0?(f=Q(e),f.GROUPCOUNT>0?(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!0)):f.SINGLECOUNT>0?(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1)):0===f.SINGLECOUNT&&0===f.GROUPCOUNT&&(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1)),f=Q(a),(f.GROUPCOUNT>0||f.SINGLECOUNT>0)&&u.enable(o,C.QuitSingle,!0)):(u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1)))},P=function(){var a=!1,c=[];c=b.getSelectedIndices(),(d===PWC.HmiAC.DataSource.HitList||0===c.length)&&(a=!0),a||!q.selectionType?(u.enable(o,C.Lock,!1),u.enable(o,C.Unlock,!1),u.enable(o,C.Hide,!1),u.enable(o,C.Unhide,!1)):d===PWC.HmiAC.DataSource.LockList?(u.enable(o,C.Lock,!1),u.enable(o,C.Unlock,!0),u.enable(o,C.Hide,!1),u.enable(o,C.Unhide,!1)):d===PWC.HmiAC.DataSource.HiddenList?(u.enable(o,C.Lock,!1),u.enable(o,C.Unlock,!1),u.enable(o,C.Hide,!1),u.enable(o,C.Unhide,!0)):(u.enable(o,C.Lock,!0),u.enable(o,C.Unlock,!1),u.enable(o,C.Hide,!0),u.enable(o,C.Unhide,!1))},Q=function(a){var b,c,d,e,f={},g=0,h=0,i=PWC.HmiAC.StateMachine,j=PWC.HmiAC.AlarmState,k=a.length;for(b=0;k>b;b++)switch(f=R(a[b]),c=f.STATE,d=f.SINGEACKNOWLEDGE,e=f.STATEMACHINE){case i.RaiseRequiresAcknowledgement:c===j.Raised&&(d?h++:g++);break;case i.RaiseClearOptionalAcknowledgement:c===j.Raised&&(d?h++:g++);break;case i.RaiseClearRequiresAcknowledgement:(c===j.Raised||c===j.RaisedCleared)&&(d?h++:g++);break;case i.RaiseClearRequiresReset:(c===j.Raised||c===j.RaisedCleared)&&(d?h++:g++);break;case i.RaiseClearOptionalAcknowledgementAndReset:(c===j.Raised||c===j.RaisedCleared||c===j.RaisedAcknowledged)&&(d?h++:g++);break;case i.RaiseClearRequiresAcknowledgementAndReset:(c===j.Raised||c===j.RaisedCleared||c===j.RaisedAcknowledged||c===j.RaisedAcknowledgedCleared||c===j.RaisedClearedAcknowledged)&&(d?h++:g++)}return{SINGLECOUNT:h,GROUPCOUNT:g}},R=function(a){var c,d,e,f;return a>=0&&(c=b.getRow(a),void 0!==c&&(d=c.STATE,e=c.SINGLEACKNOWLEDGEMENT,f=c.STATEMACHINE)),{STATE:d,SINGEACKNOWLEDGE:e,STATEMACHINE:f}},S=function(){var a,c=b.getRowCount(),d=PWC.HmiAC.StatusBarIcons,e=PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar,g=PWC.Lib.HmiTypes.Advanced.Statusbar;a=g.findElementByName(o,"MessageListMessagesCount"),a&&(e.text(o,"MessageListMessagesCount",B.getText("TBID_AlgCtrl_Pending")+" : "+N.pending),e.tooltip(o,"MessageListMessagesCount",B.getText("TBID_AlgCtrl_Pending_Alarms")),a=null),a=g.findElementByName(o,"MessageListQuitCount"),a&&(e.text(o,"MessageListQuitCount",B.getText("TBID_AlgCtrl_ToAcknowledge")+" : "+N.toAcknowledge),e.tooltip(o,"MessageListQuitCount",B.getText("TBID_AlgCtrl_Pending_Acknowledgable")),a=null),a=g.findElementByName(o,"CurrentListMessagesCount"),a&&(e.text(o,"CurrentListMessagesCount",B.getText("TBID_AlgCtrl_List")+" : "+c),e.tooltip(o,"CurrentListMessagesCount",B.getText("TBID_AlgCtrl_Alarms_List")),a=null),a=g.findElementByName(o,"MessageListHideCount"),a&&(e.text(o,"MessageListHideCount",B.getText("TBID_AlgCtrl_Hidden")+" : "+c),e.tooltip(o,"MessageListHideCount",B.getText("TBID_AlgCtrl_Alarms_HideCount")),a=null),a=g.findElementByName(o,"Hidden"),a&&(e.text(o,"MessageListHideCount",B.getText("TBID_AlgCtrl_Hidden")+" : "+N.hiddenCount),0===N.hiddenCount?e.icon(o,"Hidden",d.NONE):e.icon(o,"Hidden",d.HIDDENALARMS),e.tooltip(o,"Hidden",N.hiddenCount+" "+B.getText("TBID_AlgCtrl_Pending_Tootip")),a=null),f===PWC.HmiAC.TimeBase.UTC?e.tooltip(o,PWC.HmiAC.StatusBarButtons.TimeBase,B.getText("TBID_AlgCtrl_UTC")):e.tooltip(o,PWC.HmiAC.StatusBarButtons.TimeBase,B.getText("TBID_AlgCtrl_LocalTimeZone")),a=g.findElementByName(o,"Lock"),a&&(0===N.lockedCount?e.icon(o,"Lock",d.NONE):e.icon(o,"Lock",d.LOCKEDALARMS),e.tooltip(o,"Lock",N.lockedCount+" "+B.getText("TBID_AlgCtrl_Lock")),a=null),a=g.findElementByName(o,"Selection"),a&&(e.icon(o,"Selection",d.NONE),a=null),a=g.findElementByName(o,"DisplayOption"),a&&(1!==q.suppressFilter?e.icon(o,"DisplayOption",d.DISPLAYOPTIONS):e.icon(o,"DisplayOption",d.NONE),e.tooltip(o,"DisplayOption",B.getText("TBID_AlgCtrl_Statusbar_DisplayOption"))),void 0!==n&&window.clearTimeout(n)},T=function(){u.enable(o,C.QuitSingle,!1),u.enable(o,C.ShowHelp,!1),u.enable(o,C.QuitHorn,!1),u.enable(o,C.ShowQuitResetDialog,!1),u.enable(o,C.ShowSelectionDialog,!1),u.enable(o,C.Print,!1),u.enable(o,C.ShowExportDialog,!1),u.enable(o,C.ShowInfoTextDialog,!1),u.enable(o,C.ShowCommentDialog,!1),u.enable(o,C.ShowLockDialog,!1),u.enable(o,C.Lock,!1),u.enable(o,C.Unlock,!1),u.enable(o,C.Hide,!1),u.enable(o,C.Unhide,!1),u.enable(o,C.CopyRows,!1),u.enable(o,C.ShowAttachDBDialog,!1),u.enable(o,C.DetachDBDialog,!1),u.enable(o,C.MoveToFirstPage,!1),u.enable(o,C.MoveToPreviousPage,!1),u.enable(o,C.MoveToNextPage,!1),u.enable(o,C.MoveToLastPage,!1)},U=function(){var a,c,e=[],f=[],g=[];return $(),q.sortUpImageURL="content/Advanced/AlarmView/sort_up.png",q.sortDownImageURL="content/Advanced/AlarmView/sort_down.png",e=t.getProp(o,"AlarmColumns"),a=V(e),g=t.getProp(o,"HitlistColumns"),c=V(g),o.props.TimeBase=t.getProp(o,"TimeBase"),o.props.hitListWarning=!1,o.props.hitListMaxNumber=1e3,o.props.TimeRangeForStatistics1=!1,o.props.TimeRangeForStatistics2=1,o.props.TimeRangeForStatistics3=0,b=new PWC.HmiAC.Grid(q),b.setSelectionMode(x._toggle),b.setColumnCollection(a),b.setHitListColumnCollection(c),b.setAlarmDataSourceType(d),f=d===PWC.HmiAC.DataSource.HitList?c:a,f.length>0&&b.addColumns(f),p=b.render(o.control.domSvgParent,o.rtoid,z.appMode),p&&(b.subscribeEvents(PWC.Components.Grid.ControlEvents.OnCellDoubleClick),b.subscribeEvents(PWC.Components.Grid.ControlEvents.OnRowHeaderDoubleClick),b.subscribeEvents(PWC.Components.Grid.ControlEvents.OnColumnResize),b.subscribeEvents(PWC.Components.Grid.ControlEvents.OnSortButtonClicked),b.addEventListener("onSelection",qc),b.addEventListener("onDoubleClick",rc),b.addEventListener("onColumnResize",W),b.addEventListener("onSortButtonClicked",X),b.adaptScreenToWindowFactor(o.container)),p},V=function(a){var b,d,e=a.length,f=PWC.HmiAC.Column,g=[];for(b=0;e>b;b++)d=new f(a[b]),void 0===a[b].Index&&(d.index=b+1),d.columnWidth=c*d.columnWidth+r,g.push(d),d.flash&&G++;return g},W=function(a,e){var f,g,h=b.getColumnInfo(),i=b.getColumnIndex(a);f=d===PWC.HmiAC.DataSource.HitList?b.getHitListColumnCollection():b.getColumnCollection(),h[a]&&(h[a].width=e,h[a].LengthInChars=(e-r)/c,b.setColumnInfo(h),g=f[i],g.setColumnWidth(e),g.setLengthInChars((e-r)/c))},X=function(a,c,e){var f,g,h=b.getColumnIndex(a);f=d===PWC.HmiAC.DataSource.HitList?b.getHitListColumnCollection():b.getColumnCollection(),g=f[h],g.setSortIndex(c),g.setSortOrder(e),b.sortData(),b.renderRows()},Y=function(){return e},Z=function(a,b){var c,d,e,f="Font",g=PWC.HmiAC.TableControl.FontProps,h=PWC.HmiAC.TableControl.FontDescriptionProps;return j=Object.create(t.getProp(a,b)),0===(d=t.getPropPart(j,f,g.FontDescription))?c={FontName:t.getPropPart(j,f,g.FontName),FontSize:t.getPropPart(j,f,g.FontSize),FontUnderline:1===t.getPropPart(j,f,g.FontUnderline),FontStrikeOut:1===t.getPropPart(j,f,g.FontStrikeOut),FontBold:1===t.getPropPart(j,f,g.FontBold),FontItalic:1===t.getPropPart(j,f,g.FontItalic)}:(e=d.split(","),c={FontName:e[h.FontName],FontSize:+e[h.FontSize],FontBold:+e[h.FontBold]<h.FONT_BOLD_WEIGHT?0:1,FontItalic:+e[h.FontItalic],FontUnderline:+e[h.FontUnderline],FontStrikeOut:+e[h.FontStrikeOut]}),PWC.HmiAC.FontType.hasOwnProperty(c.FontName)||(PWC.HmiAC.FontType[c.FontName]=Object.keys(PWC.HmiAC.FontType).length),c},$=function(){var a=Z(o,"TableFont"),b=a,d=PWC.Lib.Canvas.Svg.getTextBBox(a,"x"),e=w.enumConverter.Color;c=d.width,q.height=t.getProp(o,"Height"),q.width=t.getProp(o,"Width"),q.enabled=t.getProp(o,"Enabled")?!0:!1,q.left=0,q.top=0,q.columnTitles=t.getProp(o,"ColumnTitles")?!0:!1,q.rowTitles=t.getProp(o,"RowTitles")?!0:!1,q.columnResize=t.getProp(o,"ColumnResize")?!0:!1,q.showSortIndex=t.getProp(o,"ShowSortIndex")?!0:!1,q.showSortIcon=t.getProp(o,"ShowSortIcon")?!0:!1,q.useSortKey=t.getProp(o,"ShowSortButton")?!0:!1,q.sortSequence=t.getProp(o,"SortSequence"),q.sortMode=t.getProp(o,"SortMode"),q.tableFontBold=a.FontBold,q.tableFontItalic=a.FontItalic,q.tableFontName=a.FontName,q.tableFontSize=a.FontSize,q.tableFontUnderline=a.FontUnderline,q.tableFontStrikeOut=a.FontStrikeOut,q.titleFontBold=b.FontBold,q.titleFontItalic=b.FontItalic,q.titleFontName=b.FontName,q.titleFontSize=b.FontSize,q.titleFontUnderline=b.FontUnderline,q.titleFontStrikeOut=b.FontStrikeOut,q.defaultSortOrder=t.getProp(o,"DefaultSortOrder")?!1:!0,q.doubleClickAction=t.getProp(o,"DoubleClickAction"),q.backgroundColor=t.getProp(o,"BackColor",e),q.tableColor=t.getProp(o,"TableColor",e),q.tableForeColor=t.getProp(o,"TableForeColor",e),q.useTableColor2=t.getProp(o,"UseTableColor2")?!0:!1,q.tableColor2=t.getProp(o,"TableColor2",e),q.tableForeColor2=t.getProp(o,"TableForeColor2",e),q.titleColor=t.getProp(o,"TitleColor",e),q.titleForeColor=t.getProp(o,"TitleForeColor",e),q.title3D=t.getProp(o,"Title3D")?!0:!1,q.titleDarkShadowColor=t.getProp(o,"TitleDarkShadowColor",e),q.titleLightShadowColor=t.getProp(o,"TitleLightShadowColor",e),q.useSelectedTitleColor=t.getProp(o,"UseSelectedTitleColor")?!0:!1,q.selectedTitleForeColor=t.getProp(o,"SelectedTitleForeColor",e),q.selectedTitleColor=t.getProp(o,"SelectedTitleColor",e),q.horizontalGridLines=t.getProp(o,"HorizontalGridLines")?!0:!1,q.verticalGridLines=t.getProp(o,"VerticalGridLines")?!0:!1,q.gridLineWidth=t.getProp(o,"GridLineWidth"),q.borderWidth=t.getProp(o,"BorderWidth"),q.borderColor=t.getProp(o,"BorderColor",e),q.tableGridLineColor=t.getProp(o,"TableGridLineColor",e),q.titleGridLineColor=t.getProp(o,"TitleGridLineColor",e),q.columnTitleAlignment=t.getProp(o,"ColumnTitleAlignment"),q.rowTitleAlignment=t.getProp(o,"RowTitleAlignment"),q.columnReorder=t.getProp(o,"ColumnReorder"),q.autoCompleteColumns=t.getProp(o,"AutoCompleteColumns")?!0:!1,q.autoCompleteRows=t.getProp(o,"AutoCompleteRows")?!0:!1,q.rowHeaderColor=t.getProp(o,"SelectedTitleColor",e),q.useColumnColors=t.getProp(o,"UseAlarmColors"),q.shortenTitleContent=t.getProp(o,"ShortenTitleContent")?!0:!1,q.shortenCellContent=t.getProp(o,"ShortenCellContent")?!0:!1,q.horizontalScrollbarMode=t.getProp(o,"HorizontalScrollbarMode"),q.verticalScrollbarMode=t.getProp(o,"VerticalScrollbarMode"),q.selectionRect=t.getProp(o,"SelectionRect"),q.selectionRectWidth=t.getProp(o,"SelectionRectWidth"),q.selectionRectColor=t.getProp(o,"SelectionRectColor",e),q.selectionType=t.getProp(o,"SelectionType"),q.selectionColoring=t.getProp(o,"SelectionColoring"),q.selectedRowColor=t.getProp(o,"SelectedRowColor",e),q.selectedRowForeColor=t.getProp(o,"SelectedRowForeColor",e),q.selectedCellColor=t.getProp(o,"SelectedCellColor",e),q.selectedCellForeColor=t.getProp(o,"SelectedCellForeColor",e),q.autoSelectionRectColor=t.getProp(o,"AutoSelectionRectColor"),q.autoSelectionColors=t.getProp(o,"AutoSelectionColors"),q.suppressFilter=t.getProp(o,"SuppressFilter")},_=function(){var a,c,d,e,f,g,h,i,j=b.getSelectedIndices(),k=[],l=[],m=0;if(x._toggle?(void 0===j||0===j.length)&&(j=b.getVisibleIndicies()):j=b.getVisibleIndicies(),i=j.length,i>0)for(e=0;i>e;e++)d=b.getRow(j[e]),void 0!==d&&(a=d.AlarmID,c=d.STATEMACHINE,f=d.SINGLEACKNOWLEDGEMENT,g=d.STATE,f||(h=ab(!0,a,g,c),void 0!==h&&(k[m]=h.PARAMID,l[m]=h.PARAMVALUES,m++)));0!==m&&z.connection.sendDomainLogicEvent(o.rtoid,PWC.HmiAC.ControlEventID.GroupAcknowledgement,k,l)},ab=function(a,b,c,d){var e,f,g=[],h=[],i=PWC.HmiAC.StateMachine,j=PWC.HmiAC.AlarmState,k=z.connection;switch(d){case i.Raise:case i.RaiseRequiresAcknowledgement:case i.RaiseClearOptionalAcknowledgement:case i.RaiseClearRequiresAcknowledgement:c!==j.RaisedAcknowledged&&c!==j.Removed&&(e=a===!0?PWC.HmiAC.ControlEventID.GroupAcknowledgement:PWC.HmiAC.ControlEventID.SingleAcknowledgement,b&&(g=k.getEventParamIDs().Value,h=k.datatypesToGfxCHROMID(b)));break;case i.RaiseClearRequiresReset:c===j.RaisedCleared&&a!==!1&&(e=PWC.HmiAC.ControlEventID.AlarmViewEventID_Reset,b&&(g=k.getEventParamIDs().Value,h=k.datatypesToGfxCHROMID(b)));break;case i.RaiseClearRequiresAcknowledgementAndReset:c===j.Raised||c===j.RaisedCleared?e=a===!0?PWC.HmiAC.ControlEventID.GroupAcknowledgement:PWC.HmiAC.ControlEventID.SingleAcknowledgement:(c===j.RaisedAcknowledgedCleared||c===j.RaisedClearedAcknowledged)&&(e=PWC.HmiAC.ControlEventID.AlarmViewEventID_Reset),b&&void 0!==e&&(g=k.getEventParamIDs().Value,h=k.datatypesToGfxCHROMID(b));break;case i.RaiseClearOptionalAcknowledgementAndReset:c===j.Raised?e=a===!0?PWC.HmiAC.ControlEventID.GroupAcknowledgement:PWC.HmiAC.ControlEventID.SingleAcknowledgement:c===j.RaisedCleared&&(e=PWC.HmiAC.ControlEventID.AlarmViewEventID_Reset),b&&void 0!==e&&(g=k.getEventParamIDs().Value,h=k.datatypesToGfxCHROMID(b))}return void 0!==e&&(f={EVENTID:e,PARAMID:g,PARAMVALUES:h}),f},bb=function(){var a,c,d,e,f,g,h=b.getSelectedIndices(),i=[],j=[],k=[];(void 0===h||0===h.length)&&(h=[],e=q.defaultSortOrder?b.getRowCount():1,e>=0&&h.push(e-1)),g=h.length,g>0&&(i=b.getRow(h[0]),void 0!==i&&(a=i.AlarmID,c=i.STATEMACHINE,d=i.STATE,f=ab(!1,a,d,c),void 0!==f&&(j[0]=f.PARAMID,k[0]=f.PARAMVALUES,z.connection.sendDomainLogicEvent(o.rtoid,f.EVENTID,j,k))))},cb=function(a){var b=PWC.HmiAC.InverseAlarmAttributes;return b[a]},db=function(a){var b,c=z.connection.getAppDir();switch(a){case PWC.HmiAC.AlarmState.Raised:b=c+"content/Advanced/AlarmView/Come.png";break;case PWC.HmiAC.AlarmState.RaisedAcknowledged:b=c+"content/Advanced/AlarmView/ComeQuit.png";break;case PWC.HmiAC.AlarmState.RaisedCleared:b=c+"content/Advanced/AlarmView/Go.png";break;case PWC.HmiAC.AlarmState.RaisedAcknowledgedCleared:b=c+"content/Advanced/AlarmView/Go.png";break;case PWC.HmiAC.AlarmState.RaisedClearedAcknowledged:b=c+"content/Advanced/AlarmView/Go.png";break;case PWC.HmiAC.AlarmState.Removed:b=c+"content/Advanced/AlarmView/QuitSystem.png";break;case PWC.HmiAC.AlarmState.SystemAcknowledged:b=c+"content/Advanced/AlarmView/QuitSystem.png"}return b},eb=function(a,c,d,e,f,g){var i,j,k,l,m,n,o,p,q,r=[],t=[],u=[],v=[],w={},x=b.getColumnInfo(),A=z.connection.getAppDir(),C=a.length,D=PWC.HmiAC.FormatDuration,E=PWC.HmiAC.ColumnNames;for(k=0;C>k;k++){for(i=new s,o=x.length,l=0;o>l;l++)if(t[0]=null,p=null,x[l].columnSource===a[k]){switch(i.columnName=x[l].name,i.columnValue=c[k],m=c[k],i.columnName){case E.LoopInAlarm:w=gb(m,g),w.isNotEmptyString?x[l].showText&&x[l].showIcon?(x[l].columnDataType="image",i.columnValue=A+"content/Advanced/AlarmView/LoopInAlarm.png|"+w.text):x[l].showText?i.columnValue=w.text:x[l].showIcon&&(x[l].columnDataType="image",i.columnValue=A+"content/Advanced/AlarmView/LoopInAlarm.png"):i.columnValue=w.text;break;case E.Comment:w=gb(m),w.isNotEmptyString?x[l].showText&&x[l].showIcon?(x[l].columnDataType="image",i.columnValue=A+"content/Advanced/AlarmView/Comment.png|"+w.text):x[l].showText?i.columnValue=w.text:x[l].showIcon&&(x[l].columnDataType="image",i.columnValue=A+"content/Advanced/AlarmView/Comment.png"):i.columnValue=w.text;break;case E.Infotext:w=gb(m),w.isNotEmptyString?x[l].showText&&x[l].showIcon?(x[l].columnDataType="image",i.columnValue=A+"content/Advanced/AlarmView/Infotext.png|"+w.text):x[l].showText?i.columnValue=w.text:x[l].showIcon&&(x[l].columnDataType="image",i.columnValue=A+"content/Advanced/AlarmView/Infotext.png"):i.columnValue=w.text;break;case E.State:x[l].showText&&x[l].showIcon?(x[l].columnDataType="image",n=db(d),i.columnValue=n+"|"+e):x[l].showText?i.columnValue=e:x[l].showIcon&&(x[l].columnDataType="image",n=db(d),i.columnValue=n);break;case E.Quitstate:f?x[l].showText&&x[l].showIcon?(x[l].columnDataType="image",n=A+"content/Advanced/AlarmView/Yes.png",i.columnValue=n+"|"+f):x[l].showText?i.columnValue=f:x[l].showIcon&&(x[l].columnDataType="image",n=A+"content/Advanced/AlarmView/Yes.png",i.columnValue=n):i.columnValue=null;break;case E.Duration:case E.AverageComeGo:case E.AverageComeQuit1:case E.AverageComeQuit2:case E.SumComeGo:case E.SumComeQuit1:case E.SumComeQuit2:case E.AverageComeCome:case E.SumComeCome:p||(p=x[l].timeFormat,""===p||"automatic"===p.toLowerCase()?(p=B.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Duration").f,q=D.getAutomaticDurationFormat):q=D.getCustomDurationFormat),i.columnValue="s"!==p?q(p,m):m;break;case E.Date:mb(x[l],x[l].dateFormat,!0,!1),j=new Date(PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(m)),u=h(j,y.slice(0)),v=x[l].showDate?u[1]+" "+u[0]:u[0],i.columnValue=v,v=null;break;case E.Time:mb(x[l],x[l].timeFormat,!1,!0),j=new Date(PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(m)),u=h(j,y.slice(0)),v=x[l].showDate?u[1]+" "+u[0]:u[0],i.columnValue=v,v=null;break;case E.Number:case E.Priority:case E.Frequence:x[l].leadingZeros>0&&(i.columnValue=fb(i.columnValue,x[l].leadingZeros))}"[empty]"===m&&(i.columnValue=null);break}r.push(i)}return r},fb=function(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c},gb=function(a,b){var c,d,e={};if(e.isNotEmptyString=!1,"string"==typeof a)""!==a&&"[empty]"!==a&&(e.isNotEmptyString=!0);else if("object"==typeof a&&(c=a.length,c>0))for(d=0;c>d;d++)if(""!==a[d]){e.isNotEmptyString=!0;break}return a===b?e.isNotEmptyString=!0:0===a&&(e.isNotEmptyString=!1),e.text=e.isNotEmptyString?"X":null,e},hb=function(a,b){o.gfxWebLib.connection.sendPropertyByName(o.rtoid,a,b,!0,!1)},ib=function(a,b,c){o.gfxWebLib.connection.sendPartPropertyByName(o.rtoid,a,b,c,!1,!1)},jb=function(a,c,e,g){var h,i,j,k,l,m,n=PWC.HmiAC.ScrollMode,p=PWC.HmiAC.TimeBase,r=PWC.HmiAC.GeneralPropId,s=PWC.HmiAC.InverseActiveListUponOpenPicture,v=Object.keys(s),w=Object.keys(r),y=!0,z=PWC.HmiAC.WindowTitle,A=!1,B=!0;switch(a){case r.HorizontalScrollbarMode:e&&(c=n[c]),q.horizontalScrollbarMode=c,t.setProp(o,w[a],c);break;case r.VerticalScrollbarMode:e&&(c=n[c]),q.verticalScrollbarMode=c,t.setProp(o,w[a],c);break;case r.TimeBase:e&&(c=p[c]),f=c,t.setProp(o,w[a],c),k=xb(f),k&&b.updateRowDataCollection(k),Vb(),y=!1;break;case r.AlarmViewViewType:if(!J){switch(e||(c=v[c],c=s[c]),c){case s.MessageList:d!==PWC.HmiAC.DataSource.Online&&(Db(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.Online)),c=PWC.HmiAC.DataSource.Online;break;case s.ShorttermArchivelist:d!==PWC.HmiAC.DataSource.ShortArchive&&(Cb(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.ShortArchive)),c=PWC.HmiAC.DataSource.ShortArchive;break;case s.LongtermArchivelist:d!==PWC.HmiAC.DataSource.LongArchive&&(Gb(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.LongArchive)),c=PWC.HmiAC.DataSource.LongArchive;break;case s.LockList:d!==PWC.HmiAC.DataSource.LockList&&(Ib(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.LockList)),c=PWC.HmiAC.DataSource.LockList;break;case s.HitList:d!==PWC.HmiAC.DataSource.HitList&&(Bb(!0),Ab(),hb("AlarmViewViewType",PWC.HmiAC.DataSource.HitList)),c=PWC.HmiAC.DataSource.HitList;break;case s.ListOfMessagesToBeHidden:d!==PWC.HmiAC.DataSource.HiddenList&&(Hb(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.HiddenList)),c=PWC.HmiAC.DataSource.HiddenList}t.setProp(o,w[a],c)}break;case r.AutoScroll:e&&(c=Number(c)),i=h,q.defaultSortOrder||(i=0),x._toggle=!c,u.check(o,"AutoScroll",!c),b.setAutoScroll(c),sc(!c),A=!0,B=!1;break;case r.DefaultSortOrder:"Descending_Order"===c||1===c?(q.defaultSortOrder=!1,b.setSortOrder(!1),c=0):("Ascending_Order"===c||0===c)&&(q.defaultSortOrder=!0,b.setSortOrder(!0),c=1),t.setProp(o,w[a],c),A=!0;break;case r.UseAlarmColors:e&&(c=Number(c)),l=b.getColumnCollection(),j=l.length,t.setProp(o,w[a],c),q.useColumnColors=c;break;case r.WindowMovingEnabled:e&&(c=Number(c)),t.setProp(o,w[a],c);break;case r.WindowCloseEnabled:e&&(c=Number(c)),t.setProp(o,w[a],c);break;case r.WindowSizingEnabled:e&&(c=Number(c)),t.setProp(o,w[a],c);break;case r.TitleBarText:t.setProp(o,w[a],c);break;case r.TitleBarStyle:e&&(c=z[c]),t.setProp(o,w[a],c);break;case r.DoubleClickAction:e&&(c=PWC.HmiAC.DoubleClickAction[c]),q.doubleClickAction=c,t.setProp(o,w[a],c);break;case r.SuppressFilter:e&&(c=PWC.HmiAC.DisplayOptions[c]),Zb(c,e),c=q.suppressFilter;break;default:y=!1}return e&&void 0!==(m=w[a])&&(g[m]=c),A&&b.sortData(),y},kb=function(a,e,f){var g,h,i,j,k,l,m,n=PWC.HmiAC.MessageBlockPropId,p=Object.keys(n),q=!0,s=b.getColumnCollection(),u=b.getColumnInfo(),v=!1,w=!1,x=!1,z=t.getProp(o,"AlarmColumns");switch(h=e.split(","),e=h[0],f?g=h[1]:(l=h[1]-1,m=z[l],g=m.DisplayName||m.header||m.columnHeader),i=rb(g,z),i||(x=!0,z=t.getProp(o,"HitlistColumns"),i=rb(g,z),s=b.getHitListColumnCollection()),j=rb(g,u),k=rb(g,s),f&&(l=z.indexOf(i)),a){case n.LeadingZeros:e=f?"true"===e?1:0:Number(e),e||(k.setLeadingZeros(0),j&&(j.leadingZeros=0,ob(i.Name,j.leadingZeros))),t.setPropPart(i,p[a],e),q=!1;break;case n.Digits:e=parseInt(e,10),k.setLeadingZeros(e),j&&j.leadingZeros-e!==0&&(j.leadingZeros=e,ob(i.Name,e)),t.setPropPart(i,p[a],e),q=!1;break;case n.DurationFormat:j&&(j.timeFormat=e),k.setTimeFormat(e),t.setPropPart(i,p[a],e),pb(i.Name,e);break;case n.TimeFormat:j&&(j.timeFormat=e,mb(j,e,!1,!0),qb(y,j)),k.setTimeFormat(e),t.setPropPart(i,p[a],e),q=!1;break;case n.DateFormat:y[2]="automatic"===e.toLowerCase()?H:e,j&&(j.dateFormat=e,mb(j,e,!0,!1),qb(y,j)),k.setDateFormat(e),t.setPropPart(i,p[a],e),q=!1;break;case n.ShowDate:e=f?"true"===e?1:0:Number(e),j&&(j.showDate=e,nb(j,e),qb(y,j)),k.setShowDate(e),t.setPropPart(i,p[a],e),q=!1;break;case n.Alignment:e=f?PWC.HmiAC.DefaultAlignment[e]:Number(e),j&&(j.alignment=e),k.setAlignment(e),t.setPropPart(i,p[a],e);break;case n.ShowText:e=f?"true"===e?1:0:Number(e),j&&(j.showText=e),t.setPropPart(i,p[a],e),k.setShowText(e),8===k.columnSource&&lb(k);break;case n.ShowIcon:e=f?"true"===e?1:0:Number(e),j&&(j.showIcon=e),t.setPropPart(i,p[a],e),k.setShowIcon(e),8===k.columnSource&&lb(k);break;case n.ShowTitleText:e=f?"true"===e?1:0:Number(e),j&&(j.showTitleText=e),t.setPropPart(i,p[a],e),k.setShowTitleText(e);break;case n.Width:e=parseInt(e,10),j&&(j.lengthInChars=e,j.width=c*e+r),t.setPropPart(i,p[a],e),k.setLengthInChars(e),k.columnWidth=c*e+r;break;case n.UseAlarmColors:e=f?"true"===e?1:0:Number(e),t.setPropPart(i,p[a],e),k.setUseAlarmColors(e),j&&(b.addColumns(s),w=!0);break;case n.FlashingOn:x||("true"===e?(++G,e=1):(G>0&&--G,e=0),t.setPropPart(i,p[a],e),j.flashingType=j.flashingType?j.flashingType:PWC.Components.Grid.FlashingTypes.Standard,j.flashing=e,k.setFlashing(e),k.setFlashingTypes(j.flashingType),d===PWC.HmiAC.DataSource.Online&&(G?Jb():Kb()));break;case n.ColumnFlashing:x||(e=f?PWC.Components.Grid.FlashingTypes[e]:Number(e),j&&(j.flashingType=e),k.setFlashingTypes(e));break;case n.Visible:e=f?"true"===e?1:0:Number(e),t.setPropPart(i,p[a],e),e||(t.setPropPart(i,p[n.Selected],e),k.setSelected(e)),k.setVisible(e),j&&(b.addColumns(s),v=!0);break;case n.DisplayName:j&&(j.displayName=e),t.setPropPart(i,p[a],e),k.setColumnHeader(e);break;default:q=!1}return f&&(x?ib("HitlistColumns."+(l+1),p[a],e):ib("AlarmColumns."+(l+1),p[a],e)),u.length>0&&!v&&!w&&b.setColumnInfo(u),q},lb=function(a){var c,d,e,f=b.getRowDataCollection(),g=f.length;for(c=0;g>c;c++)d=f[c],e=gb(d.COMMENTS),e.isNotEmptyString?a.showText&&a.showIcon?(b.updateColumn("columnDataType","image","Comment"),a.columnType="image",d.Comment=z.connection.getAppDir()+"content/Advanced/AlarmView/Comment.png|"+e.text):a.showText?(b.updateColumn("columnDataType","text","Comment"),d.Comment=e.text):a.showIcon&&(a.columnType="image",b.updateColumn("columnDataType","image","Comment"),d.Comment=z.connection.getAppDir()+"content/Advanced/AlarmView/Comment.png"):d.Comment=e.text;b.updateRowDataCollection(f)},mb=function(a,b,c,d){var e,f;c?(f=b,"automatic"===f.toLowerCase()&&(f=H),e="automatic"===a.timeFormat.toLowerCase()?I:a.timeFormat):d&&(e=b,"automatic"===e.toLowerCase()&&(e=I),f="automatic"===a.dateFormat.toLowerCase()?H:a.dateFormat),y[0]=e,y[1]=a.showDate?f:""},nb=function(a,b){var c,d;b?("automatic"===a.timeFormat.toLowerCase()?(d=I,y[0]=d):y[0]=a.timeFormat,"automatic"===a.dateFormat.toLowerCase()?(c=H,y[1]=c):y[1]=a.dateFormat):("automatic"===a.timeFormat.toLowerCase()?(d=I,y[0]=d):y[0]=a.timeFormat,y[1]=""),y[2]="automatic"===a.dateFormat.toLowerCase()?H:a.dateFormat},ob=function(a,c){var d=b.getRowDataCollection(),e=d.length,f=0;if(null!==d[f][a]){for(f;e>f;f++)d[f][a]=fb(parseInt(d[f][a],10),c);b.updateRowDataCollection(d)}},pb=function(a,c){var d,e=b.getRowDataCollection(),f=e.length,g=0,h=a.toUpperCase(),i=PWC.HmiAC.FormatDuration;if("automatic"===c.toLowerCase()?(c=B.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Duration").f,d=i.getAutomaticDurationFormat):d=i.getCustomDurationFormat,null!==e[g][a]){for(g;f>g;g++)e[g][a]="s"!==c?d(c,e[g][h]):e[g][h];b.updateRowDataCollection(e)}},qb=function(a,c){var d,e,f,g,i=b.getRowDataCollection(),j=i.length,k=[],l=[],m=a.slice(0);for(f=PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp,e=0;j>e;e++)g=i[e].MODIFICATIONTIME,d=new Date(f(g)),k=h(d,m),l=c.showDate?k[1]+" "+k[0]:k[0],i[e].Time=l,i[e].Date=k[1],l=null,m=a.slice(0);
b.updateRowDataCollection(i)},rb=function(a,b){var c,d=0,e=b.length;for(d;e>d;++d)if(b[d].DisplayName===a||b[d].displayName===a||b[d].header===a||b[d].columnHeader===a){c=b[d];break}return c},sb=function(a,c){var e,f,g,h,i,j,k=PWC.HmiAC.MessageListPropId,l=o.props.AlarmColumns.slice(0),m=l.length,n=PWC.HmiAC.MessageBlockPropId,p=Object.keys(n),r=b.getColumnCollection();switch(r||(r=ub(o.props.AlarmColumns)),parseInt(a,10)){case k.Edit:Rb(B.getText("TBID_AlgCtrl_TabNameLabel_MessageLists"));break;case k.MoveRight:case k.MoveAllRight:case k.MoveLeft:case k.MoveAllLeft:case k.Up:case k.Down:for(i=c[1].value,j=i.length,e=0;j>e;e++)for(f=0;m>f;f++)g=l[f],g.DisplayName===i[e]&&(h=g,t.setPropPart(h,p[PWC.HmiAC.MessageBlockPropId.Selected],1),t.setPropPart(h,p[PWC.HmiAC.MessageBlockPropId.Index],e+1),r[f].selected=1,r[f].index=e+1);for(i=c[2].value,j=i.length,e=0;j>e;e++)for(f=0;m>f;f++)g=l[f],g.DisplayName===i[e]&&(h=g,t.setPropPart(h,p[PWC.HmiAC.MessageBlockPropId.Selected],0),t.setPropPart(h,p[PWC.HmiAC.MessageBlockPropId.Index],m-j+e+1),r[f].selected=0,r[f].index=m-j+e+1);d!==PWC.HmiAC.DataSource.HitList?(b.addColumns(r),b.onPropertyChange(q)):b.setColumnCollection(r)}},tb=function(a,c){var e,f,g,h,i,j,k=PWC.HmiAC.HitListPropId,l=o.props.HitlistColumns?o.props.HitlistColumns.slice(0):[],m=l.length,n=PWC.HmiAC.MessageBlockPropId,p=Object.keys(n),r=b.getHitListColumnCollection();switch(r||(r=ub(l)),parseInt(a,10)){case k.Edit:Rb(B.getText("TBID_AlgCtrl_TabNameLabel_HitList"));break;case k.MoveRight:case k.MoveAllRight:case k.MoveLeft:case k.MoveAllLeft:case k.Up:case k.Down:for(i=c[1].value,j=i.length,e=0;j>e;e++)for(f=0;m>f;f++)g=r[f],(g.columnHeader===i[e]||g.DisplayName===i[e])&&(h=g,t.setPropPart(h,p[PWC.HmiAC.MessageBlockPropId.Selected],1),t.setPropPart(h,p[PWC.HmiAC.MessageBlockPropId.Index],e+1),r[f].selected=1,r[f].index=e+1);for(i=c[2].value,j=i.length,e=0;j>e;e++)for(f=0;m>f;f++)g=r[f],(g.columnHeader===i[e]||g.DisplayName===i[e])&&(h=g,t.setPropPart(h,p[PWC.HmiAC.MessageBlockPropId.Selected],0),t.setPropPart(h,p[PWC.HmiAC.MessageBlockPropId.Index],m-j+e+1),r[f].selected=0,r[f].index=m-j+e+1);d===PWC.HmiAC.DataSource.HitList?(b.addColumns(r),b.onPropertyChange(q)):b.setHitListColumnCollection(r);break;case k.Number:o.props.hitListMaxNumber=1e3;break;case k.WarningWhenMaxReached:o.props.hitListWarning=!0;break;case k.TimeRangeForStatistics1:o.props.TimeRangeForStatistics1=!0;break;case k.TimeRangeForStatistics2:o.props.TimeRangeForStatistics2=1;break;case k.TimeRangeForStatistics3:o.props.TimeRangeForStatistics3=0}},ub=function(a){var b,d,e=PWC.HmiAC.Column,f=[],g=a.length;for(d=0;g>d;d++)b=new e(a[d]),b.columnWidth=c*b.columnWidth+r,f.push(b);return f},vb=function(a,c,d){var e=new PWC.HmiAC.AlarmSortDialog(o,b);0!==c.length?e.getSortInput():c.clearSortFlag=!0,e.sortDialogCallback(a,c,d)},wb=function(a){var c,d,e,f=b.getColumnCollection(),h=b.getHitListColumnCollection(),i=!1,j=f.length,k=h.length;for(c=0;j>c;c++)if(f[c].columnHeader===a){e=f[c],i=!0;break}if(!i)for(d=0;k>d;d++)if(h[d].columnHeader===a){e=h[d];break}g=e},xb=function(a){var c,d,e,f,g,i,j,k,l=[],m=b.getColumnInfo(),n=[],o=[],p=[],q=[],r=m.length;for(c=0;r>c;c++)if("Time"===m[c].name||"Date"===m[c].name){for(l=b.getRowDataCollection(),g=l.length,h=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(a),e=""!==m[c].dateFormat?"automatic"===m[c].dateFormat.toLowerCase()?H:m[c].dateFormat:"",d=""!==m[c].timeFormat?"automatic"===m[c].timeFormat.toLowerCase()?I:m[c].timeFormat:"",n[0]=d,n[1]=e,o=n.slice(0),j=PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp,i=0;g>i;i++)k=l[i].MODIFICATIONTIME,f=new Date(j(k)),p=h(f,o),q=m[c].showDate?p[1]+" "+p[0]:p[0],l[i].Time=q,l[i].Date=p[1],q=null,o=n.slice(0);return l}},yb=function(){var a=new PWC.HmiAC.Selections(o.props.Filter);a.Initialize(),a=null},zb=function(a){var c=b.getColumnCollection();d=a,b.setAlarmDataSourceType(d),c.length>0&&b.addColumns(c),b.onPropertyChange()},Ab=function(){var a,e,f,g=PWC.HmiAC.Column,h=[],i=b.getHitListColumnCollection();if(d=PWC.HmiAC.DataSource.HitList,b.setAlarmDataSourceType(d),i)b.addColumns(i);else{for(i=t.getProp(o,"HitlistColumns"),f=i.length,a=0;f>a;a++)e=new g(i[a]),e.columnWidth=c*e.columnWidth+r,h.push(e);h.length>0&&b.addColumns(h)}b.onPropertyChange()},Bb=function(a){u.check(o,C.HitList,!0),u.enable(o,C.AutoScroll,!1),u.check(o,C.AutoScroll,!1),sc(!0),u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1),u.enable(o,C.ShowDisplayOptionsDialog,!1),b.clearGridSelection(),b.clearDataSelection(),a&&(u.check(o,C.MessageList,!1),u.check(o,C.LongTermArchive,!1),u.check(o,C.ShortTermArchive,!1),u.check(o,C.LockList,!1),u.check(o,C.HideList,!1)),b.pause(),Kb()},Cb=function(a){u.check(o,C.ShortTermArchive,!0),u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1),u.enable(o,C.ShowDisplayOptionsDialog,!0),d===PWC.HmiAC.DataSource.HitList?zb(PWC.HmiAC.DataSource.ShortArchive):d=PWC.HmiAC.DataSource.ShortArchive,b.setAlarmDataSourceType(d),Fb(),Kb(),b.clearGridSelection(),b.clearDataSelection(),b.setAutoScroll(!x._toggle),a&&(u.check(o,C.MessageList,!1),u.check(o,C.LongTermArchive,!1),u.check(o,C.HitList,!1),u.check(o,C.LockList,!1),u.check(o,C.HideList,!1))},Db=function(a){u.check(o,C.MessageList,!0),u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1),u.enable(o,C.ShowDisplayOptionsDialog,!0),d===PWC.HmiAC.DataSource.HitList?zb(PWC.HmiAC.DataSource.Online):d=PWC.HmiAC.DataSource.Online,b.setAlarmDataSourceType(d),Fb(),b.setAutoScroll(!x._toggle),a&&(u.check(o,C.ShortTermArchive,!1),u.check(o,C.LongTermArchive,!1),u.check(o,C.HitList,!1),u.check(o,C.LockList,!1),u.check(o,C.HideList,!1)),Jb()},Eb=function(a){var c,d,e,f,g=b.getSelectedIndices(),h=[],i=[],j=0,k=z.connection;if((void 0===g||0===g.length)&&(g=b.getVisibleIndicies()),f=g.length,f>0)for(e=0;f>e;e++)d=b.getRow(g[e]),void 0!==d&&(c=d.AlarmID,h[j]=k.getEventParamIDs().Value,i[j]=k.datatypesToGfxCHROMID(c),j++);0!==j&&z.connection.sendDomainLogicEvent(o.rtoid,a,h,i)},Fb=function(){sc(x._toggle),u.enable(o,C.AutoScroll,!0),u.check(o,C.AutoScroll,x._toggle)},Gb=function(a){u.check(o,C.LongTermArchive,!0),u.enable(o,C.AutoScroll,!1),u.check(o,C.AutoScroll,!1),sc(!0),u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1),u.enable(o,C.ShowDisplayOptionsDialog,!0),d===PWC.HmiAC.DataSource.HitList?zb(PWC.HmiAC.DataSource.LongArchive):d=PWC.HmiAC.DataSource.LongArchive,b.setAlarmDataSourceType(d),b.clearGridSelection(),b.clearDataSelection(),a&&(u.check(o,C.MessageList,!1),u.check(o,C.ShortTermArchive,!1),u.check(o,C.HitList,!1),u.check(o,C.LockList,!1),u.check(o,C.HideList,!1)),b.pause(),Kb()},Hb=function(a){u.check(o,C.HideList,!0),u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1),u.enable(o,C.ShowDisplayOptionsDialog,!1),d===PWC.HmiAC.DataSource.HitList?zb(PWC.HmiAC.DataSource.HiddenList):d=PWC.HmiAC.DataSource.HiddenList,b.setAlarmDataSourceType(d),b.setAutoScroll(!x._toggle),Fb(),b.clearGridSelection(),b.clearDataSelection(),a&&(u.check(o,C.MessageList,!1),u.check(o,C.ShortTermArchive,!1),u.check(o,C.LongTermArchive,!1),u.check(o,C.HitList,!1),u.check(o,C.LockList,!1)),Kb()},Ib=function(a){u.check(o,C.LockList,!0),u.enable(o,C.QuitSingle,!1),u.enable(o,C.QuitVisible,!1),u.enable(o,C.ShowDisplayOptionsDialog,!1),d===PWC.HmiAC.DataSource.HitList?zb(PWC.HmiAC.DataSource.LockList):d=PWC.HmiAC.DataSource.LockList,b.setAlarmDataSourceType(d),b.setAutoScroll(!x._toggle),Fb(),Kb(),b.clearGridSelection(),b.clearDataSelection(),a&&(u.check(o,C.MessageList,!1),u.check(o,C.ShortTermArchive,!1),u.check(o,C.LongTermArchive,!1),u.check(o,C.HitList,!1),u.check(o,C.HideList,!1))},Jb=function(){E&&!F&&G&&(z.flashing.setRemoveItemSpecificFlashing(o,!0,D.Medium),b.setFlashStatus(!0),F=!0)},Kb=function(){F&&(z.flashing.setRemoveItemSpecificFlashing(o,!1,D.Medium),b.setFlashStatus(!1),F=!1)},Lb=function(a,b){var c,d,e,f,g,h=document.getElementById("CommentDialog"),i=A.topLevelScreenWindow.getTopLevelScreenWindowDiv();Nb(a,b),h||(h=document.createElement("div"),h.setAttribute("id","CommentDialog"),h.setAttribute("height","286"),h.setAttribute("width","550")),f=PWC.Lib.HmiTypes.Utils.mkGuid(o,"HmiWindow"),c={Width:550,Height:286,ShowCaption:1,Caption:"Comment"},i.appendChild(h),e={name:"CommentDialog",eventHandler:Ob,sourceItem:o,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(o,"CommentDialog")},g=k.createContent(e),d=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",h,c),d.showModal(g)},Mb=function(a){var b=null,c=null;return 0===y.length?(y[0]=I,y[1]=H):""===y[1]&&(y[1]=y[2]),b=new Date(PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(a)),c=h(b,y.slice(0)),{time:c[0],date:c[1]}},Nb=function(a){var c,d,e,f,g,h={},i=[],j={},k=b.getRowDataCollection(),l=k[a];c="[empty]"===l.COMMENT?"":l.COMMENTS,M=c[0],j=Mb(l.MODIFICATIONTIME),d=j.date,e=j.time,f="[empty]"===l.COMMENT?"":l.USER,g="[empty]"===l.COMPUTER?"":l.COMPUTER,h={Number:l.Number,Date:d,Time:e,Author:f,Computer:g,Comments:c,SelectedRowIndex:a},o.commentObj=h,i.Number=B.getText("TBID_AlgCtrl_Number"),i.Date=B.getText("TBID_AlgCtrl_Date"),i.Time=B.getText("TBID_AlgCtrl_Time"),i.Author=B.getText("TBID_AlgCtrl_Author"),i.Computer=B.getText("TBID_AlgCtrl_Computer"),i.Comment=B.getText("TBID_AlgCtrl_Comment"),i.OK=B.getText("TBID_AlgCtrl_Ok"),i.Cancel=B.getText("TBID_AlgCtrl_Cancel"),o.commentDialogLabel=i},Ob=function(){var a=o.commentObj.SelectedRowIndex,c=z.connection;M.trim()!==o.commentObj.Comments[0]&&(c.sendDomainLogicEvent(o.rtoid,PWC.HmiAC.ControlEventID.Comment,[c.getEventParamIDs().Value,c.getEventParamIDs().Value],[c.datatypesToGfxCHROMID(b.getRow(a).AlarmID),o.commentObj.Comments[0]]),M="")},Pb=function(a,b){var c,d,e,f,g,h=document.getElementById("InfoDialog"),i=A.topLevelScreenWindow.getTopLevelScreenWindowDiv();Qb(a,b),h||(h=document.createElement("div"),h.setAttribute("id","InfoDialog"),h.setAttribute("height","370"),h.setAttribute("width","320")),f=PWC.Lib.HmiTypes.Utils.mkGuid(o,"HmiWindow"),c={Width:311,Height:370,ShowCaption:1,Caption:"Info Text"},i.appendChild(h),d=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",h,c),e={name:"InfoDialog",eventHandler:null,sourceItem:o,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(o,"InfoDialog")},g=k.createContent(e),d.showModal(g)},Qb=function(a){var c,d={},e=[],f=b.getRowDataCollection(),g=f[a];c="[empty]"===g.INFOTEXT?"":g.INFOTEXT,d={Number:g.INSTANCEID,InfoText:c},o.infoObj=d,e.Number=B.getText("TBID_AlgCtrl_Number"),e.Infotext=B.getText("TBID_AlgCtrl_InfoText"),e.Close=B.getText("TBID_AlgCtrl_Close"),o.infoDialogLabel=e},Rb=function(a){i=new PWC.HmiAC.AlarmSortDialog(o,b),i.getSortInput(a),i.initializeSortDialog(A,k)},Sb=function(){var a,b,c,d,e,f=A.topLevelScreenWindow.getTopLevelScreenWindowDiv();Tb(),a=document.createElement("div"),a.setAttribute("id","TimeBaseDialog"),a.setAttribute("height","145"),a.setAttribute("width","240"),f.appendChild(a),d={name:"TimeBaseDialog",eventHandler:Ub,sourceItem:o,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(o,"TimeBaseDialog")},e=k.createContent(d),c={Width:240,Height:145,ShowCaption:1,Caption:"Select Time Base"},b=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",a,c),b.showModal(e)},Tb=function(){var a={},b=[],c=PWC.HmiAC.TimeBase;c=f===c.LocalTimeZone||f===c.ProjectSetting?!c.LocalTimeZone:!c.UTC,a={TimeBase:c},o.timeBaseObj=a,b.dialogTitle=B.getText("TBID_AlgCtrl_TimeBase"),b.LocalTimeZone=B.getText("TBID_AlgCtrl_LocalTimeZone"),b.UTC=B.getText("TBID_AlgCtrl_UTC"),b.OK=B.getText("TBID_AlgCtrl_Ok"),b.Cancel=B.getText("TBID_AlgCtrl_Cancel"),o.timeBaseDialogLabel=b},Ub=function(a,c){var d,e,g=PWC.HmiAC.GeneralPropId,h=Object.keys(g)[g.TimeBase];e=c.length>0?"false"===c[c.length-1].updatedValue?1:0:f===PWC.HmiAC.TimeBase.UTC?PWC.HmiAC.TimeBase.UTC:PWC.HmiAC.TimeBase.LocalTimeZone,t.setProp(o,h,e),f=e,d=xb(e),d&&b.updateRowDataCollection(d),Vb()},Vb=function(){f===PWC.HmiAC.TimeBase.UTC?(PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.icon(o,PWC.HmiAC.StatusBarButtons.TimeBase,PWC.HmiAC.StatusBarIcons.TIMEBASE_UTC),PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.tooltip(o,PWC.HmiAC.StatusBarButtons.TimeBase,B.getText("TBID_AlgCtrl_UTC"))):(PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.icon(o,PWC.HmiAC.StatusBarButtons.TimeBase,PWC.HmiAC.StatusBarIcons.TIMEBASE_LOCAL),PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.tooltip(o,PWC.HmiAC.StatusBarButtons.TimeBase,B.getText("TBID_AlgCtrl_LocalTimeZone")))},Wb=function(){var a,b,c,d,e,f=A.topLevelScreenWindow.getTopLevelScreenWindowDiv();Xb(),b=document.createElement("div"),b.setAttribute("id","DisplayOptionsDialog"),b.setAttribute("height","180"),b.setAttribute("width","238px"),f.appendChild(b),c={Width:238,Height:180,ShowCaption:1,Caption:"Display Dialog"},d={name:"DisplayOptionsDialog",eventHandler:Yb,sourceItem:o,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(o,"DisplayOptionsDialog")},e=k.createContent(d),a=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",b,c),a.showModal(e)},Xb=function(){var a,b={},c=[],d=[];for(a in PWC.HmiAC.DisplayOptions)d.push(PWC.HmiAC.DisplayOptions[a]);b={DisplayOptions:d[q.suppressFilter],DisplayOptionsArray:d},o.displayOptionsObj=b,c.dialogTitle=B.getText("TBID_AlgCtrl_DisplayOptions"),c["All Messages"]=B.getText("TBID_AlgCtrl_AllMessages"),c["Only Displayed Messages"]=B.getText("TBID_AlgCtrl_DisplayedMessages"),c["Only Hidden Messages"]=B.getText("TBID_AlgCtrl_HiddenMessages"),c.OK=B.getText("TBID_AlgCtrl_Ok"),c.Cancel=B.getText("TBID_AlgCtrl_Cancel"),o.displayOptionsDialogLabel=c},Yb=function(a,b){b.length>0&&Zb(b[0].updatedValue,!0)},Zb=function(a,b){var c,d=PWC.HmiAC.DisplayOptions;if(b)switch(a){case d.DisplayedMessages:c=1;break;case d.HiddenMessages:c=2;break;default:c=0}else c=a;q.suppressFilter=c,b&&o.gfxWebLib.connection.sendPropertyByName(o.rtoid,"SuppressFilter",c,!0,!1)},$b=function(a){var b,c,d=o.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),e=document.createElement("div");void 0===a&&(a=ac,c=!0),e.setAttribute("id","warningDiv"),e.setAttribute("class","noselection"),d.appendChild(e),b={Caption:"Format",WindowMovingEnabled:!0,FrameCloseCallBack:bc,Height:160,Width:465},l=new PWC.Components.GenericDialog.Frame.HtmlDiv,l.createFrame(e,b),l.showModal(_b(c),a)},_b=function(a){var b,c,d,e,f,g,h;return g=document.createElement("div"),g.setAttribute("style","width:100%"),b=document.createElement("table"),b.setAttribute("style","padding-left: 27px; width:100%;"),e=document.createElement("img"),e.src=o.gfxWebLib.connection.getAppDir()+"content/Advanced/AlarmView/warning.png",c=document.createElement("tr"),d=document.createElement("td"),d.setAttribute("style","padding-top: 30px;"),d.appendChild(e),c.appendChild(d),d=document.createElement("td"),d.setAttribute("style","padding-top: 25px;"),d.appendChild(a?document.createTextNode(B.getText("TBID_AlgCtrl_HitList_Warning_Text")):document.createTextNode(B.getText("TBID_AlgCtrl_MessageBlock_Number_Format"))),c.appendChild(d),b.appendChild(c),g.appendChild(b),h=document.createElement("div"),h.setAttribute("style","width:100%; height:45px;padding-top:22px;background-color: #F2F2F2;"),f=document.createElement("input"),f.type="button",f.setAttribute("style","float:right;"),f.setAttribute("id","warningOkBtn"),f.value=B.getText("TBID_AlgCtrl_MessageBlock_OK"),h.appendChild(f),g.appendChild(h),g},ac=function(a){var b=a.target||a.srcElement||a.currentTarget;"warningOkBtn"===b.id&&l.close()},bc=function(){l.close()},cc=function(){var b,c,d,e,f,g,h,i,j,k,l,n=A.topLevelScreenWindow.getTopLevelScreenWindowDiv();b=document.createElement("div"),b.setAttribute("id","LockDialog"),b.setAttribute("height","350"),b.setAttribute("width","600"),g=document.createElement("div"),g.setAttribute("height","340"),g.setAttribute("width","590"),i=dc(B.getText("TBID_AlgCtrl_LockDialog_Lock")),i.setAttribute("disabled",!0),j=dc(B.getText("TBID_AlgCtrl_LockDialog_Unlock")),j.setAttribute("disabled",!0),k=dc(B.getText("TBID_AlgCtrl_LockDialog_Add")),k.setAttribute("disabled",!0),k.addEventListener("click",hc),l=dc(B.getText("TBID_AlgCtrl_LockDialog_Delete")),l.setAttribute("disabled",!0),l.addEventListener("click",lc),h=dc(B.getText("TBID_AlgCtrl_Ok")),h.addEventListener("click",oc),m=new PWC.Components.TagBrowser.LockDialogView(o,ec),m.initialize(a,g),g=m.createOuterDivs(g),g.appendChild(h),g.appendChild(l),g.appendChild(k),g.appendChild(j),g.appendChild(i),o._lockDialogView=m,m.assignInitialTreeData([B.getText("TBID_AlgCtrl_LockDialog_ParentNode")]),m.createLockDialogGrid(),m.createCommonElements(),n.appendChild(b),e={name:"LockDialog",eventHandler:ec,sourceItem:o,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(o,"LockDialog")},f=g,d={Width:600,Height:350,ShowCaption:1,Caption:"Set the Lock List Parameters"},c=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",b,d),c.showModal(f)},dc=function(a){var b=null;return b=document.createElement("input"),b.setAttribute("type","button"),b.setAttribute("value",a),b.setAttribute("class","lockButtons"),b.setAttribute("id",a+"Button"),b},ec=function(a,b,c){var d,e;void 0!==c&&(b===PWC.Components.TagBrowser.RequestType.TreeView||b===PWC.Components.TagBrowser.RequestType.ListView&&(d=document.getElementById("AddButton"),e=document.getElementById("DeleteButton"),d.disabled=!1,e.disabled=!1,fc()))},fc=function(){var a,c,e=PWC.HmiAC.ControlEventID.SetFilter,f=[],g=Y(),h=z.connection,i=[],j=[],k=[];if(d===PWC.HmiAC.DataSource.LockList){for(j=b.getRowDataCollection(),a=j.length,c=0;a>c;c++)k[c]=[parseInt(j[c].Number),j[c].Class];m.setLockedData(j,!0),m.createView({LockGridArray:k}),m.updateMessagesDiv()}else J=!0,i[0]=[PWC.HmiAC.DataSource.LockList,g],f[0]=h.getEventParamIDs().Value,h.sendDomainLogicEvent(o.rtoid,e,f,i)},gc=function(){var a=PWC.HmiAC.ControlEventID.SetFilter,b=[],c=Y(),e=z.connection,f=[];f[0]=[d,c],b[0]=e.getEventParamIDs().Value,e.sendDomainLogicEvent(o.rtoid,a,b,f)},hc=function(){var a,b,c,d,e,f=A.topLevelScreenWindow.getTopLevelScreenWindowDiv();ic(),b=document.createElement("div"),b.setAttribute("id","AddDialog"),b.setAttribute("style","height:150px ; width:285px ;"),f.appendChild(b),d={name:"AddDialog",eventHandler:jc,sourceItem:o,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(o,"AddDialog")},e=k.createContent(d),c={Width:285,Height:150,ShowCaption:1,Caption:"Message Number Input"},a=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",b,c),a.showModal(e)},ic=function(){var a=[];o.addDialogObj={MessageNumber:0},a.OK=B.getText("TBID_AlgCtrl_Ok"),a.Cancel=B.getText("TBID_AlgCtrl_Cancel"),a.Example=B.getText("TBID_AlgCtrl_AddDialog_Example"),a.Description=B.getText("TBID_AlgCtrl_AddDialog_Desc"),a.MessageNumber=B.getText("TBID_AlgCtrl_AddDialog_MessageNum"),a.dialogTitle=B.getText("TBID_AlgCtrl_AddDialog_dialogtitle"),o.addDialogLabel=a},jc=function(a,b){var c,d,e,f,g,h,i,j=[],k=[],l=[],n=PWC.HmiAC.ControlEventID,o=0,p=[];if(0!==b.length){for(c=b[0].updatedValue.split(","),c=c.filter(Boolean),d=0;d<c.length;d++)if(c[d].match(/-/))for(k=c[d].split("-"),g=Math.min(parseInt(k[0]),parseInt(k[1])),h=Math.max(parseInt(k[0]),parseInt(k[1])),e=g;h>=e;e++)l.push(e);else l.push(c[d]);l=kc(l),f=l.length}for(d=0;f>d;d++)i=mc(n.Lock,parseInt(l[d],10)),void 0!==i&&(j[o]=[parseInt(l[d],10),i.Class],p[o]=i,o++);m.setLockedData(p,!1),m.createView({LockGridArray:j}),m.updateMessagesDiv()},kc=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.indexOf(d)<0&&b.push(d)}return b},lc=function(){var a,b,c=m.getSelectedRowIndices(),d=PWC.HmiAC.ControlEventID;if(c)for(b=c.length,a=0;b>a;a++)nc(d.Unlock,parseInt(c[a],10));m.deleteGridRows(),m.updateMessagesDiv()},mc=function(a,c){var d,e,f=[],g=[],h=0,i=z.connection;return e=b.getMessageByNumber(c),void 0!==e&&(d=e.AlarmID,f[h]=i.getEventParamIDs().Value,g[h]=i.datatypesToGfxCHROMID(d),h++),0!==h&&z.connection.sendDomainLogicEvent(o.rtoid,a,f,g),e},nc=function(a,b){var c,d,e,f,g,h=[],i=[],j=0,k=z.connection,l=m.getLockGridData();for(e=m.getMessageNumber(b),g=l.length,f=0;g>f;f++)if(e===parseInt(l[f].Number)){d=l[f];break}void 0!==d&&(c=d.AlarmID,h[j]=k.getEventParamIDs().Value,i[j]=k.datatypesToGfxCHROMID(c),j++),0!==j&&z.connection.sendDomainLogicEvent(o.rtoid,a,h,i)},oc=function(){var a,b,c;a=o.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),b=document.getElementById("LockDialog"),c=document.getElementById("LockDialog_divModal"),a&&b&&(a.removeChild(b),c&&a.removeChild(c))},pc=function(a){var c=b.getRowDataCollection(),d=z.connection,e=c[a];d.sendDomainLogicEvent(o.rtoid,PWC.HmiAC.ControlEventID.LoopInAlarm,[d.getEventParamIDs().Value],[e.AlarmID])},qc=function(a){var b=a.rowSelection.length,c=a.selectedCellRowIndex;1===b&&(c=a.rowSelection[0]),tc(c,b)},rc=function(a,c){var d,e,f=PWC.HmiAC.ColumnNames,g=PWC.HmiAC.DoubleClickAction;if(null!==a)switch(e=b.getColumnInfo(),void 0===k&&(k=new PWC.Components.GenericDialog.Content.Angular),q.doubleClickAction){case g.ColumnDependent:null!==c&&(d=e[c].name,d===f.Infotext?Pb(a):d===f.Comment?Lb(a):d===f.LoopInAlarm&&pc(a));break;case g.LoopInAlarm:pc(a);break;case g.CommentDialog:Lb(a);break;case g.InfoTextDialog:Pb(a)}},sc=function(b){u.enable(a,C.MoveToFirst,b),u.enable(a,C.MoveToPrevious,b),u.enable(a,C.MoveToNext,b),u.enable(a,C.MoveToLast,b)},tc=function(a,c){var e,f;null!==a&&q.selectionType&&1===c?(e=b.getRowDataCollection(),f=e[a],f.INFOTEXT&&"[empty]"!==f.INFOTEXT?u.enable(o,C.ShowInfoTextDialog,!0):u.enable(o,C.ShowInfoTextDialog,!1),f.LOOPINALARM&&"[empty]"!==f.LOOPINALARM?u.enable(o,C.LoopInAlarm,!0):u.enable(o,C.LoopInAlarm,!1),u.enable(o,C.ShowCommentDialog,!0)):(u.enable(o,C.ShowInfoTextDialog,!1),u.enable(o,C.LoopInAlarm,!1),u.enable(o,C.ShowCommentDialog,!1)),d===PWC.HmiAC.DataSource.Online&&O(),P()};return{initialize:function(){var a,b;return null!==o&&(a=PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar,A.rootDiv=z.rootDiv,T(),d=t.getProp(o,"AlarmViewViewType"),e=t.getProp(o,"Filter"),f=t.getProp(o,"TimeBase"),h=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(f),x=PWC.Lib.HmiTypes.Advanced.findToolbarButtonByName(o,"AutoScroll"),x&&(x._toggle=x.Checked),sc(x._toggle),((b=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(o,"Date"))&&b.Visible||(b=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(o,"Time"))&&b.Visible)&&(o._TimeTimerId=window.setInterval(function(){var b,c,d,e,f=[];c=I,f.push(c),d=H,f.push(d),b=new Date,e=h(b,f),a.text(o,"Time",e[0]),a.text(o,"Date",e[1]),a.tooltip(o,"Time",e[0]),a.tooltip(o,"Date",e[1])},1e3)),p=U(),d===PWC.HmiAC.DataSource.Online?Db(!1):d===PWC.HmiAC.DataSource.ShortArchive?Cb(!1):d===PWC.HmiAC.DataSource.LongArchive?Gb(!1):d===PWC.HmiAC.DataSource.LockList?Ib(!1):d===PWC.HmiAC.DataSource.HitList?Bb(!1):Hb(!1),S()),p},reInitialize:function(a){if(a){var c,d;c=a.control.width,d=a.control.height,b.onPropertyChange({height:d,width:c}),x._toggle&&b.pause()}},initializeRowData:function(a){var c,e,f,g,h,i,j,k,l,n,p,q,r,t,u,w,x,y,z,A,B,C,D,G,H,I,K,L,M,O,P=[],Q=a.AttributeIDArray.length,R=a.SystemIDArray,T=!1,U=[],V=[],W=!1,X=[],Y=[],Z=[],$=0,_=[];if(Q===a.AttributeValuesArray.length)for(f=0;Q>f;f++){for(V=new PWC.HmiAC.Row,j=a.EventArray[f],e=new s,e.columnName="AlarmID",e.columnValue=j,P.push(e),h=a.AttributeIDArray[f],i=h.length,g=0;i>g;g++){switch(e=new s,c=cb(h[g]),e.columnName=c,e.columnValue=a.AttributeValuesArray[f][g],c){case"MODIFICATIONTIME":b.setDefaultSortColumn(c);break;case"Duration":e=new s,e.columnName="DURATION",e.columnValue=e.columnValue;break;case"INSTANCEID":k=e.columnValue;break;case"RETAIN":q=e.columnValue;break;case"SINGLEACKNOWLEDGEMENT":r=e.columnValue;break;case"STATEMACHINE":u=e.columnValue;break;case"STATE":w=e.columnValue;break;case"STATETEXT":x=e.columnValue;break;case"BACKCOLOR":G=v(e.columnValue);break;case"TEXTCOLOR":H=v(e.columnValue);break;case"PENDINGCOUNT":N.pending=e.columnValue;break;case"TOACKNOWLEDGECOUNT":N.toAcknowledge=e.columnValue;break;case"ACKNOWLEDGEMENTSTATE":y=e.columnValue;break;case"FLASHING":e.columnValue&&!E&&(E=!0);break;case"LOCKEDCOUNT":N.lockedCount=e.columnValue;break;case"HIDDENCOUNT":N.hiddenCount=e.columnValue}G&&H&&(e.columnName="style",e.columnValue={fill:G,forecolor:H},H=G=void 0),P.push(e)}for(U=eb(a.ColumnIDArray[f],a.ColumnValuesArray[f],w,x,y,k),z=U.length,t=0;z>t;t++)P.push(U[t]);if(V.columnDataCollection=P,J){if(I=V.columnDataCollection,Y=[],Z=[],I)for(L=I.length,K=0;L>K;++K)I[K]&&(Y[K]=I[K].columnName,Z[I[K].columnName]=I[K].columnValue);X[$]=Z,$++,W=!1}else if(d===PWC.HmiAC.DataSource.ShortArchive||d===PWC.HmiAC.DataSource.LongArchive)w!==PWC.HmiAC.AlarmState.Normal&&q&&(b.addRow(V,R[f]),W=!0);else if(B=b.searchRow("AlarmID",j),C=B.atcualIndices,D=B.originalIndices,C.length>0)for(A=0;A<C.length;A++)q&&w!==PWC.HmiAC.AlarmState.Normal&&w!==PWC.HmiAC.AlarmState.Removed?(b.updateRow(C[A],V,D[A]),W=!0):(b.removeRow(C[A],D[A]),W=!0);else w!==PWC.HmiAC.AlarmState.Normal&&q&&(b.addRow(V),W=!0);P=[],e=null,V=null,l=null,n=null,p=null}if(W&&(F||d!==PWC.HmiAC.DataSource.Online||Jb(),b.sortData(),T=b.renderRows(),o.props.hitListWarning)){var ab;ab>o.props.hitListMaxNumber&&$b()}if(S(),J){for(M=X.length,O=0;M>O;O++)0!==X[O].RETAIN&&(_[O]=[parseInt(X[O].Number),X[O].Class]);J=!1,m.setLockedData(X,!0),m.createView({LockGridArray:_}),m.updateMessagesDiv(),gc()}return T},isInitialNotification:function(a){var c,d,e=a.SystemErrorArray,f=!1,g=!1;if(e instanceof Array){for(d=e.length,c=0;d>c;c++)if(0!==e[c]){f=!0;break}}else 0!==e&&(f=!0);return f?a.InitialNotification&&(J||b.emptyGridData()):a.InitialNotification?(J||b.emptyGridData(),void 0!==a.AttributeIDArray&&(g=this.initializeRowData(a))):a.AttributeIDArray.length>0&&(g=this.initializeRowData(a)),g},emptyGridData:function(){b.emptyGridData()},onToolbarButton:function(a,c){var e,f,g,h,i,j,l,m,n=o.props.AlarmColumns,p=PWC.HmiAC.ControlEventID;switch(void 0===k&&(k=new PWC.Components.GenericDialog.Content.Angular),c){case C.MessageList:d!==PWC.HmiAC.DataSource.Online&&(Db(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.Online));break;case C.ShortTermArchive:d!==PWC.HmiAC.DataSource.ShortArchive&&(Cb(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.ShortArchive));break;case C.LongTermArchive:d!==PWC.HmiAC.DataSource.LongArchive&&(Gb(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.LongArchive));break;case C.HitList:d!==PWC.HmiAC.DataSource.HitList&&(Ab(),Bb(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.HitList));break;case C.LockList:d!==PWC.HmiAC.DataSource.LockList&&(Ib(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.LockList));break;case C.HideList:d!==PWC.HmiAC.DataSource.HiddenList&&(Hb(!0),hb("AlarmViewViewType",PWC.HmiAC.DataSource.HiddenList));break;case C.MoveToFirst:b.moveToFirst();break;case C.MoveToPrevious:b.moveToPrevious();break;case C.MoveToNext:b.moveToNext();break;case C.MoveToLast:b.moveToLast();break;case C.AutoScroll:e=0,x._toggle=!x._toggle,b.setSelectionMode(x._toggle),q.defaultSortOrder&&(e=b.getRowCount()-1),b.clearDataSelection(),x._toggle?(u.check(a,"AutoScroll",!0),b.sortData(),b.pause()):(u.check(a,"AutoScroll",!1),b.sortData(),b.resume(),P()),sc(x._toggle);break;case C.ShowSelectionDialog:yb();break;case C.QuitSingle:bb();break;case C.QuitVisible:_();break;case C.ShowSortDialog:m=B.getText(d===PWC.HmiAC.DataSource.HitList?"TBID_AlgCtrl_TabNameLabel_HitList":"TBID_AlgCtrl_TabNameLabel_MessageLists"),Rb(m);break;case C.ShowPropertyDialog:var r,s,t=document.getElementById("PropertyBrowser"),v=B.getText("TBID_AlgCtrl_PropertyBrowser");if(t)return;t=document.createElement("div"),t.setAttribute("id","PropertyBrowser"),r=A.topLevelScreenWindow.getTopLevelScreenWindowDiv(),t.setAttribute("height","500"),t.setAttribute("width","500"),n&&n.length>0&&(s=""===n[0].DisplayName||void 0===n[0].DisplayName?n[0].Name:n[0].DisplayName,wb(s)),r.appendChild(t),l=PWC.Lib.HmiTypes.Utils.mkGuid(a,"HmiWindow"),o.props.table=q,o.props.datasource=d,g={Width:511,Height:696,ShowCaption:1,Caption:v},i={name:"AlarmPropertyBrowser",eventHandler:null,sourceItem:o,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(o,"AlarmPropertyBrowser")},h=k.createContent(i),setTimeout(function(){j=r.getElementsByClassName("pwcPBTabs")[0],j&&new PWC.Components.GenericDialog.Content.TabView(j,{start:0})},100),f=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",t,g),f.showModal(h);break;case C.ShowInfoTextDialog:Pb(b.getSelectedRowIndex());break;case C.ShowCommentDialog:Lb(b.getSelectedRowIndex());break;case C.LoopInAlarm:pc(b.getSelectedRowIndex());break;case C.ShowTimeZoneDialog:Sb();break;case C.ShowDisplayOptionsDialog:Wb();break;case C.Lock:Eb(p.Lock);break;case C.Unlock:Eb(p.Unlock);break;case C.Hide:Eb(p.Hide);break;case C.Unhide:Eb(p.Unhide);break;case C.ShowLockDialog:cc()}},handleFlashing:function(){b.handleFlashing()},onCleanUp:function(){var a;o._TimeTimerId&&window.clearInterval(o._TimeTimerId),Kb(),b.gridCleanup(),b.removeEventListener("onSelection"),b.removeEventListener("onDoubleClick"),b.unSubScribeEvents(PWC.Components.Grid.ControlEvents.OnCellDoubleClick),b.unSubScribeEvents(PWC.Components.Grid.ControlEvents.OnRowHeaderDoubleClick),b.unSubScribeEvents(PWC.Components.Grid.ControlEvents.OnColumnResize),b.unSubScribeEvents(PWC.Components.Grid.ControlEvents.OnSortButtonClicked),b.onCleanUp(),a=A.topLevelScreenWindow.getTopLevelScreenWindowDiv(),i&&(i.cleanUp(),i=null),D=a=z=b=o=A=B=q=null},onUpdate:function(a,c,d,e,f){var g=PWC.HmiAC.AlarmElementId,h={},i=!1;switch(a){case g.General:i=jb(c,d,e,f);break;case g.Parameter:i=PWC.HmiAC.UpdateParameterTab.update(o,c,d,q,e,f);break;case g.MessageBlocks:i=kb(c,d,e);break;case g.MessageLists:sb(c,d);break;case g.HitList:tb(c,d);break;case g.Selection:i=PWC.HmiAC.UpdateSelectionTab.update(o,c,d,q,e,f),c===PWC.HmiAC.SelectionPropId.SelectionType&&b.setSelectionType(d);break;case g.StatusBar:PWC.HmiAC.UpdateStatusBarTab.update(d,!0,o),n=setTimeout(S,100);break;case g.ToolBar:PWC.HmiAC.UpdateToolBarTab.update(d,!1,o);break;case g.Font:case g.TitleFont:case g.StatusBarFont:h={connection:o.gfxWebLib.connection,rtoid:o.rtoid},i=PWC.HmiAC.UpdateFontTab.update(h,a,c,d,j,g,q,e);break;case g.Effects:i=PWC.HmiAC.UpdateEffectsTab.update(o,c,d,q,e,f)}return i},applySortData:vb,showWarningDialog:$b,closeWarningDialog:bc,getMessageBlockDetails:function(){return g},setMessageBlockDetails:function(a){return wb(a)},getHitListColumnCollection:function(){return b.getHitListColumnCollection()},onFocusOut:function(){},onFocus:function(){},onPropertyChange:function(){b.onPropertyChange()},OnServerChange:function(a,c){var d,e,f,g=PWC.HmiAC.AlarmElementId,h=!1;for(d in a)if(c)switch(e=c.split(":")[0].split(".")[0]){case"AlarmColumns":this.onUpdate(g.MessageBlocks,PWC.HmiAC.MessageBlockPropId[d],a[d]+","+c.split(".")[1],!1)&&(h=!0);break;case"TableFont":this.onUpdate(g.Font,PWC.HmiAC.FontPropId[d],a[d],!1)&&(h=!0);break;case"TitleFont":this.onUpdate(g.TitleFont,PWC.HmiAC.FontPropId[d],a[d],!1)&&(h=!0)}else void 0!==(f=PWC.HmiAC.GeneralPropId[d])?this.onUpdate(g.General,f,a[d],!1)&&(h=!0):void 0!==(f=PWC.HmiAC.EffectsPropId[d])?this.onUpdate(g.Effects,f,a[d],!1)&&(h=!0):void 0!==(f=PWC.HmiAC.SelectionPropId[d])?this.onUpdate(g.Selection,f,a[d],!1)&&(h=!0):void 0!==(f=PWC.HmiAC.ParameterPropId[d])&&this.onUpdate(g.Parameter,f,a[d],!1)&&(h=!0);h&&b.onPropertyChange()},onStatusbarElement:function(a){a===PWC.HmiAC.StatusBarButtons.TimeBase&&(void 0===k&&(k=new PWC.Components.GenericDialog.Content.Angular),Sb())},onServerState:function(a){var b=a.ServerStateArray,c=0,d=a.SystemIDArray,e=0,f=0,g="",h="",i=PWC.HmiAC.StatusBarIcons,j=i.CONNECTION_NONE,k="",l=d.length;for(c;l>c;c++)h=d[c].split("::")[0],1===b[c]?(f=K.indexOf(h),-1===f&&K.push(h),f=L.indexOf(h),f>-1&&L.splice(f,1)):(f=L.indexOf(h),-1===f&&L.push(h),f=K.indexOf(h),f>-1&&K.splice(f,1));if(l=K.length){for(c=0;l>c;c++)g+=K[c]+"\n";k=l+" "+B.getText("TBID_AlgCtrl_ServerConnectionEst")+"\n"+g}if(g="",e=L.length){for(c=0;e>c;c++)g+=L[c]+"\n";k+=e+" "+B.getText("TBID_AlgCtrl_ServerConnectionFailed")+"\n"+g}l>0&&e>0?j=i.CONNECTION_UNSPECIFIED:l>0&&0===e?j=i.CONNECTION_OK:0===l&&e>0&&(j=i.CONNECTION_FAIL),PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.tooltip(o,PWC.HmiAC.StatusBarButtons.ConnectionState,k),PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.icon(o,PWC.HmiAC.StatusBarButtons.ConnectionState,j)
}}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.AlarmState={Normal:0,Raised:1,RaisedCleared:2,RaisedAcknowledged:5,RaisedAcknowledgedCleared:6,RaisedClearedAcknowledged:7,SystemAcknowledged:8,Removed:128},PWC.HmiAC.StateMachine={undefined:0,Raise:1,RaiseClear:3,RaiseOptionalClearOrAcknowledgment:4,RaiseRequiresAcknowledgement:5,RaiseClearOptionalAcknowledgement:6,RaiseClearRequiresAcknowledgement:7,RaiseClearRequiresReset:11,RaiseClearOptionalAcknowledgementAndReset:14,RaiseClearRequiresAcknowledgementAndReset:15},PWC.HmiAC.InverseAlarmState={0:"Normal",1:"Raised",2:"RaisedCleared",5:"RaisedAcknowledged",6:"RaisedAcknowledgedCleared",7:"RaisedClearedAcknowledged",128:"Removed"},PWC.HmiAC.Equation={"=":"equal to",">":"greater than",">=":"greater than/equal to","<":"lesser than","<=":"lesser than/equal to"},PWC.HmiAC.AlarmAttributes={INSTANCEID:1,RAISETIME:2,ACKTIME:3,CLEARTIME:4,RESETTIME:5,STATE:6,TEXTCOLOR:7,BACKCOLOR:8,FLASHING:9,EVENTTEXT:10,SOURCETYPE:11,ALARMCLASS:12,STATEMACHINE:13,PRIORITY:14,ALARMPARAMETERVALUES:15,ALARMTEXT1:16,ALARMTEXT2:17,ALARMTEXT3:18,ALARMTEXT4:19,ALARMTEXT5:20,ALARMTEXT6:21,ALARMTEXT7:22,ALARMTEXT8:23,ALARMTEXT9:24,TIMESTAMP:25,SINGLEACKNOWLEDGEMENT:26,RETAIN:27,NAME:28,INFOTEXT:29,GROUP:30,ORIGIN:31,AREA:32,LOOPINALARM:33,SUPPRESSIONSTATE:34,MODIFICATIONTIME:35,COMMENTS:36,DURATION:37,ACKNOWLEDGEMENTSTATE:38,VALUE:39,VALUEQUALITY:40,VALUELIMIT:41,TAGNAME:42,COMPUTER:43,USER:44,STATETEXT:45,PENDINGCOUNT:46,TOACKNOWLEDGECOUNT:47,FREQUENCE:48,SUMCOMEGO:49,AVERAGECOMEGO:50,SUMCOMEQUIT1:51,AVERAGECOMEQUIT1:52,SUMCOMEQUIT2:53,AVERAGECOMEQUIT2:54,SUMCOMECOME:55,AVERAGECOMECOME:56,ENABLESTATE:57,CHANGEREASON:58,LOCKEDCOUNT:59,HIDDENCOUNT:60,INVALIDTIME:61},PWC.HmiAC.InverseAlarmAttributes={1:"INSTANCEID",2:"RAISETIME",3:"ACKTIME",4:"CLEARTIME",5:"RESETTIME",6:"STATE",7:"TEXTCOLOR",8:"BACKCOLOR",9:"FLASHING",10:"EVENTTEXT",11:"SOURCETYPE",12:"ALARMCLASS",13:"STATEMACHINE",14:"PRIORITY",15:"ALARMPARAMETERVALUES",16:"ALARMTEXT1",17:"ALARMTEXT2",18:"ALARMTEXT3",19:"ALARMTEXT4",20:"ALARMTEXT5",21:"ALARMTEXT6",22:"ALARMTEXT7",23:"ALARMTEXT8",24:"ALARMTEXT9",25:"TIMESTAMP",26:"SINGLEACKNOWLEDGEMENT",27:"RETAIN",28:"NAME",29:"INFOTEXT",30:"GROUP",31:"ORIGIN",32:"AREA",33:"LOOPINALARM",34:"SUPPRESSIONSTATE",35:"MODIFICATIONTIME",36:"COMMENTS",37:"DURATION",38:"ACKNOWLEDGEMENTSTATE",39:"VALUE",40:"VALUEQUALITY",41:"VALUELIMIT",42:"TAGNAME",43:"COMPUTER",44:"USER",45:"STATETEXT",46:"PENDINGCOUNT",47:"TOACKNOWLEDGECOUNT",48:"FREQUENCE",49:"SUMCOMEGO",50:"AVERAGECOMEGO",51:"SUMCOMEQUIT1",52:"AVERAGECOMEQUIT1",53:"SUMCOMEQUIT2",54:"AVERAGECOMEQUIT2",55:"SUMCOMECOME",56:"AVERAGECOMECOME",57:"ENABLESTATE",58:"CHANGEREASON",59:"LOCKEDCOUNT",60:"HIDDENCOUNT",61:"INVALIDTIME"},PWC.HmiAC.AlarmElementId={Effects:95,General:96,MessageBlocks:97,MessageLists:98,Selection:99,StatusBar:100,ToolBar:101,Font:102,TitleFont:103,StatusBarFont:104,Parameter:105,HitList:106},PWC.HmiAC.AlarmPbTabs={General:"General",MessageBlocks:"MessageBlocks",MessageLists:"MessageLists",HitList:"HitList"},PWC.HmiAC.ColumnToAttributeMap={State:"STATE",Quitstate:"ACKNOWLEDGEMENTSTATE",Class:"ALARMCLASS",Type:"ALARMCLASS",Priority:"PRIORITY",Infotext:"INFOTEXT",LoopInAlarm:"LOOPINALARM",Date:"MODIFICATIONTIME",Time:"MODIFICATIONTIME",Comment:"COMMENTS",Duration:"DURATION",Computername:"COMPUTER",Username:"USER"},PWC.HmiAC.ControlEventID={Unknown:0,SingleAcknowledgement:1,GroupAcknowledgement:2,SetFilter:3,AlarmViewEventID_Reset:4,Comment:5,LoopInAlarm:6,Lock:7,Unlock:8,Hide:9,Unhide:10},PWC.HmiAC.Flashing={None:0,Standard:1,ChangeBackgroundColor_TextColor:2,ChangeMessageColor_TableColor:3},PWC.HmiAC.DataSource={Online:0,ShortArchive:1,LongArchive:2,LockList:3,HitList:4,HiddenList:5},PWC.HmiAC.ColumnAlignment={0:"left",1:"center",2:"right",3:"justifytotablecontent"},PWC.HmiAC.SortOrder={Ascending:1,Descending:2},PWC.HmiAC.SortLevel={One:1,Two:2,Three:3,Four:4},PWC.HmiAC.RowAlignment={0:"left",1:"center",2:"right"},PWC.HmiAC.ActiveListUponOpenPicture={Message_list:0,Shortterm_Archivelist:1,Longterm_Archivelist:2,Lock_list:3,Hit_list:4,ListOfMessagesToBeHidden:5},PWC.HmiAC.InverseActiveListUponOpenPicture={MessageList:"Message_list",ShorttermArchivelist:"Shortterm_Archivelist",LongtermArchivelist:"Longterm_Archivelist",LockList:"Lock_list",HitList:"Hit_list",ListOfMessagesToBeHidden:"ListOfMessagesToBeHidden"},PWC.HmiAC.DefaultSorting={Ascending_Order:0,Descending_Order:1},PWC.HmiAC.ScrollMode={No:0,WhenNecessary:1,Always:2},PWC.HmiAC.DefaultAlignment={Left:0,Center:1,Right:2},PWC.HmiAC.AlignmentForColumnRowTitle={Left:"left",Center:"center",Right:"right",JustifyToTableContent:"justifytotablecontent"},PWC.HmiAC.LEVELS={One:1,Two:2,Three:3,Four:4},PWC.HmiAC.MessageListPropId={Edit:0,MoveRight:1,MoveAllRight:2,MoveLeft:3,MoveAllLeft:4,Up:5,Down:6,AlarmSlectedColumns:7,AlarmAvailableColumns:8},PWC.HmiAC.GeneralPropId={TimeBase:0,AlarmViewViewType:1,AutoScroll:2,DefaultSortOrder:3,HorizontalScrollbarMode:4,VerticalScrollbarMode:5,UseAlarmColors:6,WindowMovingEnabled:7,WindowCloseEnabled:8,WindowSizingEnabled:9,TitleBarText:10,TitleBarStyle:11,DoubleClickAction:12,SuppressFilter:13},PWC.HmiAC.MessageBlockPropId={ColumnNames:0,ObjectName:1,Label:2,Alignment:3,Width:4,ShowText:5,ShowTitleText:6,TimeFormat:7,DateFormat:8,ShowDate:9,UseAlarmColors:10,FlashingOn:11,ColumnFlashing:12,Visible:13,Selected:14,Index:15,ShowIcon:16,DurationFormat:17,DecimalPrecision:18,AutoDecimalPrecision:19,ExponentialFormat:20,LeadingZeros:21,Digits:22,DisplayName:23},PWC.HmiAC.MessageListButton={MoveLeft:"<",MoveAllLeft:"<<",MoveRight:">",MoveAllRight:">>",MoveUp:"Up",MoveDown:"Down",SelectedColumnName:"selectedColumnName",AvailableColumnName:"availableColumnName",Sorting:"Edit..."},PWC.HmiAC.DoubleClickAction={None:0,LoopInAlarm:1,CommentDialog:2,InfoTextDialog:3,ColumnDependent:4},PWC.HmiAC.ToolBarButtons={MessageList:"MessageList",ShortTermArchive:"ShortTermArchive",LongTermArchive:"LongTermArchive",MoveToFirst:"MoveToFirst",MoveToPrevious:"MoveToPrevious",MoveToNext:"MoveToNext",MoveToLast:"MoveToLast",AutoScroll:"AutoScroll",ShowSelectionDialog:"ShowSelectionDialog",QuitSingle:"QuitSingle",QuitVisible:"QuitVisible",ShowSortDialog:"ShowSortDialog",ShowPropertyDialog:"ShowPropertyDialog",ShowInfoTextDialog:"ShowInfoTextDialog",ShowCommentDialog:"ShowCommentDialog",LoopInAlarm:"LoopInAlarm",ShowHelp:"ShowHelp",LockList:"LockList",HitList:"HitList",HideList:"HideList",QuitHorn:"QuitHorn",ShowQuitResetDialog:"ShowQuitResetDialog",ShowDisplayOptionsDialog:"ShowDisplayOptionsDialog",ShowLockDialog:"ShowLockDialog",Print:"Print",ShowExportDialog:"ShowExportDialog",Lock:"Lock",Unlock:"Unlock",Hide:"Hide",Unhide:"Unhide",ShowTimeZoneDialog:"ShowTimeZoneDialog",CopyRows:"CopyRows",ShowAttachDBDialog:"ShowAttachDBDialog",DetachDBDialog:"DetachDBDialog"},PWC.HmiAC.StatusBarButtons={TimeBase:"TimeBase",ConnectionState:"ConnectionState"},PWC.HmiAC.StatusBarIcons={NONE:0,SELECTION:1,DISPLAYOPTIONS:2,LOCKEDALARMS:3,HIDDENALARMS:4,CONNECTION_OK:5,CONNECTION_FAIL:6,TIMEBASE_LOCAL:7,TIMEBASE_UTC:8,CONNECTION_UNSPECIFIED:9,CONNECTION_NONE:10},PWC.HmiAC.ColumnNames={LoopInAlarm:"LoopInAlarm",Comment:"Comment",Infotext:"Infotext",State:"State",Quitstate:"Quitstate",Duration:"Duration",Date:"Date",Time:"Time",Number:"Number",Priority:"Priority",Frequence:"Frequence",AverageComeGo:"AverageComeGo",AverageComeQuit1:"AverageComeQuit1",AverageComeQuit2:"AverageComeQuit2",AverageComeCome:"AverageComeCome",SumComeGo:"SumComeGo",SumComeQuit1:"SumComeQuit1",SumComeQuit2:"SumComeQuit2",SumComeCome:"SumComeCome"},PWC.HmiAC.DurationFormat={Automatic:"Automatic",d_H_mm_ss:"d H:mm:ss",H_mm_ss:"H:mm:ss",m_ss:"m:ss",s:"s"},PWC.HmiAC.HitListPropId={Edit:0,MoveRight:1,MoveAllRight:2,MoveLeft:3,MoveAllLeft:4,Up:5,Down:6,AlarmSlectedColumns:7,AlarmAvailableColumns:8,Number:9,WarningWhenMaxReached:10,TimeRangeForStatistics1:11,TimeRangeForStatistics2:12,TimeRangeForStatistics3:13},PWC.HmiAC.TimeRangeForStatistics={Minute:"Minute",Hour:"Hour",Day:"Day",Week:"Week",Month:"Month"},PWC.HmiAC.ShowMessages={AllMessages:"All messages",DisplayedMessages:"Only displayed messages",HiddenMessages:"Only hidden messages"},PWC.HmiAC.DisplayOptions={AllMessages:"allMsgs",DisplayedMessages:"displayedMsgs",HiddenMessages:"hiddenMsgs"},PWC.HmiAC.TimeRange={Minute:"Minute",Hour:"Hour",Day:"Day"},PWC.HmiAC.LockDialogColumns={Number:"Number",ClassType:"Class/Type"},PWC.HmiAC.Notifications={OnAlarm:0,OnServerState:2,OnRefreshComplete:3};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.AlarmPropertySet=function(a){this.AlarmGeneralProperties={AlarmViewTimeBase:a.getText("TBID_AlgCtrl_General_TimeBase"),AlarmViewActiveListUponOpenPicture:a.getText("TBID_AlgCtrl_General_ActiveListUponOpenPicture"),AlarmViewAutoScroll:a.getText("TBID_AlgCtrl_General_AutoScroll"),AlarmViewDefaultSorting:a.getText("TBID_AlgCtrl_General_DefaultSorting"),AlarmViewHorizontalScrollbarMode:a.getText("TBID_AlgCtrl_General_ColumnScrollbar"),AlarmViewVerticalScrollbarMode:a.getText("TBID_AlgCtrl_General_RowScrollbar"),AlarmViewShowMessageColors:a.getText("TBID_AlgCtrl_General_ShowMessageColors"),AlarmViewWindowTitle:a.getText("TBID_AlgCtrl_General_WindowTitle"),AlarmViewText:a.getText("TBID_AlgCtrl_General_Text"),AlarmViewMovable:a.getText("TBID_AlgCtrl_General_Movable"),AlarmViewClosable:a.getText("TBID_AlgCtrl_General_Closable"),AlarmViewSizable:a.getText("TBID_AlgCtrl_General_Sizable"),AlarmViewDoubleClickAction:a.getText("TBID_AlgCtrl_General_DoubleClickAction"),AlarmViewShowMessages:a.getText("TBID_AlgCtrl_General_ShowMessages"),AlarmViewLableWindow:a.getText("TBID_AlgCtrl_General_Lable_Window"),AlarmViewLableWindowTitle:a.getText("TBID_AlgCtrl_General_Lable_WindowTitle"),AlarmViewLableText:a.getText("TBID_AlgCtrl_General_Lable_Text"),AlarmViewLableStyle:a.getText("TBID_AlgCtrl_General_Lable_Style"),AlarmViewLableMovable:a.getText("TBID_AlgCtrl_General_Lable_Movable"),AlarmViewLableClosable:a.getText("TBID_AlgCtrl_General_Lable_Closable"),AlarmViewLableSizable:a.getText("TBID_AlgCtrl_General_Lable_Sizable"),AlarmViewLableRowScrollbar:a.getText("TBID_AlgCtrl_General_Lable_RowScrollbar"),AlarmViewLableColumnScrollbar:a.getText("TBID_AlgCtrl_General_Lable_ColumnScrollbar"),AlarmViewLablePrintJob:a.getText("TBID_AlgCtrl_General_Lable_PrintJob"),AlarmViewLableTimeBase:a.getText("TBID_AlgCtrl_General_Lable_TimeBase"),AlarmViewLableProperties:a.getText("TBID_AlgCtrl_General_Lable_Properties"),AlarmViewLableActiveListUponOpenPicture:a.getText("TBID_AlgCtrl_General_Lable_ActiveListUponOpenPicture"),AlarmViewLableServerSelection:a.getText("TBID_AlgCtrl_General_Lable_ServerSelection"),AlarmViewLableAllServers:a.getText("TBID_AlgCtrl_General_Lable_AllServers"),AlarmViewLableShowMessageColors:a.getText("TBID_AlgCtrl_General_Lable_ShowMessageColors"),AlarmViewLableAutoScroll:a.getText("TBID_AlgCtrl_General_Lable_AutoScroll"),AlarmViewLableDefaultSort:a.getText("TBID_AlgCtrl_General_Lable_DefaultSort"),AlarmViewLableDisplayOptions:a.getText("TBID_AlgCtrl_General_Lable_DisplayOptions"),AlarmViewLableShowMessages:a.getText("TBID_AlgCtrl_General_Lable_ShowMessages"),AlarmViewLablePaging:a.getText("TBID_AlgCtrl_General_Lable_Paging"),AlarmViewLableEnablePaging:a.getText("TBID_AlgCtrl_General_Lable_EnablePaging"),AlarmViewLableMessagesPerPage:a.getText("TBID_AlgCtrl_General_Lable_MessagesPerPage"),AlarmViewLableDoubleClickAction:a.getText("TBID_AlgCtrl_General_Lable_DoubleClickAction"),AlarmViewLableGeneral:a.getText("TBID_AlgCtrl_TabNameLabel_General"),AlarmViewLableParameter:a.getText("TBID_AlgCtrl_TabNameLabel_Parameter"),AlarmViewLableMessageBlocks:a.getText("TBID_AlgCtrl_TabNameLabel_MessageBlocks"),AlarmViewLableMessageLists:a.getText("TBID_AlgCtrl_TabNameLabel_MessageLists"),AlarmViewLableEffects:a.getText("TBID_AlgCtrl_TabNameLabel_Effects"),AlarmViewLableFont:a.getText("TBID_AlgCtrl_TabNameLabel_Font"),AlarmViewLableSelection:a.getText("TBID_AlgCtrl_TabNameLabel_Selection"),AlarmViewLableToolBar:a.getText("TBID_AlgCtrl_TabNameLabel_ToolBar"),AlarmViewLableStatusBar:a.getText("TBID_AlgCtrl_TabNameLabel_StatusBar"),AlarmViewLableHitList:a.getText("TBID_AlgCtrl_TabNameLabel_HitList")},this.AlarmMessageBlocks={AlarmViewColumnNames:a.getText("TBID_AlgCtrl_MessageBlock_ColumnNames"),AlarmViewObjectName:a.getText("TBID_AlgCtrl_MessageBlock_ObjectName"),AlarmViewLabel:a.getText("TBID_AlgCtrl_MessageBlock_Label"),AlarmViewAlignment:a.getText("TBID_AlgCtrl_MessageBlock_MessageBlockAlignment"),AlarmViewLengthInChars:a.getText("TBID_AlgCtrl_MessageBlock_LengthInChars"),AlarmViewContentAsText:a.getText("TBID_AlgCtrl_MessageBlock_ContentAsText"),AlarmViewTitleAsText:a.getText("TBID_AlgCtrl_MessageBlock_TitleAsText"),AlarmViewTimeFormat:a.getText("TBID_AlgCtrl_MessageBlock_TimeFormat"),AlarmViewDateFormat:a.getText("TBID_AlgCtrl_MessageBlock_DateFormat"),AlarmViewShowDate:a.getText("TBID_AlgCtrl_MessageBlock_ShowDate"),AlarmViewShowMessageColors:a.getText("TBID_AlgCtrl_MessageBlock_ShowMessageColors"),AlarmViewFlashingOn:a.getText("TBID_AlgCtrl_MessageBlock_FlashingOn"),AlarmViewFlashingTypes:a.getText("TBID_AlgCtrl_MessageBlock_FlashingTypes"),AlarmViewVisible:a.getText("TBID_AlgCtrl_MessageBlock_Visible"),AlarmViewDurationFormat:a.getText("TBID_AlgCtrl_MessageBlock_DurationFormat"),AlarmViewNumberWithLeadingZeros:a.getText("TBID_AlgCtrl_MessageBlock_NumberWithLeadingZeros"),AlarmViewNoOfDigits:a.getText("TBID_AlgCtrl_MessageBlock_NoOfDigits"),AlarmViewDecimalPlaces:a.getText("TBID_AlgCtrl_MessageBlock_DecimalPlaces"),AlarmViewExponentialNotation:a.getText("TBID_AlgCtrl_MessageBlock_ExponentialNotation"),AlarmViewAutomaticDecimalPlaces:a.getText("TBID_AlgCtrl_MessageBlock_AutomaticDecimalPlaces"),AlarmViewLableAvailableMessageBlocks:a.getText("TBID_AlgCtrl_MessageBlock_Label_AvailableMessageBlocks"),AlarmViewLableDisplay:a.getText("TBID_AlgCtrl_MessageBlock_Label_Display"),AlarmViewLableContentAsText:a.getText("TBID_AlgCtrl_MessageBlock_Label_ContentAsText"),AlarmViewLableContentAsIcon:a.getText("TBID_AlgCtrl_MessageBlock_Label_ContentAsIcon"),AlarmViewLableTitleAsText:a.getText("TBID_AlgCtrl_MessageBlock_Label_TitleAsText"),AlarmViewLableTitleAsIcon:a.getText("TBID_AlgCtrl_MessageBlock_Label_TitleAsIcon"),AlarmViewLableObjectName:a.getText("TBID_AlgCtrl_MessageBlock_Label_ObjectName"),AlarmViewLableLabel:a.getText("TBID_AlgCtrl_MessageBlock_Label_Label"),AlarmViewLableTextID:a.getText("TBID_AlgCtrl_MessageBlock_Label_TextID"),AlarmViewLableAlignment:a.getText("TBID_AlgCtrl_MessageBlock_Label_Alignment"),AlarmViewLableLengthInChars:a.getText("TBID_AlgCtrl_MessageBlock_Label_LengthInChars"),AlarmViewLableShowMessageColors:a.getText("TBID_AlgCtrl_MessageBlock_Label_ShowMessageColors"),AlarmViewLableSelectableInSelectionDialog:a.getText("TBID_AlgCtrl_MessageBlock_Label_SelectableInSelectionDialog"),AlarmViewLableFlashingOn:a.getText("TBID_AlgCtrl_MessageBlock_Label_FlashingOn"),AlarmViewLableFormat:a.getText("TBID_AlgCtrl_MessageBlock_Label_Format"),AlarmViewLableTimeFormat:a.getText("TBID_AlgCtrl_MessageBlock_Label_TimeFormat"),AlarmViewLableDateFormat:a.getText("TBID_AlgCtrl_MessageBlock_Label_DateFormat"),AlarmViewLableShowDate:a.getText("TBID_AlgCtrl_MessageBlock_Label_ShowDate"),AlarmViewLableApplyProjectSetting:a.getText("TBID_AlgCtrl_MessageBlock_Label_ApplyProjectSetting"),AlarmViewLableDurationFormat:a.getText("TBID_AlgCtrl_MessageBlock_Label_DurationFormat"),AlarmViewLableNumberWithLeadingZeros:a.getText("TBID_AlgCtrl_MessageBlock_Label_NumberWithLeadingZeros"),AlarmViewLableNoOfDigits:a.getText("TBID_AlgCtrl_MessageBlock_Label_NoOfDigits"),AlarmViewLableDecimalPlaces:a.getText("TBID_AlgCtrl_MessageBlock_Label_DecimalPlaces"),AlarmViewLableExponentialNotation:a.getText("TBID_AlgCtrl_MessageBlock_Label_ExponentialNotation"),AlarmViewLableAutomaticDecimalPlaces:a.getText("TBID_AlgCtrl_MessageBlock_Label_AutomaticDecimalPlaces"),AlarmViewLableNoFormat:a.getText("TBID_AlgCtrl_MessageBlock_Label_NoFormat")},this.AlarmMessageLists={Edit:a.getText("TBID_AlgCtrl_MessageList_Edit"),AlarmSlectedColumns:a.getText("TBID_AlgCtrl_MessageList_AlarmSlectedColumns"),AlarmAvailableColumns:a.getText("TBID_AlgCtrl_MessageList_AlarmAvailableColumns"),Up:a.getText("TBID_AlgCtrl_MessageList_Up"),Down:a.getText("TBID_AlgCtrl_MessageList_Down"),MoveLeft:a.getText("TBID_AlgCtrl_MessageList_MoveLeft"),MoveAllLeft:a.getText("TBID_AlgCtrl_MessageList_MoveAllLeft"),MoveRight:a.getText("TBID_AlgCtrl_MessageList_MoveRight"),MoveAllRight:a.getText("TBID_AlgCtrl_MessageList_MoveAllRight"),AlarmViewLableAvailableMessageBlocks:a.getText("TBID_AlgCtrl_MessageList_Label_AvailableMessageBlocks"),AlarmViewLableSelectedMessageBlocks:a.getText("TBID_AlgCtrl_MessageList_Label_SelectedMessageBlocks"),AlarmViewLableSorting:a.getText("TBID_AlgCtrl_MessageList_Label_Sorting"),AlarmViewLableSelection:a.getText("TBID_AlgCtrl_MessageList_Label_Selection")},this.AlarmHitList={AlarmViewEdit:a.getText("TBID_AlgCtrl_HitList_Edit"),AlarmViewAlarmSlectedColumns:a.getText("TBID_AlgCtrl_HitList_AlarmSlectedColumns"),AlarmViewAlarmAvailableColumns:a.getText("TBID_AlgCtrl_HitList_AlarmAvailableColumns"),AlarmViewUp:a.getText("TBID_AlgCtrl_HitList_Up"),AlarmViewDown:a.getText("TBID_AlgCtrl_HitList_Down"),AlarmViewMoveLeft:a.getText("TBID_AlgCtrl_HitList_MoveLeft"),AlarmViewMoveAllLeft:a.getText("TBID_AlgCtrl_HitList_MoveAllLeft"),AlarmViewMoveRight:a.getText("TBID_AlgCtrl_HitList_MoveRight"),AlarmViewMoveAllRight:a.getText("TBID_AlgCtrl_HitList_MoveAllRight"),AlarmViewNumber:a.getText("TBID_AlgCtrl_HitList_Number"),AlarmViewWarningWhenMaximumReached:a.getText("TBID_AlgCtrl_HitList_WarningWhenMaximumReached"),AlarmViewTimeRangeForStatistics1:a.getText("TBID_AlgCtrl_HitList_TimeRangeForStatistics1"),AlarmViewTimeRangeForStatistics2:a.getText("TBID_AlgCtrl_HitList_TimeRangeForStatistics2"),AlarmViewTimeRangeForStatistics3:a.getText("TBID_AlgCtrl_HitList_TimeRangeForStatistics3"),AlarmViewLableAvailableMessageBlocks:a.getText("TBID_AlgCtrl_HitList_Label_AvailableMessageBlocks"),AlarmViewLableSelectedMessageBlocks:a.getText("TBID_AlgCtrl_HitList_Label_SelectedMessageBlocks"),AlarmViewLableSorting:a.getText("TBID_AlgCtrl_HitList_Label_Sorting"),AlarmViewLableSelection:a.getText("TBID_AlgCtrl_HitList_Label_Selection"),AlarmViewLableMaxDataRecordsForTheStatistics:a.getText("TBID_AlgCtrl_HitList_Label_MaxDataRecordsForTheStatistics"),AlarmViewLableNumber:a.getText("TBID_AlgCtrl_HitList_Label_Number"),AlarmViewLableWarningWhenMaximumReached:a.getText("TBID_AlgCtrl_HitList_Label_WarningWhenMaximumReached"),AlarmViewLableTimeRangeForStatistics:a.getText("TBID_AlgCtrl_HitList_Label_TimeRangeForStatistics"),AlarmViewLableUsedOnlyIfNoTimeRangeIsSpecifiedInTheSection:a.getText("TBID_AlgCtrl_HitList_Label_UsedOnlyIfNoTimeRangeIsSpecifiedInTheSection")}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.AlarmSortDialog=function(a,b){var c=a,d=b,e=c.gfxWebLib.textbib,f="(none)",g="(none)",h="(none)",i="(none)",j=PWC.HmiAC.SortOrder.Ascending,k=PWC.HmiAC.SortOrder.Ascending,l=PWC.HmiAC.SortOrder.Ascending,m=PWC.HmiAC.SortOrder.Ascending,n={},o=[],p=[],q=!1,r=function(a,b){var d,e,f,g,h,i,j=document.getElementById("AlarmSortDialog"),k=a.topLevelScreenWindow.getTopLevelScreenWindowDiv(),l=b;j||(j=document.createElement("div"),j.setAttribute("id","AlarmSortDialog"),j.setAttribute("height","370"),j.setAttribute("width","275")),f=PWC.Lib.HmiTypes.Utils.mkGuid(c,"HmiWindow"),g={Width:275,Height:370,Id:"SortDialogWindow",ShowCaption:1,Caption:"Sort",BorderEnabled:!0,WindowCloseEnabled:!0,WindowSizingEnabled:!1,WindowMovingEnabled:!0,WindowMaximizeEnabled:!1,ShowScrollBars:!1,FrameCloseCallBack:s},k.appendChild(j),e={name:"SortDialog",eventHandler:v,sourceItem:c,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(c,"SortDialog")},h=l.createContent(e),i=angular.element(h).scope(),d=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",j,g),d.showModal(h)},s=function(){var a,b=document.getElementById("PropertyBrowser");null!==b&&(a=PWC.Components.GenericDialog.Content.ObjectTypes.getHandler("AlarmPropertyBrowser"),a.setSortCancel(!0))},t=function(a){var b,q,r,s,t,v,w,x,y=[],z=[],A={};for(b=a===e.getText("TBID_AlgCtrl_TabNameLabel_HitList")?d.getHitListColumnCollection():d.getColumnCollection(),w=b.length,t=0;w>t;t++)b[t].visible&&b[t].selected&&y.push(b[t]);for(x=y.length,p[0]="(none)",u(),v=0;x>v;v++)if(p[v+1]=y[v].columnHeader,q=y[v].sortIndex,r=y[v].sortOrder,s=y[v].columnHeader,0!==q){switch(q){case PWC.HmiAC.LEVELS.One:A.Level=q,f=A.MessageBlockName=s,r===PWC.HmiAC.SortOrder.Ascending||void 0===r?(j=PWC.HmiAC.SortOrder.Ascending,A.SortCriteria=!0):r===PWC.HmiAC.SortOrder.Descending&&(j=PWC.HmiAC.SortOrder.Descending,A.SortCriteria=!1);break;case PWC.HmiAC.LEVELS.Two:A.Level=q,g=A.MessageBlockName=s,r===PWC.HmiAC.SortOrder.Ascending||void 0===r?(k=PWC.HmiAC.SortOrder.Ascending,A.SortCriteria=!0):r===PWC.HmiAC.SortOrder.Descending&&(k=PWC.HmiAC.SortOrder.Descending,A.SortCriteria=!1);break;case PWC.HmiAC.LEVELS.Three:A.Level=q,h=A.MessageBlockName=s,r===PWC.HmiAC.SortOrder.Ascending||void 0===r?(l=PWC.HmiAC.SortOrder.Ascending,A.SortCriteria=!0):r===PWC.HmiAC.SortOrder.Descending&&(l=PWC.HmiAC.SortOrder.Descending,A.SortCriteria=!1);break;case PWC.HmiAC.LEVELS.Four:A.Level=q,i=A.MessageBlockName=s,r===PWC.HmiAC.SortOrder.Ascending||void 0===r?(m=PWC.HmiAC.SortOrder.Ascending,A.SortCriteria=!0):r===PWC.HmiAC.SortOrder.Descending&&(m=PWC.HmiAC.SortOrder.Descending,A.SortCriteria=!1)}o[q]=A,A={}}n.columnNameCollection=p,n.sortlevelCollection=o,c.sortObj=n,z.dialogTitle=e.getText("TBID_AlgCtrl_Sort"),z.Level1=e.getText("TBID_AlgCtrl_SortLevel1"),z.Level2=e.getText("TBID_AlgCtrl_SortLevel2"),z.Level3=e.getText("TBID_AlgCtrl_SortLevel3"),z.Level4=e.getText("TBID_AlgCtrl_SortLevel4"),z.Ascending=e.getText("TBID_AlgCtrl_Ascending"),z.Descending=e.getText("TBID_AlgCtrl_Descending"),z.ClearSortCriteria=e.getText("TBID_AlgCtrl_ClearSortCriteria"),z.OK=e.getText("TBID_AlgCtrl_Ok"),z.Cancel=e.getText("TBID_AlgCtrl_Cancel"),c.sortDialogLabel=z},u=function(){var a,b={},c=4;for(a=1;c>=a;a++)b.Level=a,b.MessageBlockName="(none)",b.SortCriteria=!0,o[a]=b,b={}},v=function(a,b,r){var s,t,v,x,y,z,A=[],B=d.getAlarmDataSourceType(),C=!1,D=!1,E=!1,F=!1;for(B===PWC.HmiAC.DataSource.HitList&&(E=!0),r?(D=!0,r===e.getText("TBID_AlgCtrl_TabNameLabel_HitList")?(v=d.getHitListColumnCollection(),F=!0):v=d.getColumnCollection()):(C=!0,v=E?d.getHitListColumnCollection():d.getColumnCollection()),x=v.length,y=0;x>y;y++)v[y].visible&&v[y].selected&&A.push(v[y]);if(t=a.currentTarget?a.currentTarget.id:a.srcElement?a.srcElement.id:a.target.id,b.clearSortFlag&&(q=!0),"ClearSortcriteriaBtn"===t)return u(),n.columnNameCollection=p,n.sortlevelCollection=o,c.sortObj=n,f=g=h=i="(none)",j=k=l=m=PWC.HmiAC.SortOrder.Ascending,void(q=!0);for(s=0;s<b.length;s++)switch(b[s].elemId){case"sortLevel1":f=b[s].updatedValue;break;case"sortLevel2":g=b[s].updatedValue;break;case"sortLevel3":h=b[s].updatedValue;break;case"sortLevel4":i=b[s].updatedValue;break;case"sortLevel1RadioBtn1":b[s].updatedValue&&(j=PWC.HmiAC.SortOrder.Ascending);break;case"sortLevel1RadioBtn2":b[s].updatedValue&&(j=PWC.HmiAC.SortOrder.Descending);break;case"sortLevel2RadioBtn1":b[s].updatedValue&&(k=PWC.HmiAC.SortOrder.Ascending);break;case"sortLevel2RadioBtn2":b[s].updatedValue&&(k=PWC.HmiAC.SortOrder.Descending);break;case"sortLevel3RadioBtn1":b[s].updatedValue&&(l=PWC.HmiAC.SortOrder.Ascending);break;case"sortLevel3RadioBtn2":b[s].updatedValue&&(l=PWC.HmiAC.SortOrder.Descending);break;case"sortLevel4RadioBtn1":b[s].updatedValue&&(m=PWC.HmiAC.SortOrder.Ascending);break;case"sortLevel4RadioBtn2":b[s].updatedValue&&(m=PWC.HmiAC.SortOrder.Descending)}if(q&&"(none)"===f&&"(none)"===g&&"(none)"===h&&"(none)"===i){for(s=0;s<A.length;s++)A[s].setSortIndex(0),A[s].setSortOrder(0);q=!1}else w(A);if(C||D&&E===F){z=d.getColumnInfo();for(var G=0;G<A.length;G++)for(var H=0;H<z.length;H++)if(A[G].columnHeader===z[H].header){z[H].sortIndex=A[G].sortIndex,z[H].sortOrder=A[G].sortOrder;break}d.setColumnInfo(z),d.onPropertyChange(),d.sortData(),d.renderRows()}},w=function(a){var b,c=a,d=0;for(b=0;b<c.length;b++)c[b].sortIndex=0,c[b].sortOrder=0;"(none)"!==f&&(d++,x(c,f,d,j)),"(none)"!==g&&g!==f&&(d++,x(c,g,d,k)),"(none)"!==h&&h!==f&&h!==g&&(d++,x(c,h,d,l)),"(none)"!==i&&i!==f&&i!==g&&i!==h&&(d++,x(c,i,d,m))},x=function(a,b,c,d){for(var e=0;e<a.length;e++)if(a[e].columnHeader===b){a[e].setSortIndex(c),a[e].setSortOrder(d);break}};return{initializeSortDialog:r,getSortInput:t,sortDialogCallback:v}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.AddDialog=function(){var a=null,b=function(b,c,d){var e,f;return a=c,this.eventHandler=d,this.type="AddDialog",f={type:this.type,rtoid:b,appDir:c.gfxWebLib.connection.getAppDir(),parentDiv:c.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},e=this.prototype.createControl(f)},c=function(){return this.data={addDialogObj:a.addDialogObj,addDialogLabel:a.addDialogLabel},this.data},d=function(a,b){this.eventHandler(a,b)},e=function(){var b,c,d;b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById("AddDialog"),d=document.getElementById("AddDialog_divModal"),b&&c&&(b.removeChild(c),d&&b.removeChild(d),a=null)};return{create:b,getData:c,update:d,clean:e}}(),PWC.HmiAC.AddDialog.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.AddDialog,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("AddDialog",PWC.HmiAC.AddDialog)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.AlarmPropertyBrowser=function(){"use strict";var a,b,c,d,e,f,g,h,i=0,j=!1,k=null,l=null,m=!1,n=PWC.HmiAC.ControlType,o=PWC.HmiAC.AlarmElementId,p=!0,q=PWC.HmiAC.AlarmPbTabs,r=function(a,d,e,h){var i,j;return void 0===f&&(f=s("parentId name pId value controlType")),void 0===g&&(g=s("name pId value type")),a?(i=c.getConfig().get(d),j=b.get(d,a),new f(a,d,e,j,h)):new g(d,e,j,h)},s=function(a){function b(){for(c=0;e>c;c++)this[d[c]]=arguments[c]}var c,d=a.split(" "),e=d.length;return b},t=function(){var b=[],c=a.gfxWebLib.connection.getAppDir(),d="templates/commontabs/";return b=u(),b=b.concat(v()),b=b.concat(x()),b=b.concat(PWC.HmiAC.PopulateSelectionList.getList(o.Selection,e,h,c+d+"selection.html")),b=b.concat(PWC.HmiAC.PopulateStatusBarList.getList(o.StatusBar,h,a.props.Statusbar,c+d+"statusbar.html")),b=b.concat(PWC.HmiAC.PopulateToolBarList.getList(o.ToolBar,h,a.props.Toolbar,c+d+"toolbar.html")),b=b.concat(PWC.HmiAC.PopulateFontList.getList(o,a,c+d+"font.html")),b=b.concat(PWC.HmiAC.PopulateEffectsList.getList(o.Effects,e,h,c+d+"effects.html",{borderColor:a.props.BorderColor,borderWidth:a.props.BorderWidth})),b=b.concat(PWC.HmiAC.PopulateParameterList.getList(o.Parameter,e,h,c+d+"parameter.html")),b=b.concat(y())},u=function(){var a=PWC.HmiAC.GeneralPropId,b=o.General,c=d.AlarmGeneralProperties,e=[];return e.push(r(null,q.General,b,"complex")),e.push(r(b,c.AlarmViewTimeBase,a.TimeBase,n.Collection)),e.push(r(b,c.AlarmViewAutoScroll,a.AutoScroll,n.Bool)),e.push(r(b,c.AlarmViewDefaultSorting,a.DefaultSortOrder,n.Collection)),e.push(r(b,c.AlarmViewVerticalScrollbarMode,a.VerticalScrollbarMode,n.Collection)),e.push(r(b,c.AlarmViewHorizontalScrollbarMode,a.HorizontalScrollbarMode,n.Collection)),e.push(r(b,c.AlarmViewActiveListUponOpenPicture,a.AlarmViewViewType,n.Collection)),e.push(r(b,c.AlarmViewShowMessageColors,a.UseAlarmColors,n.Bool)),e.push(r(b,c.AlarmViewMovable,a.WindowMovingEnabled,n.Bool)),e.push(r(b,c.AlarmViewClosable,a.WindowCloseEnabled,n.Bool)),e.push(r(b,c.AlarmViewSizable,a.WindowSizingEnabled,n.Bool)),e.push(r(b,c.AlarmViewText,a.TitleBarText,n.Text)),e.push(r(b,c.AlarmViewWindowTitle,a.TitleBarStyle,n.Collection)),e.push(r(b,c.AlarmViewLableWindow)),e.push(r(b,c.AlarmViewLableWindowTitle)),e.push(r(b,c.AlarmViewLableText)),e.push(r(b,c.AlarmViewLableMovable)),e.push(r(b,c.AlarmViewLableClosable)),e.push(r(b,c.AlarmViewLableSizable)),e.push(r(b,c.AlarmViewLableStyle)),e.push(r(b,c.AlarmViewLableRowScrollbar)),e.push(r(b,c.AlarmViewLableColumnScrollbar)),e.push(r(b,c.AlarmViewLablePrintJob)),e.push(r(b,c.AlarmViewLableTimeBase)),e.push(r(b,c.AlarmViewLableProperties)),e.push(r(b,c.AlarmViewLableActiveListUponOpenPicture)),e.push(r(b,c.AlarmViewLableServerSelection)),e.push(r(b,c.AlarmViewLableAllServers)),e.push(r(b,c.AlarmViewLableShowMessageColors)),e.push(r(b,c.AlarmViewLableAutoScroll)),e.push(r(b,c.AlarmViewLableDefaultSort)),e.push(r(b,c.AlarmViewLableDisplayOptions)),e.push(r(b,c.AlarmViewLableShowMessages)),e.push(r(b,c.AlarmViewLablePaging)),e.push(r(b,c.AlarmViewLableEnablePaging)),e.push(r(b,c.AlarmViewLableMessagesPerPage)),e.push(r(b,c.AlarmViewLableDoubleClickAction)),e.push(r(b,c.AlarmViewDoubleClickAction,a.DoubleClickAction,n.Collection)),e.push(r(b,c.AlarmViewShowMessages,a.SuppressFilter,n.Collection)),e.push(r(b,c.AlarmViewLableGeneral,n.ReadOnly)),e.push(r(b,c.AlarmViewLableParameter,n.ReadOnly)),e.push(r(b,c.AlarmViewLableSelection,n.ReadOnly)),e.push(r(b,c.AlarmViewLableMessageBlocks,n.ReadOnly)),e.push(r(b,c.AlarmViewLableFont,n.ReadOnly)),e.push(r(b,c.AlarmViewLableMessageLists,n.ReadOnly)),e.push(r(b,c.AlarmViewLableStatusBar,n.ReadOnly)),e.push(r(b,c.AlarmViewLableToolBar,n.ReadOnly)),e.push(r(b,c.AlarmViewLableEffects,n.ReadOnly)),e.push(r(b,c.AlarmViewLableHitList)),e},v=function(){var b,c,e=[],f=PWC.HmiAC.MessageBlockPropId,g=o.MessageBlocks,h=d.AlarmMessageBlocks,i=[];for(i.push(r(null,q.MessageBlocks,g,"complex")),e=w(),c=e.length,b=0;c>b;b++)i.push(r(null,e[b].DisplayName,g,"subcomplex")),a.alarmControl.setMessageBlockDetails(e[b].DisplayName),i.push(r(g,h.AlarmViewColumnNames,f.ColumnNames,n.Collection)),i.push(r(g,h.AlarmViewObjectName,f.ObjectName,n.Text)),i.push(r(g,h.AlarmViewLabel,f.Label,n.Text)),i.push(r(g,h.AlarmViewAlignment,f.Alignment,n.Collection)),i.push(r(g,h.AlarmViewLengthInChars,f.Width,n.WInt)),i.push(r(g,h.AlarmViewContentAsText,f.ShowText,n.Bool)),i.push(r(g,h.AlarmViewTitleAsText,f.ShowTitleText,n.Bool)),i.push(r(g,h.AlarmViewTimeFormat,f.TimeFormat,n.Collection)),i.push(r(g,h.AlarmViewDateFormat,f.DateFormat,n.Collection)),i.push(r(g,h.AlarmViewShowDate,f.ShowDate,n.Bool)),i.push(r(g,h.AlarmViewShowMessageColors,f.UseAlarmColors,n.Bool)),i.push(r(g,h.AlarmViewFlashingOn,f.FlashingOn,n.Bool)),i.push(r(g,h.AlarmViewFlashingTypes,f.ColumnFlashing,n.Collection)),i.push(r(g,h.AlarmViewVisible,f.Visible,n.Bool)),i.push(r(g,h.AlarmViewLableContentAsIcon,f.ShowIcon,n.Bool)),i.push(r(g,h.AlarmViewTimeFormat,f.TimeFormat,n.Collection)),i.push(r(g,h.AlarmViewDateFormat,f.DateFormat,n.Collection)),i.push(r(g,h.AlarmViewDurationFormat,f.DurationFormat,n.Collection)),i.push(r(g,h.AlarmViewNumberWithLeadingZeros,f.LeadingZeros,n.WInt)),i.push(r(g,h.AlarmViewNoOfDigits,f.Digits,n.WInt)),i.push(r(g,h.AlarmViewExponentialNotation,f.ExponentialFormat,n.Bool)),i.push(r(g,h.AlarmViewAutomaticDecimalPlaces,f.AutoDecimalPrecision,n.Bool)),i.push(r(g,h.AlarmViewDecimalPlaces,f.DecimalPrecision,n.WInt));return i.push(r(null,null,null,"subcomplex")),i.push(r(g,h.AlarmViewLableAvailableMessageBlocks)),i.push(r(g,h.AlarmViewLableDisplay)),i.push(r(g,h.AlarmViewLableContentAsText)),i.push(r(g,h.AlarmViewLableContentAsIcon)),i.push(r(g,h.AlarmViewLableTitleAsText)),i.push(r(g,h.AlarmViewLableTitleAsIcon)),i.push(r(g,h.AlarmViewLableObjectName)),i.push(r(g,h.AlarmViewLableLabel)),i.push(r(g,h.AlarmViewLableTextID)),i.push(r(g,h.AlarmViewLableAlignment)),i.push(r(g,h.AlarmViewLableLengthInChars)),i.push(r(g,h.AlarmViewLableShowMessageColors)),i.push(r(g,h.AlarmViewLableSelectableInSelectionDialog)),i.push(r(g,h.AlarmViewLableFlashingOn)),i.push(r(g,h.AlarmViewLableFormat)),i.push(r(g,h.AlarmViewLableTimeFormat)),i.push(r(g,h.AlarmViewLableDateFormat)),i.push(r(g,h.AlarmViewLableShowDate)),i.push(r(g,h.AlarmViewLableApplyProjectSetting)),i.push(r(g,h.AlarmViewLableDurationFormat)),i.push(r(g,h.AlarmViewLableNumberWithLeadingZeros)),i.push(r(g,h.AlarmViewLableNoOfDigits)),i.push(r(g,h.AlarmViewLableDecimalPlaces)),i.push(r(g,h.AlarmViewLableExponentialNotation)),i.push(r(g,h.AlarmViewLableAutomaticDecimalPlaces)),i.push(r(g,h.AlarmViewLableNoFormat)),i
},w=function(){var b,c,d=a.props.AlarmColumns?a.props.AlarmColumns.slice(0):[],e=a.props.HitlistColumns?a.props.HitlistColumns.slice(0):[],f=!1,g=d.length,h=e.length;for(c=0;h>c;c++){for(f=!1,b=0;g>b;b++)if(d[b].Name===e[c].Name){f=!0;break}f||d.push(e[c])}return d},x=function(){var a=PWC.HmiAC.MessageListPropId,b=o.MessageLists,c=d.AlarmMessageLists,e=[];return e.push(r(null,q.MessageLists,b,"complex")),e.push(r(b,c.Edit,a.Edit,n.Toggle)),e.push(r(b,c.AlarmSlectedColumns,a.AlarmSlectedColumns,n.Collection)),e.push(r(b,c.AlarmAvailableColumns,a.AlarmAvailableColumns,n.Collection)),e.push(r(b,c.Up,a.Up,n.Toggle)),e.push(r(b,c.Down,a.Down,n.Toggle)),e.push(r(b,c.MoveLeft,a.MoveLeft,n.Toggle)),e.push(r(b,c.MoveAllLeft,a.MoveAllLeft,n.Toggle)),e.push(r(b,c.MoveRight,a.MoveRight,n.Toggle)),e.push(r(b,c.MoveAllRight,a.MoveAllRight,n.Toggle)),e.push(r(b,c.AlarmViewLableAvailableMessageBlocks)),e.push(r(b,c.AlarmViewLableSelectedMessageBlocks)),e.push(r(b,c.AlarmViewLableSorting)),e.push(r(b,c.AlarmViewLableSelection)),e},y=function(){var a=PWC.HmiAC.HitListPropId,b=[],c=o.HitList,e=d.AlarmHitList;return b.push(r(null,q.HitList,c,"complex")),b.push(r(c,e.AlarmViewEdit,a.Edit,n.Toggle)),b.push(r(c,e.AlarmViewAlarmSlectedColumns,a.AlarmSlectedColumns,n.Collection)),b.push(r(c,e.AlarmViewAlarmAvailableColumns,a.AlarmAvailableColumns,n.Collection)),b.push(r(c,e.AlarmViewUp,a.Up,n.Toggle)),b.push(r(c,e.AlarmViewDown,a.Down,n.Toggle)),b.push(r(c,e.AlarmViewMoveLeft,a.MoveLeft,n.Toggle)),b.push(r(c,e.AlarmViewMoveAllLeft,a.MoveAllLeft,n.Toggle)),b.push(r(c,e.AlarmViewMoveRight,a.MoveRight,n.Toggle)),b.push(r(c,e.AlarmViewMoveAllRight,a.MoveAllRight,n.Toggle)),b.push(r(c,e.AlarmViewNumber,a.Number,n.WInt)),b.push(r(c,e.AlarmViewWarningWhenMaximumReached,a.WarningWhenMaxReached,n.Bool)),b.push(r(c,e.AlarmViewTimeRangeForStatistics1,a.TimeRangeForStatistics1,n.Bool)),b.push(r(c,e.AlarmViewTimeRangeForStatistics2,a.TimeRangeForStatistics2,n.WInt)),b.push(r(c,e.AlarmViewTimeRangeForStatistics3,a.TimeRangeForStatistics3,n.Collection)),b.push(r(c,e.AlarmViewLableAvailableMessageBlocks)),b.push(r(c,e.AlarmViewLableSelectedMessageBlocks)),b.push(r(c,e.AlarmViewLableSorting)),b.push(r(c,e.AlarmViewLableSelection)),b.push(r(c,e.AlarmViewLableMaxDataRecordsForTheStatistics)),b.push(r(c,e.AlarmViewLableNumber)),b.push(r(c,e.AlarmViewLableWarningWhenMaximumReached)),b.push(r(c,e.AlarmViewLableTimeRangeForStatistics)),b.push(r(c,e.AlarmViewLableUsedOnlyIfNoTimeRangeIsSpecifiedInTheSection)),b},z=function(a,b){for(var c in a)if(c===b)return a[c]},A=function(b){var c=b.target||b.srcElement||b.currentTarget;"warningOkBtn"===c.id&&(p=!0,a.alarmControl.closeWarningDialog())},B=function(b,c){var d,e,f,g,h,i,n,o,q,r,s,t,u=PWC.HmiAC.AlarmElementId,v=!1,x=PWC.HmiAC.MessageBlockPropId,y=c.length,A=!1,B=PWC.HmiAC.FontPropId,F=!1,G=[],H=[];for(p=!0,b.target?(n=b.target.value,q=b.target.id):b.srcElement?(n=b.srcElement.defaultValue,q=b.srcElement.id):(n=b.currentTarget.defaultValue,q=b.currentTarget.id),i=y-1;i>=0;i--){if(g=c[i],h=g.elemId.split("-"),e=h.length>1?-1!==h[1].indexOf("_")?h[1]:parseInt(h[1],10):h,d=g.updatedValue,f=z(PWC.HmiAC.AlarmElementId,h[0].replace(" ","")),isNaN(e)&&-1!==e.indexOf("_")?(h=e.split("_"),e=h[0],o=parseInt(""===h[1]?0:h[1],10),f===u.StatusBar||f===u.ToolBar?isNaN(o)||(e=o+"-"+e):e=parseInt(e,10)):(o=0,e=parseInt(e,10)),u.MessageBlocks===f){if("string"==typeof d?v=C(d.trim())&&1===y:void 0===d&&(v=1===y),parseInt(this.data[1].subArray[this.data[1].selectedIndex].props[19].value,10)>12){"Message Blocks"!==q&&(D(),p=!1),b.stopPropagation(),v=!1;break}0===parseInt(d,10)&&e===x.Digits?(this.data[1].subArray[this.data[1].selectedIndex].props[18].value=!1,this.data[1].subArray[this.data[1].selectedIndex].props[19].value=0):e===x.LeadingZeros&&d===!0&&0===this.data[1].subArray[this.data[1].selectedIndex].props[19].value&&(d="false",this.data[1].subArray[this.data[1].selectedIndex].props[18].value=!1)}if(u.Font!==f&&u.TitleFont!==f||B.FontSize!==e||(s=parseInt(this.data[6].subArray[this.data[6].selectedIndex].props[3].value,10),1===y&&(0===s&&"OK"!==n?v=!0:0===s&&(v=!0))),u.MessageLists===f&&"Apply"!==n&&"OK"!==n){a.props.AlarmColumns&&this.modify(b,g,c),y=c.length,"Edit..."===n?(E(b,e,d,f,o),j=!1,v=!1):(0!==y||j||"Up"!==n&&"Down"!==n)&&(0!==y||j)?y>0&&j&&(v=!1):v=!0;break}if(u.HitList===f&&"Apply"!==n&&"OK"!==n){a.props.HitlistColumns&&this.modify(b,g,c),y=c.length,"Edit..."===n?(E(b,e,d,f,o),j=!1,v=!1):(0!==y||j||"Up"!==n&&"Down"!==n)&&(0!==y||j)?y>0&&j&&(v=!1):v=!0;break}if("Apply"===n||"OK"===n){if(this.data[2].selected1=null,this.data[2].selected2=null,null!==l)return c&&c.length>0&&(t=c[0].elemId.split("-")[0]),a.alarmControl.applySortData(l,k,t),l=k=null,m=!1,v=!0;if(m)return m=!1,v=!0;switch(f){case u.MessageBlocks:e===x.Visible&&this.onMsgBlockTabSwitch(d,o),H=w(),d+=","+H[o].DisplayName;break;case u.MessageLists:d=this.data[2].subArray[o].props;break;case u.HitList:d=this.data[9].subArray[o].props;break;case u.StatusBar:case u.ToolBar:G.push({Id:e,value:d}),A=!0;break;case u.General:e===PWC.HmiAC.GeneralPropId.UseAlarmColors?this.data[0].subArray[0].props[6].value=d:e===PWC.HmiAC.GeneralPropId.TitleBarText&&0===d&&(d="")}A||(r||(r={}),E(b,e,d,f,r)&&(F=!0)),j=!1,v=!0}}return A&&E(null,null,G,f),r&&(u.MessageBlocks!==f&&u.Font!==f&&u.TitleFont!==f&&u.StatusBarFont!==f&&a.gfxWebLib.connection.sendPropertiesByName(a.rtoid,r,!1,!1),F&&a.alarmControl.onPropertyChange()),v},C=function(b){var c=0,d=!1,e=a.props.AlarmColumns,f=e?e.length:0;for(c;f>c;c+=1)if(e[c].DisplayName===b){d=!0;break}return d},D=function(){a.alarmControl.showWarningDialog(A)},E=function(b,c,d,e,f){return a.alarmControl.onUpdate(e,c,d,!0,f)},F=function(b){var c,f,g,j=d.AlarmGeneralProperties,k=d.AlarmMessageBlocks,l=new PWC.HmiAC.ToolBarPropertySet(h),m=new PWC.HmiAC.FontPropertySet(h).FontProp,n=new PWC.HmiAC.ParameterPropertySet(h).ParameterProperties,o=new PWC.HmiAC.SelectionPropertySet(h).SelectionProps,p=d.AlarmHitList;switch(b){case j.AlarmViewVerticalScrollbarMode:c=e.verticalScrollbarMode;break;case j.AlarmViewHorizontalScrollbarMode:c=e.horizontalScrollbarMode;break;case j.AlarmViewTimeBase:c=a.props.TimeBase;break;case j.AlarmViewActiveListUponOpenPicture:c=a.props.datasource;break;case j.AlarmViewDefaultSorting:c=e.defaultSortOrder?0:1;break;case j.AlarmViewWindowTitle:c=a.props.TitleBarStyle;break;case j.AlarmViewShowMessages:c=e.suppressFilter;break;case n.ColumnTitleAlignment:c=e.columnTitleAlignment;break;case n.RowTitleAlignment:c=e.rowTitleAlignment;break;case n.SortByColumnHeader:c=e.sortMode;break;case n.MouseClickSort:c=e.sortSequence;break;case k.AlarmViewAlignment:f=a.alarmControl.getMessageBlockDetails(),c=void 0!==f?f.alignment:0;break;case k.AlarmViewTimeFormat:if(f=a.alarmControl.getMessageBlockDetails(),void 0!==f)switch(f.timeFormat){case PWC.HmiAC.TimeFormat.HH_mm_ss:c=1;break;case PWC.HmiAC.TimeFormat.HH_mm_ss_ms:c=2;break;case PWC.HmiAC.TimeFormat.hh_mm_ss__tt:c=3;break;case PWC.HmiAC.TimeFormat.hh_mm_ss_ms__tt:c=4;break;default:c=0}else c=0;break;case k.AlarmViewDateFormat:if(f=a.alarmControl.getMessageBlockDetails(),void 0!==f)switch(f.dateFormat){case PWC.HmiAC.DateFormat.dd_MM_yy_Dot:c=1;break;case PWC.HmiAC.DateFormat.dd_MM_yyyy_Dot:c=2;break;case PWC.HmiAC.DateFormat.dd_MM_yy_Slash:c=3;break;case PWC.HmiAC.DateFormat.dd_MM_yyyy_Slash:c=4;break;default:c=0}else c=0;break;case k.AlarmViewFlashingTypes:f=a.alarmControl.getMessageBlockDetails(),c=void 0!==f&&void 0!==f.flashingTypes?f.flashingTypes:0;break;case o.SelectableRows:c=e.selectionType;break;case o.SelectionBorder:c=e.selectionRect;break;case o.SelectionColorFor:c=e.selectionColoring;break;case o.selectionBorderColor:c=e.selectionRectColor;break;case o.SelectionBorderWidth:c=e.selectionRectWidth;break;case o.SelectedCellForeColor:c=e.selectedCellForeColor;break;case o.SelectedBackground:c=e.selectedCellColor;break;case o.SelectedRowForeColor:c=e.selectedRowForeColor;break;case o.SelectedRowBackgroundColor:c=e.selectedRowColor;break;case l.ToolBarProp.Alignment:c=parseInt(a.props.Toolbar.Alignment,10);break;case m.FontName:0===i?(c=Object.keys(PWC.HmiAC.FontType).indexOf(e.tableFontName),i++):1===i?(c=Object.keys(PWC.HmiAC.FontType).indexOf(a.props.Statusbar.Font.FontName),i++):2===i&&(c=Object.keys(PWC.HmiAC.FontType).indexOf(e.titleFontName),i++,i=0),(void 0===c||-1===c)&&(c=PWC.HmiAC.FontType.Tahoma);break;case m.FontSize:c=e.tableFontSize;break;case m.FontArray:c=1;break;case k.AlarmViewDurationFormat:if(f=a.alarmControl.getMessageBlockDetails(),g=PWC.HmiAC.DurationFormat,void 0!==f)switch(f.timeFormat){case g.d_H_mm_ss:c=1;break;case g.H_mm_ss:c=2;break;case g.m_ss:c=3;break;case g.s:c=4;break;default:c=0}else c=0;break;case j.AlarmViewDoubleClickAction:c=e.doubleClickAction;break;case p.AlarmViewTimeRangeForStatistics3:c=a.props.TimeRangeForStatistics3;break;default:c=null}return l=n=o=m=null,c},G=function(){var b,d,e,f,g,h,i,j,k,l,m,n=[],o={},p={},q=PWC.HmiAC.PropertyType;for(b=t(),d=b.length,e=0;d>e;++e)if(f=b[e].name,g=b[e].value,j=b[e].type,i=b[e].controlType,"complex"!==j)if("subcomplex"!==j){switch(l=c.getControlType(i)){case q.text:h=c.getRegex(i),k={id:b[e].pId,type:l,name:f,value:g,regex:h};break;case q.combobox:k={id:b[e].pId,type:l,name:f,value:g,regex:g[F(f)]};break;case q.checkbox:k={id:b[e].pId,type:l,name:f,value:g};break;default:k={id:b[e].pId,type:l,name:f,value:g,regex:null}}void 0===p.props&&(p.props=[]),p.props.push(k),k={}}else 0!==Object.keys(p).length&&(o.subArray.push(p),p={}),p.tabName=f,p.id=b[e].pId,p.props=[],p.index=m,o.id===PWC.HmiAC.AlarmElementId.MessageBlocks&&a.alarmControl.setMessageBlockDetails(f),m++;else 0!==Object.keys(p).length&&(o.subArray.push(p),p={}),0!==Object.keys(o).length&&(n.push(o),o={}),o.tabName=f,o.id=b[e].pId,o.selectedIndex=0,o.selectedIndex2=-2,o.arrayElement="",o.selected1="",o.selected2="",o.subArray=[],m=0;return 0!==Object.keys(p).length&&(o.subArray.push(p),p={}),0!==Object.keys(o).length&&(n.push(o),o={}),n};this.create=function(a,b,c){var d;return this.eventHandler=c?c:B,this.type="AlarmPropertyBrowser",this.init(b),d={type:this.type,rtoid:a,appDir:b.gfxWebLib.connection.getAppDir(),parentDiv:b.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},this.dialog=this.createControl(d),this.dialog},this.getData=function(){return this.data=G(),this.data},this.update=function(a,b){return this.eventHandler(a,b)},this.setSort=function(a,b){l=a,k=b},this.setSortCancel=function(a){m=a},this.onMsgBlockTabSwitch=function(b,c){if(a.props.AlarmColumns){var d,e,f,g,h=a.props.AlarmColumns[c].DisplayName,i=[],j=a.props.AlarmColumns.slice(0),k=j.length;for(d=0;k-1>d;d++)for(e=d+1;k>e;e++)j[d].Index>j[e].Index&&(g=j[d],j[d]=j[e],j[e]=g);for(d=0;k>d;d++)f=""===j[d].DisplayName||void 0===j[d].DisplayName?j[d].Name:j[d].DisplayName,h!==f&&void 0!==j[d].Visible&&!j[d].Visible||void 0!==j[d].Selected&&!j[d].Selected||!(h!==f||h===f&&b)||i.push(f);for(this.data[2].subArray[0].props[1].value=i,i=[],j=a.props.AlarmColumns.slice(0),d=0;k>d;d++)f=""===j[d].DisplayName||void 0===j[d].DisplayName?j[d].Name:j[d].DisplayName,h!==f&&void 0!==j[d].Visible&&!j[d].Visible||void 0===j[d].Selected||j[d].Selected||!(h!==f||h===f&&b)||i.push(f);this.data[2].subArray[0].props[2].value=i}},this.modify=function(b,c,d){var e,f,g,h,i,k,l,m,n,o=d.length,p=0,q=0,r=!1,s=PWC.HmiAC.MessageListButton,t=-1,u=[],v=a.props.AlarmColumns.slice(0),w=[],x=[],y=[],z=[],A=c.elemId,B=2;switch(-1!==A.indexOf("Hit")&&(B=9,v=a.props.HitlistColumns?a.props.HitlistColumns.slice(0):[]),c.updatedValue){case s.MoveLeft:if(i=this.data[B].subArray[0].props[1].value,e=this.data[B].subArray[0].props[2].value,t=this.data[B].selectedIndex2,z=this.data[B].selected2,null!=z){for(o=z.length,j=!0,p=i.length,g=0;o>g;g++)for(q=0;p>q;q++)if(i[q]===z[g]){e.push(i[q]);break}for(k=v.length,m=e.length,n=0,g=0;k>g;g++){for(l=""===v[g].DisplayName||void 0===v[g].DisplayName?v[g].Name:v[g].DisplayName,h=0;m>h;h++)if(l===e[h]){w.push(l),-1!==z.indexOf(l)&&x.push(l),n++;break}if(n===m)break}for(q=p-1;q>=0;q--)for(g=0;o>g;g++)if(z[g]===i[q]){i.splice(q,1);break}this.data[B].selected1=x,this.data[B].selected2=null,this.data[B].subArray[0].props[2].value=w,this.data[B].subArray[0].props[1].value=i}j||d.splice(d.indexOf(c.updatedValue),1);break;case s.MoveAllLeft:if(i=this.data[B].subArray[0].props[1].value,e=this.data[B].subArray[0].props[2].value,i.length>0){for(j=!0,z=i,e=e.concat(i),k=v.length,m=e.length,g=0;k>g;g++)for(l=""===v[g].DisplayName||void 0===v[g].DisplayName?v[g].Name:v[g].DisplayName,h=0;m>h;h++)if(l===e[h]){w.push(l),-1!==z.indexOf(l)&&x.push(l),n++;break}this.data[B].subArray[0].props[2].value=w,this.data[B].selected1=x,this.data[B].subArray[0].props[1].value=[]}j||d.splice(d.indexOf(c.updatedValue),1);break;case s.MoveRight:if(i=this.data[B].subArray[0].props[2].value,e=this.data[B].subArray[0].props[1].value,t=this.data[B].selectedIndex2,y=this.data[B].selected1,null!=y){for(o=y.length,j=!0,p=e.length,q=p;q>=0;q--)""===e[q]&&e.splice(q,1);for(p=i.length,q=p;q>=0;q--)""===i[q]&&i.splice(q,1);for(p=i.length,g=0;o>g;g++)for(q=0;p>q;q++)if(i[q]===y[g]){e.push(i[q]);break}for(p=i.length,q=p-1;q>=0;q--)for(g=0;o>g;g++)if(y[g]===i[q]){i.splice(q,1);break}this.data[B].selected2=y,this.data[B].selected1=null,this.data[B].subArray[0].props[2].value=i,this.data[B].subArray[0].props[1].value=e}j||d.splice(d.indexOf(c.updatedValue),1);break;case s.MoveAllRight:if(i=this.data[B].subArray[0].props[2].value,e=this.data[B].subArray[0].props[1].value,o=e.length,i.length>0){for(j=!0,o=e.length,q=o;q>=0;q--)""===e[q]&&e.splice(q,1);for(o=i.length,q=o;q>=0;q--)""===i[q]&&i.splice(q,1);e=e.concat(i),this.data[B].subArray[0].props[1].value=e,this.data[B].subArray[0].props[2].value=[],this.data[B].selected2=i}j||d.splice(d.indexOf(c.updatedValue),1);break;case s.MoveDown:if(e=this.data[B].subArray[0].props[1].value,t=this.data[B].selectedIndex2,z=this.data[B].selected2,null!=z){for(o=z.length,p=e.length,g=0;o>g;g++)for(q=0;p>q;q++)if(e[q]===z[g]){u.push(q);break}if(u.sort(function(a,b){return a-b}),r=u[o-1]-u[0]+1===o?!0:!1,u[o-1]<e.length-1){if(r)H(e,u[0],u[o-1]+1);else for(q=0;o>q;q++)f=e[u[q]+1],e[u[q]+1]=e[u[q]],e[u[q]]=f;j=!0}}j||d.splice(d.indexOf(c.updatedValue),1);break;case s.MoveUp:if(e=this.data[B].subArray[0].props[1].value,t=this.data[B].selectedIndex2,z=this.data[B].selected2,null!=z){for(o=z.length,p=e.length,g=0;o>g;g++)for(q=0;p>q;q++)if(e[q]===z[g]){u.push(q);break}if(u.sort(function(a,b){return a-b}),r=u[o-1]-u[0]+1===o?!0:!1,-1===u.indexOf(0)?!0:!1)if(j=!0,r)H(e,u[o-1],u[0]-1);else for(q=0;o>q;q++)f=e[u[q]-1],e[u[q]-1]=e[u[q]],e[u[q]]=f,u[q]=u[q]-1}j||d.splice(d.indexOf(c.updatedValue),1)}};var H=function(a,b,c){var d=a.splice(c,1)[0];a.splice(b,0,d)};this.clean=function(){var b,c,d;b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById("PropertyBrowser"),d=document.getElementById("PropertyBrowser_divModal"),b&&c&&p&&(b.removeChild(c),d&&b.removeChild(d))},this.init=function(b){a=b,c=this,e=a.props.table,h=a.gfxWebLib.textbib,d=new PWC.HmiAC.AlarmPropertySet(h)},this.getControlType=function(a){var b,c=PWC.HmiAC.PropertyType,d=PWC.HmiAC.ControlType;switch(a){case d.Bool:b=c.checkbox;break;case d.Color:b=c.color;break;case d.Collection:b=c.combobox;break;case d.Toggle:b=c.button;break;case d.ReadOnly:b=c.readonly;break;default:b=c.text}return b},this.getRegex=function(a){var b=null,c=PWC.HmiAC.ControlType;switch(a){case c.Int:b=/^[-+]?[0-9]*$/;break;case c.SInt:b=/^\+?[1-9]\d*$/;break;case c.WInt:b=/^\+?[0-9]\d*$/;break;case c.Float:b=/^[-+]?[0-9]*\.?[0-9]+$/;break;case c.FloatPositive:b=/^[0-9.]+$/}return b},this.getConfig=function(){return b||(b=new this.Config),b},this.Config=function(){var b=function(a,b){var d;switch(b){case o.General:d=c(a);break;case o.MessageBlocks:d=f(a);break;case o.MessageLists:d=g(a);break;case o.HitList:d=h(a)}return d},c=function(b){var c,f,g=[],h=d.AlarmGeneralProperties;switch(b){case h.AlarmViewShowMessageColors:c=e.useColumnColors;break;case h.AlarmViewVerticalScrollbarMode:case h.AlarmViewHorizontalScrollbarMode:for(f in PWC.HmiAC.ScrollMode)g.push(f);c=g;break;case h.AlarmViewTimeBase:for(f in PWC.HmiAC.TimeBase)g.push(f);c=g;break;case h.AlarmViewActiveListUponOpenPicture:for(f in PWC.HmiAC.ActiveListUponOpenPicture)g.push(f);c=g;break;case h.AlarmViewAutoScroll:c=PWC.Lib.HmiTypes.Advanced.findToolbarButtonByName(a,"AutoScroll").Checked?0:1;break;case h.AlarmViewDefaultSorting:for(f in PWC.HmiAC.DefaultSorting)g.push(f);c=g;break;case h.AlarmViewMovable:c=a.props.WindowMovingEnabled;break;case h.AlarmViewClosable:c=a.props.WindowCloseEnabled;break;case h.AlarmViewSizable:c=a.props.WindowSizingEnabled;break;case h.AlarmViewText:c=a.props.TitleBarText;break;case h.AlarmViewWindowTitle:for(f in PWC.HmiAC.WindowTitle)g.push(f);c=g;break;case h.AlarmViewDoubleClickAction:for(f in PWC.HmiAC.DoubleClickAction)g.push(f);c=g;break;case h.AlarmViewShowMessages:for(f in PWC.HmiAC.ShowMessages)g.push(f);c=g}return c},f=function(b){var c,e,f,g,h,i,j=a.props.AlarmColumns?a.alarmControl.getMessageBlockDetails():void 0,k=d.AlarmMessageBlocks,l=[],m=a.props.HitlistColumns?a.props.HitlistColumns:[];switch(b){case k.AlarmViewColumnNames:for(g=a.props.AlarmColumns?a.props.AlarmColumns:[],g.concat(m),f=g.length,e=0;f>e;e++)h=""===g[e].DisplayName||void 0===g[e].DisplayName?g[e].Name:g[e].DisplayName,-1===l.indexOf(h)&&l.push(h);c=l;break;case k.AlarmViewAlignment:if(void 0!==j)for(i in PWC.HmiAC.DefaultAlignment)l.push(i);c=l;break;case k.AlarmViewObjectName:void 0!==j&&(c=j.columnName);break;case k.AlarmViewLabel:void 0!==j&&(c=j.columnHeader);break;case k.AlarmViewLengthInChars:void 0!==j&&(c=j.lengthInChars);break;case k.AlarmViewContentAsText:void 0!==j&&(c=j.showText?!0:!1);break;case k.AlarmViewLableContentAsIcon:void 0!==j&&(c=j.showIcon?!0:!1);break;case k.AlarmViewTitleAsText:void 0!==j&&(c=j.showTitleText?!0:!1);break;case k.AlarmViewTimeFormat:if(void 0!==j)for(i in PWC.HmiAC.TimeFormat)l.push(PWC.HmiAC.TimeFormat[i]);c=l;break;case k.AlarmViewDateFormat:if(void 0!==j)for(i in PWC.HmiAC.DateFormat)l.push(PWC.HmiAC.DateFormat[i]);c=l;break;case k.AlarmViewShowDate:void 0!==j&&(c=j.showDate?!0:!1);break;case k.AlarmViewShowMessageColors:void 0!==j&&(c=j.useAlarmColors?!0:!1);break;case k.AlarmViewFlashingOn:void 0!==j&&(c=j.flash?!0:!1);break;case k.AlarmViewFlashingTypes:if(void 0!==j)for(i in PWC.Components.Grid.FlashingTypes)l.push(i);c=l;break;case k.AlarmViewVisible:void 0!==j&&(c=j.visible?!0:!1);break;case k.AlarmViewDurationFormat:if(void 0!==j)for(i in PWC.HmiAC.DurationFormat)l.push(PWC.HmiAC.DurationFormat[i]);c=l;break;case k.AlarmViewNumberWithLeadingZeros:void 0!==j&&(c=j.leadingZeros?!0:!1);break;case k.AlarmViewNoOfDigits:void 0!==j&&(c=j.leadingZeros);break;case k.AlarmViewExponentialNotation:void 0!==j&&(c=j.exponentialFormat);break;case k.AlarmViewAutomaticDecimalPlaces:void 0!==j&&(c=j.autoDecimalPrecision);break;case k.AlarmViewDecimalPlaces:void 0!==j&&(c=j.decimalPrecision)}return c},g=function(b){var c,e,f,g,h,i=[],j=a.props.AlarmColumns?a.props.AlarmColumns.slice(0):[],k=j.length,l=d.AlarmMessageLists;switch(b){case l.AlarmViewSorting:c="";break;case l.AlarmSlectedColumns:for(e=0;k-1>e;e++)for(f=e+1;k>f;f++)j[e].Index>j[f].Index&&(h=j[e],j[e]=j[f],j[f]=h);for(e=0;k>e;e++)g=""===j[e].DisplayName||void 0===j[e].DisplayName?j[e].Name:j[e].DisplayName,void 0!==j[e].Visible&&!j[e].Visible||void 0!==j[e].Selected&&!j[e].Selected||i.push(g);c=i;break;case l.AlarmAvailableColumns:for(e=0;k>e;e++)g=""===j[e].DisplayName||void 0===j[e].DisplayName?j[e].Name:j[e].DisplayName,void 0!==j[e].Visible&&!j[e].Visible||void 0===j[e].Selected||j[e].Selected||i.push(g);c=i}return c},h=function(b){var c,e,f,g,h,i,j,k,l,m=[],n=[],o=PWC.HmiAC.TimeRange,p=a.alarmControl.getHitListColumnCollection(),q=!0,r=d.AlarmHitList;switch(p||(p=a.props.HitlistColumns?a.props.HitlistColumns.slice(0):[],q=!1),b){case r.AlarmViewSorting:c="";break;case r.AlarmViewAlarmSlectedColumns:for(j=p.length,e=0;j-1>e;e++)for(f=e+1;j>f;f++)p[e].Index>p[f].Index&&(h=p[e],p[e]=p[f],p[f]=h);for(e=0;j>e;e++)q?(g=p[e].columnHeader,k=p[e].visible,l=p[e].selected):(g=""===p[e].DisplayName||void 0===p[e].DisplayName?p[e].Name:p[e].DisplayName,k=p[e].Visible,l=p[e].Selected),void 0!==k&&!k||void 0!==l&&!l||m.push(g);c=m;break;case r.AlarmViewAlarmAvailableColumns:for(j=p.length,e=0;j>e;e++)q?(g=p[e].columnHeader,k=p[e].visible,l=p[e].selected):(g=""===p[e].DisplayName||void 0===p[e].DisplayName?p[e].Name:p[e].DisplayName,k=p[e].Visible,l=p[e].Selected),void 0!==k&&!k||void 0===l||l||m.push(g);c=m;break;case r.AlarmViewNumber:c=a.props.hitListMaxNumber;break;case r.AlarmViewWarningWhenMaximumReached:c=a.props.hitListWarning;break;case r.AlarmViewTimeRangeForStatistics1:c=a.props.TimeRangeForStatistics1;break;case r.AlarmViewTimeRangeForStatistics2:c=a.props.TimeRangeForStatistics2;break;case r.AlarmViewTimeRangeForStatistics3:for(i in o)n.push(i);c=n}return c};return{get:b}}},PWC.HmiAC.AlarmPropertyBrowser.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.AlarmPropertyBrowser,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("AlarmPropertyBrowser",new PWC.HmiAC.AlarmPropertyBrowser)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.CommentDialog=function(){var a=null,b=function(b,c,d){var e,f;return a=c,this.eventHandler=d,this.type="CommentDialog",f={type:this.type,rtoid:b,appDir:c.gfxWebLib.connection.getAppDir(),parentDiv:c.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},e=this.prototype.createControl(f)},c=function(){return this.data={commentObj:a.commentObj,commentLabel:a.commentDialogLabel},this.data},d=function(a,b){this.eventHandler(a,b)},e=function(){var b,c,d;b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById("CommentDialog"),d=document.getElementById("CommentDialog_divModal"),b&&c&&(b.removeChild(c),d&&b.removeChild(d),a=null)};return{create:b,getData:c,update:d,clean:e}}(),PWC.HmiAC.CommentDialog.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.CommentDialog,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("CommentDialog",PWC.HmiAC.CommentDialog)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.DisplayOptionsDialog=function(){var a=null,b=function(b,c,d){var e,f;return a=c,this.eventHandler=d,this.type="DisplayOptionsDialog",f={type:this.type,rtoid:b,appDir:c.gfxWebLib.connection.getAppDir(),parentDiv:c.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},e=this.prototype.createControl(f)},c=function(){return this.data={displayOptionsObj:a.displayOptionsObj,displayOptionsLabel:a.displayOptionsDialogLabel},this.data},d=function(a,b){this.eventHandler(a,b)},e=function(){var b,c,d;b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById("DisplayOptionsDialog"),d=document.getElementById("DisplayOptionsDialog_divModal"),b&&c&&(b.removeChild(c),d&&b.removeChild(d),a=null)};return{create:b,getData:c,update:d,clean:e}}(),PWC.HmiAC.DisplayOptionsDialog.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.DisplayOptionsDialog,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("DisplayOptionsDialog",PWC.HmiAC.DisplayOptionsDialog)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.InfoDialog=function(){var a=null,b=function(b,c,d){var e,f;return a=c,this.eventHandler=d,this.type="InfoDialog",f={type:this.type,rtoid:b,appDir:c.gfxWebLib.connection.getAppDir(),parentDiv:c.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},e=this.prototype.createControl(f)},c=function(){return this.data={infoObj:a.infoObj,infoLabel:a.infoDialogLabel},this.data},d=function(a,b){this.eventHandler(a,b)},e=function(){var b,c,d;b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById("InfoDialog"),d=document.getElementById("InfoDialog_divModal"),b&&c&&(b.removeChild(c),d&&b.removeChild(d),a=null)};return{create:b,getData:c,update:d,clean:e}}(),PWC.HmiAC.InfoDialog.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.InfoDialog,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("InfoDialog",PWC.HmiAC.InfoDialog)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.LockDialog=function(){"use strict";var a=null,b=function(b,c,d){var e,f;return a=c,this.eventHandler=d,this.type="LockDialog",f={type:this.type,rtoid:b,appDir:c.gfxWebLib.connection.getAppDir(),parentDiv:c.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},e=this.prototype.createControl(f)},c=function(a,b){this.eventHandler(a,b)},d=function(){var b,c,d;b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById("LockDialog"),d=document.getElementById("LockDialog_divModal"),b&&c&&(b.removeChild(c),d&&b.removeChild(d),a=null)};return{create:b,update:c,clean:d}}(),PWC.HmiAC.LockDialog.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.LockDialog,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("LockDialog",PWC.HmiAC.LockDialog)}();var PWC=PWC||{};PWC.Components=PWC.Components||{},PWC.Components.LockDialog=PWC.Components.LockDialog||{},PWC.Components.LockDialog.LockDialogGridView=function(){"use strict";var a,b,c,d=[],e=[],f=PWC.Components.Grid,g=new f.GridModel,h=!1,i=!1,j=[],k=[],l=0,m=!0,n=2,o=5,p=new PWC.Components.Grid.SelectionInfo,q=function(b){var c,j,k,l,m=f.GridColumnModel,q=new f.IGridHost;for(r(g),j=g.width/n-o,e=[],d=[],d.push({Index:"0",Name:PWC.HmiAC.LockDialogColumns.Number,Width:j,ColType:f.ColumnDataType.Text,ShowIcon:!1}),d.push({Index:"1",Name:PWC.HmiAC.LockDialogColumns.ClassType,Width:j,ColType:f.ColumnDataType.Text,ShowIcon:!1}),k=d.length,l=0;k>l;l++)c=new m,c.alignment=f.HorizantalAlignment.Left,c.index=d[l].Index,c.displayName=d[l].Name,c.columnDataType=d[l].ColType,c.showIcon=d[l].ShowIcon,c.width=d[l].Width,e.push(c);return g.gridColumns=e,g.gridLineWidth=3,q.getCellData=s,q.onSelection=t,q.onSortButtonClicked=u,a=new f.GridControl(b.svgParent,"listView_Grid"),a.subscribeEvent(f.ControlEvents.OnColumnResize),a.subscribeEvent(f.ControlEvents.OnSortButtonClicked),a.setAutoScrollToLatest(!1),a.setAutoSelection(!1),h=a.init(g,q),a.setRecordLevelSelection(!0,p),i=!0,h},r=function(){g.left=0,g.top=0,g.columnTitles=!0,g.rowTitles=!1,g.height=215,g.width=345.6,g.useTableColor2=!1,g.verticalGridLines=!1,g.horizontalGridLines=!1,g.selectionType=f.SelectionType.Multi,g.selectionColoring=f.TableSelectionColoring.Cell,g.selectionRect=f.SelectionRect.None,g.columnTitleAlignment=f.HorizantalAlignment.Left,g.rowTitleAlignment=f.HorizantalAlignment.Left,g.gridLineWidth=1,g.shortenCellContent=!0,g.columnTitles=!0,g.borderWidth=0,g.titleFontSize=15,g.selectedRowColor="#ADD8E6",g.autoCompleteColumns=!0,g.autoCompleteRows=!1,g.columnResize=!0,g.sortMode=f.TableSortMode.ByClick,g.showSortIcon=!1,g.showSortIndex=!1,g.useSortKey=!1,g.horizontalScrollbarMode=f.ScrollBarMode.OnDemand,g.verticalScrollbarMode=f.ScrollBarMode.OnDemand,g.useSelectedTitleColor=!1},s=function(a,c){var d,e={};return e.style=null,(d=b.LockGridArray[a])&&d[c]&&(e.value=d[c]),e},t=function(a){j=a.rowSelection},u=function(a){l=a,m=!0,D()},v=function(){return j},w=function(){var a;a=document.getElementById("messagesDiv"),a.innerHTML="Locked Messages: "+b.LockGridArray.length,a.disabled=!1},x=function(a){var d,e,f;if(a){if(b)for(d=a.LockGridArray.length,c=b.LockGridArray.length,e=0;d>e;e++)f=y(a.LockGridArray[e]),f||(b.LockGridArray[c]=a.LockGridArray[e],c+=1);else b=a,c=a.LockGridArray.length;D()}},y=function(a){var c,d,e=b.LockGridArray.length;for(c=0;e>c;c++)if(b.LockGridArray[c][0]===a[0]){d=1;break}return d},z=function(){var d,e=j.length;for(j.sort(function(a,b){return b-a}),d=0;e>d;d++)b.LockGridArray.splice(j[d],1),k.splice(j[d],1);p.clearAll(),c=b.LockGridArray.length,a.load(c)},A=function(){return k},B=function(a,b){var c,d=k.length,e=a.length;for(m=b,c=0;e>c;c++)k[d]=a[c],d++},C=function(a){return b.LockGridArray[a][0]},D=function(){b&&(m&&E(),a.load(c),a.pause()),a.onPropertyChange(g)},E=function(){b.LockGridArray=b.LockGridArray.sort(function(a,b){return isNaN(a[l])||isNaN(b[l])?a[l]===b[l]?0:a[l].localeCompare(b[l]):a[l]!==b[l]?a[l]-b[l]:void 0})},F=function(){a.unLoad()};return{createLockDialogGrid:q,createLockDialogViews:x,deleteRows:z,detailView:D,defaultSort:E,unLoadGrid:F,getSelectedRowIndices:v,getLockGridData:A,setLockedData:B,getMessageNumber:C,updateMessagesDiv:w}};var PWC=PWC||{};PWC.Components=PWC.Components||{},PWC.Components.TagBrowser=PWC.Components.TagBrowser||{},PWC.Components.TagBrowser.LockDialogTreeView=function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n=b,o="\\",p=c,q=p+"content/Advanced/AlarmView/",r=function(a,b,c,d){var e,h,i,k,m,p,q,r;if(void 0!==b&&(e=b.target||b.srcElement),p=e.parentElement.children[e.parentElement.childElementCount-1].innerHTML,"SPAN"===e.nodeName)f&&f.removeAttribute("class"),k=c.getParentName(),f=e,g=void 0===k?p:k+o+p,e.setAttribute("class","nodeBackColor"),l=c,n(a,PWC.Components.TagBrowser.RequestType.ListView,g,c);else if("IMG"===e.nodeName)if(d){for(h=c.getChildren(),i=0;i<h.length;i++)c.destroyNode(h[i]);c.setChildren(),q=l.getParentName(),j=void 0,r=void 0!==c.getParentName()?c.getParentName()+o+p:p,q&&q.indexOf(r)>-1&&(m=e.parentNode.children[e.parentNode.childElementCount-1],m.removeAttribute("class"),m.setAttribute("class","nodeBackColor"),f=m,l=c,n(a,PWC.Components.TagBrowser.RequestType.ListView,r,c))}else k=c.getParentName(),g=void 0===k?p:k+o+p,l=c,n(a,PWC.Components.TagBrowser.RequestType.TreeView,g,c)},s=function(a,b){var c,d,e,j,n;for(c=0;c<a.length;c++)d=a[c],d.indexOf("|")>-1&&(n=d.split("|"),d=n[1],j=n[0]),j="localhost.png",e=new PWC.HmiAC.TreeNode(d,j,q,d.id),b.addNode(e),void 0===g&&(g=i),e.setParentName(g,!1),d===k&&(h.removeAttributes(),void 0!==l&&l.removeAttributes(),e.setNodeSelectionAttributes(),f=e.getSourceElement(),l=e,m=d);h=e,i=d},t=function(b){d=b,e=new PWC.HmiAC.TreeView(d,r,d.id),s(a,e),h.setNodeSelectionAttributes(),f=h.getSourceElement()};return{initializeTreeView:t}};var PWC=PWC||{};PWC.Components=PWC.Components||{},PWC.Components.TagBrowser=PWC.Components.TagBrowser||{},PWC.Components.TagBrowser.LockDialogView=function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=a,s=this,t=document.getElementById("lockDialog_Div"),u=PWC.Components.TagBrowser.BrowsingMode,v=PWC.Components.TagBrowser.ObjectType,w=PWC.Components.TagBrowser.SortingMode,x=PWC.Components.TagBrowser.RequestType,y=PWC.Components.TagBrowser.ObjectType,z=PWC.Components.TagBrowser.LanguageId,A=PWC.Components.TagBrowser.BrowsingRequestIds,B=PWC.Components.TagBrowser.ServerRequestParamIds,C=[],D=!1,E=!1,F="\\",G=b,H=5,I=20,J=function(a,b){switch(a){case PWC.Components.TagBrowser.EventTypes.DoubleClick:c.setDoubleClickSelectedNode(b),b=o+F+b,L(x.TreeView,o),L(x.ListView,b),o=b;break;case PWC.Components.TagBrowser.EventTypes.SingleClick:L(1,"","*")}},K=function(){var a,b;a=PWC.HmiAC.svgShape.CreateSvgElement,b=a("svg",{id:"widthSVGParent_"}),b.setAttribute("class","widthSVGParent"),b.setAttribute("style","float:left;"),e=a("line",{id:"widthSeperatorLine_",stroke:"grey","stroke-width":H+"px",appendTo:b}),PWC.HmiAC.svgShape.SetAttributes(e,{x1:"0",x2:"0",y1:"0",y2:j+I}),h.insertBefore(b,i)},L=function(a,b,c){var d,e=[],f=[];d=a===x.ListView?u.BrowseBoth:u.BrowseNode,void 0===c&&(c="*"),e=[B.GetObject,B.SystemID,B.ObjectType,B.SelectedNode,B.NameFilter,B.PropertyFilter,B.LanguageID,B.BrowsingMode,B.SortingMode,B.SortByAttribute],f=[A.ServerData,y.AnyTag,v.All,b,c,,z.English,d,w.Dsc,0],s.gfxWebLib.connection.sendDomainLogicEvent(s.screenItem.rtoid,a,e,f)},M=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1
};this.createCommonElements=function(){D||(D=!0,d.onclick=M,c=new PWC.Components.TagBrowser.LockDialogTreeView(C,G,r.gfxWebLib.connection.getAppDir()),c.initializeTreeView(d)),E||K()},this.panDeltaCoords={x:0,y:0},this.createOuterDivs=function(a){var b,c;return t=a,j=l-125,k=m-50,h=document.createElement("div"),h.setAttribute("id","body_Div"),h.setAttribute("class","body_Div"),h.setAttribute("style","height:"+(j+I)+"px ; width:"+k+"px ; margin-left: 32px;"),g=.35*k,d=document.createElement("div"),d.setAttribute("id","treeViewDiv"),d.setAttribute("class","treeViewDiv"),d.setAttribute("style","height:inherit; width:"+g+"px ;"),b=document.createElement("div"),b.setAttribute("id","serverDiv"),b.innerHTML="Server",b.setAttribute("style","width:inherit; height:20px ; background-color:lightgrey;"),d.appendChild(b),n=.64*k,c=document.createElement("div"),c.setAttribute("id","messagesDiv"),c.innerHTML="Locked Messages ",c.setAttribute("disabled",!0),c.setAttribute("style","width:"+n+"px ; height:20px ; background-color:lightgrey; float:right;"),i=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.setAttributeNS(null,"id","svgContainer"),i.setAttribute("style","height:"+j+"px ; width:"+n+"px ;"),h.appendChild(d),h.appendChild(c),h.appendChild(i),t.appendChild(h),t},this.Hammer=null,this.createView=function(a){q.createLockDialogViews(a)},this.deleteGridRows=function(){q.deleteRows()},this.getSelectedRowIndices=function(){return q.getSelectedRowIndices()},this.getLockGridData=function(){return q.getLockGridData()},this.setLockedData=function(a,b){q.setLockedData(a,b)},this.getMessageNumber=function(a){return q.getMessageNumber(a)},this.updateMessagesDiv=function(){q.updateMessagesDiv()},this.initialize=function(a,b){l=b.getAttribute("height"),m=b.getAttribute("width"),b.setAttribute("id","lockDialog_Div"),this.gfxWebLib=a.gfxWebLib,this.screenItem=a},this.assignInitialTreeData=function(a){C=a,o=a[0]},this.createLockDialogGrid=function(){q=new PWC.Components.LockDialog.LockDialogGridView(J),p=q.createLockDialogGrid({tagGridParent:f,svgParent:i})}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.SortDialog=function(){var a=null,b=function(b,c,d){var e,f;return a=c,this.eventHandler=d,this.type="SortDialog",f={type:this.type,rtoid:b,appDir:c.gfxWebLib.connection.getAppDir(),parentDiv:c.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},e=this.prototype.createControl(f)},c=function(){return this.data={sortObj:a.sortObj,sortLabel:a.sortDialogLabel},this.data},d=function(a,b){var c,d,e=document.getElementById("PropertyBrowser");return d=a.currentTarget?a.currentTarget.id:a.srcElement.id,null===e?this.eventHandler(a,b):(c=PWC.Components.GenericDialog.Content.ObjectTypes.getHandler("AlarmPropertyBrowser"),c.setSort(a,b),"ClearSortcriteriaBtn"===d?this.eventHandler(a,b):!0)},e=function(){var b,c,d,e,f=document.getElementById("PropertyBrowser");b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById("AlarmSortDialog"),d=document.getElementById("AlarmSortDialog_divModal"),null!==f&&(e=PWC.Components.GenericDialog.Content.ObjectTypes.getHandler("AlarmPropertyBrowser"),e.setSortCancel(!0)),b&&c&&(b.removeChild(c),d&&b.removeChild(d),a=null)};return{create:b,getData:c,update:d,clean:e}}(),PWC.HmiAC.SortDialog.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.SortDialog,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("SortDialog",PWC.HmiAC.SortDialog)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TimeBaseDialog=function(){var a=null,b=function(b,c,d){var e,f;return a=c,this.eventHandler=d,this.type="TimeBaseDialog",f={type:this.type,rtoid:b,appDir:c.gfxWebLib.connection.getAppDir(),parentDiv:c.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},e=this.prototype.createControl(f)},c=function(){return this.data={timeBaseObj:a.timeBaseObj,timeBaseLabel:a.timeBaseDialogLabel},this.data},d=function(a,b){this.eventHandler(a,b)},e=function(){var b,c,d;b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById("TimeBaseDialog"),d=document.getElementById("TimeBaseDialog_divModal"),b&&c&&(b.removeChild(c),d&&b.removeChild(d),a=null)};return{create:b,getData:c,update:d,clean:e}}(),PWC.HmiAC.TimeBaseDialog.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.TimeBaseDialog,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("TimeBaseDialog",PWC.HmiAC.TimeBaseDialog)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertyRowButtonInput=function(a,b,c,d){var e=null,f=null,g=d,h=null,i=a,j=null;this.name=b,this.type=PWC.HmiAC.PropertyType.button,this.initialize=function(){var a,d,f,g;h=document.createElement("Div"),h.setAttribute("class","PropertyRow PropertyRowButtonInput"),a=document.createElement("table"),d=document.createElement("tr"),f=document.createElement("td"),f.innerHTML=b,f.setAttribute("class","propertyName"),g=document.createElement("td"),g.setAttribute("class","TextInput"),e=document.createElement("input"),e.setAttribute("type","button"),e.setAttribute("id",i),e.onclick=this.onClick,e.setAttribute("value",c),g.appendChild(e),d.appendChild(f),d.appendChild(g),a.appendChild(d),h.appendChild(a)},this.getCallback=function(){return j},this.setPropChangeCallback=function(a){j=a},this.setParent=function(a){f=a,f.appendChild(h)},this.onClick=function(a){j(a,i,null,g)},this.isLeaf=function(){return!0},this.destroyLeaf=function(){return h.parentNode.removeChild(h),!0},this.initialize()};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertyRowCboxInput=function(a,b,c,d,e){var f=null,g=null,h=e,i=null,j=a,k=null;this.name=b,this.type=PWC.HmiAC.PropertyType.combobox,this.initialize=function(){var a,e,g,h,k,l,m;for(i=document.createElement("Div"),i.setAttribute("class","PropertyRow PropertyRowCboxInput"),a=document.createElement("table"),e=document.createElement("tr"),g=document.createElement("td"),g.innerHTML=b,g.setAttribute("class","propertyName"),h=document.createElement("td"),h.setAttribute("class","CboxInput"),f=document.createElement("select"),f.setAttribute("id",j),f.onchange=this.onSelectionChange,l=d.length,m=0;l>m;m++)k=document.createElement("option"),k.setAttribute("value",d[m]),k.innerHTML=d[m],f.appendChild(k);f.value=c,h.appendChild(f),e.appendChild(g),e.appendChild(h),a.appendChild(e),i.appendChild(a)},this.updateOptions=function(a){for(var b,c,d=a.length;f.lastChild;)f.removeChild(f.lastChild);for(b=0;d>b;b++)c=document.createElement("option"),c.setAttribute("value",a[b]),c.innerHTML=a[b],f.appendChild(c)},this.getValue=function(){return f.value},this.setValue=function(a){f.value=a},this.setParent=function(a){g=a,g.appendChild(i)},this.setDisabled=function(a){f.disabled=a},this.setPropChangeCallback=function(a){k=a},this.onSelectionChange=function(a){k(a,j,a.currentTarget.value,h)},this.isLeaf=function(){return!0},this.destroyLeaf=function(){return i.parentNode.removeChild(i),!0},this.initialize()};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertyRowChkboxInput=function(a,b,c,d){var e,f=null,g=null,h=d,i=null,j=a;this.name=b,this.type=PWC.HmiAC.PropertyType.checkbox,this.initialize=function(){var a,d,e,g;i=document.createElement("Div"),i.setAttribute("class","PropertyRow PropertyRowChkboxInput"),a=document.createElement("table"),d=document.createElement("tr"),e=document.createElement("td"),e.innerHTML=b,e.setAttribute("class","propertyName"),g=document.createElement("td"),g.setAttribute("class","ChkboxInput"),f=document.createElement("input"),f.setAttribute("type","checkbox"),f.setAttribute("id",j),f.onclick=this.onToggle,f.checked=c,g.appendChild(f),d.appendChild(e),d.appendChild(g),a.appendChild(d),i.appendChild(a)},this.getValue=function(){return f.checked},this.setValue=function(a){f.checked=a},this.setDisabled=function(a){f.disabled=a},this.setParent=function(a){g=a,g.appendChild(i)},this.setPropChangeCallback=function(a){e=a},this.onToggle=function(a){e(a,j,a.currentTarget.checked,h)},this.isLeaf=function(){return!0},this.destroyLeaf=function(){return i.parentNode.removeChild(i),!0},this.initialize()};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertyRowColorInput=function(a,b,c,d){var e=null,f=null,g=d,h=null,i=a,j=null;this.name=b,this.type=PWC.HmiAC.PropertyType.color,this.initialize=function(){var a,d,f,g;h=document.createElement("Div"),h.setAttribute("class","PropertyRow PropertyRowColorInput"),a=document.createElement("table"),d=document.createElement("tr"),f=document.createElement("td"),f.innerHTML=b,f.setAttribute("class","propertyName"),g=document.createElement("td"),g.setAttribute("class","ColorInput"),e=document.createElement("input"),e.setAttribute("type","color"),e.setAttribute("id",i),e.onchange=this.onSelectionChange,e.value=c,g.appendChild(e),d.appendChild(f),d.appendChild(g),a.appendChild(d),h.appendChild(a)},this.getValue=function(){return e.value},this.setValue=function(a){e.value=a},this.setParent=function(a){f=a,f.appendChild(h)},this.setPropChangeCallback=function(a){j=a},this.onSelectionChange=function(a){j(a,i,a.currentTarget.value,g)},this.isLeaf=function(){return!0},this.destroyLeaf=function(){return h.parentNode.removeChild(h),!0},this.initialize()};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertyRowDateInput=function(a,b,c,d){var e=null,f=d,g=null,h=null,i=a,j=null;this.name=b,this.type=PWC.HmiAC.PropertyType.date,this.initialize=function(){var a,d,f,g;h=document.createElement("Div"),h.setAttribute("class","PropertyRow PropertyRowDateInput"),a=document.createElement("table"),d=document.createElement("tr"),f=document.createElement("td"),f.innerHTML=b,f.setAttribute("class","propertyName"),g=document.createElement("td"),g.setAttribute("class","DateInput"),e=document.createElement("input"),e.setAttribute("type","datetime"),e.setAttribute("id",i),e.setAttribute("value",c),e.onchange=this.onchange,g.appendChild(e),d.appendChild(f),d.appendChild(g),a.appendChild(d),h.appendChild(a)},this.getValue=function(){return e.value},this.setValue=function(a){e.value=a},this.setParent=function(a){g=a,g.appendChild(h)},this.setPropChangeCallback=function(a){j=a},this.onchange=function(a){j(a,i,a.currentTarget.value,f)},this.isLeaf=function(){return!0},this.destroyLeaf=function(){return h.parentNode.removeChild(h),!0},this.initialize()};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertyRowDateTimeInput=function(a,b,c,d,e,f){var g=null,h=f,i=e[0],j=e[1],k=null,l=d,m=null,n=null,o=a,p=null,q=null,r=function(){var a,b;return g.valueAsNumber?a=g.valueAsNumber+k.valueAsNumber:(b=Date.parse(g.value.replace(/-/g,"/")),a=new Date(g.value.replace(/-/g,"/")+" "+k.value),isNaN(b)||a.getMonth()+1!==parseInt(g.value[5]+g.value[6],10)||a.getDate()!==parseInt(g.value[8]+g.value[9],10)?a=!1:(a=a.getTime(),a-=6e4*new Date(a).getTimezoneOffset())),a};this.name=b,this.type=PWC.HmiAC.PropertyType.text,this.initialize=function(){var a,d,e,f;n=document.createElement("Div"),n.setAttribute("class","PropertyRow PropertyRowDateTimeInput"),a=document.createElement("table"),d=document.createElement("tr"),e=document.createElement("td"),e.innerHTML=b,e.setAttribute("class","propertyName"),f=document.createElement("td"),f.setAttribute("class","TextInput"),g=document.createElement("input"),g.setAttribute("type","date"),g.setAttribute("id",o+"date"),g.onfocus=this.onGotFocus,g.onblur=this.onLostFocus,g.onkeyup=this.onKeyUp,k=document.createElement("input"),k.setAttribute("type","time"),k.setAttribute("id",o+"_time"),k.onfocus=this.onGotFocus,k.onblur=this.onLostFocus,k.onkeyup=this.onKeyUp,this.setValue(c),f.appendChild(g),f.appendChild(document.createElement("br")),f.appendChild(k),d.appendChild(e),d.appendChild(f),a.appendChild(d),n.appendChild(a)},this.setValue=function(a){var b,c="YYYY-MM-DD",d="hh:mm:ss",e=[];e.push(d),e.push(c),b=h.customFormat(new Date(a),e),g.value=b[1],k.value=b[0]},this.setParent=function(a){m=a,m.appendChild(n)},this.setPropChangeCallback=function(a){p=a},this.onLostFocus=function(a){var b;i&&!k.value.match(i)||j&&!g.value.match(j)||!g.value||!k.value||q===a.currentTarget.value||(b=r())===!1||p(a,o,Date.prototype.getCorrectTime(b,h.timeBase),l)===!1?a.currentTarget.value=q:q=a.currentTarget.value},this.onKeyUp=function(a){var b=a.keyCode||a.which;13===b?i&&!k.value.match(i)||j&&!g.value.match(j)||!g.value||!k.value||q===a.currentTarget.value||(c=r())===!1||p(a,o,Date.prototype.getCorrectTime(c,h.timeBase),l)===!1?a.currentTarget.value=q:q=a.currentTarget.value:27===b&&(a.currentTarget.value=q)},this.onGotFocus=function(a){q=a.currentTarget.value},this.isLeaf=function(){return!0},this.destroyLeaf=function(){return n.parentNode.removeChild(n),!0},this.initialize()};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertyRowReadOnly=function(a,b,c){var d=null,e=null,f=null,g=a;this.name=b,this.type=PWC.HmiAC.PropertyType.readonly,this.initialize=function(){var a,e,h,i;f=document.createElement("Div"),f.setAttribute("class","PropertyRow PropertyRowReadOnly"),a=document.createElement("table"),e=document.createElement("tr"),h=document.createElement("td"),h.innerHTML=b,h.setAttribute("class","propertyName"),i=document.createElement("td"),i.setAttribute("class","ReadOnly"),d=document.createElement("p"),d.style.margin="0px",d.setAttribute("id",g),d.innerHTML=c,i.appendChild(d),e.appendChild(h),e.appendChild(i),a.appendChild(e),f.appendChild(a)},this.getValue=function(){return d.innerHTML},this.setValue=function(a){d.innerHTML=a},this.setParent=function(a){e=a,e.appendChild(f)},this.isLeaf=function(){return!0},this.destroyLeaf=function(){return f.parentNode.removeChild(f),!0},this.initialize()};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertyRowTextInput=function(a,b,c,d,e){var f=null,g=d,h=null,i=null,j=a,k=null,l=e,m=null;this.name=b,this.type=PWC.HmiAC.PropertyType.text,this.initialize=function(){var a,d,e,g;i=document.createElement("Div"),i.setAttribute("class","PropertyRow PropertyRowTextInput"),a=document.createElement("table"),d=document.createElement("tr"),e=document.createElement("td"),e.innerHTML=b,e.setAttribute("class","propertyName"),g=document.createElement("td"),g.setAttribute("class","TextInput"),f=document.createElement("input"),f.setAttribute("type","text"),f.setAttribute("id",j),f.setAttribute("value",c),f.onkeyup=this.onKeyUp,f.onfocus=this.onGotFocus,f.onblur=this.onLostFocus,g.appendChild(f),d.appendChild(e),d.appendChild(g),a.appendChild(d),i.appendChild(a)},this.getValue=function(){return f.value},this.setValue=function(a){f.value=a},this.setDisabled=function(a){f.disabled=a},this.setParent=function(a){h=a,h.appendChild(i)},this.setPropChangeCallback=function(a){k=a},this.onKeyUp=function(a){var b=a.keyCode||a.which;13===b?l&&!a.currentTarget.value.match(l)||k(a,j,a.currentTarget.value,g)===!1?a.currentTarget.value=m:m=a.currentTarget.value:27===b&&(a.currentTarget.value=m)},this.onGotFocus=function(a){m=a.currentTarget.value},this.onLostFocus=function(a){l&&!a.currentTarget.value.match(l)||k(a,j,a.currentTarget.value,g)===!1?a.currentTarget.value=m:m=a.currentTarget.value},this.isLeaf=function(){return!0},this.destroyLeaf=function(){return i.parentNode.removeChild(i),!0},this.initialize()};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ColumnBase=function(a,b,c,d,e){"use strict";var f,g=PWC.Lib.Config.Properties,h=a,i=c,j=d,k=b,l=this,m=PWC.HmiAC.TableControl.ColumnBaseProperties,n=PWC.Lib.Canvas.Svg.getTextBBox(i,"X").width,o=PWC.Lib.Canvas.Converters,p=PWC.HmiAC.TableControl;this.type=null,this.leadingZeros=g.getPropPart(h,k,m.LeadingZeros),this.foreColor=g.getPropPart(h,k,m.ForeColor,o.enumConverter.Color),this.backColor=g.getPropPart(h,k,m.BackColor,o.enumConverter.Color),this.columnModel=new PWC.Components.Grid.GridColumnModel,this.columnModel.alignment=g.getPropPart(h,k,m.Alignment),this.columnModel.index=g.getPropPart(h,k,m.Index),this.columnModel.name=g.getPropPart(h,k,m.Name),this.columnModel.displayName=""===h.DisplayName?this.columnModel.name:g.getPropPart(h,k,m.DisplayName),this.columnModel.showIcon=1===g.getPropPart(h,k,m.ShowIcon),this.columnModel.showText=1===g.getPropPart(h,k,m.ShowText),this.columnModel.showTitleIcon=1===g.getPropPart(h,k,m.ShowTitleIcon),this.columnModel.showTitleText=1===g.getPropPart(h,k,m.ShowTitleText),this.columnModel.sortIndex=g.getPropPart(h,k,m.SortIndex),this.columnModel.sortOrder=g.getPropPart(h,k,m.SortOrder),this.columnModel.visible=1===g.getPropPart(h,k,m.Visible),this.lengthInChars=g.getPropPart(h,k,m.Width),this.columnModel.width=this.lengthInChars*n,this.columnModel.useColoumnBackgroundColor=null,this.columnModel.useColumnForeColor=null,void 0===h.Index&&(this.columnModel.index="TimeColumn"===b?d.getTimeColumnsCount():d.getValueColumnsCount()),f=k+"s."+(this.columnModel.index+1),this.updateBaseProperties=function(a,b,c){var d=p.CommonColumnsPropsEnum,i=PWC.HmiAC.Common.HelperUtil;switch(a){case d.Alignment:b=c?PWC.HmiAC.TableControl.Alignment[b]:b,l.columnModel.alignment=b,g.setPropPart(h,e[a],b);break;case d.BackColor:b=c?b:o.convertTo(o.enumConverter.Color,b),l.backColor=b,this.type===p.ColumnType.ValueColumn&&j.updateTimeColumnBackColor(),b=i.hexStrToDecColor(b),g.setPropPart(h,e[a],b),j.onPropertyChange();break;case d.Visible:l.columnModel.visible=b,j.updateVisibleColumns(),b=Number(b),g.setPropPart(h,e[a],b),l.type===p.ColumnType.ValueColumn&&(1===b?PWC.HmiAC.PostPropertyUpdate.Redraw=!0:j.clearInvisibleData(l.columnModel.name)),j.onPropertyChange();break;case d.ShowText:l.columnModel.showText=!b,g.setPropPart(h,e[a],+!b);break;case d.ShowTitleText:l.columnModel.showTitleText=!b,g.setPropPart(h,e[a],+!b);break;case d.ForeColor:b=c?b:o.convertTo(o.enumConverter.Color,b),l.foreColor=b,this.type===p.ColumnType.ValueColumn&&j.updateTimeColumnForeColor(),b=i.hexStrToDecColor(b),g.setPropPart(h,e[a],b),j.onPropertyChange();break;case d.DisplayName:0===b&&(b=l.columnModel.name),b=b.split(" ").join(" "),l.columnModel.displayName=b,g.setPropPart(h,"DisplayName",b);break;case d.Width:l.lengthInChars=parseInt(b,10),l.columnModel.width=this.lengthInChars*n,g.setPropPart(h,"Width",b)}c&&j.setTableViewPropPart(f,e[a],b),PWC.HmiAC.PostPropertyUpdate.Update=!0},this.cleanUp=function(){l=null,h=null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TableControl=PWC.HmiAC.TableControl||{},PWC.HmiAC.TableControl.FontProps={FontUnderline:"FontUnderline",FontStrikeOut:"FontStrikeOut",FontBold:"FontBold",FontItalic:"FontItalic",FontName:"FontName",FontSize:"FontSize",FontDescription:"FontDescription"},PWC.HmiAC.TableControl.FontDescriptionProps={FontName:0,FontSize:1,FontItalic:2,FontUnderline:3,FontStrikeOut:4,FontBold:5,FONT_BOLD_WEIGHT:600,FONT_NOT_BOLD_WEIGHT:400},PWC.HmiAC.TableControl.ToolBarButton={ShowPropertyDialog:"ShowPropertyDialog",ShowHelp:"ShowHelp",MoveToFirst:"MoveToFirst",MoveToPrevious:"MoveToPrevious",MoveToNext:"MoveToNext",MoveToLast:"MoveToLast",EditRows:"EditRows",InsertValueDialog:"InsertValueDialog",CopyRows:"CopyRows",ShowTagSelection:"ShowTagSelection",ShowColumnSelection:"ShowColumnSelection",ShowTimeSelection:"ShowTimeSelection",PreviousColumn:"PreviousColumn",NextColumn:"NextColumn",StartStopUpdate:"StartStopUpdate",Print:"Print",Export:"Export",ShowStatisticRuler:"ShowStatisticRuler",CalculateStatistic:"CalculateStatistic",AttachDB:"AttachDB",DetachDB:"DetachDB"},PWC.HmiAC.TableControl.TimeColumnProperties={BeginTime:"BeginTime",EndTime:"EndTime",Online:"Online",PointCount:"PointCount",RangeType:"RangeType",TimeRangeBase:"TimeRangeBase",TimeRangeFactor:"TimeRangeFactor",UseValueColumnColors:"UseValueColumnColors",DateFormat:"DateFormat",ShowDate:"ShowDate",TimeFormat:"TimeFormat"},PWC.HmiAC.TableControl.CommonColumnsPropsEnum={Name:0,ObjectName:1,DisplayName:2,Alignment:3,Width:4,ForeColor:5,BackColor:6,Effects:7,Visible:8,ShowText:9,ShowTitleText:10},PWC.HmiAC.TableControl.TimeColumnsPropsEnum={TimeFormat:11,DateFormat:12,ShowDate:13,UseValueColumnColors:14,StartTimeMsg:15,MeasurementPointMsg:16,TimeRangeMsg:17,LengthInCharsMsg:18,RangeType:19,TimeRangeBase:20,TimeRangeFactor:21,PointCount:22,BeginTime:23,EndTime:24},PWC.HmiAC.TableControl.ValueColumnsPropsEnum={TagDataSourceType:11,Tag:12,DecimalPrecision:13,AutoDecimalPrecision:14,ExponentialFormat:15,LimitValues:16,LengthInCharsMsg:17,TimeColumn:18,DataConnection:19},PWC.HmiAC.TableControl.Alignment={"0 - Left":0,"1 - Centered":1,"2 - Right":2},PWC.HmiAC.TableControl.DataSource={Archive:"1 - Archive tags",Online:"2 - Online tags"},PWC.HmiAC.TableControl.TimeUnitList={Identical:0,"100 ms":100,"250 ms":250,"500 ms":244,"1 s":232},PWC.HmiAC.TableControl.TimeUnit={0:0,100:100,250:250,244:500,232:1e3},PWC.HmiAC.TableControl.TimeRangeBase={"500 ms":0,"1 second":1,"1 minute":2,"1 hour":3,"1 day":4},PWC.HmiAC.TableControl.TimeRangeBaseValues={1:500,2:1e3,3:6e4,4:36e5,5:864e5},PWC.HmiAC.TableControl.RangeTypeSetting={"0 - Time range":0,"1 - Start to end time":1,"2 - Number of measurement points":2},PWC.HmiAC.TableControl.RangeType={TimeRange:0,StartEndTime:1,MeasurementPoints:2},PWC.HmiAC.TableControl.TimeFormat={Automatic:"Automatic",HH_mm_ss:"HH:mm:ss",HH_mm_ss_ms:"HH:mm:ss.ms",hh_mm_ss__tt:"hh:mm:ss tt",hh_mm_ss_ms__tt:"hh:mm:ss.ms tt"},PWC.HmiAC.TableControl.DateFormat={Automatic:"Automatic",dd_MM_yy_Dot:"dd.MM.yy",dd_MM_yyyy_Dot:"dd.MM.yyyy",dd_MM_yy_Slash:"dd/MM/yy",dd_MM_yyyy_Slash:"dd/MM/yyyy"},PWC.HmiAC.TableControl.ColumnBaseProperties={Alignment:"Alignment",AutoDecimalPrecision:"AutoDecimalPrecision",BackColor:"BackColor",DateFormat:"DateFormat",DecimalPrecision:"DecimalPrecision",DisplayName:"DisplayName",ExponentialFormat:"ExponentialFormat",ForeColor:"ForeColor",Index:"Index",LeadingZeros:"LeadingZeros",Name:"Name",Parent:"Parent",ParentProperty:"ParentProperty",ShowDate:"ShowDate",ShowIcon:"ShowIcon",ShowText:"ShowText",ShowTitleIcon:"ShowTitleIcon",ShowTitleText:"ShowTitleText",SortIndex:"SortIndex",SortOrder:"SortOrder",TimeFormat:"TimeFormat",Visible:"Visible",Width:"Width"},PWC.HmiAC.TableControl.TableBaseProperties={Authorization:"Authorization",AutoCompleteColumns:"AutoCompleteColumns",AutoCompleteRows:"AutoCompleteRows",AutoSelectionColors:"AutoSelectionColors",AutoSelectionRectColor:"AutoSelectionRectColor",AutoSize:"AutoSize",colorConverter:"colorConverter",BorderWidth:"BorderWidth",CellSpaceBottom:"CellSpaceBottom",CellSpaceLeft:"CellSpaceLeft",CellSpaceRight:"CellSpaceRight",CellSpaceTop:"CellSpaceTop",ColumnReorder:"ColumnReorder",ColumnResize:"ColumnResize",ColumnTitleAlignment:"ColumnTitleAlignment",ColumnTitles:"ColumnTitles",CycleUsage:"CycleUsage",EnableEdit:"EnableEdit",ExportDelimiter:"ExportDelimiter",ExportDirectoryName:"ExportDirectoryName",ExportDirectoryNameChangeable:"ExportDirectoryNameChangeable",ExportFileName:"ExportFileName",ExportFileNameChangeable:"ExportFileNameChangeable",ExportFormat:"ExportFormat",ExportSelection:"ExportSelection",ExportShowDialog:"ExportShowDialog",Flashing:"Flashing",GridLineWidth:"GridLineWidth",GroupParent:"GroupParent",Height:"Height",HorizontalGridLines:"HorizontalGridLines",HorizontalScrollbarMode:"HorizontalScrollbarMode",HorizontalScrolling:"HorizontalScrolling",IconSpace:"IconSpace",Layer:"Layer",Left:"Left",LoadDataImmediately:"LoadDataImmediately",Name:"Name",ObjectState:"ObjectState",Online:"Online",Parent:"Parent",Persistence:"Persistence",PersistenceAuthorization:"PersistenceAuthorization",PersistenceType:"PersistenceType",PrintJob:"PrintJob",RotationAngle:"RotationAngle",RotationCenterLeft:"RotationCenterLeft",RotationCenterTop:"RotationCenterTop",RowTitleAlignment:"RowTitleAlignment",RowTitles:"RowTitles",SelectedCellColor:"SelectedCellColor",SelectedCellForeColor:"SelectedCellForeColor",SelectedRowColor:"SelectedRowColor",SelectedRowForeColor:"SelectedRowForeColor",SelectedTitleColor:"SelectedTitleColor",SelectedTitleForeColor:"SelectedTitleForeColor",SelectionColoring:"SelectionColoring",SelectionRect:"SelectionRect",SelectionRectColor:"SelectionRectColor",SelectionRectWidth:"SelectionRectWidth",SelectionType:"SelectionType",ShortenCellContent:"ShortenCellContent",ShortenTitleContent:"ShortenTitleContent",ShowSortIcon:"ShowSortIcon",ShowSortIndex:"ShowSortIndex",ShowSortButton:"ShowSortButton",SortMode:"SortMode",SortSequence:"SortSequence",Statusbar:"Statusbar",TabIndex:"TabIndex",TabIndexAlpha:"TabIndexAlpha",Table3D:"Table3D",TableColor:"TableColor",TableColor2:"TableColor2",TableDarkShadowColor:"TableDarkShadowColor",TableFont:"TableFont",TableForeColor:"TableForeColor",TableForeColor2:"TableForeColor2",TableGridLineColor:"TableGridLineColor",TableLightShadowColor:"TableLightShadowColor",TimeBase:"TimeBase",TimeColumns:"TimeColumns",TimeStepBase:"TimeStepBase",TimeStepFactor:"TimeStepFactor",Title3D:"Title3D",TitleBarStyle:"TitleBarStyle",TitleBarText:"TitleBarText",TitleColor:"TitleColor",TitleDarkShadowColor:"TitleDarkShadowColor",TitleFont:"TitleFont",TitleForeColor:"TitleForeColor",TitleGridLineColor:"TitleGridLineColor",TitleLightShadowColor:"TitleLightShadowColor",ToolTipText:"ToolTipText",Toolbar:"Toolbar",Top:"Top",Transparency:"Transparency",Type:"Type",TypeName:"TypeName",UseColumnBackColors:"UseColumnBackColors",UseColumnForeColors:"UseColumnForeColors",UseSelectedTitleColor:"UseSelectedTitleColor",UseTableColor2:"UseTableColor2",ValueColumns:"ValueColumns",VerticalGridLines:"VerticalGridLines",VerticalScrollbarMode:"VerticalScrollbarMode",VerticalScrolling:"VerticalScrolling",Visible:"Visible",VisibleRowCount:"VisibleRowCount",Width:"Width",WindowCloseEnabled:"WindowCloseEnabled",WindowMovingEnabled:"WindowMovingEnabled",WindowSizingEnabled:"WindowSizingEnabled"},PWC.HmiAC.TableControl.TableElementId={TabName:89,TimeColumns:90,ValueColumns:91,OperatorMessages:92,OnlineConfiguration:93,Export:94,General:95,Parameter:96,Effects:97,Selection:98,Font:99,ToolBar:100,StatusBar:101,StatusBarFont:104,ToolBarFont:105,GridFont:106,TitleFont:103},PWC.HmiAC.TableControl.GeneralPropsEnum={TimeStepFactor:11,TimeStepBase:12,Online:13,LoadDataImmediately:14,UseColumnForeColors:15,UseColumnBackColors:16,EnableEdit:17,PrecisionError:18,Visible:19},PWC.HmiAC.TableControl.ColumnType={TimeColumn:0,ValueColumn:1},PWC.HmiAC.TableControl.MoveToType={NoMove:0,MoveToFirst:6,MoveToLast:7,MoveToPrevious:8,MoveToNext:9,LoadImmediately:10},PWC.HmiAC.TableControl.ValueTypeFlags={EditValue:2048,ManualValue:1024,QualityValue:4096,QualityCode:128};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TableControl=PWC.HmiAC.TableControl||{},PWC.HmiAC.TableControl.GridCell=function(){"use strict";this.value="",this.style={forecolor:null,fill:null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TablePropertyBrowser=function(){var a,b,c,d,e,f,g,h,i=PWC.Lib.Config.Properties,j=PWC.HmiAC.ControlType,k=PWC.HmiAC.TableControl.TableElementId,l=0,m=!0,n=function(b,c,d,e){var g,h,i;return b?(g=o("parentId name pId value controlType"),h=a.getConfig().get(c),i=f.get(d,b),new g(b,c,d,i,e)):new(g=o("name pId value type"))(c,d,i,e)},o=function(a){function b(){for(c=0;e>c;c++)this[d[c]]=arguments[c]}var c,d=a.split(" "),e=d.length;return b},p=function(){var a=[],d=b.gfxWebLib.connection.getAppDir(),e="templates/commontabs/";return q(a),r(a),s(a),t(a),u(a),v(a),a=w(a),a=a.concat(PWC.HmiAC.PopulateParameterList.getList(k.Parameter,c,g,d+e+"parameter.html")),a=a.concat(PWC.HmiAC.PopulateEffectsList.getList(k.Effects,c,g,d+e+"effects.html",{borderColor:b.props.BorderColor,borderWidth:b.props.BorderWidth})),a=a.concat(PWC.HmiAC.PopulateSelectionList.getList(k.Selection,c,g,d+e+"selection.html")),a=a.concat(PWC.HmiAC.PopulateFontList.getList(k,b,d+e+"font.html")),a=a.concat(PWC.HmiAC.PopulateToolBarList.getList(k.ToolBar,g,b.props.Toolbar,d+e+"toolbar.html")),a=a.concat(PWC.HmiAC.PopulateStatusBarList.getList(k.StatusBar,g,b.props.Statusbar,d+e+"statusbar.html"))},q=function(a){var b=h.TabNames;a.push(n(null,"TabName",null,"complex")),a.push(n(null,b.TimeColumns)),a.push(n(null,b.ValueColumns)),a.push(n(null,b.OperatorMessages)),a.push(n(null,b.OnlineConfiguration)),a.push(n(null,b.Export)),a.push(n(null,b.General)),a.push(n(null,b.Parameter)),a.push(n(null,b.Effects)),a.push(n(null,b.Selection)),a.push(n(null,b.Font)),a.push(n(null,b.ToolBar)),a.push(n(null,b.StatusBar))},r=function(a){var c=k.TimeColumns,e=h.TimeColumnsProperties,f=PWC.HmiAC.TableControl.CommonColumnsPropsEnum,g=PWC.HmiAC.TableControl.TimeColumnsPropsEnum;a.push(n(null,"TimeColumns",c,"complex"));for(var i=0;i<b.props.TimeColumns.length;i++)d.timeColumnToUpdate=d.getTimeColumnByID(i),a.push(n(null,d.timeColumns[i].Name,c,"subcomplex")),a.push(n(c,e.Name,f.Name,j.Collection)),a.push(n(c,e.ObjectName,f.ObjectName,j.Text)),a.push(n(c,e.DisplayName,f.DisplayName,j.Text)),a.push(n(c,e.Alignment,f.Alignment,j.Collection)),a.push(n(c,e.LengthInChars,f.Width,j.WInt)),a.push(n(c,e.TimeRangeBase,g.TimeRangeBase,j.Text)),a.push(n(c,e.Setting,g.RangeType,j.Collection)),a.push(n(c,e.NoOfMeasurePoints,g.PointCount,j.WInt)),a.push(n(c,e.StartTime,g.BeginTime,j.DateTime)),a.push(n(c,e.EndTime,g.EndTime,j.DateTime)),a.push(n(c,e.TimeRangeFactor,g.TimeRangeFactor,j.WInt)),a.push(n(c,e.Effects,f.Effects,j.Text)),a.push(n(c,e.TimeFormat,g.TimeFormat,j.Collection)),a.push(n(c,e.DateFormat,g.DateFormat,j.Collection)),a.push(n(c,e.ShowDate,g.ShowDate,j.Bool)),a.push(n(c,e.ForeColor,f.ForeColor,j.Color)),a.push(n(c,e.BackColor,f.BackColor,j.Color)),a.push(n(c,e.UseValueColumnColors,g.UseValueColumnColors,j.Bool)),a.push(n(c,e.TimeRangeBase,g.TimeRangeBase,j.Collection)),a.push(n(c,e.Visible,f.Visible,j.Bool));a.push(n(null,e.TimeRange,c,"subcomplex")),a.push(n(c,e.StartTimeMsg,g.StartTimeMsg,j.Text)),a.push(n(c,e.MeasurementPointMsg,g.MeasurementPointMsg,j.Text)),a.push(n(c,e.TimeRangeMsg,g.TimeRangeMsg,j.Text)),a.push(n(c,e.LengthInCharsMsgCaption,g.LengthInCharsMsg,j.Text))},s=function(a){var c=k.ValueColumns,e=h.ValueColumnsProperties,f=PWC.HmiAC.TableControl.CommonColumnsPropsEnum,g=PWC.HmiAC.TableControl.ValueColumnsPropsEnum;a.push(n(null,"ValueColumns",c,"complex"));for(var i=0;i<b.props.ValueColumns.length;i++)d.valueColumnToUpdate=d.getValueColumnByID(i),a.push(n(null,d.valueColumns[i].Name,c,"subcomplex")),a.push(n(c,e.Name,f.Name,j.Collection)),a.push(n(c,e.ObjectName,f.ObjectName,j.Text)),a.push(n(c,e.TimeColumn,g.TimeColumn,j.Collection)),a.push(n(c,e.DisplayName,f.DisplayName,j.Text)),a.push(n(c,e.Alignment,f.Alignment,j.Collection)),a.push(n(c,e.LengthInChars,f.Width,j.WInt)),a.push(n(c,e.DataConnection,g.DataConnection,j.Text)),a.push(n(c,e.DataSource,g.TagDataSourceType,j.Collection)),a.push(n(c,e.TagName,g.Tag,j.Text)),a.push(n(c,e.Effects,f.Effects,j.Text)),a.push(n(c,e.DecimalPrecision,g.DecimalPrecision,j.WInt)),a.push(n(c,e.Automatic,g.AutoDecimalPrecision,j.Bool)),a.push(n(c,e.ExponentialNotation,g.ExponentialFormat,j.Bool)),a.push(n(c,e.ForeColor,f.ForeColor,j.Color)),a.push(n(c,e.BackColor,f.BackColor,j.Color)),a.push(n(c,e.LimitValues,g.LimitValues,j.Color)),a.push(n(c,e.LengthInCharsMsgCaption,g.LengthInCharsMsg,j.Text)),a.push(n(c,e.DecimalPlacesMsgCaption,g.DecimalPlacesMsg,j.Text)),a.push(n(c,e.Visible,f.Visible,j.Bool))},t=function(a){var b=k.OperatorMessages;a.push(n(null,"Operator Messages",b,"complex"))},u=function(a){var b=k.OnlineConfiguration;a.push(n(null,"Online Configuration",b,"complex"))},v=function(a){var b=k.Export;a.push(n(null,"Export",b,"complex"))},w=function(a){var c=b.gfxWebLib.connection.getAppDir(),d="templates/commontabs/",e=k.General,f=h.GeneralProperties,i=PWC.HmiAC.TableControl.GeneralPropsEnum;return a.push(n(null,g.getText("TBID_RulerCtrl_TabNameLabel_General"),e,"complex")),a=a.concat(PWC.HmiAC.PopulateGeneralList.getList(k.General,b,c+d+"generalpart.html")),a.push(n(null,null,null,"subcomplex")),a.push(n(e,f.TimeStepFactor,i.TimeStepFactor,j.WInt)),a.push(n(e,f.TimeStepBase,i.TimeStepBase,j.Collection)),a.push(n(e,f.Online,i.Online,j.Bool)),a.push(n(e,f.LoadDataImmediately,i.LoadDataImmediately,j.Bool)),a.push(n(e,f.UseColumnForeColors,i.UseColumnForeColors,j.Bool)),a.push(n(e,f.UseColumnBackColors,i.UseColumnBackColors,j.Bool)),a.push(n(e,f.EnableEdit,i.EnableEdit,j.Bool)),a.push(n(e,f.TableViewLablePrecision)),a.push(n(e,f.TableViewLableFactor)),a.push(n(e,f.TableViewLableTimeUnit)),a.push(n(e,f.TableViewLableOpenPicture)),a.push(n(e,f.TableViewLableRefresh)),a.push(n(e,f.TableViewLableLoadArchiveData)),a.push(n(e,f.TableViewLableUseColumnColor)),a.push(n(e,f.TableViewLableUseFontColor)),a.push(n(e,f.TableViewLableUseBackColor)),a.push(n(e,f.TableViewLableEdit)),a.push(n(e,f.TableViewLableAllowEditing)),a.push(n(e,f.PrecisionError,i.PrecisionError,j.Text)),a
},x=function(a,b,c,e,f){var g=PWC.HmiAC.TableControl.TableElementId;switch(c){case g.TimeColumns:d.timeColumnToUpdate=d.getTimeColumnByID(e);break;case g.ValueColumns:d.valueColumnToUpdate=d.getValueColumnByID(e)}d.onUpdate(c,a,b,!0,f)},y=function(a,b){for(var c in a)if(c===b)return a[c]},z=function(){var c,d,e=b.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),f=document.createElement("div");e.appendChild(f),d=a.data.errorMsg.split(":"),d.length>1&&(c=d[0],d=d[1]),c||(d=d[0]),PWC.Components.GenericDialog.ShowWarning(d,f,c,function(){return m=!0,!1}),m=!1},A=function(c,e){var f,g,h,i,j,l,m,n,o,p=!1,q=[],r=e.length,s=!1;if(a.data.errorMsg)return z(),c.stopPropagation(),p=!1;for(m=c.target||c.srcElement||c.currentTarget,l=0;r>l;l++)i=e[l],j=i.elemId.split("-"),g=j.length>1?-1!==j[1].indexOf("_")?j[1]:parseInt(j[1],10):j,f=i.updatedValue,h=y(k,j[0].replace(" ","")),isNaN(g)&&-1!==g.indexOf("_")?(j=g.split("_"),g=j[0],n=parseInt(""===j[1]?0:j[1],10),h===k.StatusBar||h===k.ToolBar?isNaN(n)||(g=n+"-"+g):g=parseInt(g,10)):(n=0,g=parseInt(g,0)),o||(o={}),("Apply"===m.value||"OK"===m.value)&&(h===k.StatusBar||h===k.ToolBar?(q.push({Id:g,value:f}),s=!0):x(g,f,h,n,o),p=!0);return o||(o={}),s?x(null,q,h):PWC.HmiAC.PostPropertyUpdate.Update&&((k.Selection===h||k.Effects===h||k.Parameter===h)&&b.gfxWebLib.connection.sendPropertiesByName(b.rtoid,o,!1,!1),d.onPropertyChange()),PWC.HmiAC.PostPropertyUpdate.Redraw&&d.reload(),PWC.HmiAC.PostPropertyUpdate.Update=!1,PWC.HmiAC.PostPropertyUpdate.Redraw=!1,p},B=function(a,f){var j,k,l,m=PWC.HmiAC.TableControl.TimeUnitList,n=h.GeneralProperties,o=new PWC.HmiAC.GeneralCommonPropertySet(g).GeneralCommonProps,p=new PWC.HmiAC.ParameterPropertySet(g).ParameterProperties,q=new PWC.HmiAC.SelectionPropertySet(g).SelectionProps,r=new PWC.HmiAC.FontPropertySet(g).FontProp,s=new PWC.HmiAC.ToolBarPropertySet(g);switch(a){case r.FontName:k=C();break;case r.FontSize:k=c.tableFontSize;break;case r.FontArray:k=1;break;case p.ColumnTitleAlignment:k=c.columnTitleAlignment;break;case p.RowTitleAlignment:k=c.rowTitleAlignment;break;case p.SortByColumnHeader:k=c.sortMode;break;case p.MouseClickSort:k=c.sortSequence;break;case q.SelectableRows:k=c.selectionType;break;case q.SelectionBorder:k=c.selectionRect;break;case q.SelectionColorFor:k=c.selectionColoring;break;case o.WindowTitle:k=i.getProp(b,"TitleBarStyle");break;case o.Style:k=0;break;case o.VerticalScrollbarMode:k=c.verticalScrollbarMode;break;case o.HorizontalScrollbarMode:k=c.horizontalScrollbarMode;break;case o.TimeBase:k=e.timeBase;break;case n.TimeStepBase:for(l in m)if(m[l]===e.timeStepBase)break;k=Object.keys(m).indexOf(l);break;case s.ToolBarProp.Alignment:case h.TimeColumnsProperties.Alignment:case h.ValueColumnsProperties.Alignment:k=D(f);break;case h.TimeColumnsProperties.Setting:k=d.timeColumnToUpdate.rangeType;break;case h.TimeColumnsProperties.TimeFormat:k=E();break;case h.TimeColumnsProperties.DateFormat:k=F();break;case h.TimeColumnsProperties.TimeRangeBase:k=d.timeColumnToUpdate.timeRangeBase-1;break;case h.ValueColumnsProperties.TimeColumn:for(j=0;j<d.timeColumns.length;j++)d.timeColumns[j].name===d.valueColumnToUpdate.timeColumnName&&(k=j);break;case h.ValueColumnsProperties.DataSource:k=0,1===d.valueColumnToUpdate.dataSource.TagDataSourceType&&(k=1)}return k},C=function(){var a;return 0===l?(a=Object.keys(PWC.HmiAC.FontType).indexOf(c.tableFontName),l++):1===l?(a=Object.keys(PWC.HmiAC.FontType).indexOf(b.props.Statusbar.Font.FontName),l++):2===l&&(a=Object.keys(PWC.HmiAC.FontType).indexOf(c.titleFontName),l++,l=0),(void 0===a||-1===a)&&(a=PWC.HmiAC.FontType.Tahoma),a},D=function(a){var c;return PWC.HmiAC.TableControl.TableElementId.ToolBar===a?c=parseInt(b.props.Toolbar.Alignment,10):PWC.HmiAC.TableControl.TableElementId.TimeColumns===a?c=d.timeColumnToUpdate.columnModel.alignment:PWC.HmiAC.TableControl.TableElementId.ValueColumns===a&&(c=d.valueColumnToUpdate.columnModel.alignment),c},E=function(){var a=0,b=PWC.HmiAC.TableControl.TimeFormat;if(""!==d.timeColumnToUpdate.timeFormat&&void 0!==d.timeColumnToUpdate.timeFormat)switch(d.timeColumnToUpdate.timeFormat){case b.HH_mm_ss:a=1;break;case b.HH_mm_ss_ms:a=2;break;case b.hh_mm_ss__tt:a=3;break;case b.hh_mm_ss_ms__tt:a=4}return a},F=function(){var a=0,b=PWC.HmiAC.TableControl.DateFormat;if(""!==d.timeColumnToUpdate.dateFormat&&void 0!==d.timeColumnToUpdate.dateFormat)switch(d.timeColumnToUpdate.dateFormat){case b.dd_MM_yy_Dot:a=1;break;case b.dd_MM_yyyy_Dot:a=2;break;case b.dd_MM_yy_Slash:a=3;break;case b.dd_MM_yyyy_Slash:a=4}return a},G=function(){var b,c,e,f,g,h,i,j,l,m=p(),n=m.length,o=PWC.HmiAC.PropertyType,q=[],r={},s={};for(c=0;n>c;++c)if(e=m[c].name,g=m[c].value,h=m[c].type,i=m[c].controlType,"complex"!==h)if("subcomplex"!==h){switch(f=a.getControlType(i)){case o.text:b=a.getRegex(i),j={id:m[c].pId,type:f,name:e,value:g,regex:b};break;case o.combobox:j={id:m[c].pId,type:f,name:e,value:g,regex:g[B(e,m[c].parentId)]};break;case o.checkbox:j={id:m[c].pId,type:f,name:e,value:g};break;case o.dateTime:b=a.getRegex(i),j={id:m[c].pId,type:f,name:e,value:new Date(g),regex:b};break;default:j={id:m[c].pId,type:f,name:e,value:g,regex:null}}void 0===s.props&&(s.props=[]),s.props.push(j),j={}}else{switch(0!==Object.keys(s).length&&(r.subArray.push(s),s={}),s.tabName=e,s.id=m[c].pId,s.props=[],s.index=l,r.id){case k.TimeColumns:d.timeColumnToUpdate=d.getTimeColumnByID(l);break;case k.ValueColumns:d.valueColumnToUpdate=d.getValueColumnByID(l)}l++}else 0!==Object.keys(s).length&&(r.subArray.push(s),s={}),0!==Object.keys(r).length&&(q.push(r),r={}),r.tabName=e,r.id=m[c].pId,r.selectedIndex=0,r.subArray=[],l=0;return 0!==Object.keys(s).length&&(r.subArray.push(s),s={}),0!==Object.keys(r).length&&(q.push(r),r={}),q.errorMsg="",q};this.init=function(f,i){b=i,c=b.props.table,d=b.tableControl,g=b.gfxWebLib.textbib,e=d.tableModel,a=this,h=new PWC.HmiAC.TableControl.TablePropertySet(g)},this.getControlType=function(a){var b,c=PWC.HmiAC.PropertyType,d=PWC.HmiAC.ControlType;switch(a){case d.Bool:b=c.checkbox;break;case d.Color:b=c.color;break;case d.Collection:b=c.combobox;break;case d.Toggle:b=c.button;break;case d.ReadOnly:b=c.readonly;break;case d.DateTime:b=c.dateTime;break;default:b=c.text}return b},this.getRegex=function(a){var b=null,c=PWC.HmiAC.ControlType;switch(a){case c.Int:b=/^[-+]?[0-9]*$/;break;case c.SInt:b=/^\+?[1-9]\d*$/;break;case c.WInt:b=/^\+?[0-9]\d*$/;break;case c.Float:b=/^[-+]?[0-9]*\.?[0-9]+$/;break;case c.FloatPositive:b=/^[0-9.]+$/;break;case c.DateTime:b=[],b.push(/^(((0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9])|((0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]))$/),b.push(/^((1[7-9])|([2-9][0-9]))[0-9]{2}-((0[1-9])|(1[0-2]))-((0[1-9])|([1-2][0-9])|(3[0-1]))$/)}return b},this.getConfig=function(){return f||(f=new this.Config),f},this.Config=function(){var a=function(a,d){var e;switch(d){case k.TimeColumns:e=c(a);break;case k.ValueColumns:e=f(a);break;case k.General:e=b(a)}return e},b=function(a){var b,c=PWC.HmiAC.TableControl.GeneralPropsEnum;switch(a){case c.TimeStepFactor:b=e.timeStepFactor;break;case c.TimeStepBase:b=Object.keys(PWC.HmiAC.TableControl.TimeUnitList);break;case c.Online:b=e.online;break;case c.LoadDataImmediately:b=e.loadDataImmediately;break;case c.UseColumnForeColors:b=e.useColumnForeColors;break;case c.UseColumnBackColors:b=e.useColumnBackColors;break;case c.EnableEdit:b=e.enableEdit;break;case c.PrecisionError:b=h.GeneralProperties.PrecisionError}return b},c=function(a){var b,c,f,g,i,j,k,l=PWC.HmiAC.TableControl.CommonColumnsPropsEnum,m=PWC.HmiAC.TableControl.TimeColumnsPropsEnum;switch(a){case l.Name:for(b=[],f=d.timeColumns,c=f.length,i=0;c>i;i++)b.push(f[i].name);break;case l.ObjectName:b=d.timeColumnToUpdate.name;break;case l.DisplayName:b=d.timeColumnToUpdate.columnModel.displayName;break;case l.Visible:b=d.timeColumnToUpdate.columnModel.visible;break;case l.Alignment:b=Object.keys(PWC.HmiAC.TableControl.Alignment);break;case l.Width:b=parseInt(d.timeColumnToUpdate.lengthInChars,10);break;case l.ForeColor:b=d.timeColumnToUpdate.foreColor;break;case l.BackColor:b=d.timeColumnToUpdate.backColor;break;case m.RangeType:b=Object.keys(PWC.HmiAC.TimeRangeType);break;case m.PointCount:b=d.timeColumnToUpdate.pointCount;break;case m.BeginTime:j=new Date,k=d.timeColumnToUpdate.beginTime,e.timeBase===PWC.HmiAC.TimeBase.UTC&&(k+=6e4*j.getTimezoneOffset()),b=new Date(k);break;case m.EndTime:j=new Date,k=d.timeColumnToUpdate.endTime,e.timeBase===PWC.HmiAC.TimeBase.UTC&&(k+=6e4*j.getTimezoneOffset()),b=new Date(k);break;case m.TimeRangeBase:b=Object.keys(PWC.HmiAC.TimeRangeBase);break;case m.TimeRangeFactor:b=d.timeColumnToUpdate.timeRangeFactor;break;case m.TimeFormat:b=[];for(g in PWC.HmiAC.TableControl.TimeFormat)b.push(PWC.HmiAC.TableControl.TimeFormat[g]);break;case m.DateFormat:b=[];for(g in PWC.HmiAC.TableControl.DateFormat)b.push(PWC.HmiAC.TableControl.DateFormat[g]);break;case m.ShowDate:b=d.timeColumnToUpdate.showDate;break;case m.UseValueColumnColors:b=d.timeColumnToUpdate.useValueColumnColors;break;case m.StartTimeMsg:b=h.TimeColumnsProperties.StartTimeMsg;break;case m.MeasurementPointMsg:b=h.TimeColumnsProperties.MeasurementPointMsg;break;case m.TimeRangeMsg:b=h.TimeColumnsProperties.TimeRangeMsg;break;case m.LengthInCharsMsg:b=h.TimeColumnsProperties.LengthInCharsMsgCaption+":"+h.TimeColumnsProperties.LengthInCharsMsg}return b},f=function(a){var b,c,e,f,g,i=PWC.HmiAC.TableControl.CommonColumnsPropsEnum,j=PWC.HmiAC.TableControl.ValueColumnsPropsEnum;switch(a){case i.Name:for(b=[],g=d.valueColumns,e=g.length,f=0;e>f;f++)b.push(g[f].columnModel.name);break;case i.ObjectName:b=d.valueColumnToUpdate.columnModel.name;break;case i.DisplayName:b=d.valueColumnToUpdate.columnModel.displayName;break;case i.Visible:b=d.valueColumnToUpdate.columnModel.visible;break;case i.Alignment:b=Object.keys(PWC.HmiAC.TableControl.Alignment);break;case i.Width:b=parseInt(d.valueColumnToUpdate.lengthInChars,10);break;case i.ForeColor:b=d.valueColumnToUpdate.foreColor;break;case i.BackColor:b=d.valueColumnToUpdate.backColor;break;case j.TimeColumn:for(b=[],e=d.timeColumns.length,f=0;e>f;f++)b.push(d.timeColumns[f].name);break;case j.TagDataSourceType:b=[];for(c in PWC.HmiAC.TableControl.DataSource)b.push(PWC.HmiAC.TableControl.DataSource[c]);break;case j.Tag:b=d.valueColumnToUpdate.dataSource.Tag;break;case j.DecimalPrecision:b=d.valueColumnToUpdate.decimalPrecision;break;case j.AutoDecimalPrecision:b=d.valueColumnToUpdate.autoDecimalPrecision;break;case j.ExponentialFormat:b=d.valueColumnToUpdate.exponentialFormat;break;case j.LengthInCharsMsg:b=h.ValueColumnsProperties.LengthInCharsMsgCaption+":"+h.ValueColumnsProperties.LengthInCharsMsg;break;case j.DecimalPlacesMsg:b=h.ValueColumnsProperties.DecimalPlacesMsgCaption+":"+h.ValueColumnsProperties.DecimalPlacesMsg}return b};return{get:a}},this.create=function(a,b,c){var d;return this.eventHandler=c?c:A,this.type="TablePropertyBrowser",this.init(a,b),d={type:this.type,rtoid:a,appDir:b.gfxWebLib.connection.getAppDir(),parentDiv:b.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},this.dialog=this.createControl(d),this.dialog},this.getData=function(){return this.data=G(),this.data},this.update=function(a,b){return this.eventHandler(a,b)},this.clean=function(){var a,c,d;a=b.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById("PropertyBrowser"),d=document.getElementById("PropertyBrowser_divModal"),a&&c&&m&&(a.removeChild(c),d&&a.removeChild(d))}},PWC.HmiAC.TablePropertyBrowser.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.TablePropertyBrowser,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("TablePropertyBrowser",new PWC.HmiAC.TablePropertyBrowser)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TableControl=PWC.HmiAC.TableControl||{},PWC.HmiAC.TableControl.TablePropertySet=function(a){this.TabNames={TimeColumns:a.getText("TBID_TableCtrlPB_Tab_TimeColumns"),ValueColumns:a.getText("TBID_TableCtrlPB_Tab_ValueColumns"),OperatorMessages:a.getText("TBID_HmiWindowPB_Tab_OperatorMessages"),OnlineConfiguration:a.getText("TBID_HmiWindowPB_Tab_OnlineConfiguration"),Export:a.getText("TBID_HmiWindowPB_Tab_Export"),General:a.getText("TBID_HmiWindowPB_Tab_General"),Parameter:a.getText("TBID_HmiWindowPB_Tab_Parameter"),Effects:a.getText("TBID_HmiWindowPB_Tab_Effects"),Selection:a.getText("TBID_HmiWindowPB_Tab_Selection"),Font:a.getText("TBID_HmiWindowPB_Tab_Font"),ToolBar:a.getText("TBID_HmiWindowPB_Tab_ToolBar"),StatusBar:a.getText("TBID_HmiWindowPB_Tab_StatusBar")},this.TimeColumnsProperties={Name:a.getText("TBID_TableCtrlPB_TimeColumns_TimeColumns"),ObjectName:a.getText("TBID_TrendPB_TimeAxes_ObjectName"),DisplayName:a.getText("TBID_TrendPB_TimeAxes_Label"),Alignment:a.getText("TBID_TrendPB_TimeAxes_Alignment"),LengthInChars:a.getText("TBID_TableCtrlPB_TimeColumns_LengthInChars"),TimeRangeBase:a.getText("TBID_TrendPB_TimeAxes_Timerange"),TimeRangeFactor:a.getText("TBID_TableCtrlPB_TimeColumns_RangeFactor"),Setting:a.getText("TBID_TrendPB_TimeAxes_Setting"),NoOfMeasurePoints:a.getText("TBID_TableCtrlPB_TimeColumns_NoOfMeasurePoints"),StartTime:a.getText("TBID_TrendPB_TimeAxes_StartTime"),EndTime:a.getText("TBID_TrendPB_TimeAxes_EndTime"),Effects:a.getText("TBID_TrendPB_TimeAxes_Effects"),TimeFormat:a.getText("TBID_TrendPB_TimeAxes_TimeFormat"),DateFormat:a.getText("TBID_TrendPB_TimeAxes_DateFormat"),ShowDate:a.getText("TBID_TrendPB_TimeAxes_ShowDate"),ForeColor:a.getText("TBID_HmiWindowPB_Statusbar_Fontcolor"),BackColor:a.getText("TBID_HmiWindowPB_Statusbar_Backgroundcolor"),UseValueColumnColors:a.getText("TBID_TableCtrlPB_TimeColumns_UseValueColumnColors"),StartTimeMsg:a.getText("TBID_TrendPB_TimeAxes_StartTimeMsg"),MeasurementPointMsg:a.getText("TBID_TrendPB_TimeAxes_MeasurementPointMsg"),TimeRangeMsg:a.getText("TBID_TrendPB_TimeAxes_TimeRangeMsg"),LengthInCharsMsgCaption:a.getText("TBID_TableCtrlPB_TimeAndValueColumns_LengthInCharsMsgCaption"),LengthInCharsMsg:a.getText("TBID_TableCtrlPB_TimeAndValueColumns_LengthInCharsMsg")},this.ValueColumnsProperties={Name:a.getText("TBID_TableCtrlPB_ValueColumns_ValueColumns"),ObjectName:a.getText("TBID_TrendPB_TimeAxes_ObjectName"),TimeColumn:a.getText("TBID_TableCtrlPB_ValueColumns_TimeColumn"),DisplayName:a.getText("TBID_TrendPB_TimeAxes_Label"),Alignment:a.getText("TBID_TrendPB_ValueAxes_Alignment"),LengthInChars:a.getText("TBID_TableCtrlPB_TimeColumns_LengthInChars"),DataConnection:a.getText("TBID_TrendPB_Trend_DataConnection"),DataSource:a.getText("TBID_TrendPB_Trend_DataSource"),TagName:a.getText("TBID_TrendPB_Trend_TagName"),Effects:a.getText("TBID_TrendPB_TimeAxes_Effects"),DecimalPrecision:a.getText("TBID_TrendPB_ValueAxes_Decimalplaces"),Automatic:a.getText("TBID_TrendPB_ValueAxes_Automatic"),ExponentialNotation:a.getText("TBID_TrendPB_ValueAxes_Exponentialnotation"),ForeColor:a.getText("TBID_HmiWindowPB_Statusbar_Fontcolor"),BackColor:a.getText("TBID_HmiWindowPB_Statusbar_Backgroundcolor"),LimitValues:a.getText("TBID_TableCtrlPB_ValueColumns_LimitValues"),LengthInCharsMsgCaption:a.getText("TBID_TableCtrlPB_TimeAndValueColumns_LengthInCharsMsgCaption"),LengthInCharsMsg:a.getText("TBID_TableCtrlPB_TimeAndValueColumns_LengthInCharsMsg"),DecimalPlacesMsgCaption:a.getText("TBID_TableCtrlPB_ValueColumns_DecimalPlacesMsg_Caption"),DecimalPlacesMsg:a.getText("TBID_TableCtrlPB_ValueColumns_DecimalPlacesMsg")},this.OperatorMessages={},this.OnlineConfiguration={},this.Export={},this.GeneralProperties={TimeStepFactor:a.getText("TBID_TableCtrlPB_General_Factor"),TimeStepBase:a.getText("TBID_TableCtrlPB_General_TimeUnit"),Online:a.getText("TBID_TableCtrlPB_General_Refresh"),LoadDataImmediately:a.getText("TBID_TableCtrlPB_General_LoadArchiveData"),UseColumnForeColors:a.getText("TBID_TableCtrlPB_General_UseColumnFontColor"),UseColumnBackColors:a.getText("TBID_TableCtrlPB_General_UseColumnBackColor"),EnableEdit:a.getText("TBID_TableCtrlPB_General_AllowEditing"),TableViewLablePrecision:a.getText("TBID_TableCtrlPB_General_Lable_Precision"),TableViewLableFactor:a.getText("TBID_TableCtrlPB_General_Lable_Factor"),TableViewLableTimeUnit:a.getText("TBID_TableCtrlPB_General_Lable_TimeUnit"),TableViewLableOpenPicture:a.getText("TBID_TableCtrlPB_General_Lable_OpenPicture"),TableViewLableRefresh:a.getText("TBID_TableCtrlPB_General_Lable_Refresh"),TableViewLableLoadArchiveData:a.getText("TBID_TableCtrlPB_General_Lable_LoadArchiveData"),TableViewLableUseColumnColor:a.getText("TBID_TableCtrlPB_General_Lable_UseColumnColor"),TableViewLableUseFontColor:a.getText("TBID_TableCtrlPB_General_Lable_FontColor"),TableViewLableUseBackColor:a.getText("TBID_TableCtrlPB_General_Lable_BackColor"),TableViewLableEdit:a.getText("TBID_TableCtrlPB_General_Lable_Edit"),TableViewLableAllowEditing:a.getText("TBID_TableCtrlPB_General_Lable_AllowEditing"),PrecisionError:a.getText("TBID_TableCtrlPB_Precision_Error")}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TableView=function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=a,s=r.gfxWebLib,t=PWC.Lib.Config.Properties,u=PWC.HmiAC.Common.HelperUtil,v=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar,w=!1,x=PWC.HmiAC.TableControl.MoveToType,y=null,z={},A=!1,B=!0,C=0,D=[],E=[],F=[],G=[],H=[],I={},J=0,K=!1,L=!1,M=[],N=[],O=[],P=[],Q=[],R=s.textbib,S=PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp,T={},U=15,V=3,W=4096,X=1024,Y=0,Z=128,$=1e4,_=116444736e5,ab=-1073446910,bb=-1073446908,cb={timeBase:null,enableEdit:null,useColumnBackColors:null,useColumnForeColors:null,online:null,loadDataImmediately:null,timeStepBase:null,timeStepFactor:null,localTimeFormat:null,localDateFormat:null},db=[],eb=[],fb={},gb=PWC.HmiAC.TableControl,hb=function(a){var b,c,d,e=t.getProp(r,a),f="Font",g=gb.FontProps,h=gb.FontDescriptionProps;return 0===(c=t.getPropPart(e,f,g.FontDescription))?b={FontName:t.getPropPart(e,f,g.FontName),FontSize:t.getPropPart(e,f,g.FontSize),FontUnderline:1===t.getPropPart(e,f,g.FontUnderline),FontStrikeOut:1===t.getPropPart(e,f,g.FontStrikeOut),FontBold:1===t.getPropPart(e,f,g.FontBold),FontItalic:1===t.getPropPart(e,f,g.FontItalic)}:(d=c.split(","),b={FontName:d[h.FontName],FontSize:+d[h.FontSize],FontBold:+d[h.FontBold]<h.FONT_BOLD_WEIGHT?0:1,FontItalic:+d[h.FontItalic],FontUnderline:+d[h.FontUnderline],FontStrikeOut:+d[h.FontStrikeOut]}),PWC.HmiAC.FontType.hasOwnProperty(b.FontName)||(PWC.HmiAC.FontType[b.FontName]=Object.keys(PWC.HmiAC.FontType).length),b},ib=function(a,b){var c=t.getProp(a,b);return 1===c},jb=function(){return d.screenItem?PWC.Lib.Config.Properties.getProp(d.screenItem,"Width"):d.width},kb=function(){return d.screenItem?PWC.Lib.Config.Properties.getProp(d.screenItem,"Height"):d.height},lb=function(){return d.screenItem?PWC.Lib.Config.Properties.getProp(d.screenItem,"Left"):d.left},mb=function(){return d.screenItem?PWC.Lib.Config.Properties.getProp(d.screenItem,"Top"):d.top},nb=function(a){Ub(a)},ob=function(){return{height:d.getHeight(),width:d.getWidth(),left:d.getLeft(),top:d.getTop()}},pb=function(){return w},qb=function(){var a,f,g,h,i,j,k,l=t.getProp(r,"TimeColumns"),m=t.getProp(r,"ValueColumns"),n=[],w=0,x=0;for(d=this,o=hb("TableFont"),p=hb("TableFont"),q="onlinetable"+r.rtoid,e=t.getProp(r,"Visible"),cb.enableEdit=1===t.getProp(r,"EnableEdit"),cb.loadDataImmediately=1===t.getProp(r,"LoadDataImmediately"),cb.loadDataImmediately||(this.bufferTime=(new Date).getTime()),cb.online=1===t.getProp(r,"Online"),cb.timeStepBase=t.getProp(r,"TimeStepBase"),cb.timeStepFactor=t.getProp(r,"TimeStepFactor"),cb.useColumnBackColors=t.getProp(r,"UseColumnBackColors"),cb.useColumnForeColors=1===t.getProp(r,"UseColumnForeColors"),cb.timeBase=t.getProp(r,"TimeBase"),cb.localTimeFormat=R.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,cb.localDateFormat=R.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,this.customFormat=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(cb.timeBase),this.ISource=new PWC.HmiAC.TrendViewInterfaces(d),this.screenItem=r,this.controlType=PWC.HmiAC.SourceControlType.TableControl,this.rulerControl=PWC.HmiAC.RulerControlView(),v.check(r,gb.ToolBarButton.StartStopUpdate,!cb.online),v.enable(r,gb.ToolBarButton.EditRows,cb.enableEdit),v.enable(r,gb.ToolBarButton.ShowHelp,!1),v.enable(r,gb.ToolBarButton.CopyRows,!1),v.enable(r,gb.ToolBarButton.ShowTagSelection,!1),v.enable(r,gb.ToolBarButton.ShowColumnSelection,!1),v.enable(r,gb.ToolBarButton.PreviousColumn,!1),v.enable(r,gb.ToolBarButton.NextColumn,!1),v.enable(r,gb.ToolBarButton.Print,!1),v.enable(r,gb.ToolBarButton.Export,!1),v.enable(r,gb.ToolBarButton.AttachDB,!1),v.enable(r,gb.ToolBarButton.DetachDB,!1),Pb(),w=l?l.length:0,j=0;w>j;j++)g=l[j].Name,G[g]=j,F.push([]);for(x=m?m.length:0,j=0;x>j;j++)a=new PWC.HmiAC.ValueColumn(m[j],o,d),i=a.columnModel,i.useColoumnBackgroundColor=cb.useColumnBackColors,i.useColumnForeColor=cb.useColumnForeColors,eb.push(a),g=a.timeColumnName,I[a.dataSource.Tag]=a,g&&F[G[g]].push(a),""===a.dataSource.Tag&&(fb[a.name]=a.dataSource.Tag),a=null;for(j=0;w>j;j++)d.activeTimeColIndex=j,a=new PWC.HmiAC.TimeColumn(l[j],o,d),i=a.columnModel,i.useColoumnBackgroundColor=cb.useColumnBackColors,i.useColumnForeColor=cb.useColumnForeColors,db.push(a),M[j]=[],M[j].push(a),M[j]=M[j].concat(F[j]),D=D.concat(M[j]),O[j]=[],N[j]=[],P[j]=[],z[a.name]=!1,a=null,i=null;for(f=D.length,j=0;f>j;j++)i=D[j].columnModel,H[i.name]=j,i.visible&&(n.push(i),E.push(D[j]));this.timeColumns=db,this.valueColumns=eb,Qb(),b=new PWC.Components.Grid.GridModel,sb(),b.gridColumns=n,k=rb(),c=new PWC.Components.Grid.GridControl(r.control.domSvgParent,q),Tc(),c.init(b,k,s.appMode),c.setCellEditEnabled(cb.enableEdit,r.control.domParent),c.setCustomSortingEnabled(!0),u.setMaxDecimalandPowerLength(U,V),Ec(),this.originalData=N,this.tempData=P,cb.loadDataImmediately&&cb.online&&Rc(),null!==r&&(h={basePath:s.connection.getAppDir(),imagePath:s.connection.getImageUrl()}),k=null},rb=function(){var a=new PWC.Components.Grid.IGridHost;return a.getCellData=tb,a.getCellStyle=ub,a.onCellClick=Db,a.onRowHeaderClick=Ab,a.onColumnHeaderClick=Cb,a.onSelection=Jb,a.onCellEditEnd=Hb,a.onCellEditBegin=Gb,a.onSortButtonClicked=Bb,a.onCellDoubleClick=Eb,a},sb=function(){var a=PWC.Lib.Canvas.Converters,c=a.enumConverter.Color,d=gb.TableBaseProperties;b.sortUpImageURL="content/Advanced/TableView/sort_up.png",b.sortDownImageURL="content/Advanced/TableView/sort_down.png",b.autoCompleteColumns=ib(r,d.AutoCompleteColumns),b.autoCompleteRows=ib(r,d.AutoCompleteRows),b.autoSelectionColors=ib(r,d.AutoSelectionColors),b.autoSelectionRectColor=ib(r,d.AutoSelectionRectColor),b.autoSize=ib(r,d.AutoSize),b.cellSpaceBottom=t.getProp(r,d.CellSpaceBottom),b.cellSpaceLeft=t.getProp(r,d.CellSpaceLeft),b.cellSpaceRight=t.getProp(r,d.CellSpaceRight),b.cellSpaceTop=t.getProp(r,d.CellSpaceTop),b.columnReorder=ib(r,d.ColumnReorder),b.columnResize=ib(r,d.ColumnResize),b.columnTitleAlignment=t.getProp(r,d.ColumnTitleAlignment),b.columnTitles=ib(r,d.ColumnTitles),b.gridLineWidth=t.getProp(r,d.GridLineWidth),b.horizontalGridLines=ib(r,d.HorizontalGridLines),b.horizontalScrollbarMode=t.getProp(r,d.HorizontalScrollbarMode),b.horizontalScrolling=ib(r,d.HorizontalScrolling),b.iconSpace=t.getProp(r,d.IconSpace),b.rowTitleAlignment=t.getProp(r,d.RowTitleAlignment),b.rowTitles=ib(r,d.RowTitles),b.selectedCellColor=t.getProp(r,d.SelectedCellColor,c),b.selectedCellForeColor=t.getProp(r,d.SelectedCellForeColor,c),b.selectedRowColor=t.getProp(r,d.SelectedRowColor,c),b.selectedRowForeColor=t.getProp(r,d.SelectedRowForeColor,c),b.selectedTitleColor=t.getProp(r,d.SelectedTitleColor,c),b.selectedTitleForeColor=t.getProp(r,d.SelectedTitleForeColor,c),b.selectionColoring=t.getProp(r,d.SelectionColoring),b.selectionRect=t.getProp(r,d.SelectionRect),b.selectionRectColor=t.getProp(r,d.SelectionRectColor,c),b.selectionRectWidth=t.getProp(r,d.SelectionRectWidth),b.selectionType=t.getProp(r,d.SelectionType),b.shortenCellContent=ib(r,d.ShortenCellContent),b.shortenTitleContent=ib(r,d.ShortenTitleContent),b.showSortIcon=ib(r,d.ShowSortIcon),b.showSortIndex=ib(r,d.ShowSortIndex),b.useSortKey=ib(r,d.ShowSortButton),b.sortMode=t.getProp(r,d.SortMode),b.sortSequence=t.getProp(r,d.SortSequence),b.table3D=ib(r,d.Table3D),b.tableColor=t.getProp(r,d.TableColor,c),b.tableColor2=t.getProp(r,d.TableColor2,c),b.tableDarkShadowColor=t.getProp(r,d.TableDarkShadowColor,c),b.tableFontBold=o.FontBold,b.tableFontItalic=o.FontItalic,b.tableFontName=o.FontName,b.tableFontSize=o.FontSize,b.tableFontUnderline=o.FontUnderline,b.tableFontStrikeOut=o.FontStrikeOut,b.tableForeColor=t.getProp(r,d.TableForeColor,c),b.tableForeColor2=t.getProp(r,d.TableForeColor2,c),b.tableGridLineColor=t.getProp(r,d.TableGridLineColor,c),b.tableLightShadowColor=t.getProp(r,d.TableLightShadowColor,c),b.title3D=ib(r,d.Title3D),b.titleColor=t.getProp(r,d.TitleColor,c),b.titleDarkShadowColor=t.getProp(r,d.TitleDarkShadowColor,c),b.titleFontBold=p.FontBold,b.titleFontItalic=p.FontItalic,b.titleFontName=p.FontName,b.titleFontSize=p.FontSize,b.titleFontUnderline=p.FontUnderline,b.titleFontStrikeOut=p.FontStrikeOut,b.titleForeColor=t.getProp(r,d.TitleForeColor,c),b.titleGridLineColor=t.getProp(r,d.TitleGridLineColor,c),b.titleLightShadowColor=t.getProp(r,d.TitleLightShadowColor,c),b.useSelectedTitleColor=ib(r,d.UseSelectedTitleColor),b.useTableColor2=ib(r,d.UseTableColor2),b.verticalGridLines=ib(r,d.VerticalGridLines),b.verticalScrollbarMode=t.getProp(r,d.VerticalScrollbarMode),b.verticalScrolling=ib(r,d.VerticalScrolling),b.visibleRowCount=t.getProp(r,d.VisibleRowCount)},tb=function(a,b){var c,d,e,f,g,h,i=new gb.GridCell;return e=E[b],e.type===gb.ColumnType.TimeColumn&&e.useValueColumnColors?(i.style.forecolor=e.valueColumnForeColor,i.style.fill=e.valueColumnBackColor):(i.style.forecolor=e.foreColor,i.style.fill=e.backColor),f=Lb(e),c=O[f][a],c&&(d=c[e.name],d&&(i.value=d.value,e.type===gb.ColumnType.TimeColumn?""!==i.value&&(h=i.value,cb.timeStepBase&&(h-=h%l),g=new Date(h),i.value=Rb(g,e.timeFormat,e.dateFormat,e.showDate)):("string"!=typeof i.value&&(i.value=u.getDecimalPrecision(e,i.value)),L||(i.value+=vb(d.quality))))),i},ub=function(a,b){var c,d={};return c=E[b],c.type===gb.ColumnType.TimeColumn&&c.useValueColumnColors?(d.forecolor=c.valueColumnForeColor,d.fill=c.valueColumnBackColor):(d.forecolor=c.foreColor,d.fill=c.backColor),d},vb=function(a){var b="";return yb(a)?b=" u.":zb(a)&&(b=" m."),b},wb=function(a){return a>=Z&&255>=a?!0:!1},xb=function(a){var b=Y;return(a&W)>0&&(b=a>>16),b},yb=function(a){return a>255&&(a=xb(a)),!wb(a)},zb=function(a){return(a&X)>0?!0:!1},Ab=function(a){null===a?(m=null,n=null):m=a+1,Pb()},Bb=function(a){var b,d,e,f,g,h,i,j,k=new PWC.HmiAC.Common.SortClass;if(e=E[a],d=Lb(e),b=M[d],Nb(a,b,d),f=Mb(b),k.setDefaultSortColumn(b[0].name),k.setDefaultSortOrder(!0),g=f.length,0===g)N[d].sort(k.defaultSort),O[d].sort(k.defaultSort);else for(j=0;g>j;j++)h=f[j],i=b[h].name,k.messageBlock.push(i),k.sortOrder.push(b[h].columnModel.sortOrder),N[d]=N[d].sort(k.mySort),O[d]=O[d].sort(k.mySort);c.load(J)},Cb=function(a){null===a?(m=null,n=null):n=a+1,Pb()},Db=function(){},Eb=function(a,b){var c,d,e,f;L=!1,null!==a&&null!==b&&J>a&&(c=E[b],c.type===gb.ColumnType.TimeColumn?Fb("TBID_TableCtrl_TimeColumnEditError_Msg","TBID_TableCtrl_Note_Caption"):(d=Lb(c),e=O[d][a],e?(f=e[c.name],void 0===f||void 0===f.value||null===f.value||""===f.value?Fb("TBID_TableCtrl_EmptyCellEditError_Msg","TBID_TableCtrl_Note_Caption"):cb.enableEdit?K?L=!0:Fb("TBID_TableCtrl_EditingModeError_Msg","TBID_TableCtrl_Note_Caption"):Fb("TBID_TableCtrl_EditNotAllowedError_Msg","TBID_TableCtrl_Note_Caption")):Fb("TBID_TableCtrl_EmptyCellEditError_Msg","TBID_TableCtrl_Note_Caption")))},Fb=function(a,b){var c,d=r.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),e=document.createElement("div");d.appendChild(e),a=R.getText(a),b=R.getText(b),PWC.Components.GenericDialog.ShowWarning(a,e,b,function(){return c=!0,!1})},Gb=function(a,b){var c,d,e,f,g=new PWC.Components.Grid.EditAuthorization;return c=E[b],d=Lb(c),f=db[d],e=O[d][a][c.name],h=O[d][a][c.name].value+vb(e.quality),j=new Date(O[d][a][c.timeColumnName].value),j=Rb(j,f.timeFormat,f.dateFormat,f.showDate),i=c.dataSource.Tag,L?(g.authorize=!0,g.editElementType=PWC.Components.Grid.EditElementType.Standard):g.authorize=!1,g},Hb=function(a,b,c){var e,f,h,i,j,l,m,n=[],o=[],p=[],q=[],r=[],s=[],t=[],u=PWC.HmiAC.TableControl.ValueTypeFlags,v=PWC.Lib.Canvas.Converters.convertJSTimeStampToFileTime;if(k=a,L){if(L=!1,c=parseFloat(c),isNaN(c)||!isFinite(c))return Fb("TBID_TableCtrl_InputError_Msg","TBID_TableCtrl_InputError_Caption"),!1;if(e=E[b],f=Lb(e),h=O[f][a][e.name],c===parseFloat(h.value))return!1;if(g=c+vb(h.quality),2===e.dataSource.TagDataSourceType)return n.push(e.dataSource.Tag),o.push(c),p.push(v(O[f][a][e.timeColumnName].value)),s.push(0),i=h.lflag,j=i|u.EditValue|u.ManualValue,l=65535&j,m=u.QualityCode<<16,j=l|m|u.QualityValue,t.push(j),r[0]=d.screenItem.gfxWebLib.connection.getEventParamIDs().Value,q[0]=[n,o,p,s,t],d.screenItem.gfxWebLib.connection.sendDomainLogicEvent(d.screenItem.rtoid,PWC.HmiAC.TrendControlEventID.Write,r,q),!0;if(h.value!==c)return Fb("TBID_TableCtrl_WriteError_Msg","TBID_TableCtrl_WriteError_Caption"),!1}},Ib=function(){var a=[],b=[];b[0]=d.screenItem.gfxWebLib.connection.getEventParamIDs().Value,a[0]=[j,g,h,i],d.screenItem.gfxWebLib.connection.sendDomainLogicEvent(d.screenItem.rtoid,PWC.HmiAC.TrendControlEventID.CreateOperatorMessage,b,a)},Jb=function(a){var b=a.selectedCellRowIndex,c=a.selectedCellColumnIndex;Q=a.rowSelection,w&&d.calculateRulerData(PWC.HmiAC.RulerControlColumnType.StatisticArea),m=null!==b&&void 0!==b?b+1:null,n=null!==c&&void 0!==c?c+1:null,Pb()},Kb=function(){var a,b,c,d,e=[],f=[],g=[],h=0,i=0;for(a=0;a<Q.length;a++)for(b=0;b<O[i].length;b++)if(b===Q[a])for(c=0;c<O.length;c++){for(d=0;d<M[c].length;d++)e[d]=O[c][b];f[h]=e,e=[],h%2!==0&&(g.push(f[h].concat(f[h-1])),h++)}return g},Lb=function(a){return a.timeColumnName?G[a.timeColumnName]:G[a.name]},Mb=function(a){var b,c,d,e=[];for(c=a.length,b=0;c>b;b++)d=a[b].columnModel.sortIndex,d>0&&(e[d-1]=b);return e},Nb=function(a,d,e){var f,g,h,i,j,k,l,m=PWC.Components.Grid.TableSortOrder;if(k=d.length,f=E[a],j=f.columnModel.sortIndex,i=f.columnModel.sortOrder,i=Ob(i),f.columnModel.sortOrder=i,b.sortSequence===PWC.Components.Grid.TableSortSequence.AscDescNone)if(i===m.None){for(h=0;k>h;h++)g=d[h],l=g.columnModel.sortIndex,l>j&&(g.columnModel.sortIndex=l-1);f.columnModel.sortIndex=j=0,T[e]--}else i===m.Ascending&&(f.columnModel.sortIndex=T[e]?++T[e]:T[e]=1);else if(i===m.Ascending||T[e]>1){for(h=0;k>h;h++)g=d[h],l=g.columnModel.sortIndex,g.columnModel.sortIndex>0&&(g.columnModel.sortIndex=0,g.columnModel.sortOrder=0);f.columnModel.sortIndex=T[e]=1,f.columnModel.sortOrder=i}c.onPropertyChange()},Ob=function(a){var c=null,d=PWC.Components.Grid.TableSortOrder,e=PWC.Components.Grid.TableSortSequence;if(b.sortSequence===e.AscDescNone)switch(a){case d.None:c=d.Ascending;break;case d.Ascending:c=d.Descending;break;case d.Descending:c=d.None}else if(b.sortSequence===e.AscDesc)switch(a){case d.None:c=d.Ascending;break;case d.Ascending:c=d.Descending;break;case d.Descending:c=d.Ascending}return c},Pb=function(){var a=PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar;cb.online||A?(a.text(r,"SelectedRow",R.getText("TBID_TableCtrl_Statusbar_Row")+" : "+J),a.text(r,"SelectedColumn"," ")):(m?a.text(r,"SelectedRow",R.getText("TBID_TableCtrl_Statusbar_Row")+" : "+m):a.text(r,"SelectedRow"," "),n?a.text(r,"SelectedColumn",R.getText("TBID_TableCtrl_Statusbar_Column")+" : "+n):a.text(r,"SelectedColumn"," "))},Qb=function(){var a,b=0,c=eb.length;for(a=0;c>a;a++)eb[a].columnModel.visible&&b++;u.updateConnectionState(b,fb,r)},Rb=function(a,b,c,d){var e,f=[];return b=b&&""!==b?b:cb.localTimeFormat,f.push(b),c=c&&""!==c?c:cb.localDateFormat,f.push(c),e=r.tableControl.customFormat(a,f),d?e[1]+" "+e[0]:e[0]},Sb=function(){var a,b,c,d,e,f,g,h,i,j,k={},l=[],m=[];
for(i=E.length,e=0;i>e;e++){for(f=E[e],a=Lb(f),j=Q.length,g=0;j>g;g++)b=Q[g],b<O[a].length&&(c=f.name,(h=O[a][b][c])&&(d=h.value,l.push(d)));k.valuearr=l,k.name=f.name,k.forecolor=f.foreColor,k.fill=f.backColor,m[e]=k,k={},l=[]}return m},Tb=function(a,b){var c;for(c=0;c<a.length;c++)if(a[c].name===b)return a[c]},Ub=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,v,w,x,y,z,A,B=0,C=[],D=[],E=[],F=[],G=[],H=[],I="",J="",K=PWC.HmiAC.RulerControlColumns,L=PWC.HmiAC.FormatDuration;if(G=Sb(a),f=d.rulerControl.getColumns(a),f!==!1){for(g=f.length,c=0;c<eb.length;c++)if(s="",x="",t=0,w=0,A="",eb[c].columnModel.visible){if(j=Tb(G,eb[c].name),i=eb[c].timeColumnName,k=Tb(G,i),E=j.valuearr,v=E.length,v>0){for(b=0;b<E.length;b++)t+=+E[b],w+=Math.pow(E[b],2);s=t/v,x=v-1>0?Math.sqrt((w-Math.pow(t,2)/v)/(v-1)):0}for(H=k.valuearr,y=z=H[B],b=1;b<H.length;b++)H[b]<y?y=H[b]:H[b]>z&&(z=H[b]);for(l={autoDecimalPrecision:eb[c].autoDecimalPrecision,decimalPrecision:eb[c].decimalPrecision,exponentialFormat:eb[c].exponentialFormat},h=0;g>h;h++){switch(e=f[h],e.source){case K.Name:C[e.displayName]=j.name;break;case K.ValueY_LL:n=j.valuearr[B],C[e.displayName]=e.useSourceFormat?u.getDecimalPrecision(l,n):u.getDecimalPrecision(e,n);break;case K.TimeStamp_LL:m=k.valuearr[B];break;case K.ValueY_UL:n=j.valuearr[j.valuearr.length-1],C[e.displayName]=e.useSourceFormat?u.getDecimalPrecision(l,n):u.getDecimalPrecision(e,n);break;case K.TimeStamp_UL:m=k.valuearr[k.valuearr.length-1];break;case K.AreaName_LL:break;case K.AreaName_HL:break;case K.Minimum:for(F=j.valuearr,I=F[B],b=1;b<F.length;b++)F[b]<I&&(I=F[b]);n=I,C[e.displayName]=e.useSourceFormat?u.getDecimalPrecision(l,n):u.getDecimalPrecision(e,n);break;case K.MinimumTimeStamp:m=y;break;case K.Maximum:for(F=j.valuearr,J=F[B],b=1;b<F.length;b++)F[b]>J&&(J=F[b]);n=J,C[e.displayName]=e.useSourceFormat?u.getDecimalPrecision(l,n):u.getDecimalPrecision(e,n);break;case K.MaximumTimeStamp:m=z;break;case K.Average:n=s,C[e.displayName]=e.useSourceFormat?u.getDecimalPrecision(l,n):u.getDecimalPrecision(e,n);break;case K.StandardDeviation:n=x,C[e.displayName]=e.useSourceFormat?u.getDecimalPrecision(l,n):u.getDecimalPrecision(e,n);break;case K.Integral:break;case K.WeightedAverage:break;case K.Duration:z&&y&&(A=((z-y)/1e3).trimNum(3)),n=A,n&&""!==n&&(p=e.timeFormat,"automatic"===p.toLowerCase()||""===p?(p=r.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Duration").f,o=L.getAutomaticDurationFormat):o=L.getCustomDurationFormat,"s"!==p&&(n=o(p,n))),C[e.displayName]=n;break;case K.NumberOfValues:C[f[h].displayName]=v}(e.source===K.TimeStamp_LL||e.source===K.TimeStamp_UL||e.source===K.MinimumTimeStamp||e.source===K.MaximumTimeStamp)&&(m&&(q=new Date(m),m=Rb(q,e.timeFormat,e.dateFormat,e.showDate)),C[e.displayName]=m),C.foreColor=j.forecolor,C.backColor=j.backColor}D.push(C),C=[]}D&&d.rulerControl.displayData(D,a)}},Vb=function(){var a=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar,b=d.rulerControl.screenItem;a.enable(b,"ShowRuler",!1),a.enable(b,"ShowStatisticRuler",!0),a.enable(b,"CalculateStatistic",!0)},Wb=function(a){var b=PWC.HmiAC.RulerControlColumnType,c=gb.ToolBarButton.CalculateStatistic;if(a)d.rulerControl&&e&&(d.rulerControl.enableDisable(a,{height:d.getHeight(),width:d.getWidth(),left:d.getLeft(),top:d.getTop()}),d.rulerControlColumnType=b.StatisticArea,d.rulerControl.setColumnHeaders(d.rulerControlColumnType),d.calculateRulerData(d.rulerControlColumnType),v.enable(r,c,!0));else if(d.rulerControl){if(d.rulerControlColumnType===b.StatisticArea)d.rulerControl.enableDisable(a),d.rulerControlColumnType=null;else{if(!cb.online)return d.rulerControlColumnType=b.StatisticArea,d.rulerControl.setColumnHeaders(d.rulerControlColumnType),d.calculateRulerData(d.rulerControlColumnType),!1;0===Q.length?(d.rulerControl.enableDisable(a),d.rulerControlColumnType=null):d.rulerControlColumnType===b.StatisticResult&&(d.rulerControlColumnType=b.Ruler,d.rulerControl.setColumnHeaders(d.rulerControlColumnType),d.calculateRulerData(d.rulerControlColumnType))}v.enable(d.screenItem,c,!1)}return w=a,!0},Xb=function(){d.rulerControl&&(d.rulerControlColumnType=PWC.HmiAC.RulerControlColumnType.StatisticResult,d.rulerControl.setColumnHeaders(d.rulerControlColumnType),d.calculateStatistics=!0,d.calculateRulerData(d.rulerControlColumnType),d.calculateStatistics=!1)},Yb=function(a){a&&cb.online&&jc(r,!a,!0),Wb(a)&&v.check(r,gb.ToolBarButton.ShowStatisticRuler,a)},Zb=function(a,b){this.value=a,this.quality=b,this.refCount=0},$b=function(a){var b,d,e,f,g,h,i,j,l,m,n,o,p,q,r,s=0,t=0,u=0,v=!1,w=!1,x=[],C=M.length,D=-1,E=!1;if(s=a.ItemIDArray.length,A){for(e=0;s>e;e++)g=I[a.ItemIDArray[e]],f=db[G[g.timeColumnName]],p=a.TimestampsArray[e],z[f.name]=S(p)<f.currentEndValue?!1:!0;bc()&&(A=!1,y=null)}for(m=cb.online||A?N:P,h=0;C>h;h++)x[h]=m[h].length;for(e=0;s>e;e++)if(g=I[a.ItemIDArray[e]],g&&g.columnModel.visible&&(r=a.ErrorsArray[e],void 0===fb[g.name]?(r===ab||r===bb)&&(fb[g.name]=g.dataSource.Tag,Qb()):0===r&&(delete fb[g.name],Qb()),(cb.online||A||1===g.dataSource.TagDataSourceType||zb(a.QualitiesArray[e]))&&(h=G[g.timeColumnName],f=db[h],i=m[h],o=a.ValuesArray[e],p=S(a.TimestampsArray[e]),q=a.QualitiesArray[e],"[empty]"!==o&&"[empty]"!==p))){if(d=new Zb(o,q),A)if(f.rangeType===PWC.HmiAC.RangeType.PointCount){if(g.valuesCount>=f.pointCount)continue;g.valuesCount++}else if(p<f.currentBeginValue||p>=f.currentEndValue)continue;if(zb(q)){if(k>=0&&Dc(O[h][k][g.timeColumnName].value,p)){O[h][k][g.name]=d,c.invalidateView([{type:PWC.Components.Grid.DataOperationType.Update,value:k}],J),k=-1;continue}if(m===P){for(D=-1,l=N[h].length,b=l-1;b>=0;b--){if(n=N[h][b][g.timeColumnName].value,p>n){D=b+1;break}if(n===p){E=!0,D=b;break}}E?N[h][D][g.name]=d:D>=0&&(j={},j[g.name]=d,d=new Zb(p),d.refCount++,j[f.name]=d,N[h].splice(D,0,j)),D!==N[h].length-1&&(x[h]<D&&(x[h]=D),Cc(x,N),cc());continue}}for(v=!1,t=l=i.length,b=u;l>b;b++){if(i[b][g.timeColumnName].value>p){t=b;break}if(i[b][g.timeColumnName].value===p){v=!0,t=b;break}}u=t,x[h]>t&&(x[h]=t),v?(A&&f.rangeType===PWC.HmiAC.RangeType.PointCount&&i[t][g.name]&&g.valuesCount--,i[t][g.name]||(i[t][g.name]=d,i[t][g.timeColumnName].refCount++)):(j={},j[g.name]=d,d=null,d=new Zb(p),d.refCount++,j[f.name]=d,i.splice(t,0,j))}return(cb.online||A)&&B?(Cc(x,m),w=cc()):void ec()},_b=function(a){function b(){d>e&&(c=I[a.ItemIDArray[e]],ac(a,e,c,b),e++)}var c,d=0,e=0;d=a.ItemIDArray.length,B=!1,b()},ac=function(a,b,d,e){function f(){for(;p>P;P++){if(s=!1,t=k.length,u=S(n[P]),v=l[P],w=o[P],"[empty]"!==v&&"[empty]"!==u){for(j.rangeType===PWC.HmiAC.RangeType.PointCount&&d.valuesCount<j.pointCount&&d.valuesCount++,s=!1,r=t,D=q;t>D;D++){if(k[D][d.timeColumnName].value>u){r=D;break}if(k[D][d.timeColumnName].value===u){s=!0,r=D;break}}q=r,Q[i]>r&&(Q[i]=r),E=new Zb(v,w),s?k[r][d.name]||(k[r][d.name]=E,k[r][d.timeColumnName].refCount++):(H={},H[d.name]=E,E=null,E=new Zb(u),E.refCount++,H[j.name]=E,k.splice(r,0,H))}if((P+1)%5e4===0){P++,setTimeout(f,1);break}}P===p&&(h(),setTimeout(e,1))}function g(){B=!0,cb.online||null!==y&&void 0!==y?(Cc(Q,N),R=cc()):(fc(),Cc(Q,N),R=c.load(J),cb.online&&(m=J,Pb()))}function h(){var b,c,d,e,f,h,k,l,m=null,o=a.ItemIDArray.length;if(C++,C===o){for(C=0,i=0;T>i;i++)for(Q[i]=0,j=db[i],I=j.calculateTimeRange(),k=F[i].length,h=0;k>h;h++)if(c=F[i][h],c&&2===c.dataSource.TagDataSourceType){for(d=c.dataSource.Tag,l=0;o>l&&a.ItemIDArray[l]!==d;l++);if(n=a.TimestampsArray[l],m=N[i],b=m.length,n&&"[empty]"!==n&&n.length&&b>0)if(K=m[0][j.name].value,L=m[b-1][j.name].value,cb.online)j.rangeType!==PWC.HmiAC.RangeType.PointCount&&(j.currentEndValue=L,j.currentBeginValue=L-I,K<j.currentBeginValue&&(N[i]=m.slice(1,b)),K>=j.currentEndValue&&(N[i]=m.slice(0,b-1)));else if(null!==y&&void 0!==y){switch(y){case x.MoveToFirst:j.rangeType===PWC.HmiAC.RangeType.PointCount?(j.beginTime=j.currentBeginValue=S(n[0]),j.endTime=j.currentEndValue=S(n[n.length-1])):(j.beginTime=j.currentBeginValue=S(n[0]),j.endTime=j.currentEndValue=j.currentBeginValue+I);break;case x.MoveToLast:if(j.rangeType===PWC.HmiAC.RangeType.PointCount)j.beginTime=j.currentBeginValue=S(n[0]),j.endTime=j.currentEndValue=S(n[n.length-1]);else{for(f=0;L-K>=I;)f++,m[f]&&(K=m[f][j.name].value);N[i]=m=m.slice(f),b=m.length,K=m[0][j.name].value,j.beginTime=j.currentBeginValue=K,j.endTime=j.currentEndValue=K+I}break;case x.MoveToPrevious:j.rangeType===PWC.HmiAC.RangeType.PointCount?(j.beginTime=j.currentBeginValue=S(n[0]),j.endTime=j.currentEndValue=S(n[n.length-1])):z[j.name]=L-K>=j.calculateTimeRange()?!0:!1,A=!bc();break;case x.MoveToNext:if(j.rangeType===PWC.HmiAC.RangeType.PointCount){for(j.beginTime=j.currentBeginValue=S(n[0]),j.endTime=j.currentEndValue=S(n[n.length-1]);K<j.beginTime&&b>0;){for(e=0;e<F[i].length;e++)c=F[i][e],N[i][0][c.name]&&c.valuesCount--;N[i]=N[i].slice(1,b),b--,b>0&&(K=N[i][0][j.name].value)}b>0?(K=N[i][0][j.name].value,j.beginTime=j.currentBeginValue=K,j.endTime=j.currentEndValue=L):(j.currentBeginValue=j.endTime+PWC.HmiAC.FileTime.MS500,j.currentEndValue=j.currentBeginValue+PWC.HmiAC.FileTime.Minute,j.endTime=j.beginTime+PWC.HmiAC.FileTime.Minute)}else z[j.name]=L-K>=j.calculateTimeRange()?!0:!1;A=!bc()}j.rangeType!==PWC.HmiAC.RangeType.PointCount&&(K<j.currentBeginValue&&(N[i]=m.slice(1,b)),L>=j.currentEndValue&&(N[i]=m.slice(0,b-1)))}else{for(D=0;b>D&&!(m[D][j.name].value>=j.currentBeginValue);D++);N[i]=m.slice(D),m=N[i],b=m.length,oc(O),j.rangeType===PWC.HmiAC.RangeType.FromBeginToEnd&&(b&&(K=m[0][j.name].value,L=m[b-1][j.name].value,z[j.name]=L-K>=j.calculateTimeRange()?!0:!1),A=!bc())}}j=n=null,setTimeout(g,10)}return R}var i,j,k,l,n,o,p,q,r,s,t,u,v,w,D,E,H,I,K,L,P=0,Q=[],R=!1,T=M.length;i=G[d.timeColumnName],j=db[i],k=N[i],l=a.ValuesArray[b],n=a.TimestampsArray[b],o=a.QualitiesArray[b],p=l.length,q=0,"[empty]"!==l&&d.columnModel.visible?f():(h(),setTimeout(e,1))},bc=function(){var a,b,c,d=eb.length;for(a=0;d>a;a++)if(b=db[G[eb[a].timeColumnName]],c=eb[a],2===c.dataSource.TagDataSourceType){if(b.rangeType===PWC.HmiAC.RangeType.PointCount&&c.valuesCount<b.pointCount)return!1;if(b.rangeType!==PWC.HmiAC.RangeType.PointCount&&!z[b.name])return!1}return!0},cc=function(){var a,b;return b=dc(),a=A||b||!cb.online?c.load(J):c.invalidateView([{type:PWC.Components.Grid.DataOperationType.Add,value:J-1}],J),cb.online&&Pb(),a},dc=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=M.length,q=!1,r=0,s=1,t={},u=0,v=gb.RangeType;for(g=0;p>g;g++){if(a=M[g][0],f=a.name,h=O[g].length,u=0,h>0){switch(a.rangeType){case v.TimeRange:if(b=a.timeRangeFactor*gb.TimeRangeBaseValues[a.timeRangeBase],e=O[g][h-1][f].value,0>e)continue;for(i=0;h>i;i++)if(""!==O[g][i][f].value&&(d=O[g][i][f].value,c=Math.abs(e-d),b>c)){q=!0,O[g]=O[g].slice(i);break}r<O[g].length&&(r=O[g].length);break;case v.StartEndTime:for(b=a.endTime-a.beginTime,e=O[g][h-1][f].value,i=0;h>i;i++)if(""!==O[g][i][f].value&&(d=O[g][i][f].value,c=Math.abs(e-d),b>c)){q=!0,O[g]=O[g].slice(i);break}r<O[g].length&&(r=O[g].length);break;case v.MeasurementPoints:for(j=F[g].length,s=0;j>s;s++)t[F[g][s].name]=0;for(i=h-1;i>=0;i--){for(m=!0,s=0;j>s;s++)k=F[g][s].name,n=O[g][i][k],n&&(t[k]<a.pointCount?(l=n.value,void 0!==l&&null!==l&&""!==l&&(t[k]+=1,m=!1,t[k]===a.pointCount&&u++)):(delete O[g][i][k],O[g][i][f].refCount--));if(m&&(O[g].splice(i,1),N[g].splice(i,1)),u===j){O[g]=O[g].slice(i),q=!0;break}}r<O[g].length&&(r=O[g].length),J>r&&(q=!0)}a.rangeType===v.MeasurementPoints&&(a.currentBeginValue=N[g][0][f].value,a.currentEndValue=N[g][N[g].length-1][f].value)}if(o=N[g].length,O[g].length>0)for(i=0;i<N[g].length;i++)if(Dc(N[g][i][f].value,O[g][0][f].value)){N[g].splice(0,i);break}}return J=r,q},ec=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=M.length,p=1,q={},r=0,s=gb.RangeType;for(g=0;o>g;g++)if(a=M[g][0],f=a.name,h=P[g].length,r=0,h>0)switch(a.rangeType){case s.TimeRange:if(b=a.timeRangeFactor*gb.TimeRangeBaseValues[a.timeRangeBase],e=P[g][h-1][f].value,0>e)continue;for(i=0;h>i;i++)if(""!==P[g][i][f].value&&(d=P[g][i][f].value,c=Math.abs(e-d),b>c)){P[g]=P[g].slice(i);break}break;case s.StartEndTime:for(b=a.endTime-a.beginTime,e=P[g][h-1][f].value,i=0;h>i;i++)if(""!==P[g][i][f].value&&(d=P[g][i][f].value,c=Math.abs(e-d),b>c)){P[g]=P[g].slice(i);break}break;case s.MeasurementPoints:for(j=F[g].length,p=0;j>p;p++)q[F[g][p].name]=0;for(i=h-1;i>=0;i--){for(m=!0,p=0;j>p;p++)k=F[g][p].name,n=P[g][i][k],q[k]<a.pointCount?n&&(l=n.value,void 0!==l&&null!==l&&""!==l&&(q[k]+=1,m=!1,q[k]===a.pointCount&&r++)):delete P[g][i][k];if(m&&P[g].splice(i,1),r===j){P[g]=P[g].slice(i);break}}}},fc=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=M.length,o=!1,p=0,q=1,r={},s=0,t=gb.RangeType;for(f=0;n>f;f++)if(a=M[f][0],e=a.name,s=0,g=N[f].length,g>0)switch(a.rangeType){case t.TimeRange:for(b=a.timeRangeFactor*gb.TimeRangeBaseValues[a.timeRangeBase],d=a.currentBeginValue+b,h=g-1;h>=0;h--)if(c=N[f][h][e].value,d>c){o=!0;break}N[f]=N[f].slice(0,h+1),p<N[f].length&&(p=N[f].length);break;case t.StartEndTime:for(b=a.endTime-a.beginTime,d=a.currentEndValue,h=g-1;h>=0;h--)if(c=N[f][h][e].value,d>c){o=!0;break}N[f]=N[f].slice(0,h+1),p<N[f].length&&(p=N[f].length);break;case t.MeasurementPoints:for(i=F[f].length,q=0;i>q;q++)r[F[f][q].name]=0;for(h=0;g>h;h++){for(l=!0,q=0;i>q;q++)j=F[f][q].name,m=N[f][h][j],r[j]<a.pointCount?m&&(k=m.value,void 0!==k&&null!==k&&""!==k&&(r[j]+=1,l=!1,r[j]===a.pointCount&&s++)):delete N[f][h][j];if(l)N[f].splice(h,1),h--,g=N[f].length;else if(s===i){N[f]=N[f].slice(0,h+1),o=!0;break}}p<N[f].length&&(p=N[f].length),J>p&&(o=!0)}return J=p,o},gc=function(a){return a-a%l},hc=function(a,e){var f,g,h,i,j,k,l,n,o,p,q,t,u,z,B=gb.ToolBarButton,C=[],D=[],E=[],F=[],G=[];switch(e){case B.ShowPropertyDialog:h=document.createElement("div"),h.setAttribute("id","PropertyBrowser"),g=r.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),g.appendChild(h),i=new PWC.Components.GenericDialog.Content.Angular,r.props.table=b,l={Width:511,Height:715,ShowCaption:1,Caption:R.getText("TBID_TableCtrlPB_Name"),BorderEnabled:!0,WindowCloseEnabled:!0,WindowSizingEnabled:!1,WindowMovingEnabled:!0,WindowMaximizeEnabled:!1,ShowScrollBars:!1},z={name:"TablePropertyBrowser",eventHandler:null,sourceItem:r,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(r,"TablePropertyBrowser")},k=i.createContent(z),setTimeout(function(){j=g.getElementsByClassName("pwcPBTabs")[0],j&&new PWC.Components.GenericDialog.Content.TabView(j,{start:2})},1e3),f=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",h,l),f.showModal(k);break;case B.ShowHelp:break;case B.MoveToFirst:if(A=!1,kc(P,N),oc(N),oc(O),c.clearSelection(),y=x.MoveToFirst,d.screenItem.gfxWebLib.appMode===PWC.Lib.AppMode.EDIT)return;for(u=eb.length,n=0;n<db.length;n++)for(o=db[n],t=o.calculateTimeRange(),q=0;u>q;q++)p=eb[q],p.timeColumnName===o.name&&void 0!==p.dataSource.Tag&&2===p.dataSource.TagDataSourceType&&(C.push(0),o.rangeType===PWC.HmiAC.RangeType.PointCount?(D.push(0),F.push(o.pointCount)):(D.push(t),F.push(0)),E.push(d.screenItem.gfxWebLib.connection.datatypesToString(d.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(p.dataSource.Tag))),G.push(p.columnModel.index));E.length&&d.sendDomainLogicRead(C,D,F,E,G,x.MoveToFirst),m=null,cc();break;case B.MoveToPrevious:if(A=!1,kc(P,N),oc(N),oc(O),c.clearSelection(),y=x.MoveToPrevious,d.screenItem.gfxWebLib.appMode===PWC.Lib.AppMode.EDIT)return;for(u=eb.length,n=0;n<db.length;n++)for(o=db[n],t=o.calculateTimeRange(),o.rangeType===PWC.HmiAC.RangeType.PointCount?(o.currentEndValue=o.currentBeginValue,o.currentBeginValue=o.currentEndValue-t):(o.endTime=o.currentEndValue=o.currentEndValue-t,o.beginTime=o.currentBeginValue=o.currentBeginValue-t),q=0;u>q;q++)p=eb[q],p.timeColumnName===o.name&&void 0!==p.dataSource.Tag&&2===p.dataSource.TagDataSourceType&&(o.rangeType===PWC.HmiAC.RangeType.PointCount?(F.push(o.pointCount),C.push((o.currentEndValue+_)*$),D.push((o.currentEndValue+_)*$)):(F.push(0),D.push((o.currentEndValue+_)*$),C.push((o.currentBeginValue+_)*$)),E.push(d.screenItem.gfxWebLib.connection.datatypesToString(d.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(p.dataSource.Tag))),G.push(p.columnModel.index));E.length&&d.sendDomainLogicRead(C,D,F,E,G,x.MoveToPrevious),m=null,cc();break;case B.MoveToNext:if(A=!1,kc(P,N),oc(N),oc(O),c.clearSelection(),y=x.MoveToNext,d.screenItem.gfxWebLib.appMode===PWC.Lib.AppMode.EDIT)return;for(u=eb.length,n=0;n<db.length;n++)for(o=db[n],t=o.calculateTimeRange(),o.rangeType===PWC.HmiAC.RangeType.PointCount?(o.currentBeginValue=o.currentEndValue,o.currentEndValue=o.currentEndValue+t):(o.endTime=o.currentEndValue=o.currentEndValue+t,o.beginTime=o.currentBeginValue=o.currentBeginValue+t),q=0;u>q;q++)p=eb[q],p.timeColumnName===o.name&&void 0!==p.dataSource.Tag&&2===p.dataSource.TagDataSourceType&&(F.push(o.rangeType===PWC.HmiAC.RangeType.PointCount?o.pointCount:0),D.push((o.currentEndValue+_)*$),C.push((o.currentBeginValue+_)*$),E.push(d.screenItem.gfxWebLib.connection.datatypesToString(d.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(p.dataSource.Tag))),G.push(p.columnModel.index));E.length&&d.sendDomainLogicRead(C,D,F,E,G,x.MoveToNext),m=null,cc();break;case B.MoveToLast:if(A=!1,kc(P,N),oc(N),oc(O),c.clearSelection(),y=x.MoveToLast,d.screenItem.gfxWebLib.appMode===PWC.Lib.AppMode.EDIT)return;for(u=eb.length,n=0;n<db.length;n++)for(o=db[n],t=o.calculateTimeRange(),q=0;u>q;q++)p=eb[q],p.timeColumnName===o.name&&void 0!==p.dataSource.Tag&&2===p.dataSource.TagDataSourceType&&(C.push(0),o.rangeType===PWC.HmiAC.RangeType.PointCount?(D.push(0),F.push(o.pointCount)):(D.push(t),F.push(0)),E.push(d.screenItem.gfxWebLib.connection.datatypesToString(d.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(p.dataSource.Tag))),G.push(p.columnModel.index));E.length&&d.sendDomainLogicRead(C,D,F,E,G,x.MoveToLast),m=null,cc();break;case B.EditRows:var H=PWC.Components.Grid.ControlEvents;K=!K,v.check(r,B.EditRows,K),K?(c.subscribeEvent(H.OnCellEditBegin),c.subscribeEvent(H.OnCellEditEnd)):(c.unSubscribeEvent(H.OnCellEditBegin),c.unSubscribeEvent(H.OnCellEditEnd));break;case B.InsertValueDialog:break;case B.CopyRows:break;case B.ShowTagSelection:break;case B.ShowColumnSelection:break;case B.ShowTimeSelection:var I,J;J=document.createElement("div"),J.setAttribute("id","TimeRangeSelection"),I=s.topLevelScreenWindow.getTopLevelScreenWindowDiv(),I.appendChild(J),a.getSelectedTimeById=Hc,a.parentId=PWC.HmiAC.TableControl.TableElementId.TimeColumns,a.timeProps=db,l={Width:520,Height:334,ShowCaption:1,Caption:s.textbib.getText("TBID_TimeRangeDialog_Caption")},z={name:"TimeRangeSelection",eventHandler:null,sourceItem:this.ISource,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(a,"TimeRangeSelection")},i=new PWC.Components.GenericDialog.Content.Angular,k=i.createContent(z),f=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",J,l),f.showModal(k);break;case B.PreviousColumn:break;case B.NextColumn:break;case B.StartStopUpdate:jc(a,!cb.online,!0);break;case B.Print:break;case B.Export:break;case B.ShowStatisticRuler:Yb(!w);break;case B.CalculateStatistic:Xb();break;case B.AttachDB:break;case B.DetachDB:}},ic=function(){var a,b,c=!1;for(b=0;b<eb.length;b++)if(a=eb[b],2===a.dataSource.TagDataSourceType){c=!0;break}return c},jc=function(a,b,d){var e,f=PWC.Components.Grid.ControlEvents,g=gb.ToolBarButton;cb.online=b,t.setProp(r,"Online",rc(b)),a.gfxWebLib.connection.sendPropertyByName(r.rtoid,"Online",rc(b),!1,!1),b?(mc(),kc(N,P),Bc(),cc(),m=null,n=null,A=!1,y=null,Rc(),c.unSubscribeEvent(f.OnRowHeaderClick),c.unSubscribeEvent(f.OnColumnHeaderClick),c.unSubscribeEvent(f.OnSortButtonClicked),c.unSubscribeEvent(f.OnCellDoubleClick),c.unSubscribeEvent(f.OnCellEditBegin),c.unSubscribeEvent(f.OnCellEditEnd),v.check(r,g.EditRows,!b),v.enable(r,g.EditRows,!b),v.check(r,g.ShowStatisticRuler,!b),Wb(!b),c.resume(),Pb(),v.enable(r,gb.ToolBarButton.MoveToLast,!b),v.enable(r,gb.ToolBarButton.MoveToFirst,!b),v.enable(r,gb.ToolBarButton.MoveToNext,!b),v.enable(r,gb.ToolBarButton.MoveToPrevious,!b)):(c.pause(),m=J,d&&pc(),c.subscribeEvent(f.OnRowHeaderClick),c.subscribeEvent(f.OnColumnHeaderClick),c.subscribeEvent(f.OnSortButtonClicked),c.subscribeEvent(f.OnCellDoubleClick),v.enable(r,g.EditRows,cb.enableEdit),K&&cb.enableEdit&&(c.subscribeEvent(f.OnCellEditBegin),c.subscribeEvent(f.OnCellEditEnd),v.check(r,g.EditRows,K)),ic()&&(v.enable(r,gb.ToolBarButton.MoveToLast,!b),v.enable(r,gb.ToolBarButton.MoveToFirst,!b),v.enable(r,gb.ToolBarButton.MoveToNext,!b),v.enable(r,gb.ToolBarButton.MoveToPrevious,!b))),e=!b,v.check(r,g.StartStopUpdate,e)},kc=function(a,b){var c,d,e,f,g,h,i,j,k,l=[];for(J=0,d=M.length,c=0;d>c;c++)if(e=M[c],f=a[c].length,g=b[c].length,b[c].length)if(0!==f){if(h=a[c][f-1][e[0].name].value,i=b[c][0][e[0].name].value,i>=h){a[c]=a[c].concat(b[c]),b[c]=[];continue}if(h=a[c][0][e[0].name].value,i=b[c][g-1][e[0].name].value,h>i){b[c]=b[c].concat(a[c]),a[c]=b[c],b[c]=[];continue}for(j=k=0;f>j&&g>k;)h=a[c][j][e[0].name].value,i=b[c][k][e[0].name].value,h>i?(l.push(b[c][k]),k++):i>h?(l.push(a[c][j]),j++):(l.push(lc(a[c][j],b[c][k])),j++,k++);f>j&&(a[c]=a[c].slice(j),l=l.concat(a[c]),a[c]=[]),g>k&&(b[c]=b[c].slice(k),l=l.concat(b[c]),b[c]=[]),a[c]=l,l=[]}else a[c]=b[c],b[c]=[]},lc=function(a,b){var c,d,e;for(d=Object.keys(b),c=d.length,e=0;c>e;e++)a[d[e]]||(a[d[e]]=b[d[e]]);return a},mc=function(){var a,b,c,d;for(d=new PWC.HmiAC.Common.SortClass,nc(),T={},b=M.length,a=0;b>a;a++)c=M[a][0].name,d.setDefaultSortColumn(c),d.setDefaultSortOrder(!0),N[a].sort(d.defaultSort),O[a].sort(d.defaultSort)},nc=function(){var a,b,c,d,e,f;for(b=M.length,a=0;b>a;a++)for(c=M[a],e=c.length,d=0;e>d;d++)f=c[d].columnModel,f.sortOrder=0,f.sortIndex=0},oc=function(a){var b,c,d=M.length,e=eb.length;for(b=0;d>b;b++)a[b]=[],c=db[b],z[c.name]=!1;for(J=0,b=0;e>b;b++)eb[b].valuesCount=0},pc=function(){var a,b,c,d=db.length;for(a=0;d>a;a++)b=db[a],c=qc(b,a),b.beginTime=b.currentBeginValue=c.currentBeginValue,b.endTime=b.currentEndValue=c.currentEndValue},qc=function(a,b){var c,d,e,f=gb.RangeType,g=N[b];if(g.length>0)switch(a.rangeType){case f.TimeRange:c=gb.TimeRangeBaseValues[a.timeRangeBase]*a.timeRangeFactor,e=N[b][N[b].length-1][a.name].value,e%1e3>500&&(e+=1e3),e=new Date(e).setMilliseconds(0),d=e-c;break;case f.StartEndTime:c=a.endTime-a.beginTime,e=N[b][N[b].length-1][a.name].value,e%1e3>500&&(e+=1e3),e=new Date(e).setMilliseconds(0),d=e-c;break;case f.MeasurementPoints:d=N[b][0][a.name].value,e=N[b][N[b].length-1][a.name].value,d%1e3>500&&(d+=1e3),e%1e3>500&&(e+=1e3),d=new Date(d).setMilliseconds(0),e=new Date(e).setMilliseconds(0)}else cb.online?(e=Date.now(),c=gb.TimeRangeBaseValues[a.timeRangeBase]*a.timeRangeFactor,d=e-c):(d=a.beginTime,e=a.endTime);return{currentBeginValue:d,currentEndValue:e}},rc=function(a){return a?1:0},sc=function(a,b){var c,d,e,f,g,h=gb.TableElementId;for(c in a){if(g=a[c],b)switch(d=b.split(":")[0].split("."),e=d[0],f=d[1]-1,e){case"TimeColumns":r.tableControl.timeColumnToUpdate=Hc(f),tc(h.TimeColumns,gb.CommonColumnsPropsEnum[c]||gb.TimeColumnsPropsEnum[c],g,!1);break;case"ValueColumns":r.tableControl.valueColumnToUpdate=Ic(f),tc(h.ValueColumns,gb.CommonColumnsPropsEnum[c]||gb.ValueColumnsPropsEnum[c],g,!1);break;case"TableFont":case"TitleFont":tc(h.Font,PWC.HmiAC.FontPropId[c],g,!1)}else void 0!==(gb.GeneralPropsEnum[c]||PWC.HmiAC.GeneralCommonPropId[c])?tc(h.General,gb.GeneralPropsEnum[c]||PWC.HmiAC.GeneralCommonPropId[c],g,!1):void 0!==PWC.HmiAC.ParameterPropId[c]?tc(h.Parameter,PWC.HmiAC.ParameterPropId[c],g,!1):void 0!==PWC.HmiAC.EffectsPropId[c]?tc(h.Effects,PWC.HmiAC.EffectsPropId[c],g,!1):void 0!==PWC.HmiAC.SelectionPropId[c]&&tc(h.Selection,PWC.HmiAC.SelectionPropId[c],g,!1);PWC.HmiAC.PostPropertyUpdate.Update&&Pc(),PWC.HmiAC.PostPropertyUpdate.Update=!1}},tc=function(a,c,d,e,f){var g,h=t.getProp(r,"TableFont"),i=gb.TableElementId;switch(a){case i.TimeColumns:r.tableControl.timeColumnToUpdate.UpdateProperty(c,d,e);break;case i.ValueColumns:r.tableControl.valueColumnToUpdate.UpdateProperty(c,d,e);break;case i.OperatorMessages:break;case i.OnlineConfiguration:break;case i.Export:break;case i.General:zc(c,d,e);break;case i.Parameter:PWC.HmiAC.PostPropertyUpdate.Update=PWC.HmiAC.UpdateParameterTab.update(r,c,d,b,e,f);break;case i.Effects:c===PWC.HmiAC.EffectsPropId.GridLineWidth&&parseInt(d)>=2147483647&&(d=0),PWC.HmiAC.PostPropertyUpdate.Update=PWC.HmiAC.UpdateEffectsTab.update(r,c,d,b,e,f);break;case i.Selection:PWC.HmiAC.PostPropertyUpdate.Update=PWC.HmiAC.UpdateSelectionTab.update(r,c,d,b,e,f);break;case i.Font:case i.TitleFont:case i.StatusBarFont:g={connection:r.gfxWebLib.connection,rtoid:r.rtoid},PWC.HmiAC.PostPropertyUpdate.Update=PWC.HmiAC.UpdateFontTab.update(g,a,c,d,h,i,b,e);break;case i.ToolBar:PWC.HmiAC.UpdateToolBarTab.update(d,!1,r);break;case i.StatusBar:PWC.HmiAC.UpdateStatusBarTab.update(d,!0,r)}},uc=function(){Rc()},vc=function(a,b){r.gfxWebLib.connection.sendPropertyByName(r.rtoid,a,b,!1,!1)},wc=function(a,b,c){r.gfxWebLib.connection.sendPartPropertyByName(r.rtoid,a,b,c,!1,!1)},xc=function(){var a=r.tableControl.valueColumnToUpdate,b=G[a.timeColumnName],c=db[b];F[b][0].columnModel.name===a.columnModel.name&&(c.valueColumnForeColor=a.foreColor)},yc=function(){var a=r.tableControl.valueColumnToUpdate,b=G[a.timeColumnName],c=db[b];F[b][0].columnModel.name===a.columnModel.name&&(c.valueColumnBackColor=a.backColor)},zc=function(a,f,g){var h,i,j,k=gb.GeneralPropsEnum,l=PWC.HmiAC.GeneralCommonPropId,m=Object.keys(l).concat(Object.keys(k)),n=!1,o={};if(a<k.TimeStepFactor)PWC.HmiAC.UpdateGeneralTab.update(r,a,f,b,g,o);else switch(a){case k.TimeStepFactor:h=parseInt(f,10),t.setProp(r,m[a],h),o[m[a]]=h,cb.timeStepFactor=h,Ec(),n=!0;break;case k.TimeStepBase:if(0===cb.timeStepBase&&0===cb.timeStepFactor&&(t.setProp(r,"TimeStepFactor",1),g&&vc("TimeStepFactor",1),cb.timeStepFactor=1),g)i=gb.TimeUnitList[f];else switch(f){case 0:i=0;break;case 1:i=100;break;case 2:i=250;break;case 3:i=244;break;default:i=232}t.setProp(r,m[a],i),o[m[a]]=i,cb.timeStepBase=i,0===cb.timeStepBase&&(t.setProp(r,"TimeStepFactor",0),g&&vc("TimeStepFactor",0),cb.timeStepFactor=0),f=i,Ec(),n=!0;break;case k.Visible:e=f,t.setProp(r,m[a],f),f?d.rulerControl&&!d.rulerControl.visible&&void 0!==Object.keys(PWC.HmiAC.RulerControlColumnType)[d.rulerControlColumnType]&&(d.rulerControl.enableDisable(!0,ob()),Ub(d.rulerControlColumnType)):d.rulerControl&&d.rulerControl.visible&&d.rulerControl.enableDisable(!1);break;case k.Online:jc(r,f,!0);break;case k.LoadDataImmediately:t.setProp(r,m[a],rc(f)),o[m[a]]=Number(f),cb.loadDataImmediately=f;break;case k.UseColumnForeColors:t.setProp(r,m[a],rc(f)),o[m[a]]=Number(f),cb.useColumnForeColors=g?f:Boolean(f),Gc();break;case k.UseColumnBackColors:t.setProp(r,m[a],rc(f)),o[m[a]]=Number(f),cb.useColumnBackColors=g?f:Boolean(f),Fc();break;case k.EnableEdit:t.setProp(r,m[a],rc(f)),o[m[a]]=Number(f),cb.enableEdit=f,c.setCellEditEnabled(cb.enableEdit,r.control.domParent),v.enable(r,gb.ToolBarButton.EditRows,cb.enableEdit)}n&&(Bc(),Ac(),cc()),a===l.TimeBase&&(cb.timeBase=o.TimeBase,d.customFormat=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(cb.timeBase)),g&&(j=m[a],vc(j,o[j])),PWC.HmiAC.PostPropertyUpdate.Update=!0},Ac=function(){var a,b=m-1,d=n-1,e=[],f=Q.length;for(a=0;f>a;a++)Q[a]<J&&e.push(Q[a]);m>J&&(b=m=null),c.clearSelection(),c.setSelection(e,d,b,!1)},Bc=function(){var a,b=M.length,c=[];for(a=0;b>a;a++)O[a]=[],c[a]=0;Cc(c)},Cc=function(a,b){var c,d,e,f,g,h,i,j,k,l=M.length,m=0;for(b||(b=N),c=0;l>c;c++){if(k=O[c],e=a[c],e>=0&&e<b[c].length){for(f=b[c].length,d=k.length-1,g=b[c][e],i=g[db[c].name].value;d>=0&&k[d][db[c].name].value>i;)k.splice(d,1),d--;for(0>d&&(k.push(b[c][e]),e+=1,d++);f>e;e++)h=k[d],j=k[d][db[c].name].value,g=b[c][e],i=g[db[c].name].value,Dc(j,i)?k[d]=lc(h,g):(k.push(g),d++)}m<k.length&&(m=k.length)}J=m},Dc=function(a,b){var c=gc(a),d=gc(b);return c===d},Ec=function(){var a,b=gb.TimeUnit;return 0===cb.timeStepFactor?void(l=1):(a=b[cb.timeStepBase],void(l=cb.timeStepFactor*a))},Fc=function(){var a,b=D.length;for(a=0;b>a;a++)D[a].columnModel.useColoumnBackgroundColor=cb.useColumnBackColors},Gc=function(){var a,b=D.length;for(a=0;b>a;a++)D[a].columnModel.useColumnForeColor=cb.useColumnForeColors},Hc=function(a){return d.activeTimeColIndex=a,db[a]},Ic=function(a){return eb[a]},Jc=function(a){(b.height!==a.height||b.width!==a.width)&&(c.onPropertyChange({width:a.width,height:a.height}),d.rulerControl&&d.rulerControl.resize({height:d.getHeight(!0),width:d.getWidth(!0),left:d.getLeft(!0),top:d.getTop(!0)},!0))},Kc=function(){d.rulerControl&&d.rulerControl.move({height:d.getHeight(!0),left:d.getLeft(!0),top:d.getTop(!0)})},Lc=function(){var a=F[d.activeTimeColIndex][0];return{foreColor:a.foreColor,backColor:a.backColor}},Mc=function(){var a,b=[],c=db.length,d=PWC.HmiAC.TableControl.TimeColumnsPropsEnum,e={Setting:d.RangeType,StartTime:d.BeginTime,EndTime:d.EndTime,RangeBase:d.TimeRangeBase,RangeFactor:d.TimeRangeFactor,MeasurePoints:d.PointCount};for(a=0;c>a;a++)b.push({name:db[a].name,setting:db[a].rangeType,startTime:Nc(db[a].beginTime),endTime:Nc(db[a].endTime),rangeBase:db[a].timeRangeBase-1,rangeFactor:db[a].timeRangeFactor,measurementPoints:db[a].pointCount});return{rangePropsIds:e,rangeProps:b}},Nc=function(a){var b=new Date;return cb.timeBase===PWC.HmiAC.TimeBase.UTC&&(a+=6e4*b.getTimezoneOffset()),a},Oc=function(a,b,c){r.tableControl.timeColumnToUpdate=Hc(a),(b===gb.TimeColumnsPropsEnum.EndTime||b===gb.TimeColumnsPropsEnum.BeginTime||b===gb.TimeColumnsPropsEnum.RangeType&&PWC.HmiAC.TimeRangeType[c]===gb.RangeType.StartEndTime)&&jc(r,!1,!1),tc(PWC.HmiAC.TableControl.TableElementId.TimeColumns,b,c,!0)},Pc=function(a){c.onPropertyChange(a)},Qc=function(){var a;for(b=null,c.unInit(),c=null,a=0;a<eb.length;a++)eb[a].onCleanUp();for(a=0;a<db.length;a++)db[a].onCleanUp();eb=null,db=null,F=null,D=null,cb=null,N=null,O=null,d=null,r=null},Rc=function(){var a,b,c,e,f,g,h,i,j=[],k=[],l=[],m=0,n=[],o=[],p=cb.online;if(y=null,d.screenItem.gfxWebLib.appMode!==PWC.Lib.AppMode.EDIT){for(h=eb.length,i=db.length,a=0;i>a;a++)for(b=db[a],g=0;h>g;g++)c=eb[g],m=0,c.timeColumnName===b.name&&void 0!==c.dataSource.Tag&&2===c.dataSource.TagDataSourceType&&(p?(e=0,b.rangeType!==PWC.HmiAC.RangeType.PointCount?f=b.calculateTimeRange():(m=b.pointCount,f=0)):b.rangeType===PWC.HmiAC.RangeType.FromBeginToEnd?(e=(b.beginTime+_)*$,f=(b.endTime+_)*$):b.rangeType===PWC.HmiAC.RangeType.TimeRange?(e=(b.beginTime+_)*$,f=(b.beginTime+b.calculateTimeRange()+_)*$):(m=b.pointCount,e=(qc(b,a).currentBeginValue+_)*$,f=0),j.push(e),k.push(f),n.push(m),l.push(d.screenItem.gfxWebLib.connection.datatypesToString(d.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(c.dataSource.Tag))),o.push(c.columnModel.index));l.length&&(B=!1,p?d.sendDomainLogicRead(j,k,n,l,o,x.MoveToLast):d.sendDomainLogicRead(j,k,n,l,o,x.LoadImmediately))}},Sc=function(){var a={};return PWC.Lib.HmiTypes.HmiObject.getRelPosToTLSW(r.container,a),a.adaptScreenToWindowFactor},Tc=function(){r.container.type===PWC.Lib.HmiTypes.HmiObjectTypes.TYPE_HMI_SCREEN&&r.container.container===PWC.Lib.HmiTypes.HmiObjectTypes.TYPE_HMI_TOPLEVELSCREENWINDOW?c.setAdoptGridToScreen(!1):c.setAdoptGridToScreen(!0,Sc)},Uc=function(a,b,c,e,f,g){var h=PWC.HmiAC.TrendControlEventID.TrendViewEventID_ReadRawData,i=[],j=[];g||(g=0),i[0]=d.screenItem.gfxWebLib.connection.getEventParamIDs().Value,j[0]=[a,b,c,e,f,g],d.screenItem.gfxWebLib.connection.sendDomainLogicEvent(d.screenItem.rtoid,h,i,j)},Vc=function(){var a,c,d,e=[],f=D.length;for(E=[],a=0;f>a;a++)d=D[a],c=d.columnModel,c.visible&&(e.push(c),E.push(d),d.type===gb.ColumnType.ValueColumn&&""===d.dataSource.Tag&&void 0===fb[d.name]&&(fb[d.name]=d.dataSource.Tag));b.gridColumns=e,Qb()},Wc=function(a){var b,d,e,f,g,h,i,j,k=eb.length,l=[];for(b=0;k>b;b++)if(eb[b].columnModel.name===a){d=eb[b];break}if(h=d.timeColumnName,f=G[h],!cb.online){for(g=P[f],i=g.length,j=0;i>j;)g[j][a]&&(delete g[j][a],g[j][h].refCount--,0===g[j][h].refCount&&(g.splice(j,1),j--,i--)),j++;P[f]=g}for(e=M.length,b=0;e>b;b++)l.push(N[b].length);
for(g=N[f],i=g.length,j=0;i>j;)g[j][a]&&(delete g[j][a],g[j][h].refCount--,0===g[j][h].refCount&&(g.splice(j,1),j--,i--)),j++;N[f]=g,l[f]=0,O[f]=[],Cc(l,N),cb.online||c.clearSelection(),void 0!==fb[a]&&(delete fb[a],Qb())};return{initialize:qb,onToolbarButton:hc,resize:Jc,move:Kc,onPropertyChange:Pc,onCleanUp:Qc,initializeRowData:$b,initializeHistoricData:_b,onUpdate:tc,tableModel:cb,getTimeColumnByID:Hc,getValueColumnByID:Ic,getValueColumnColor:Lc,getSelectedRows:Kb,getTop:mb,getLeft:lb,getHeight:kb,getWidth:jb,getRulerData:nb,resetRulerControlToolbarButtons:Vb,calculateRulerData:Ub,createOperatorMessage:Ib,getDimensions:ob,isRulerEnabled:pb,getGroupIndex:Lb,reGeneratePrecisionData:Bc,updateTimeColumnForeColor:xc,updateTimeColumnBackColor:yc,setTableViewProp:vc,setTableViewPropPart:wc,getTimeRangePropData:Mc,setTimeRangePropsData:Oc,updateVisibleColumns:Vc,clearInvisibleData:Wc,onServerPropertyUpdate:sc,reqImmediateHistoricData:Rc,sendDomainLogicRead:Uc,displayWarningDialog:Fb,getTimeColumnsCount:function(){return db.length},getValueColumnsCount:function(){return eb.length},get rulerControl(){return f},set rulerControl(a){f=a,f&&v.enable(r,gb.ToolBarButton.ShowStatisticRuler,!0)},reload:uc}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TimeColumn=function(a,b,c){"use strict";var d,e,f="TimeColumn",g=b,h=PWC.Lib.Config.Properties,i=PWC.HmiAC.TableControl,j=this,k=c,l=a,m=PWC.HmiAC.TableControl.TimeColumnProperties,n=Object.keys(i.CommonColumnsPropsEnum),o=n.concat(Object.keys(i.TimeColumnsPropsEnum)),p=PWC.HmiAC.RangeType,q=new Date,r=PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp,s=PWC.Lib.Canvas.Converters.convertJSTimeStampToFileTime;PWC.HmiAC.ColumnBase.call(this,l,f,g,k,o),this.getLongTimeFromDate=function(a){return new Date(a).getTime()},this.type=i.ColumnType.TimeColumn,this.name=this.columnModel.name,this.beginTime=h.getPropPart(l,f,m.BeginTime),this.dateFormat=h.getPropPart(l,f,m.DateFormat),this.endTime=h.getPropPart(l,f,m.EndTime),this.online=h.getPropPart(l,f,m.Online),this.pointCount=h.getPropPart(l,f,m.PointCount),this.rangeType=h.getPropPart(l,f,m.RangeType),this.showDate=h.getPropPart(l,f,m.ShowDate),this.timeFormat=h.getPropPart(l,f,m.TimeFormat),this.timeRangeBase=h.getPropPart(l,f,m.TimeRangeBase),this.timeRangeFactor=h.getPropPart(l,f,m.TimeRangeFactor),this.useValueColumnColors=h.getPropPart(l,f,m.UseValueColumnColors),this.columnTimeRange=null,this.calculateTimeRange=function(){var a;if(this.rangeType===p.FromBeginToEnd)return this.endTime-this.beginTime;switch(this.timeRangeBase){case 1:case"1":a=PWC.HmiAC.FileTime.MS500;break;case 2:case"2":a=PWC.HmiAC.FileTime.Sec;break;case 3:case"3":a=PWC.HmiAC.FileTime.Minute;break;case 4:case"4":a=PWC.HmiAC.FileTime.Hour;break;case 5:case"5":a=PWC.HmiAC.FileTime.Day}return a*this.timeRangeFactor},this.beginTime=r(this.beginTime),this.endTime=r(this.endTime),this.endTime=this.getLongTimeFromDate(this.endTime),this.beginTime=this.getLongTimeFromDate(this.beginTime),this.endTime=Date.prototype.getCorrectTime(this.endTime,c.tableModel.timeBase),this.beginTime=Date.prototype.getCorrectTime(this.beginTime,c.tableModel.timeBase),this.columnTimeRange=this.rangeType===p.TimeRange?this.calculateTimeRange():this.endTime-this.beginTime,this.online&&c.tableModel.online?(this.currentEndValue=this.getLongTimeFromDate(q),this.currentBeginValue=this.currentEndValue-this.columnTimeRange):(this.currentBeginValue=this.beginTime,this.currentEndValue=this.currentBeginValue+this.columnTimeRange),this.useValueColumnColors?(e=k.getValueColumnColor(),this.valueColumnForeColor=e.foreColor,this.valueColumnBackColor=e.backColor):(this.valueColumnForeColor=j.foreColor,this.valueColumnBackColor=j.backColor),d=f+"s."+(this.columnModel.index+1),this.UpdateProperty=function(a,b,c){var e,f,g,m,p=i.TimeColumnsPropsEnum;if(void 0!==n[a])j.updateBaseProperties(a,b,c);else{switch(a){case p.DateFormat:b===i.DateFormat.Automatic&&(b=k.tableModel.localDateFormat),j.dateFormat=b,h.setPropPart(l,o[a],b);break;case p.EndTime:c?(b=new Date(b.date+" "+b.time).getTime(),m=new Date,k.tableModel.timeBase===PWC.HmiAC.TimeBase.UTC&&(b-=6e4*m.getTimezoneOffset()),j.endTime=j.currentEndValue=b,b=s(b)):j.endTime=j.currentEndValue=Date.prototype.getCorrectTime(r(b),k.tableModel.timeBase),h.setPropPart(l,o[a],b),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case p.RangeType:c?(j.rangeType=PWC.HmiAC.TimeRangeType[b],b=j.rangeType):j.rangeType=b,h.setPropPart(l,o[a],j.rangeType),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case p.ShowDate:j.showDate=b,b=Number(b),h.setPropPart(l,o[a],b);break;case p.BeginTime:c?(b=new Date(b.date+" "+b.time).getTime(),m=new Date,k.tableModel.timeBase===PWC.HmiAC.TimeBase.UTC&&(b-=6e4*m.getTimezoneOffset()),j.beginTime=j.currentBeginValue=b,b=s(b)):j.beginTime=j.currentBeginValue=Date.prototype.getCorrectTime(r(b),k.tableModel.timeBase),h.setPropPart(l,o[a],b),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case p.PointCount:j.pointCount=parseInt(b,10),b=j.pointCount,h.setPropPart(l,o[a],b),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case p.TimeFormat:b===i.TimeFormat.Automatic&&(b=k.tableModel.localTimeFormat),j.timeFormat=b,h.setPropPart(l,o[a],b);break;case p.TimeRangeBase:c?(j.timeRangeBase=PWC.HmiAC.TimeRangeBase[b]+1,b=j.timeRangeBase):j.timeRangeBase=b,h.setPropPart(l,o[a],b),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case p.TimeRangeFactor:j.timeRangeFactor=parseInt(b,10),b=j.timeRangeFactor,h.setPropPart(l,o[a],b),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case p.UseValueColumnColors:j.useValueColumnColors=b,b=Number(b),h.setPropPart(l,o[a],b),j.useValueColumnColors?(g=k.getValueColumnColor(),e=j.valueColumnForeColor=g.foreColor,f=j.valueColumnBackColor=g.backColor):(e=j.foreColor,f=j.backColor)}PWC.HmiAC.PostPropertyUpdate.Update=!0,c&&k.setTableViewPropPart(d,o[a],b)}},this.onCleanUp=function(){this.cleanUp(),j=null,k=null,m=null}},PWC.HmiAC.TimeColumn.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.TimeColumn,PWC.HmiAC.ColumnBase);var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ValueColumn=function(a,b,c){"use strict";var d,e,f,g,h,i="ValueColumn",j=b,k=a,l=PWC.Lib.Config.Properties,m=this,n=c,o=PWC.HmiAC.TableControl,p=Object.keys(o.CommonColumnsPropsEnum),q=p.concat(Object.keys(o.ValueColumnsPropsEnum));PWC.HmiAC.ColumnBase.call(this,k,i,j,n,q),this.type=o.ColumnType.ValueColumn,this.name=this.columnModel.name,this.autoDecimalPrecision=1===l.getPropPart(k,i,"AutoDecimalPrecision"),this.decimalPrecision=l.getPropPart(k,i,"DecimalPrecision"),this.exponentialFormat=l.getPropPart(k,i,"ExponentialFormat"),h=l.getPropPart(k,i,"DataSource"),this.dataSource={},this.dataSource.Tag=l.getPropPart(h,"TagDataSource","Tag"),this.dataSource.TagDataSourceType=l.getPropPart(h,"TagDataSource","TagDataSourceType"),this.dataSource.cycleTime=l.getPropPart(h,"TagDataSource","UpdateCycle"),this.timeColumnName=l.getPropPart(k,i,"TimeColumn"),this.valuesCount=0,g=this.columnModel.index+1,e="ValueColumns."+g,f="ValueColumns:DataSource."+g,this.UpdateProperty=function(b,c,g){var h=o.ValueColumnsPropsEnum;if(d=e,void 0!==p[b])m.updateBaseProperties(b,c,g);else{switch(b){case h.AutoDecimalPrecision:m.autoDecimalPrecision=c,n.rulerControl&&n.getRulerData(n.rulerControl.getCurrentColType()),l.setPropPart(a,q[b],c);break;case h.TagDataSourceType:g&&(c=c===PWC.HmiAC.TableControl.DataSource.Archive?1:2),m.dataSource.TagDataSourceType=c,l.setPropPart(a.DataSource,q[b],c),d=f;break;case h.DecimalPrecision:c=parseInt(c,10),m.decimalPrecision=c,n.rulerControl&&n.getRulerData(n.rulerControl.getCurrentColType()),l.setPropPart(a,q[b],c);break;case h.ExponentialFormat:m.exponentialFormat=c,n.rulerControl&&n.getRulerData(n.rulerControl.getCurrentColType()),l.setPropPart(a,q[b],c);break;case h.LimitValues:m.columnModel.LimitValues=c,l.setPropPart(a,q[b],c);break;case h.Tag:m.tagName=c,l.setPropPart(a.DataSource,q[b],c),d=f;break;case h.TimeColumn:m.timeColumnName=c,l.setPropPart(a,q[b],c)}PWC.HmiAC.PostPropertyUpdate.Update=!0,g&&n.setTableViewPropPart(d,q[b],c)}},this.onCleanUp=function(){this.cleanUp(),m=null,n=null,k=null}},PWC.HmiAC.ValueColumn.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.ValueColumn,PWC.HmiAC.ColumnBase);var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.Orientation=function(){this.horizontal=0,this.vertical=1},PWC.HmiAC.TrendViewBase=function(){this.rulerControl=null,this.controlType=PWC.HmiAC.SourceControlType.TrendControl,this.ISource=new PWC.HmiAC.TrendViewInterfaces(this)},PWC.HmiAC.TrendViewBase.prototype={createParentWindow:function(a){"use strict";var b=PWC.HmiAC.svgShape.CreateSvgElement,c=new PWC.HmiAC.RECT,d=this.getLineWidth(),e=b("g",{fill:this.getBackColor(),stroke:"black","class":"trendViewSvgClass",id:this.getControlName()});c.height=this.height,c.width=this.width,c.left=this.left,c.top=this.top,d>0&&c.Inflate(d),c.isEmpty()||(this.trendViewRect=b("rect",{stroke:this.getLineColor(),"stroke-width":d,rect:c,"class":"trendViewClass lineColorClass"}),e.appendChild(this.trendViewRect)),a.appendChild(e),c=null},updateParentWindow:function(){"use strict";var a=new PWC.HmiAC.RECT,b=this.getLineWidth();a.height=this.height,a.width=this.width,a.left=this.left,a.top=this.top,b>0&&a.Inflate(b),a.isEmpty()||PWC.HmiAC.svgShape.SetAttributes(this.trendViewRect,{rect:a}),a=null},addUnSelectableClass:function(a){"use strict";function b(){return!1}a.setAttribute("style","-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;"),a.setAttribute("unselectable","on"),a.setAttribute("onselectstart",b),a.setAttribute("onmousedown",b)},getVisibility:function(){return this.visible},getWidth:function(a){return this.screenItem&&a?PWC.Lib.Config.Properties.getProp(this.screenItem,"Width"):this.width},getHeight:function(a){return this.screenItem&&a?PWC.Lib.Config.Properties.getProp(this.screenItem,"Height"):this.height},getLeft:function(a){return this.screenItem&&a?PWC.Lib.Config.Properties.getProp(this.screenItem,"Left"):this.left},getTop:function(a){return this.screenItem&&a?PWC.Lib.Config.Properties.getProp(this.screenItem,"Top"):this.top},getBorderColor:function(){return this.borderColor},getBorderWidth:function(){return this.borderWidth},getBackColor:function(){return this.backColor},getControlName:function(){return this.name},setHeight:function(a){this.screenItem&&PWC.Lib.Config.Properties.setProp(this.screenItem,"Height",parseInt(a,10))},setWidth:function(a){this.screenItem&&PWC.Lib.Config.Properties.setProp(this.screenItem,"Width",parseInt(a,10))},setTop:function(a){this.screenItem&&PWC.Lib.Config.Properties.setProp(this.screenItem,"Top",parseInt(a,10))},setLeft:function(a){this.screenItem&&PWC.Lib.Config.Properties.setProp(this.screenItem,"Left",parseInt(a,10))},setBorderWidth:function(a){this.borderWidth=parseInt(a,10)},setBackColor:function(a,b){var c,d,e=PWC.Lib.Canvas.Converters,f=e.enumConverter.Color,g=PWC.HmiAC.Common.HelperUtil;b?(c=a,d=g.hexStrToDecColor(a)):(c=e.convertTo(f,a),d=a),this.backColor=c,this.SVGParent.getElementById(this.name).setAttribute("fill",this.backColor),PWC.Lib.jQL.getElementsByClassName(this.SVGParent,this.axisLabelClass,"rect").attr("fill",this.backColor),this.updateRulerColor(),this.setTrendViewProp("BackColor",d,b)},setStartStop:function(a,b){"use strict";var c,d,e,f,g=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar;if(this.online=a,a){for(this.setTrendViewProp("Online",1,b),this.trendObjectType===PWC.HmiAC.TrendObjectType.Online?(this.showStatisticRuler&&this.setShowStatisticRuler(!1),this.setZoomAndMove(),this.resetZoom(!0)):(this.isZooming||this.enableDisablePinchAndScroll(!1),this.trendTagListsSaved=!1),this.moveAxes&&this.disableTimeAxesMove&&this.disableTimeAxesMove(),d=this.getXAxes(),e=d.length,c=0;e>c;c++)f=d[c],f.invalidate();for(d=this.getYAxes(),e=d.length,c=0;e>c;c++)f=d[c],f.invalidate();for(d=this.getDrawableTrendWindow(),e=d.length,c=0;e>c;c++)d[c].trendWindowDrawn&&d[c].resetGridLines();this.drawTrends(),this.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(this.MoveToLast(),this.moveToType=PWC.HmiAC.MoveToType.OnUnpause),this.rulerControl&&this.showRuler&&this.calculateRulerData()}else this.setTrendViewProp("Online",0,b),this.moveAxes&&this.trendObjectType===PWC.HmiAC.TrendObjectType.Online?this.enableTimeAxesMove():this.trendObjectType===PWC.HmiAC.TrendObjectType.Function&&this.saveTrendTagLists(a),this.isZooming||this.enableDisablePinchAndScroll(!0);this.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(g.enable(this.screenItem,"MoveToNext",!a),g.enable(this.screenItem,"MoveToPrevious",!a),g.enable(this.screenItem,"MoveToFirst",!a),g.enable(this.screenItem,"MoveToLast",!a)),g.check(this.screenItem,"StartStopUpdate",!a)},setEndTimeToCurr:function(){var a,b,c,d,e=this.getXAxes();for(b=0;b<e.length;b++)c=e[b],a=c.zoomInOutCount>0?c.endValueBuffer:c.currentEndValue,d=c.calculateTimeRange(),c.BeginTimeUTC=a-d,c.EndTimeUTC=a,c.BeginTimeUTC=c.getLongTimeFromDate(c.BeginTimeUTC),c.EndTimeUTC=c.getLongTimeFromDate(c.EndTimeUTC),c.BeginTimeUTC%1e3!==0&&(c.BeginTimeUTC-=c.BeginTimeUTC%1e3),c.EndTimeUTC%1e3!==0&&(c.EndTimeUTC-=c.EndTimeUTC%1e3)},setFunctionTrendEndTime:function(){var a,b,c,d,e;for(e=this.getTrend(),a=0;a<e.length;a++)b=e[a],c=Date.now(),d=b.calculateTimeRange(),b.beginTimeUTC=c-d,b.endTimeUTC=c,b.beginTimeUTC=new Date(b.beginTimeUTC).getTime(),b.endTimeUTC=new Date(b.endTimeUTC).getTime(),b.beginTimeUTC%1e3!==0&&(b.beginTimeUTC-=b.beginTimeUTC%1e3),b.endTimeUTC%1e3!==0&&(b.endTimeUTC-=b.endTimeUTC%1e3)},setMoveAxes:function(a){"use strict";this.moveAxes=a,PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.check(this.screenItem,"MoveAxis",a),this.moveAxes?this.enableAxesMove():this.disableAxesMove()},setZoomAndMove:function(a){"use strict";var b,c=PWC.HmiAC.ZoomAndMoveButtons,d=c[a],e=!0,f=!1;if(d)if(this[d]=!this[d],PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.check(this.screenItem,a,this[d]),this[d]){for(b in c)b!==a&&this[c[b]]&&(this[c[b]]=!1,PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.check(this.screenItem,b,!1),e=!1);e&&(this.isZooming=!0,this.online?this.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&this.setStartStop(!1,!0):f=!0,this.enableTrendAreaMove(f))}else this.zoomButtonClicked=d,this.isZooming=!1,this.disableTrendAreaMove(!this.online);else{for(b in c)this[c[b]]&&(this[c[b]]=!1,PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.check(this.screenItem,b,!1),e=!1);e?this.enableDisablePinchAndScroll(!1):(this.isZooming=!1,this.disableTrendAreaMove())}},setShowRuler:function(a,b,c){"use strict";this.enableDisableRuler(a,b,c)&&PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.check(this.screenItem,"ShowRuler",a)},setShowStatisticRuler:function(a,b,c){"use strict";a&&this.online&&this.setStartStop(!1,!0),this.enableDisableStatisticRuler(a,b,c)&&PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.check(this.screenItem,"ShowStatisticRuler",a)},enableDisablePinchAndScroll:function(a){var b,c=this.getDrawableTrendWindow(),d=c.length;for(b=0;d>b;b++)c[b].trendWindowDrawn&&c[b].enableDisablePinchAndScroll(a)},getStartStop:function(){return this.online},resize:function(a){(this.height!==a.height||this.width!==a.width)&&(this.height=a.height,this.width=a.width,this.update(),this.rulerControl&&this.rulerControl.resize({height:this.getHeight(!0),width:this.getWidth(!0),left:this.getLeft(!0),top:this.getTop(!0)},!0))},move:function(){this.rulerControl&&this.rulerControl.move({height:this.getHeight(!0),left:this.getLeft(!0),top:this.getTop(!0)})},redraw:function(){"use strict";for(PWC.HmiAC.Alignment=this.alignmentEnum;this.SVGParent.lastChild;)this.SVGParent.removeChild(this.SVGParent.lastChild);this.createParentWindow(this.SVGParent),this.layoutManager&&(this.drawLayout(),this.drawTrends())},update:function(){"use strict";PWC.HmiAC.Alignment=this.alignmentEnum,this.layoutManager&&(this.SVGParent.parentNode&&this.parentGroup.removeChild(this.SVGParent),this.updateParentWindow(),this.updateLayout()?(this.drawTrends(),this.parentGroup.appendChild(this.SVGParent)):(this.parentGroup.appendChild(this.SVGParent),this.createDrawableCollections()))},getDimensions:function(){return{height:this.getHeight(!0),width:this.getWidth(!0),left:this.getLeft(!0),top:this.getTop(!0)}},isRulerEnabled:function(){var a;return a=this.trendObjectType===PWC.HmiAC.TrendObjectType.Online?this.showRuler||this.showStatisticRuler:this.showRuler,a&&this.visible},getLineColor:function(){return this.lineColor},getLineWidth:function(){return this.lineWidth},setTrendIndicatorPoints:function(a){var b,c,d,e=this.getYAxisByName(a);for(e.setTrendIndicatorPoints(),b=e.getTrends(),c=b.length,d=0;c>d;d++)b[d].setIndicatorPoints()},getTagPropDetails:function(a){var b,c,d=PWC.HmiAC.TrendPropId;switch(a){case d.TagNameButton:b=d.TagName,c=d.CycleTime;break;case d.TagXNameButton:b=d.TagNameX,c=d.CycleTimeX;break;case d.TagYNameButton:b=d.TagNameY,c=d.CycleTimeY}return{parentName:"Trend",tagNamePropId:b,cycleTimePropId:c}},setTrendVisibility:function(a,b){this.getTrend(a).OnUpdate(PWC.HmiAC.TrendPropId.Visible,b)},reArrangeElements:function(a,b){var c,d,e,f,g,h,i,j=a.length,k=[],l=PWC.HmiAC.ElementId;switch(b){case l.Trend:f=this.getTrend(),h=PWC.HmiAC.TrendPropId.Index,i=this.setTrends;break;case l.TrendWindow:f=this.getTrendWindow(),i=this.setTrendWindows;break;case l.XAxis:f=this.getXAxes(),i=this.setXAxes;break;case l.YAxis:f=this.getYAxes(),i=this.setYAxes;break;default:return}for(g=f.length,d=0;j>d;d++){for(c=0;g>c;c++)if(a[d]===f[c].name){e=f[c];break}e.OnUpdate(h,d,!0),k.push(e)}i(k)},moveTrendDown:function(a){var b,c,d,e=this.getDrawableTrend(),f=e.length-1,g=this.getTrend(),h=g[a];for(c=g[a]=g[++a],g[a]=h,b=0;f>b;b++)if(h.name===e[b].name){c.name===e[b+1].name&&(h=e[b],e[b]=e[++b],e[b]=h,h.trendWindow===c.trendWindow&&(h.swapWithNextTrend(),(d=h.getYAxis())===c.getYAxis()&&this.setTrendIndicatorPoints(d)));break}c.OnUpdate(PWC.HmiAC.TrendPropId.Index,a-1,!0),h.OnUpdate(PWC.HmiAC.TrendPropId.Index,a,!0)},hasVerticalScrollbar:function(){},OnPropertyBrowserInitialize:function(){"use strict";var a=0;this.trendToUpdate=this.getTrend(a),this.xAxisToUpdate=this.getXAxis(a),this.yAxisToUpdate=this.getYAxis(a),this.trendWindowToUpdate=this.getTrendWindow(a)},OnUpdate:function(a,b,c){"use strict";var d,e,f,g,h=PWC.HmiAC.TrendViewPropId,i=PWC.Lib.Canvas.Converters,j=i.enumConverter.Color,k=PWC.HmiAC.Common.HelperUtil;switch(a){case h.Online:b?(this.setTrendViewProp("Online",1,c),this.setStartStop(!0,!0)):(this.setTrendViewProp("Online",0,c),"Function"===this.trendObjectType&&this.setFunctionTrendEndTime(),this.setStartStop(!1,!0));break;case h.Height:this.setTrendViewProp("Height",b,c);break;case h.Width:this.setTrendViewProp("Width",b,c);break;case h.Top:this.setTrendViewProp("Top",b,c);break;case h.Left:this.setTrendViewProp("Left",b,c);break;case h.Visible:b?(this.setTrendViewProp("Visible",1,c),this.rulerControl&&!this.rulerControl.visible&&(this.showRuler||this.showStatisticRuler)&&(this.rulerControl.enableDisable(!0,this.getDimensions()),this.calculateRulerData())):(this.setTrendViewProp("Visible",0,c),this.rulerControl&&this.rulerControl.visible&&(this.showRuler||this.showStatisticRuler)&&this.rulerControl.enableDisable(!1)),this.visible=b;break;case h.Background:this.setBackColor(b,c);break;case h.BorderWidth:this.borderWidth=parseInt(b,10),this.setTrendViewProp("BorderWidth",this.borderWidth,c);break;case h.BorderColor:c?(f=b,g=k.hexStrToDecColor(b)):(f=i.convertTo(j,b),g=b),this.borderColor=f,this.setTrendViewProp("BorderColor",g,c);break;case h.LineColor:c?(f=b,g=k.hexStrToDecColor(b)):(f=i.convertTo(j,b),g=b),this.lineColor=f,PWC.Lib.jQL.getElementsByClassName(this.SVGParent,"lineColorClass","rect").attr("stroke",this.lineColor),this.setTrendViewProp("LineColor",g,c);break;case h.LineWidth:this.lineWidth=parseInt(b,10),this.setTrendViewProp("LineWidth",this.lineWidth,c),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case h.TimeBase:e=c?PWC.HmiAC.TimeBase[b]:b,this.setTrendViewProp("TimeBase",e,c),this.trendObjectType===PWC.HmiAC.TrendObjectType.Function?(this.timeBase=e,this.customFormat=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(e)):this.setTimeBase(e),this.updateTimeBase();break;case h.Orientation:this.textOrientation=c?PWC.HmiAC.TextOrientation[b]:b,this.setTrendViewProp("Orientation",this.textOrientation,c),this.updateOrientationProperties(b),this.allAreasDrawn?PWC.HmiAC.PostPropertyUpdate.Redraw=!0:PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection=!0,d=a;break;case h.ScrollbarMode:this.scrollbarMode=c?PWC.HmiAC.ScrollbarMode[b]:b,this.setTrendViewProp("ScrollbarMode",this.scrollbarMode,c),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case h.ConnectTrendWindows:b?(this.setTrendViewProp("ConnectTrendWindows",1,c),this.connectTrendWindows=1):(this.setTrendViewProp("ConnectTrendWindows",0,c),this.connectTrendWindows=0);break;case h.ShowRuler:b?this.setShowRuler(!0,c):this.setShowRuler(!1,c);break;case h.ShowStatisticRuler:b?this.setShowStatisticRuler(!0,c):this.setShowStatisticRuler(!1,c);break;case h.UseTrendNameAsLabel:b?(this.setTrendViewProp("UseTrendNameAsLabel",1,c),this.useTrendNameAsLabel=1):(this.setTrendViewProp("UseTrendNameAsLabel",0,c),this.useTrendNameAsLabel=0);break;case h.LoadDataImmediately:b?this.setTrendViewProp("LoadDataImmediately",1,c):this.setTrendViewProp("LoadDataImmediately",0,c),this.loadDataImmediately=b}return d},setObjectToUpdate:function(a,b){var c,d,e,f,g=PWC.HmiAC.TrendViewPartType;switch(a){case g.Trends:c=this.getTrend(),d="trendToUpdate";break;case g.TrendWindows:c=this.getTrendWindow(),d="trendWindowToUpdate";break;case g.TimeAxes:case g.XAxes:c=this.getXAxes(),d="xAxisToUpdate";break;case g.ValueAxes:case g.YAxes:c=this.getYAxes(),d="yAxisToUpdate";break;default:return}for(e=c.length,f=0;e>f;f++)if(c[f].partId===b){this[d]=c[f];break}},updateProperty:function(a,b,c,d){"use strict";var e,f=PWC.HmiAC.ElementId,g=null,h=null;switch(a){case f.Trend:e=this.trendToUpdate,(g=e.OnUpdate(b,c,d))?(this.trendToUpdate=g,h=!0):g===!1&&(h=!1);break;case f.TrendView:h=this.OnUpdate(b,c,d);break;case f.XAxis:e=this.xAxisToUpdate,(g=e.OnUpdate(b,c,d))?(this.xAxisToUpdate=g,h=!0):g===!1&&(h=!1);break;case f.YAxis:e=this.yAxisToUpdate,(g=e.OnUpdate(b,c,d))?(this.yAxisToUpdate=g,h=!0):g===!1&&(h=!1);break;case f.TrendWindow:e=this.trendWindowToUpdate,(g=e.OnUpdate(b,c,d))?(this.trendWindowToUpdate=g,h=!0):g===!1&&(h=!1);break;case f.Font:g=this.trendViewFont.OnUpdate(b,c),g===!0&&(this.allAreasDrawn?PWC.HmiAC.PostPropertyUpdate.Redraw=!0:PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection=!0);break;case f.StatusBar:PWC.HmiAC.UpdateStatusBarTab.update(c,!0,this.screenItem);break;case f.ToolBar:PWC.HmiAC.UpdateToolBarTab.update(c,!1,this.screenItem)}return h},onToolbarButton:function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m;switch(b){case"StartStopUpdate":this.online?("Function"===this.trendObjectType&&this.setFunctionTrendEndTime(),this.setStartStop(!1,!0)):this.setStartStop(!0,!0);break;case"ShowPropertyDialog":"Online"===this.trendObjectType&&this.setEndTimeToCurr(),this.resetPreDefTrendColorCount(),this.OnPropertyBrowserInitialize(),i=document.createElement("div"),i.setAttribute("id","PropertyBrowser"),h=this.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),h.appendChild(i),j=this.screenItem.gfxWebLib.textbib,d=new PWC.Components.GenericDialog.Content.Angular,e={Width:511,Height:715,ShowCaption:1},g={eventHandler:null,sourceItem:this,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(a,"PropertyBrowser")},"FunctionTrendView"===a.type?(g.name="FunctionTrendPropertyBrowser",e.Caption=j.getText("TBID_TrendPB_Function_Caption")):"TrendView"===a.type&&(g.name="PropertyBrowser",e.Caption=j.getText("TBID_TrendPB_Online_Caption")),f=d.createContent(g),setTimeout(function(){var a=h.getElementsByClassName("pwcPBTabs")[0];a&&new PWC.Components.GenericDialog.Content.TabView(a)},100),c=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",i,e),c.showModal(f);break;case"ShowTrendSelection":m=document.createElement("div"),m.setAttribute("id","ShowTrendSelection"),k=this.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),k.appendChild(m),e={Width:300,Height:350,ShowCaption:1,Caption:this.screenItem.gfxWebLib.textbib.getText("TBID_TrendPB_TrendSelectionDialog_Caption")},g={name:"ShowTrendSelection",eventHandler:null,sourceItem:this.ISource,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(a,"ShowTrendSelection")},d=new PWC.Components.GenericDialog.Content.Angular,f=d.createContent(g),c=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",m,e),c.showModal(f);break;case"ShowTimeSelection":l=document.createElement("div"),l.setAttribute("id","TimeRangeSelection"),k=this.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),k.appendChild(l),e={Width:520,Height:334,ShowCaption:1,Caption:this.gfxWebLib.textbib.getText("TBID_TimeRangeDialog_Caption")},g={name:"TimeRangeSelection",eventHandler:null,sourceItem:this.ISource,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(a,"TimeRangeSelection")},d=new PWC.Components.GenericDialog.Content.Angular,f=d.createContent(g),c=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",l,e),c.showModal(f);break;case"MoveAxis":this.setMoveAxes(this.moveAxes?!1:!0);break;case"MoveToFirst":this.MoveToFirst();break;case"MoveToPrevious":this.MoveToPrevious();break;case"MoveToNext":this.MoveToNext();break;case"MoveToLast":this.MoveToLast();break;case"ZoomMove":case"ZoomArea":case"ZoomInOut":case"ZoomInOutX":case"ZoomInOutY":this.setZoomAndMove(b);break;case"OneToOneView":this.resetZoom();break;case"ShowRuler":this.showRuler?this.setShowRuler(!1,!0,!0):this.setShowRuler(!0,!0,!0);break;case"ShowStatisticRuler":this.showStatisticRuler?this.setShowStatisticRuler(!1,!0,!0):this.setShowStatisticRuler(!0,!0,!0);break;case"CalculateStatistic":this.showStatisticResult();break;default:this.toolBarButton(a,b)}},onCleanUp:function(){var a=this.screenItem.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),b=document.getElementById(this.propertyBrowserId),c=this.SVGParent.getElementById(this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.SVGParent,"g",this.id);if(this.trendToUpdate=this.xAxisToUpdate=this.yAxisToUpdate=this.trendWindowToUpdate=this.trendViewRect=this.Hammer=null,this.trendViewFont.cleanUp(),this.layoutManager.cleanUp(),this.ISource.cleanUp(),this.cleanUp(),this.rulerControl&&(this.rulerControl=null),c)for(;c.lastChild;)c.removeChild(c.lastChild);else for(;this.SVGParent.lastChild;)this.SVGParent.removeChild(this.SVGParent.lastChild);this.ISource=null,this.trendViewFont=null,this.parentGroup=null,this.SVGParent=null,this.layoutManager=null,this.screenItem=null,this.alignmentEnum=null,this.axisTypeEnum=null,this.gfxWebLib=null,a&&b&&a.removeChild(b)}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.FunctionTrendView=function(){"use strict";PWC.HmiAC.FunctionTrendView.baseCtor.call(this);var a=[],b=[],c=[],d=[],e=[],f=[],g=[],h={"#000000":0,"#FF0000":0,"#00FF00":0,"#0000FF":0,"#FFFF00":0,"#00FFFF":0,"#FF00FF":0,"#FFFFFF":0,"#800000":0,"#008000":0,"#000080":0,"#808000":0,"#008080":0,"#800080":0,"#808080":0,"#C0C0C0":0},i=this,j=!1,k=PWC.Lib.Canvas.Converters,l={},m={},n=!0,o=!0,p=PWC.Lib.Config.Properties;this.updateConnectionState=function(){var a,b=f.length,c=[];for(a=0;b>a;a++)c.push(f[a].name);for(a in l)-1===c.indexOf(a)&&b++;PWC.HmiAC.Common.HelperUtil.updateConnectionState(b,l,i.screenItem)},this.addToDisconnectedSources=function(a,b,c){var d,e=f.length;for(d=0;e>d;d++)if(f[d].name===a){l[a]="x="+b+", y="+c,m[a]={xTag:!1,yTag:!1},this.updateConnectionState();break}},this.updateTimeBase=function(){this.timeBase===PWC.HmiAC.TimeBase.UTC?PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.tooltip(this.screenItem,PWC.HmiAC.StatusBarButtons.TimeBase,this.screenItem.gfxWebLib.textbib.getText("TBID_AlgCtrl_UTC")):PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.tooltip(this.screenItem,PWC.HmiAC.StatusBarButtons.TimeBase,this.screenItem.gfxWebLib.textbib.getText("TBID_AlgCtrl_LocalTimeZone"))},this.removeFromDisconnectedSources=function(a,b,c){m[a]&&(b?m[a].xTag=!0:c?m[a].yTag=!0:(m[a].xTag=!0,m[a].yTag=!0),m[a].xTag===!0&&m[a].yTag===!0&&(delete m[a],delete l[a])),this.updateConnectionState()},this.layoutDrawn=!1,this.redrawForScrollbars=!1,this.trendTagListsSaved=!1,this.setTrendViewProp=function(a,b,c){var d=this.screenItem;p.setProp(d,a,b),c&&d.gfxWebLib.connection.sendPropertyByName(d.rtoid,a,b,!1,!1)},this.initialize=function(h,k){this.alignmentEnum=PWC.HmiAC.Alignment=PWC.HmiAC.AlignmentForLeftAndRight,this.axisTypeEnum=PWC.HmiAC.AxisType=PWC.HmiAC.AxisTypeForLeftAndRight;var l,m,n,o,q,r,s,t,u,v=h.rtoid.toString(),w=PWC.Lib.Config.Properties,x=PWC.Lib.Canvas.Converters,y={basePath:h.gfxWebLib.connection.getAppDir(),imagePath:h.gfxWebLib.connection.getImageUrl()},z=0,A=0,B=PWC.HmiAC.AxisType,C=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar,D=PWC.HmiAC.TextOrientation;for(this.textOrientation=p.getProp(h,"Orientation"),this.showRelativeAxis=!1,this.textOrientation=p.getProp(h,"Orientation"),this.isLeftOrRight=this.textOrientation===D.FromLeft||this.textOrientation===D.FromRight,this.isLeftOrRight?(this.alignmentEnum=PWC.HmiAC.Alignment=PWC.HmiAC.AlignmentForLeftAndRight,this.axisTypeEnum=B=PWC.HmiAC.AxisType=PWC.HmiAC.AxisTypeForLeftAndRight):(this.alignmentEnum=PWC.HmiAC.Alignment=PWC.HmiAC.AlignmentForTopAndBottom,this.axisTypeEnum=B=PWC.HmiAC.AxisType=PWC.HmiAC.AxisTypeForTopAndBottom),this.trendObjectType=PWC.HmiAC.TrendObjectType.Function,this.trendViewFont=new PWC.HmiAC.FontPart,this.trendViewFont.initialize(h,k),this.gfxWebLib=new PWC.Lib.GfxWebLib(h.gfxWebLib.appMode,h.gfxWebLib.appType,y),this.gfxWebLib.rootDiv=h.gfxWebLib.rootDiv,this.screenItem=h,this.isInitialized=!0,this.backColor=w.getProp(h,"BackColor",x.enumConverter.Color),this.borderColor=w.getProp(h,"BorderColor",x.enumConverter.Color),this.borderWidth=w.getProp(h,"BorderWidth"),this.connectTrendWindows=1===w.getProp(h,"ConnectTrendWindows")?!0:!1,this.enabled=w.getProp(h,"Enabled"),this.useTrendNameAsLabel=w.getProp(h,"UseTrendNameAsLabel"),this.layoutManager=null,this.timeBase=w.getProp(h,"TimeBase"),this.updateTimeBase(),this.customFormat=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(this.timeBase),this.height=w.getProp(h,"Height"),this.layer=w.getProp(h,"Layer"),this.left=0,this.name=(v+p.getProp(h,"Name")).replace(/\s+/g,"").replace(/\(/g,"_ob_").replace(/\)/g,"_cb_").replace(/\\/g,"_bs_").replace(/\'/g,"_sq_").replace(/\"/g,"_dq_"),this.online=w.getProp(h,"Online"),C.check(h,"StartStopUpdate",!this.online),this.top=0,this.oneToOneView=!1,this.visible=w.getProp(h,"Visible"),this.lineColor=w.getProp(h,"LineColor",x.enumConverter.Color),this.lineWidth=w.getProp(h,"LineWidth"),this.trendViewRect=null,this.scrollbarMode=p.getProp(h,"ScrollbarMode"),this.titleBarStyle=w.getProp(h,"TitleBarStyle"),this.titleBarText=w.getProp(h,"TitleBarText"),this.toolTipText=w.getProp(h,"ToolTipText"),this.windowCloseEnabled=w.getProp(h,"WindowCloseEnabled"),this.windowMovingEnabled=w.getProp(h,"WindowMovingEnabled"),this.Hammer=null,this.moveAxes=!1,this.moveTrendArea=!1,this.showRuler=!1,this.trendToUpdate=null,this.xAxisToUpdate=null,this.yAxisToUpdate=null,this.trendWindowToUpdate=null,this.width=w.getProp(h,"Width"),this.grpParentName="#"+this.name,(null===this.name||!this.name||0===this.name.length||null===w.getProp(h,"Height")||isNaN(w.getProp(h,"Height"))||null===w.getProp(h,"Width")||isNaN(w.getProp(h,"Width"))||null===this.top||isNaN(this.top)||null===this.left||isNaN(this.left)||w.getProp(h,"Height")<=0||w.getProp(h,"Width")<=0)&&(this.isInitialized=!1),this.loadDataImmediately=p.getProp(h,"LoadDataImmediately"),this.id=this.trendObjectType+"TrendControl"+this.name,this.parentGroup=k,this.SVGParent=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.parentGroup.appendChild(this.SVGParent),this.propertyBrowserId=this.id+"PropDiv",this.SVGParent.setAttributeNS(null,"id",this.id),this.addUnSelectableClass(this.SVGParent),this.createParentWindow(this.SVGParent),C.enable(h,"ZoomArea",!0),C.enable(h,"ShowRuler",!0),C.enable(h,"Print",!1),C.enable(h,"ShowHelp",!1),C.enable(h,"ShowTrendSelection",!0),C.enable(h,"OneToOneView",!1),u=p.getProp(h,"TrendWindows"),u&&(A=u.length),z=0;A>z;++z)r=u[z],q=new PWC.HmiAC.TrendWindow,q.init(r,i),a.push(q),q.visible&&"0"!==q.spacePortion&&(q.index=b.length,b.push(q));
for(A=0,w.getProp(h,"XAxes")&&(A=w.getProp(h,"XAxes").length),z=0;A>z;++z)l=w.getProp(h,"XAxes")[z],m=new PWC.HmiAC.ValueAxis,m.init(l,i,B.xAxis),c.push(m);for(A=0,w.getProp(h,"YAxes")&&(A=w.getProp(h,"YAxes").length),z=0;A>z;++z)n=w.getProp(h,"YAxes")[z],o=new PWC.HmiAC.ValueAxis,o.init(n,i,B.yAxis),d.push(o);for(u=p.getProp(h,"Trends"),A=0,u&&(A=u.length),z=0;A>z;++z)s=w.getProp(h,"Trends")[z],t=new PWC.HmiAC.FunctionTrend,t.initialize(s,i),e.push(t),i.getDrawableTrendWindowByName(t.trendWindow)&&t.visibility&&(g.push(t),f.push(t)),t.trendWindow&&!t.currentTrendWindow.visible||t.xAxis&&t.yAxis&&!t.tagInvalid||i.addToDisconnectedSources(t.name,t.dataSourceX.Tag,t.dataSourceY.Tag);if(this.updateConnectionState(),u=s=null,h.gfxWebLib.appMode!==PWC.Lib.AppMode.RUNTIME){for(i.isInitialized&&(i.layoutManager=new PWC.HmiAC.LayoutManager(i),i.layoutDrawn=i.drawLayout()),g=[],z=0;z<e.length;z++)t=e[z],q=i.getDrawableTrendWindowByName(t.trendWindow),q&&q.trendWindowDrawn&&t.visibility&&t.currentXAxis&&t.currentYAxis&&g.push(t);return i.drawTrends(),i.layoutDrawn}requirejs.config({baseUrl:h.gfxWebLib.connection.getAppDir()+"libs",paths:{Hammer:"hammer-2.0.2"}}),require(["Hammer"],function(a){if(i.screenItem.trendControl){for(i.Hammer=a,i.isInitialized&&(i.layoutManager=new PWC.HmiAC.LayoutManager(i),i.layoutDrawn=i.drawLayout()),g=[],z=0;z<e.length;z++)t=e[z],q=i.getDrawableTrendWindowByName(t.trendWindow),q&&q.trendWindowDrawn&&t.visibility&&t.currentXAxis&&t.currentYAxis&&g.push(t);return i.loadDataImmediately&&i.requestHistoricalData(),i.drawTrends(),p.getProp(i.screenItem,"ShowRuler")&&i.setShowRuler(!0,!1),i.layoutDrawn&&j&&(i.calculateRulerData(void 0,!1),j=!1),i.layoutDrawn}}),h=null},this.drawLayout=function(){var a,d,e,f,g=b.length;if(a=this.layoutManager.drawLayout(this.SVGParent),this.layoutDrawn=a)for(f=0;g>f;f++)if(b[f].trendWindowDrawn){for(d=this.isLeftOrRight?"width":"height",e=b[f].getRect()[d],g=c.length,f=0;g>f;f++)c[f].innerRect[d]=e;break}return a},this.updateLayout=function(){var a,d,e,f,g=b.length;if(a=this.layoutManager.updateLayout())for(f=0;g>f;f++)if(b[f].trendWindowDrawn){for(d=this.isLeftOrRight?"width":"height",e=b[f].getRect()[d],g=c.length,f=0;g>f;f++)c[f].innerRect[d]=e;break}return a},this.requestHistoricalData=function(a){var b,c,d,e=[],f=g.length,h=[],i=[],j=0,k=0,l=[],m=[],n=PWC.HmiAC.MoveToType.MoveToLast;if(this.screenItem.gfxWebLib.appMode!==PWC.Lib.AppMode.EDIT){for(c=0;f>c;c++)b=g[c],a&&b.trendWindow!==a||(d=b.currentTrendWindow,j=Math.floor(Math.pow(2,31)-1),2===b.dataSourceX.TagDataSourceType&&void 0!==b.dataSourceX.Tag&&(b.clearTagList(),b.rangeType===PWC.HmiAC.RangeType.PointCount?j=b.pointCount:k=b.calculateTimeRange(),e.push(0),e.push(0),h.push(k),h.push(k),l.push(j),l.push(j),i.push(this.screenItem.gfxWebLib.connection.datatypesToString(this.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(b.dataSourceX.Tag))),i.push(this.screenItem.gfxWebLib.connection.datatypesToString(this.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(b.dataSourceY.Tag))),m.push(b.index),m.push(b.index),b.historicalDataRequested=!0));i.length&&this.sendDomainLogicRead(e,h,l,i,m,n)}},this.sendDomainLogicRead=function(a,b,c,d,e,f){var g=PWC.HmiAC.TrendControlEventID.TrendViewEventID_ReadRawData,h=[],i=[];f||(f=0),h[0]=this.screenItem.gfxWebLib.connection.getEventParamIDs().Value,i[0]=[a,b,c,d,e,f],this.screenItem.gfxWebLib.connection.sendDomainLogicEvent(this.screenItem.rtoid,g,h,i)},this.drawTrends=function(){var a,b;for(a=0;a<g.length;a++)b=g[a],b.recalculateX(),b.recalculateY(),b.draw(this.trendTagListsSaved)},this.getTrendWindowCount=function(){return a.length},this.getTrendWindow=function(b){return void 0===b?a:a[b]},this.getYAxis=function(a){return d[a]},this.getYAxes=function(){return d},this.getXAxis=function(a){return c[a]},this.getXAxes=function(a){var b,d=[],e=c.length;if(a){for(b=0;e>b;b++)""!==c[b].trendWindow&&d.push(c[b]);return d}return c},this.getTrendWindowByName=function(b){var c,d=null,e=a.length;for(c=0;e>c;c++)if(a[c].name===b){d=a[c];break}return d},this.getDrawableTrendWindowCount=function(){return b.length},this.getDrawableTrendWindow=function(a){return void 0===a?b:b[a]},this.getDrawableTrendWindowByName=function(a){var c,d=null;for(c=0;c<b.length;c++)if(b[c].name===a){d=b[c];break}return d},this.getTimeRangePropData=function(){var a,b,c=[],d=e.length,f=PWC.HmiAC.TrendPropId,g={Setting:f.RangeType,StartTime:f.BeginTime,EndTime:f.EndTime,RangeBase:f.TimeRangeBase,RangeFactor:f.TimeRangeFactor,MeasurePoints:f.PointCount};for(a=0;d>a;a++)b=e[a],c.push({name:b.name,setting:b.rangeType,startTime:b.beginTimeUTC,endTime:b.endTimeUTC,rangeBase:b.timeRangeBase-1,rangeFactor:b.timeRangeFactor,measurementPoints:b.pointCount});return b=null,{rangePropsIds:g,rangeProps:c}},this.setTimeRangePropsData=function(a,b,c){isNaN(b)||e[a].updateProperty(b,c,!0)},this.updateOrientationProperties=function(b){var f,g,h,i,j=0,k=this.isLeftOrRight;for(f=PWC.HmiAC.TextOrientation,this.textOrientation=PWC.HmiAC.TextOrientation[b],this.isLeftOrRight=this.textOrientation===f.FromLeft||this.textOrientation===f.FromRight,this.isLeftOrRight?(this.alignmentEnum=PWC.HmiAC.AlignmentForLeftAndRight,this.axisTypeEnum=PWC.HmiAC.AxisTypeForLeftAndRight):(this.alignmentEnum=PWC.HmiAC.AlignmentForTopAndBottom,this.axisTypeEnum=PWC.HmiAC.AxisTypeForTopAndBottom),h=e.length,j=0;h>j;j++)e[j].setIsLeftOrRight(this.isLeftOrRight);for(h=a.length,j=0;h>j;j++)a[j].setIsLeftOrRight(this.isLeftOrRight);for(i=this.axisTypeEnum,g=c,h=g.length,j=0;h>j;j++)g[j].axisType=i.xAxis,g[j].setAxisAlignment(this.alignmentEnum,this.isLeftOrRight);for(g=d,h=g.length,j=0;h>j;j++)g[j].axisType=i.yAxis,g[j].setAxisAlignment(this.alignmentEnum,this.isLeftOrRight),k!==this.isLeftOrRight&&(g[j].align="Left"===g[j].align?"Right":"Left")},this.enableScrollbarEvents=function(a){b[0].enableScrollbarEvents(a)},this.setAllXAxesZoom=function(b,c){var d,e,f=a.length;for(d=0;f>d;d++)e=a[d],e.name!==b&&e.setXZoomCount(c)},this.hasVerticalScrollbar=function(){var a,c,d,e,f=b.length;for(this.yAxesScrollbar=!1,a=0;f>a;a++)for(d=b[a].getYAxes(),e=d.length,c=0;e>c;c++)if(d[c].zoomInOutCount>0){this.yAxesScrollbar=!0;break}},this.resetZoom=function(){var a,b,e,f,g=new PWC.HmiAC.TagList;for(this.oneToOneView=!1,PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.enable(this.screenItem,"OneToOneView",!1),a=d.length,b=0;a>b;b++)if(e=d[b],e.zoomInOutCount>0){if(e.zoomInOutCount=0,e.currentBeginValue=e.startValueBuffer,e.currentEndValue=e.endValueBuffer,e.startValueBuffer2=null,e.endValueBuffer2=null,e.labelText=e.labelTextBuffer,g.tryAdd(e.trendWindow),this.scrollbarMode===PWC.HmiAC.ScrollbarMode.WhenNeccessary)continue;e.visible&&(e.calculateGrid(),e.trendWindowDrawable&&(e.updateTicks(),e.showLabels&&e.updateLabels()))}for(a=c.length,b=0;a>b;b++)if(e=c[b],e.zoomInOutCount>0){if(e.zoomInOutCount=0,e.currentBeginValue=e.startValueBuffer,e.currentEndValue=e.endValueBuffer,e.labelText=e.labelTextBuffer,g.tryAdd(e.trendWindow),this.scrollbarMode===PWC.HmiAC.ScrollbarMode.WhenNeccessary)continue;e.visible&&(e.calculateGrid(),e.trendWindowDrawable&&(e.updateTicks(),e.showLabels&&e.updateLabels()))}for(b=0;b<g.items.length;b++)f=this.getTrendWindowByName(g.items[b]),f.resetZoomCount(),this.scrollbarMode!==PWC.HmiAC.ScrollbarMode.WhenNeccessary&&f.resetTrendWindow();this.scrollbarMode===PWC.HmiAC.ScrollbarMode.WhenNeccessary&&this.redraw(),this.rulerControl&&this.showRuler&&this.calculateRulerData(),g.clear(),g=null},this.enableDisableOriginalView=function(){var a,b,e=!1,f=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar;for(a=d.length,b=0;a>b;b++)if(d[b].zoomInOutCount>0){e=!0;break}if(!e)for(a=c.length,b=0;a>b;b++)if(c[b].zoomInOutCount>0){e=!0;break}e&&!this.oneToOneView?(this.oneToOneView=!0,f.enable(this.screenItem,"OneToOneView",!0)):!e&&this.oneToOneView&&(this.oneToOneView=!1,f.enable(this.screenItem,"OneToOneView",!1))},this.resetDrawableTrendWindows=function(a,c,d){var e,f,g=b.length;for(e=0;g>e;e++)f=e===d?c:void 0,b[e].resetTrendWindow(a,f)},this.createDrawableCollections=function(){var c,d,h=null,i=null;for(b=[],g=[],f=[],c=a.length,d=0;c>d;d++)h=a[d],h.visible&&0!==h.spacePortion?(h.index=b.length,b.push(h)):h.setLayoutSuccess(!1);for(c=e.length,d=0;c>d;d++)i=e[d],(i.currentTrendWindow=this.getDrawableTrendWindowByName(i.trendWindow))&&i.visibility&&i.currentXAxis&&i.currentYAxis&&g.push(i);for(;this.SVGParent.lastChild;)this.SVGParent.removeChild(this.SVGParent.lastChild);for(this.createParentWindow(this.SVGParent),this.drawLayout(),g=[],d=0;c>d;d++)i=e[d],i.currentTrendWindow=this.getDrawableTrendWindowByName(i.trendWindow),i.currentTrendWindow&&i.currentTrendWindow.trendWindowDrawn&&i.visibility&&i.currentXAxis&&i.currentYAxis&&(g.push(i),f.push(i));this.drawTrends()},this.createDrawableTrendsCollection=function(){var a,b,c=e.length;for(g=[],a=0;c>a;a++)b=e[a],b.currentTrendWindow&&b.currentTrendWindow.trendWindowDrawn&&b.visibility&&b.currentXAxis&&b.currentYAxis&&g.push(b)},this.setTrendWindowLayoutSuccess=function(a,b){var e,f=c.length;for(e=0;f>e;e++)c[e].trendWindow===a&&(c[e].trendWindowDrawable=b);for(f=d.length,e=0;f>e;e++)d[e].trendWindow===a&&(d[e].trendWindowDrawable=b)},this.getXAxisCount=function(){return c.length},this.getXAxis=function(a){return c[a]},this.getXAxisByName=function(a){var b,d=null,e=c.length;for(b=0;e>b;b++)if(c[b].name===a){d=c[b];break}return d},this.getYAxisCount=function(){return d.length},this.getYAxisByName=function(a){var b,c=null,e=d.length;for(b=0;e>b;b++)if(d[b].name===a){c=d[b];break}return c},this.getYAxis=function(a){return d[a]},this.getTrendCount=function(){return e.length},this.getTrend=function(a){return void 0!==a?e[a]:e},this.getTrendByName=function(a){var b,c=null;for(b=0;b<e.length;b++)if(e[b].name===a){c=e[b];break}return c},this.getDrawableTrendCount=function(){return g.length},this.getDrawableTrend=function(a){return void 0!==a?g[a]:g},this.getDrawableTrendByName=function(a){var b,c=null,d=g.length;for(b=0;d>b;b++)if(g[b].name===a){c=g[b];break}return c},this.onRead=function(a){var b,c,d,e,h,j,l,m,p,q,r,s=[],t=new PWC.HmiAC.TagList,u=new PWC.HmiAC.TagList,v=new PWC.HmiAC.TagList,w={},x=[],y=[],z=[],A=[],B=[],C=f.length;if(this.layoutDrawn){for(m=a.TimestampsArray.length,b=0;m>b;b++)a.TimestampsArray[b]=k.convertFileTimeToJSTimeStamp(a.TimestampsArray[b]),a.ValuesArray[b]=+a.ValuesArray[b],x.push(a.ItemIDArray[b]),y.push(a.ValuesArray[b]),z.push(a.TimestampsArray[b]);for(d=0;d<g.length;d++){for(j=g[d],q=j.tagList.items.length,p=!1,b=0;b<x.length;b++)if(x[b]===g[d].dataSourceY.Tag){for(h=new PWC.HmiAC.Point,h.yTagValue=y[b],h.timeStamp=z[b],j.previousYTagValueTemp=h.yTagValue,x.splice(b,1),y.splice(b,1),z.splice(b,1),c=0;c<x.length;c++)if(x[c]===g[d].dataSourceX.Tag){h.xTagValue=y[c],j.previousXTagValueTemp=h.xTagValue,x.splice(c,1),y.splice(c,1),z.splice(c,1);break}(void 0===h.xTagValue||null===h.xTagValue)&&(h.xTagValue=j.previousXTagValueTemp),s.push(h),p=!0;break}if(!p)for(b=0;b<x.length;b++)if(x[b]===g[d].dataSourceX.Tag){j.previousXTagValueTemp=y[b],j.xYTagUpdateCycleSame&&(h=new PWC.HmiAC.Point,h.xTagValue=j.previousXTagValueTemp,h.yTagValue=j.previousYTagValueTemp,h.timeStamp=z[b],s.push(h)),x.splice(b,1),y.splice(b,1),z.splice(b,1);break}s.length&&(w=g[d].onTagListChanged(s,!0),this.online&&(l=this.getDrawableTrendWindowByName(j.trendWindow),l&&l.trendWindowDrawn&&(v.tryAdd(l.name),w.updateRequiredY&&(this.moveAxes||this.moveTrendArea||u.tryAdd(j.yAxis))),w.updateRequiredX&&(this.moveAxes||this.moveTrendArea||t.tryAdd(j.xAxis)))),s=[]}for(b=0;b<t.items.length;b++)e=this.getXAxisByName(t.items[b]),e.invalidate(e.zoomInOutCount>0)&&(c=v.findIndexByName(e.trendWindow),-1!==c&&(A[c]=!0));for(b=0;b<u.items.length;b++)e=this.getYAxisByName(u.items[b]),e.invalidate(e.zoomInOutCount>0)&&(c=v.findIndexByName(e.trendWindow),-1!==c&&(B[c]=!0));for(b=0;b<v.items.length;b++)l=this.getDrawableTrendWindowByName(v.items[b]),l.resetTrendWindow(A[b],B[b]);for(this.showRuler&&this.rulerControl&&this.online&&this.calculateRulerData(),C=f.length,d=0;C>d;d++)j=f[d],(b=a.ItemIDArray.indexOf(j.dataSourceX.Tag))>-1&&(r=a.ErrorsArray[b],0!==r?(i.addToDisconnectedSources(j.name,j.dataSourceX.Tag,j.dataSourceY.Tag),j.tagInvalid=!0):0===r&&(n=!0,o=!1,i.removeFromDisconnectedSources(j.name,n,o),j.tagInvalid=!1)),(b=a.ItemIDArray.indexOf(j.dataSourceY.Tag))>-1&&(r=a.ErrorsArray[b],0!==r?(i.addToDisconnectedSources(j.name,j.dataSourceX.Tag,j.dataSourceY.Tag),j.tagInvalid=!0):0===r&&(o=!0,n=!1,i.removeFromDisconnectedSources(j.name,n,o),j.tagInvalid=!1));t.clear(),t=null,u.clear(),u=null,v.clear(),v=null}},this.onHistoricalRead=function(a){var b,c,d,e,f,h,i,j,l,m,n,o,p,q,r,s=[],t=new PWC.HmiAC.TagList,u=new PWC.HmiAC.TagList,v=new PWC.HmiAC.TagList,w={},x=[],y=[],z=[],A=[],B=!1,C=0;if(this.layoutDrawn){for(l=a.ItemIDArray.length,e=0;e<g.length;e++){if(i=g[e],o=!1,2===i.dataSourceX.TagDataSourceType){for(b=0;l>b;b++)if(a.ItemIDArray[b]===i.dataSourceY.Tag&&i.index===a.ClientHandlesArray[b]){if(p=a.TimestampsArray[b].length,!B){for(d=0;l>d;d++){if(Array.isArray(a.TimestampsArray[d]))for(C=a.TimestampsArray[d].length,c=0;C>c;c++)a.TimestampsArray[d][c]=k.convertFileTimeToJSTimeStamp(a.TimestampsArray[d][c]);if(Array.isArray(a.ValuesArray[d]))for(C=a.ValuesArray[d].length,c=0;C>c;c++)a.ValuesArray[d][c]=+a.ValuesArray[d][c]}B=!0}if(Array.isArray(a.ValuesArray[b]))for(o=!0,C=a.ValuesArray[b].length,c=0;C>c;c++)h=new PWC.HmiAC.Point,h.yTagValue=a.ValuesArray[b][c],h.timeStamp=a.TimestampsArray[b][c],z.push(h);a.ItemIDArray.splice(b,1),a.ValuesArray.splice(b,1),a.TimestampsArray.splice(b,1),a.QualitiesArray.splice(b,1),a.ClientHandlesArray.splice(b,1),l=a.ItemIDArray.length;break}if(o){for(b=0;l>b;b++)if(a.ItemIDArray[b]===i.dataSourceX.Tag&&i.index===a.ClientHandlesArray[b]){if(z.length>0&&Array.isArray(a.ValuesArray[b]))for(C=a.ValuesArray[b].length,c=0;C>c;c++)h=new PWC.HmiAC.Point,h.xTagValue=a.ValuesArray[b][c],h.timeStamp=a.TimestampsArray[b][c],A.push(h);a.ItemIDArray.splice(b,1),a.ValuesArray.splice(b,1),a.TimestampsArray.splice(b,1),a.QualitiesArray.splice(b,1),a.ClientHandlesArray.splice(b,1),l=a.ItemIDArray.length;break}if(A.length>0&&z.length>0)for(q=m=null,p=A.length,l=z.length,b=c=0;p>b||l>c;)n=A[b]?A[b].timeStamp:void 0,r=z[c]?z[c].timeStamp:void 0,n===r?(z[c].xTagValue=A[b].xTagValue,s.push(z[c]),q=z[c].xTagValue,m=z[c].yTagValue,b++,c++):void 0===r||r>n?(null!==m&&(A[b].yTagValue=m,s.push(A[b])),q=A[b].xTagValue,b++):(null!==q&&(z[c].xTagValue=q,s.push(z[c])),m=z[c].yTagValue,c++)}s.length?(w=i.onTagListChanged(s,!1),j=i.currentTrendWindow,j&&j.trendWindowDrawn&&(v.tryAdd(j.name),w.updateRequiredY&&(this.moveAxes||this.moveTrendArea||u.tryAdd(i.yAxis))),w.updateRequiredX&&(this.moveAxes||this.moveTrendArea||t.tryAdd(i.xAxis)),s=[]):i.historicalDataRequested=!1}z=[],A=[]}for(C=t.items.length,b=0;C>b;b++)f=this.getXAxisByName(t.items[b]),f.invalidate(f.zoomInOutCount>0)&&(c=v.findIndexByName(f.trendWindow),-1!==c&&(x[c]=!0));for(C=u.items.length,b=0;C>b;b++)f=this.getYAxisByName(u.items[b]),f.invalidate(f.zoomInOutCount>0)&&(c=v.findIndexByName(f.trendWindow),-1!==c&&(y[c]=!0));for(C=v.items.length,b=0;C>b;b++)j=i.currentTrendWindow,j.resetTrendWindow(x[b],y[b]);this.showRuler&&this.rulerControl&&this.calculateRulerData(),t.clear(),u.clear(),v.clear(),x=[],y=[],t=null,u=null,v=null}},this.saveTrendTagLists=function(){var a,b=g.length;for(this.trendTagListsSaved=!0,a=0;b>a;a++)g[a].saveTagList()},this.getPreDefTrendColor=function(){var a,b;for(a in h)(h[a]<h[b]||void 0===b)&&(b=a);return b},this.setPreDefTrendColorCount=function(a,b){void 0!==h[a]&&(b?h[a]++:h[a]--)},this.resetPreDefTrendColorCount=function(){var a,b,c=e.length;for(b in h)h[b]=0;for(a=0;c>a;a++)this.setPreDefTrendColorCount(e[a].color,!0)},this.enableAxesMove=function(){var a,b=null,e=c.length,f=d.length;for(a=0;e>a;a++)b=c[a],this.getDrawableTrendWindowByName(b.trendWindow)&&b.visible&&b.enableAxesMove();for(a=0;f>a;a++)b=d[a],this.getDrawableTrendWindowByName(b.trendWindow)&&b.visible&&b.enableAxesMove()},this.disableAxesMove=function(){var a,e,f=null,g=c.length,h=d.length,i=null,j=b.length;for(a=0;g>a;a++)f=c[a],this.getDrawableTrendWindowByName(f.trendWindow)&&f.visible&&f.disableAxesMove(this.moveTrendArea);for(a=0;h>a;a++)f=d[a],this.getDrawableTrendWindowByName(f.trendWindow)&&f.visible&&f.disableAxesMove(this.moveTrendArea);if(!this.moveTrendArea){for(e=0;j>e;e++)i=b[e],i.trendWindowDrawn&&i.resetTrendWindow();this.showRuler&&this.rulerControl&&this.calculateRulerData()}},this.enableTrendAreaMove=function(a){var c,d=null,e=b.length;for(c=0;e>c;c++)d=b[c],d.enableTrendAreaMove(a)},this.disableTrendAreaMove=function(a){var c,d=null,e=b.length,f=this.online?!1:this.moveAxes;for(c=0;e>c;c++)d=b[c],d.trendWindowDrawn&&d.disableTrendAreaMove(f,a);this.showRuler&&this.rulerControl&&this.calculateRulerData()},this.resetRulerControlToolbarButtons=function(){var a=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar,b=this.rulerControl.screenItem;a.enable(b,"ShowRuler",!0),a.enable(b,"ShowStatisticRuler",!1),a.enable(b,"CalculateStatistic",!1)},this.enableDisableRuler=function(a,c){var d,e,f=b.length,g=PWC.HmiAC.RulerControlColumnType;for(a?(d="showRuler",this.rulerControl&&(this.visible&&this.rulerControl.enableDisable(a,{height:this.getHeight(!0),width:this.getWidth(!0),left:this.getLeft(!0),top:this.getTop(!0)}),this.rulerControlColumnType=g.Ruler,this.rulerControl.setColumnHeaders(this.rulerControlColumnType),this.calculateRulerData(),this.rulerControlColumnType=g.Ruler),a=1):(d="hideRuler",this.rulerControl&&(this.rulerControl.enableDisable(a),this.rulerControlColumnType=null),a=0),this.showRuler=a,this.setTrendViewProp("ShowRuler",this.showRuler,c),e=0;f>e;e++)b[e][d]();return!0},this.updateRulerColor=function(){var a,c=b.length;for(a=0;c>a;a++)b[a].updateRulerColor()},this.getRulerData=function(a){void 0===a?i.layoutDrawn?i.calculateRulerData(void 0,!1):j=!0:a===PWC.HmiAC.RulerControlColumnType.Ruler&&i.showRuler?(i.rulerControlColumnType=a,i.calculateRulerData()):i.calculateRulerData(void 0,!1)},this.calculateRulerData=function(a,c){var d,f,g,h,i,j,k,l=b.length,m=[],n=PWC.HmiAC.RulerControlColumns,o=this.rulerControl.getColumns(this.rulerControlColumnType),p=o.length;if(a)this.getDrawableTrendWindowByName(a).setRulerValue();else for(d=0;l>d;d++)b[d].trendWindowDrawn&&b[d].setRulerValue(c);for(l=e.length,d=0;l>d;d++)if(f=e[d],(!a||f.trendWindow===a)&&f.visibility){for(g=this.getDrawableTrendByName(f.name)?f.rulerControlData:{yValue:"",xValue:""},j=f.currentYAxis?{autoDecimalPrecision:f.currentYAxis.autoPrecision,decimalPrecision:f.currentYAxis.decimalPrecision}:{autoDecimalPrecision:!0,decimalPrecision:2},j.exponentialFormat=0,h={},k=0;p>k;k++)switch(o[k].source){case n.Name:h[o[k].displayName]=f.name;break;case n.Index:h[o[k].displayName]=f.index;break;case n.Label:h[o[k].displayName]=f.label;break;case n.Show:h[o[k].displayName]="X";break;case n.TagNameY:h[o[k].displayName]=f.dataSourceY.Tag;break;case n.TagNameX:h[o[k].displayName]=f.dataSourceX.Tag;break;case n.ValueY:i=parseFloat(g.yValue),(0===i||i&&""!==i)&&(i=o[k].useSourceFormat?PWC.HmiAC.Common.HelperUtil.getDecimalPrecision(j,i):PWC.HmiAC.Common.HelperUtil.getDecimalPrecision(o[k],i)),h[o[k].displayName]=i,g.yValue.search(" i.")&&(h[o[k].displayName]+=" i.");break;case n.ValueX:h[o[k].displayName]=g.xValue;break;case n.AreaName:break;case n.LabelX:h[o[k].displayName]=f.currentXAxis?f.currentXAxis.Label:"";break;case n.LabelY:h[o[k].displayName]=f.currentYAxis?f.currentYAxis.Label:""}h.foreColor=f.color,h.backColor=f.currentTrendWindow.getBackColor(),m.push(h)}m.length&&this.rulerControl.displayData(m,this.rulerControlColumnType)},this.getPropertyBrowserHandlerName=function(){return"FunctionTrendPropertyBrowser"},this.cleanUp=function(){var j,n;for(j=c.length,n=0;j>n;n++)c[n].cleanUp(),c[n]=null;for(j=d.length,n=0;j>n;n++)d[n].cleanUp(),d[n]=null;for(j=a.length,n=0;j>n;n++)a[n].cleanUp(),a[n]=null;for(j=e.length,n=0;j>n;n++)e[n].cleanUp(),e[n]=null;a=b=c=d=e=g=f=h=k=l=m=p=i=null}},PWC.HmiAC.FunctionTrendView.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.FunctionTrendView,PWC.HmiAC.TrendViewBase);var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.OnlineTrendView=function(){"use strict";PWC.HmiAC.OnlineTrendView.baseCtor.call(this);var a=[],b=[],c=[],d=[],e=[],f=[],g=[],h={"#000000":0,"#FF0000":0,"#00FF00":0,"#0000FF":0,"#FFFF00":0,"#00FFFF":0,"#FF00FF":0,"#FFFFFF":0,"#800000":0,"#008000":0,"#000080":0,"#808000":0,"#008080":0,"#800080":0,"#808080":0,"#C0C0C0":0},i=PWC.Lib.Canvas.Converters,j=PWC.HmiAC.MoveToType,k=PWC.Lib.Config.Properties,l=[],m=PWC.HmiAC.Common.HelperUtil,n={},o=this,p={},q={},r=1e4,s=116444736e5,t=[],u={},v=-1073446910,w=-1073446908,x=function(a){var b,c,d,e,h,j,k,l,m=[],n=[],p=[],q=[],r=new PWC.HmiAC.TagList,s=new PWC.HmiAC.TagList,t=new PWC.HmiAC.TagList,x=a.ValuesArray.length;for(c=0;c<a.ValuesArray.length;c++)a.TimestampsArray[c]=i.convertFileTimeToJSTimeStamp(a.TimestampsArray[c]);for(x=g.length,b=0;x>b;b++){for(k=!1,h=g[b],d=0;d<a.ItemIDArray.length;d++)"[empty]"!==a.ValuesArray[d]&&a.ItemIDArray[d]===h.dataSource.Tag&&(m.push(+a.ValuesArray[d]),n.push(a.TimestampsArray[d]),p.push(a.QualitiesArray[d]),k=!0);q.push(h.onTagListChangedX(m,n,p,!0)),r.tryAdd(h.timeAxis),m=[],n=[],p=[]}for(x=r.items.length,c=0;x>c;c++)e=o.getXAxisByName(r.items[c]),e.invalidate()&&e.visible&&e.refresh&&e.trendWindowDrawable&&(e.updateTicks(),e.showLabels&&e.updateLabels());for(x=g.length,b=0;x>b;b++)h=g[b],j=o.getDrawableTrendWindowByName(h.trendWindow),j&&j.trendWindowDrawn&&((h.invalidate(!0)||q[b].yAxisUpdateRequired)&&s.tryAdd(h.valueAxis),q[b].trendDrawRequired&&t.tryAdd(j.name));for(x=s.items.length,c=0;x>c;c++)e=o.getYAxisByName(s.items[c]),o.moveAxes||o.moveTrendArea||0!==e.zoomInOutCount||e.invalidate();for(x=t.items.length,c=0;x>c;c++)j=o.getDrawableTrendWindowByName(t.items[c]),j.resetTrendWindow();for(o.online&&(o.showRuler||o.showStatisticRuler)&&o.rulerControl&&o.rulerControlColumnType!==PWC.HmiAC.RulerControlColumnType.StatisticResult&&o.calculateRulerData(),x=f.length,b=0;x>b;b++)h=f[b],(c=a.ItemIDArray.indexOf(h.dataSource.Tag))>-1&&(l=a.ErrorsArray[c],void 0===u[h.name]?(l===v||l===w)&&(o.addToDisconnectedSources(h.name,h.dataSource.Tag),h.tagInvalid=!0):0===l&&(o.removeFromDisconnectedSources(h.name),h.tagInvalid=!1));q=[],r.clear(),r=null,s.clear(),s=null,t.clear(),t=null},y=function(a){var b,d,e;for(d=c.length,b=0;d>b;b++)if(e=c[b],e.trendWindow===a)return e.name},z=function(a){var b,c,e;for(c=d.length,b=0;c>b;b++)if(e=d[b],e.trendWindow===a)return e.name};this.updateConnectionState=function(){var a,b=f.length,c=[];for(a=0;b>a;a++)c.push(f[a].name);for(a in u)-1===c.indexOf(a)&&b++;PWC.HmiAC.Common.HelperUtil.updateConnectionState(b,u,o.screenItem)},this.layoutDrawn=!1,this.redrawForScrollbars=!1,this.addToDisconnectedSources=function(a,b){var c,d=f.length;for(c=0;d>c;c++)if(f[c].name===a){u[a]=b,this.updateConnectionState();break}},this.removeFromDisconnectedSources=function(a){delete u[a],this.updateConnectionState()},this.setTrendViewProp=function(a,b,c){var d=this.screenItem;k.setProp(d,a,b),c&&d.gfxWebLib.connection.sendPropertyByName(d.rtoid,a,b,!1,!1)},this.updateTimeBase=function(){this.timeBase===PWC.HmiAC.TimeBase.UTC?PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.tooltip(this.screenItem,PWC.HmiAC.StatusBarButtons.TimeBase,this.screenItem.gfxWebLib.textbib.getText("TBID_AlgCtrl_UTC")):PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.tooltip(this.screenItem,PWC.HmiAC.StatusBarButtons.TimeBase,this.screenItem.gfxWebLib.textbib.getText("TBID_AlgCtrl_LocalTimeZone"))},this.initialize=function(h,l){var m,p,q,r,s,u,v,w,y,z,A=h.rtoid.toString(),B=0,C=0,D=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar,E=PWC.HmiAC.TextOrientation,F={basePath:h.gfxWebLib.connection.getAppDir(),imagePath:h.gfxWebLib.connection.getImageUrl()};for(this.trendViewFont=new PWC.HmiAC.FontPart,this.showRelativeAxis=!1,this.gfxWebLib=new PWC.Lib.GfxWebLib(h.gfxWebLib.appMode,h.gfxWebLib.appType,F),this.gfxWebLib.rootDiv=h.gfxWebLib.rootDiv,this.screenItem=h,this.backColor=k.getProp(h,"BackColor",i.enumConverter.Color),this.borderColor=k.getProp(h,"BorderColor",i.enumConverter.Color),this.borderWidth=k.getProp(h,"BorderWidth"),this.connectTrendWindows=1===k.getProp(h,"ConnectTrendWindows")?!0:!1,this.textOrientation=k.getProp(h,"Orientation"),this.isLeftOrRight=this.textOrientation===E.FromLeft||this.textOrientation===E.FromRight,this.isLeftOrRight?(this.alignmentEnum=PWC.HmiAC.Alignment=PWC.HmiAC.AlignmentForLeftAndRight,this.axisTypeEnum=w=PWC.HmiAC.AxisType=PWC.HmiAC.AxisTypeForLeftAndRight):(this.alignmentEnum=PWC.HmiAC.Alignment=PWC.HmiAC.AlignmentForTopAndBottom,this.axisTypeEnum=w=PWC.HmiAC.AxisType=PWC.HmiAC.AxisTypeForTopAndBottom),this.enabled=k.getProp(h,"Enabled"),this.useTrendNameAsLabel=k.getProp(h,"UseTrendNameAsLabel"),this.layoutManager=null,this.height=k.getProp(h,"Height"),this.layer=k.getProp(h,"Layer"),this.left=0,this.name=(A+k.getProp(h,"Name")).replace(/\s+/g,"").replace(/\(/g,"_ob_").replace(/\)/g,"_cb_").replace(/\\/g,"_bs_").replace(/\'/g,"_sq_").replace(/\"/g,"_dq_"),this.online=k.getProp(h,"Online"),D.check(h,"StartStopUpdate",!this.online),this.timeBase=k.getProp(h,"TimeBase"),this.customFormat=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(this.timeBase),this.top=0,this.visible=k.getProp(h,"Visible"),this.scrollbarMode=k.getProp(h,"ScrollbarMode"),this.lineColor=k.getProp(h,"LineColor",i.enumConverter.Color),this.lineWidth=k.getProp(h,"LineWidth"),this.trendViewRect=null,this.loadDataImmediately=k.getProp(h,"LoadDataImmediately"),this.loadDataImmediately||(this.bufferTime=(new Date).getTime()),this.Hammer=null,this.moveAxes=!1,this.moveTrendArea=!1,this.zoomInOut=!1,this.zoomInOutX=!1,this.zoomInOutY=!1,this.zoomArea=!1,this.oneToOneView=!1,this.zoomButtonClicked=null,this.showRuler=!1,this.showStatisticRuler=!1,this.calculateStatistics=!1,this.rulerControlColumnType=null,this.trendToUpdate=null,this.xAxisToUpdate=null,this.yAxisToUpdate=null,this.trendWindowToUpdate=null,this.width=k.getProp(h,"Width"),this.trendObjectType=PWC.HmiAC.TrendObjectType.Online,this.id=this.trendObjectType+"TrendControl"+this.name,this.parentGroup=l,this.SVGParent=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.parentGroup.appendChild(this.SVGParent),this.propertyBrowserId=this.id+"PropDiv",this.SVGParent.setAttributeNS(null,"id",this.id),this.addUnSelectableClass(this.SVGParent),this.axisLabelClass=this.id+"axisLabel",this.trendViewFont.initialize(h,this.SVGParent),this.createParentWindow(this.SVGParent),this.isZooming=!1,this.yAxesScrollbar=!1,D.enable(h,"ZoomArea",!0),D.enable(h,"ZoomInOut",!0),D.enable(h,"ZoomInOutX",!0),D.enable(h,"ZoomInOutY",!0),D.enable(h,"ShowPercentageAxis",!0),D.enable(h,"ShowRuler",!0),D.enable(h,"ShowStatisticRuler",!0),D.enable(h,"CalculateStatistic",!1),D.enable(h,"ShowTrendSelection",!0),D.enable(h,"OneToOneView",!1),this.online?(D.enable(h,"MoveToNext",!1),D.enable(h,"MoveToPrevious",!1),D.enable(h,"MoveToFirst",!1),D.enable(h,"MoveToLast",!1)):(D.enable(h,"MoveToNext",!0),D.enable(h,"MoveToPrevious",!0),D.enable(h,"MoveToFirst",!0),D.enable(h,"MoveToLast",!0)),D.enable(h,"Print",!1),D.enable(h,"ShowHelp",!1),D.enable(h,"ShowTagSelection",!1),D.enable(h,"ShowTimeSelection",!0),D.enable(h,"PreviousTrend",!1),D.enable(h,"NextTrend",!1),D.enable(h,"Export",!1),D.enable(h,"AttachDB",!1),D.enable(h,"DetachDB",!1),z=k.getProp(h,"TrendWindows"),z&&(C=z.length),B=0;C>B;++B)s=z[B],r=new PWC.HmiAC.TrendWindow,r.init(s,o),a.push(r),r.visible&&"0"!==r.spacePortion&&(r.index=b.length,b.push(r));for(z=k.getProp(h,"TimeAxes"),C=0,z&&(C=z.length),B=0;C>B;++B)m=z[B],p=new PWC.HmiAC.TimeAxis,p.init(m,o,w.xAxis),c.push(p);for(z=k.getProp(h,"ValueAxes"),C=0,z&&(C=z.length),B=0;C>B;++B)q=z[B],u=new PWC.HmiAC.ValueAxis,u.init(q,o,w.yAxis),d.push(u);for(z=k.getProp(h,"Trends"),C=0,z&&(C=z.length),B=0;C>B;++B)v=z[B],y=new PWC.HmiAC.OnlineTrend,y.initialize(v,o),e.push(y),r=o.getDrawableTrendWindowByName(y.trendWindow),r&&y.visibility&&y.currentXAxis&&y.currentYAxis&&(g.push(y),f.push(y)),y.trendWindow&&!y.currentTrendWindow.visible||y.timeAxis&&y.valueAxis&&!y.tagInvalid||o.addToDisconnectedSources(y.name,y.dataSource.Tag);if(this.updateConnectionState(),this.updateTimeBase(),z=v=null,h.gfxWebLib.appMode!==PWC.Lib.AppMode.RUNTIME){for(o.layoutManager=new PWC.HmiAC.LayoutManager(o),o.layoutDrawn=o.drawLayout(),g=[],B=0;B<e.length;B++)y=e[B],r=o.getDrawableTrendWindowByName(y.trendWindow),r&&r.trendWindowDrawn&&y.visibility&&y.currentXAxis&&y.currentYAxis&&g.push(y);return o.drawTrends(),o.layoutDrawn}requirejs.config({baseUrl:h.gfxWebLib.connection.getAppDir()+"libs",paths:{Hammer:"hammer-2.0.2"}}),require(["Hammer"],function(a){if(o.screenItem.trendControl){for(o.Hammer=a,o.layoutManager=new PWC.HmiAC.LayoutManager(o),o.layoutDrawn=o.drawLayout(),o.onRead=x,g=[],B=0;B<e.length;B++)y=e[B],r=o.getDrawableTrendWindowByName(y.trendWindow),r&&r.trendWindowDrawn&&y.visibility&&y.currentXAxis&&y.currentYAxis&&g.push(y);if(o.loadDataImmediately&&(o.MoveToLast(),o.moveToType=j.OnUnpause),o.drawTrends(),k.getProp(o.screenItem,"ShowRuler")&&o.setShowRuler(!0,!1),o.layoutDrawn&&n.requestPending&&(o.rulerControl&&o.getRulerData(n.columnType),n={}),C=t.length,C>0){for(B=0;C>B;B++)x(t[B]);t=null}return o.layoutDrawn}}),h=null},this.drawLayout=function(){var a,d,e,f,g=b.length;if(a=this.layoutManager.drawLayout(this.SVGParent),this.layoutDrawn=a)for(f=0;g>f;f++)if(b[f].trendWindowDrawn){for(d=this.isLeftOrRight?"width":"height",e=b[f].getRect()[d],g=c.length,f=0;g>f;f++)c[f].innerRect[d]=e;break}return a},this.updateLayout=function(){var a,d,e,f,g=b.length;if(a=this.layoutManager.updateLayout())for(f=0;g>f;f++)if(b[f].trendWindowDrawn){for(d=this.isLeftOrRight?"width":"height",e=b[f].getRect()[d],g=c.length,f=0;g>f;f++)c[f].innerRect[d]=e;break}return a},this.requestHistoricalData=function(a,b,d){var e,f,h,i,j,k=[],l=[],m=[],n=0,o=[],p=[];if(this.screenItem.gfxWebLib.appMode!==PWC.Lib.AppMode.EDIT){for(e=0;e<c.length;e++)if(f=c[e],!d||f.name===d)for(i=0;i<g.length;i++)h=g[i],b&&h.trendWindow!==b||(j=this.getDrawableTrendWindowByName(h.trendWindow),n=this.isLeftOrRight?j.getRect().width:j.getRect().height,n=Math.floor(n),h.timeAxis===f.name&&2===h.dataSource.TagDataSourceType&&void 0!==h.dataSource.Tag&&(h.clearTagList(),f.rangeType!==PWC.HmiAC.RangeType.PointCount||0!==f.zoomInOutCount||a?(k.push(!this.loadDataImmediately&&this.bufferTime>f.currentBeginValue?(this.bufferTime+s)*r:(f.currentBeginValue+s)*r),l.push((f.currentEndValue+s)*r)):(n=f.measurementPoint,k.push(this.online&&f.refresh?0:(f.currentBeginValue+s)*r),l.push(0),this.timeAxisDrawn=!1),o.push(n),m.push(this.screenItem.gfxWebLib.connection.datatypesToString(this.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(h.dataSource.Tag))),p.push(h.index),h.historicalDataRequested=!0));m.length&&this.sendDomainLogicRead(k,l,o,m,p,5)}},this.drawTrends=function(){for(var a=g.length-1;a>=0;a--){var b=g[a];b.recalculate(),b.draw(!1)}},this.getTrendWindowCount=function(){return a.length},this.getTrendWindow=function(b){return void 0===b?a:a[b]},this.getTrendWindowByName=function(b){var c,d=null;for(c=0;c<a.length;c++)if(a[c].name===b){d=a[c];break}return d},this.getDrawableTrendWindowCount=function(){return b.length},this.getDrawableTrendWindow=function(a){return void 0===a?b:b[a]},this.getDrawableTrendWindowByName=function(a){var c,d=null;for(c=0;c<b.length;c++)if(b[c].name===a){d=b[c];break}return d},this.getTimeRangePropData=function(){var a,b,c=[],d=g.length,e=PWC.HmiAC.AxisPropId,f={Setting:e.RangeType,StartTime:e.BeginTime,EndTime:e.EndTime,RangeBase:e.TimeRangeBase,RangeFactor:e.TimeRangeFactor,MeasurePoints:e.PointCount};for(a=0;d>a;a++)b=g[a],c.push({name:b.name,setting:b.currentXAxis.rangeType,startTime:b.currentXAxis.BeginTimeUTC,endTime:b.currentXAxis.EndTimeUTC,rangeBase:b.currentXAxis.rangeBase-1,rangeFactor:b.currentXAxis.rangeFactor,measurementPoints:b.currentXAxis.measurementPoint,timeAxisName:b.currentXAxis.name});
return b=null,c.isOnlineTrend=1,{rangePropsIds:f,rangeProps:c}},this.setTimeRangePropsData=function(a,b,c){isNaN(b)||e[a].currentXAxis.UpdateProperty(b,c,!0)},this.createDrawableCollections=function(c){var d,h,i=null,j=null;for(b=[],g=[],f=[],d=a.length,h=0;d>h;h++)i=a[h],i.visible&&0!==i.spacePortion?(i.index=b.length,b.push(i)):i.setLayoutSuccess(!1);for(d=e.length,h=0;d>h;h++)j=e[h],j.currentTrendWindow=this.getDrawableTrendWindowByName(j.trendWindow),j.currentTrendWindow&&j.visibility&&j.currentXAxis&&j.currentYAxis&&(g.push(j),f.push(j));for(c&&this.getYAxisByName(c).invalidate();this.SVGParent.lastChild;)this.SVGParent.removeChild(this.SVGParent.lastChild);for(this.createParentWindow(this.SVGParent),this.drawLayout(),g=[],h=0;d>h;h++)j=e[h],j.currentTrendWindow=this.getDrawableTrendWindowByName(j.trendWindow),j.currentTrendWindow&&j.currentTrendWindow.trendWindowDrawn&&j.visibility&&j.currentXAxis&&j.currentYAxis&&g.push(j);this.drawTrends()},this.createDrawableTrendsCollection=function(){var a,b,c=e.length;for(g=[],a=0;c>a;a++)b=e[a],b.currentTrendWindow&&b.currentTrendWindow.trendWindowDrawn&&b.visibility&&b.currentXAxis&&b.currentYAxis&&g.push(b)},this.setTrendWindowLayoutSuccess=function(a,b){var e,f=c.length;for(e=0;f>e;e++)c[e].trendWindow===a&&(c[e].trendWindowDrawable=b);for(f=d.length,e=0;f>e;e++)d[e].trendWindow===a&&(d[e].trendWindowDrawable=b)},this.getXAxisCount=function(){return c.length},this.getXAxes=function(){return c},this.getXAxis=function(a){return c[a]},this.getXAxisByName=function(a){var b,d=null,e=c.length;for(b=0;e>b;b++)if(c[b].name===a){d=c[b];break}return d},this.getYAxisCount=function(){return d.length},this.getYAxisByName=function(a){var b,c=null,e=d.length;for(b=0;e>b;b++)if(d[b].name===a){c=d[b];break}return c},this.getYAxis=function(a){return d[a]},this.getYAxes=function(){return d},this.updateOrientationProperties=function(b){var f,g,h,i,j=0,k=this.isLeftOrRight;for(f=PWC.HmiAC.TextOrientation,this.textOrientation=PWC.HmiAC.TextOrientation[b],this.isLeftOrRight=this.textOrientation===f.FromLeft||this.textOrientation===f.FromRight,this.isLeftOrRight?(this.alignmentEnum=PWC.HmiAC.AlignmentForLeftAndRight,this.axisTypeEnum=PWC.HmiAC.AxisTypeForLeftAndRight):(this.alignmentEnum=PWC.HmiAC.AlignmentForTopAndBottom,this.axisTypeEnum=PWC.HmiAC.AxisTypeForTopAndBottom),h=e.length,j=0;h>j;j++)e[j].setIsLeftOrRight(this.isLeftOrRight);for(h=a.length,j=0;h>j;j++)a[j].setIsLeftOrRight(this.isLeftOrRight);for(i=this.axisTypeEnum,g=c,h=g.length,j=0;h>j;j++)g[j].axisType=i.xAxis,g[j].setAxisAlignment(this.alignmentEnum,this.isLeftOrRight);for(g=d,h=g.length,j=0;h>j;j++)g[j].axisType=i.yAxis,g[j].setAxisAlignment(this.alignmentEnum,this.isLeftOrRight),k!==this.isLeftOrRight&&(g[j].align="Left"===g[j].align?"Right":"Left")},this.getTrendCount=function(){return e.length},this.getTrend=function(a){return void 0!==a?e[a]:e},this.getTrendByName=function(a){var b,c=null;for(b=0;b<e.length;b++)if(e[b].name===a){c=e[b];break}return c},this.getDrawableTrendCount=function(){return g.length},this.getDrawableTrend=function(a){return void 0!==a?g[a]:g},this.getDrawableTrendByName=function(a){var b,c=null,d=g.length;for(b=0;d>b;b++)if(g[b].name===a){c=g[b];break}return c},this.setTimeBase=function(a){var b,d;for(this.timeBase=a,this.customFormat=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(this.timeBase),d=0;d<c.length;d++)b=c[d],b.calculateGrid(),b.showLabels&&b.updateLabels()},this.onTimer=function(a){var b,c,d,e,f,h,j=new PWC.HmiAC.TagList,k=new PWC.HmiAC.TagList;for(a.Timestamp=i.convertFileTimeToJSTimeStamp(a.Timestamp),b=0;b<g.length;b++)d=g[b],a.TagDataSourceType===d.dataSource.TagDataSourceType&&(c=d.tagList.items,c&&c.length>0&&(h=new PWC.HmiAC.Point,h.xTagValue=h.timeStamp=c[c.length-1].timeStamp+1e3,h.yTagValue=c[c.length-1].yTagValue,d.tagList.add(h),e=this.getDrawableTrendWindowByName(d.trendWindow),e&&e.trendWindowDrawn&&(d.invalidate(!0),j.tryAdd(d.timeAxis),k.tryAdd(e.name))));for(b=0;b<j.items.length;b++)f=this.getXAxisByName(j.items[b]),f.invalidate(),f.visible&&f.refresh&&f.trendWindowDrawable&&(f.updateTicks(),f.showLabels&&f.updateLabels());for(b=0;b<k.items.length;b++)e=this.getDrawableTrendWindowByName(k.items[b]),e.resetTrendWindow();j.clear(),j=null,k.clear(),k=null},this.onRead=function(a){t.push(a)},this.onHistoricalRead=function(a){var d,e,f,h,k,l,m,n,o=[],p=[],q=[],r=new PWC.HmiAC.TagList;for(e=0;e<a.ValuesArray.length;e++)if("[empty]"!==a.ValuesArray[e])if(Array.isArray(a.ValuesArray[e]))for(f=0;f<a.ValuesArray[e].length;f++)a.TimestampsArray[e][f]=i.convertFileTimeToJSTimeStamp(a.TimestampsArray[e][f]);else a.TimestampsArray[e]=i.convertFileTimeToJSTimeStamp(a.TimestampsArray[e]);for(d=0;d<g.length;d++){for(n=g[d],h=0;h<a.ItemIDArray.length;h++)if("[empty]"!==a.ValuesArray[h]&&a.ItemIDArray[h]===n.dataSource.Tag&&n.index===a.ClientHandlesArray[h]){if(Array.isArray(a.ValuesArray[h]))for(e=0;e<a.ValuesArray[h].length;e++)"[empty]"!==a.ValuesArray[h][e]&&(o.push(+a.ValuesArray[h][e]),p.push(a.TimestampsArray[h][e]),q.push(a.QualitiesArray[h][e]));else o.push(+a.ValuesArray[h]),p.push(a.TimestampsArray[h]),q.push(a.QualitiesArray[h]);n.onTagListChangedX(o,p,q,!1),r.tryAdd(n.valueAxis)}o=[],p=[],q=[]}if(!this.moveAxes&&!this.moveTrendArea)for(e=0;e<r.items.length;e++)m=this.getYAxisByName(r.items[e]),0===m.zoomInOutCount&&null===m.endValueBuffer2&&m.invalidate();if(!this.timeAxisDrawn){for(h=0;h<c.length;h++)k=c[h],this.moveToType===j.OnUnpause?k.invalidate():k.historicalInvalidate();this.moveToType=j.NoMove,this.timeAxisDrawn=!1}for(h=0;h<b.length;h++)l=b[h],l.trendWindowDrawn&&l.resetTrendWindow();(this.showRuler||this.showStatisticRuler)&&this.rulerControl&&this.calculateRulerData(),r.clear(),r=null},this.enableAxesMove=function(){var a,c=null,e=d.length;for(a=0;e>a;a++)c=d[a],this.getDrawableTrendWindowByName(c.trendWindow)&&c.visible&&c.enableAxesMove();if(this.showRelativeAxis)for(a=0;a<b.length;a++)b[a].relativeAxis.enableAxesMove();this.enableTimeAxesMove()},this.enableTimeAxesMove=function(){var a,b=null,d=c.length;for(a=0;d>a;a++)b=c[a],!this.getDrawableTrendWindowByName(b.trendWindow)||!b.visible||this.online&&b.refresh||b.enableAxesMove()},this.disableTimeAxesMove=function(){var a,b=null,d=c.length;for(a=0;d>a;a++)b=c[a],this.getDrawableTrendWindowByName(b.trendWindow)&&b.visible&&b.refresh&&b.disableAxesMove()},this.disableAxesMove=function(){var a,e,f=null,g=d.length,h=null,i=b.length;for(a=0;g>a;a++)f=d[a],this.getDrawableTrendWindowByName(f.trendWindow)&&f.visible&&f.disableAxesMove(this.moveTrendArea);for(a=0;a<b.length;a++)b[a].relativeAxis.disableAxesMove(this.moveTrendArea);if(!this.moveAxes)for(g=c.length,a=0;g>a;a++)f=c[a],this.getDrawableTrendWindowByName(f.trendWindow)&&f.visible&&f.disableAxesMove();if(!this.moveTrendArea)for(e=0;i>e;e++)h=b[e],h.trendWindowDrawn&&h.resetTrendWindow()},this.enableTrendAreaMove=function(a){var c,d=null,e=b.length;for(c=0;e>c;c++)d=b[c],d.trendWindowDrawn&&d.enableTrendAreaMove(a)},this.disableTrendAreaMove=function(a){var c,d=null,e=b.length,f=this.online?!1:this.moveAxes;for(c=0;e>c;c++)d=b[c],d.trendWindowDrawn&&d.disableTrendAreaMove(f,a)},this.resetRulerControlToolbarButtons=function(){var a=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar,b=this.rulerControl.screenItem;a.enable(b,"ShowRuler",!0),a.enable(b,"ShowStatisticRuler",!0),a.enable(b,"CalculateStatistic",!0)},this.enableDisableRuler=function(a,c,d){var e,f,g=b.length,h=PWC.HmiAC.RulerControlColumnType;if(a)e="showRuler",this.rulerControl&&(!this.showStatisticRuler&&this.visible&&this.rulerControl.enableDisable(a,{height:this.getHeight(!0),width:this.getWidth(!0),left:this.getLeft(!0),top:this.getTop(!0)}),this.rulerControlColumnType=h.Ruler,this.rulerControl.setColumnHeaders(this.rulerControlColumnType),this.calculateRulerData(),this.rulerControlColumnType=h.Ruler),a=1;else{if(e="hideRuler",this.rulerControl)if(this.rulerControlColumnType===h.Ruler)this.showStatisticRuler?(this.rulerControlColumnType=h.StatisticArea,this.rulerControl.setColumnHeaders(this.rulerControlColumnType),this.calculateRulerData()):(this.rulerControl.enableDisable(a),this.rulerControlColumnType=null);else if(d)return this.rulerControlColumnType=h.Ruler,this.rulerControl.setColumnHeaders(this.rulerControlColumnType),this.calculateRulerData(),!1;a=0}for(this.showRuler=a,this.setTrendViewProp("ShowRuler",this.showRuler,c),f=0;g>f;f++)b[f][e]();return!0},this.enableDisableStatisticRuler=function(a,c,d){var e,f,g=b.length,h=PWC.HmiAC.RulerControlColumnType;if(a)e="showStatisticRuler",this.rulerControl&&(!this.showRuler&&this.visible&&this.rulerControl.enableDisable(a,{height:this.getHeight(!0),width:this.getWidth(!0),left:this.getLeft(!0),top:this.getTop(!0)}),this.rulerControlColumnType=h.StatisticArea,this.rulerControl.setColumnHeaders(this.rulerControlColumnType),this.calculateRulerData(),PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.enable(this.screenItem,"CalculateStatistic",!0)),a=1;else{if(e="hideStatisticRuler",this.rulerControl)if(this.rulerControlColumnType===h.StatisticArea)this.showRuler?(this.rulerControlColumnType=h.Ruler,this.rulerControl.setColumnHeaders(this.rulerControlColumnType),this.calculateRulerData()):(this.rulerControl.enableDisable(a),this.rulerControlColumnType=null);else if(d){if(!this.online)return this.rulerControlColumnType=h.StatisticArea,this.rulerControl.setColumnHeaders(this.rulerControlColumnType),this.calculateRulerData(),!1;this.showRuler?this.rulerControlColumnType===h.StatisticResult&&(this.rulerControlColumnType=h.Ruler,this.rulerControl.setColumnHeaders(this.rulerControlColumnType),this.calculateRulerData()):(this.rulerControl.enableDisable(a),this.rulerControlColumnType=null)}PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.enable(this.screenItem,"CalculateStatistic",!1),a=0}for(this.showStatisticRuler=a,this.setTrendViewProp("ShowStatisticRuler",this.showStatisticRuler,c),f=0;g>f;f++)b[f][e]();return!0},this.showStatisticResult=function(){this.rulerControl&&(this.rulerControlColumnType=PWC.HmiAC.RulerControlColumnType.StatisticResult,this.rulerControl.setColumnHeaders(this.rulerControlColumnType),this.calculateStatistics=!0,this.calculateRulerData(),this.calculateStatistics=!1)},this.getRulerData=function(a){var b,c,d,e,f,g,h,i,j,k=PWC.HmiAC.RulerControlColumns,p=[],q=PWC.HmiAC.RulerControlColumnType,r=o.rulerControlColumnType;if(h=function(a,b,c){return(0===c||c&&""!==c)&&(c=a.useSourceFormat?m.getDecimalPrecision(b,c):m.getDecimalPrecision(a,c)),c},o.layoutDrawn){switch(o.rulerControlColumnType=a,a){case q.Ruler:o.showRuler?r=a:j=!1;break;case q.StatisticArea:o.showStatisticRuler?r=a:j=!1;break;case q.StatisticResult:if(o.showStatisticRuler&&(r=a),l.length>0)return l.forEach(function(j){if(i=PWC.Lib.jQL.extend(!1,{},j),b=o.getTrendByName(i.Name)){for(c=b.currentYAxis?{autoDecimalPrecision:b.currentYAxis.autoPrecision,decimalPrecision:b.currentYAxis.decimalPrecision}:{autoDecimalPrecision:!0,decimalPrecision:2},c.exponentialFormat=0,d=o.rulerControl.getColumns(a),f=d.length,g=0;f>g;g++)switch(e=d[g],e.source){case k.Minimum:i[e.displayName]=h(e,c,i.MinValue);break;case k.Maximum:i[e.displayName]=h(e,c,i.MaxValue);break;case k.Average:i[e.displayName]=h(e,c,i.Average);break;case k.StandardDeviation:i[e.displayName]=h(e,c,i.StandardDevation)}p.push(i)}}),void o.rulerControl.displayData(p,a);j=!1;break;default:j=!1}o.calculateRulerData(void 0,j,r),o.rulerControlColumnType=r}else n.columnType=a,n.requestPending=!0},this.calculateRulerData=function(a,c,d){var f,g,h,i,j,k,n,p,q,r,s,t,u,v,w,x=b.length,y=[],z=PWC.HmiAC.RulerControlColumnType,A={},B=PWC.HmiAC.RulerControlColumns,C=o.gfxWebLib.textbib,D=PWC.HmiAC.FormatDuration;if(a)this.getDrawableTrendWindowByName(a).setRulerValue();else for(f=0;x>f;f++)b[f].trendWindowDrawn&&b[f].setRulerValue(c);if(x=e.length,this.rulerControlColumnType===z.StatisticResult&&(l=y),j=this.rulerControl.getColumns(this.rulerControlColumnType),j!==!1){for(k=j.length,r=function(a,b,c){return(0===c||c&&""!==c)&&(c=a.useSourceFormat?m.getDecimalPrecision(b,c):m.getDecimalPrecision(a,c)),c},f=0;x>f;f++)if(g=e[f],g.visibility){for(h=this.getDrawableTrendByName(g.name)?g.rulerControlData:{value:"",dateTime:"",lowerLimitValue:"",lowerLimitDateTime:"",upperLimitValue:"",upperLimitDateTime:"",minimum:"",minimumTimeStamp:"",maximum:"",maximumTimeStamp:"",average:"",standardDeviation:"",integral:"",weightedAverage:"",duration:"",numberOfValues:"",foreColor:"",backColor:"",exponentialnotaion:""},q=g.currentYAxis?{autoDecimalPrecision:g.currentYAxis.autoPrecision,decimalPrecision:g.currentYAxis.decimalPrecision}:{autoDecimalPrecision:!0,decimalPrecision:2},q.exponentialFormat=0,p={},n=0;k>n;n++)switch(i=j[n],i.source){case B.Name:p[i.displayName]=g.name;break;case B.Index:p[i.displayName]=g.index;break;case B.Label:p[i.displayName]=g.label;break;case B.Show:p[i.displayName]="X";break;case B.TagNameY:p[i.displayName]=g.dataSource.Tag;break;case B.TagNameX:p[i.displayName]="";break;case B.ValueY:p[i.displayName]=r(i,q,h.value);break;case B.ValueX:s=h.dateTime,s&&""!==s&&(i.useSourceFormat?(s=g.currentXAxis.getDisplayValue(s),s=s[1]+" "+s[0]):(t=[],"Automatic"===i.timeFormat||""===i.timeFormat?(i.timeFormat=this.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,t.push(i.timeFormat)):t.push(i.timeFormat),i.showDate?("Automatic"===i.dateFormat||""===i.dateFormat?(i.dateFormat=this.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,t.push(i.dateFormat)):t.push(i.dateFormat),s=this.customFormat(new Date(s),t),s=s[1]+" "+s[0]):s=this.customFormat(new Date(s),t)[0]),"string"==typeof h.value&&(s+=" i.")),p[i.displayName]=s;break;case B.AreaName:break;case B.LabelX:p[i.displayName]=g.currentXAxis?g.currentXAxis.Label:"";break;case B.LabelY:p[i.displayName]=g.currentYAxis?g.currentYAxis.Label:"";break;case B.ValueY_LL:p[i.displayName]=r(i,q,h.lowerLimitValue);break;case B.TimeStamp_LL:s=h.lowerLimitDateTime,s&&""!==s&&(i.useSourceFormat?(s=g.currentXAxis.getDisplayValue(s),s=s[1]+" "+s[0]):(t=[],"Automatic"===i.timeFormat||""===i.timeFormat?(i.timeFormat=this.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,t.push(i.timeFormat)):t.push(i.timeFormat),""!==s&&(i.showDate?("Automatic"===i.dateFormat||""===i.dateFormat?(i.dateFormat=this.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,t.push(i.dateFormat)):t.push(i.dateFormat),s=this.customFormat(new Date(s),t),s=s[1]+" "+s[0]):s=this.customFormat(new Date(s),t)[0])),"string"==typeof h.lowerLimitValue&&(s+=" i.")),p[i.displayName]=s;break;case B.ValueY_UL:p[i.displayName]=r(i,q,h.upperLimitValue);break;case B.TimeStamp_UL:s=h.upperLimitDateTime,s&&""!==s&&(i.useSourceFormat?(s=g.currentXAxis.getDisplayValue(s),s=s[1]+" "+s[0]):(t=[],"Automatic"===i.timeFormat||""===i.timeFormat?(i.timeFormat=this.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,t.push(i.timeFormat)):t.push(i.timeFormat),i.showDate?("Automatic"===i.dateFormat||""===i.dateFormat?(i.dateFormat=this.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,t.push(i.dateFormat)):t.push(i.dateFormat),s=this.customFormat(new Date(s),t),s=s[1]+" "+s[0]):s=this.customFormat(new Date(s),t)[0]),"string"==typeof h.upperLimitValue&&(s+=" i.")),p[i.displayName]=s;break;case B.AreaName_LL:break;case B.AreaName_HL:break;case B.Minimum:p[i.displayName]=r(i,q,h.minimum),A[i.displayName]=h.minimum;break;case B.MinimumTimeStamp:s=h.minimumTimeStamp,s&&""!==s&&(i.useSourceFormat?(s=g.currentXAxis.getDisplayValue(s),s=s[1]+" "+s[0]):(t=[],"Automatic"===i.timeFormat||""===i.timeFormat?(i.timeFormat=this.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,t.push(i.timeFormat)):t.push(i.timeFormat),i.showDate?("Automatic"===i.dateFormat||""===i.dateFormat?(i.dateFormat=this.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,t.push(i.dateFormat)):t.push(i.dateFormat),s=this.customFormat(new Date(s),t),s=s[1]+" "+s[0]):s=this.customFormat(new Date(s),t)[0]),"string"==typeof h.minimum&&(s+=" i.")),p[i.displayName]=s;break;case B.Maximum:p[i.displayName]=r(i,q,h.maximum),A[i.displayName]=h.maximum;break;case B.MaximumTimeStamp:s=h.maximumTimeStamp,s&&""!==s&&(i.useSourceFormat?(s=g.currentXAxis.getDisplayValue(s),s=s[1]+" "+s[0]):(t=[],"Automatic"===i.timeFormat||""===i.timeFormat?(i.timeFormat=this.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,t.push(i.timeFormat)):t.push(i.timeFormat),i.showDate?("Automatic"===i.dateFormat||""===i.dateFormat?(i.dateFormat=this.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,t.push(i.dateFormat)):t.push(i.dateFormat),s=this.customFormat(new Date(s),t),s=s[1]+" "+s[0]):s=this.customFormat(new Date(s),t)[0]),"string"==typeof h.maximum&&(s+=" i.")),p[i.displayName]=s;break;case B.Average:p[i.displayName]=r(i,q,h.average),A[i.displayName]=h.average;break;case B.StandardDeviation:p[i.displayName]=r(i,q,h.standardDeviation),A[i.displayName]=h.standardDeviation;break;case B.Integral:p[i.displayName]=r(i,q,h.integral);break;case B.WeightedAverage:p[i.displayName]=r(i,q,h.weightedAverage);break;case B.Duration:u=h.duration,u&&""!==u&&(w=i.timeFormat,"automatic"===w.toLowerCase()||""===w?(w=C.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Duration").f,v=D.getAutomaticDurationFormat):v=D.getCustomDurationFormat,"s"!==w&&(u=v(w,u))),p[i.displayName]=u;break;case B.NumberOfValues:p[i.displayName]=h.numberOfValues}p.foreColor=g.color,p.backColor=g.currentTrendWindow.getBackColor(),y.push(PWC.Lib.jQL.extend(!1,p,A))}y.length&&this.rulerControl.displayData(y,void 0!==this.rulerControlColumnType?this.rulerControlColumnType:d)}},this.updateRulerColor=function(){var a,c=b.length;for(a=0;c>a;a++)b[a].updateRulerColor()},this.timeAxisDrawn=!1,this.moveToType=j.NoMove,this.MoveToPrevious=function(){var a,d,e,f,h,i=[],k=[],l=c.length,m=g.length,n=[],o=0,p=[],q=[];if(b.length){for(o=Math.floor(b[0].getRect().width),e=0;l>e;e++)for(h=c[e],d=h.calculateTimeRange(),h.zoomInOutCount>0&&(d=h.currentEndValue-h.currentBeginValue,h.startValueBuffer-=d,h.endValueBuffer-=d),h.currentEndValue=h.currentBeginValue,h.currentBeginValue=h.currentEndValue-d,f=0;m>f;f++)a=g[f],a.timeAxis===h.name&&2===a.dataSource.TagDataSourceType&&void 0!==a.dataSource.Tag&&(n.push(this.screenItem.gfxWebLib.connection.datatypesToString(this.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(a.dataSource.Tag))),i.push((h.currentEndValue+s)*r),k.push((h.currentBeginValue+s)*r),p.push(o),q.push(a.index),a.clearTagList());n.length&&(this.sendDomainLogicRead(k,i,p,n,q,j.MoveToPrevious),this.moveToType=j.MoveToPrevious),this.update(),this.timeAxisDrawn=!0}},this.MoveToNext=function(){var a,d,e,f,h,i=[],k=[],l=c.length,m=g.length,n=[],o=0,p=[],q=[];if(b.length){for(o=Math.floor(b[0].getRect().width),e=0;l>e;e++)for(h=c[e],d=h.calculateTimeRange(),h.zoomInOutCount>0&&(d=h.currentEndValue-h.currentBeginValue,h.startValueBuffer+=d,h.endValueBuffer+=d),h.currentBeginValue=h.currentEndValue,h.currentEndValue=h.currentBeginValue+d,f=0;m>f;f++)a=g[f],a.timeAxis===h.name&&2===a.dataSource.TagDataSourceType&&void 0!==a.dataSource.Tag&&(n.push(this.screenItem.gfxWebLib.connection.datatypesToString(this.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(a.dataSource.Tag))),i.push((h.currentEndValue+s)*r),k.push((h.currentBeginValue+s)*r),p.push(o),q.push(a.index),a.clearTagList());n.length&&(this.sendDomainLogicRead(k,i,p,n,q,j.MoveToNext),this.moveToType=j.MoveToNext),this.update(),this.timeAxisDrawn=!0}},this.MoveToFirst=function(){var a,d,e,f,h,i=[],k=[],l=c.length,m=g.length,n=[],o=[],p=0,q=[];if(b.length){for(p=Math.floor(b[0].getRect().width),e=0;l>e;e++)for(h=c[e],d=h.calculateTimeRange(),f=0;m>f;f++)a=g[f],a.timeAxis===h.name&&2===a.dataSource.TagDataSourceType&&void 0!==a.dataSource.Tag&&(n.push(this.screenItem.gfxWebLib.connection.datatypesToString(this.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(a.dataSource.Tag))),h.rangeType===PWC.HmiAC.RangeType.PointCount?(i.push(0),o.push(h.measurementPoint)):(i.push(d),o.push(p)),k.push(0),q.push(a.index),a.clearTagList());n.length&&(this.sendDomainLogicRead(k,i,o,n,q,j.MoveToFirst),this.moveToType=j.MoveToFirst),this.timeAxisDrawn=!1}},this.MoveToLast=function(){var a,d,e,f,h,i=[],k=[],l=c.length,m=g.length,n=[],o=[],p=0,q=[];if(b.length){for(p=Math.floor(b[0].getRect().width),d=0;l>d;d++)for(f=c[d],h=f.calculateTimeRange(),e=0;m>e;e++)a=g[e],a.timeAxis===f.name&&2===a.dataSource.TagDataSourceType&&void 0!==a.dataSource.Tag&&(n.push(this.screenItem.gfxWebLib.connection.datatypesToString(this.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(a.dataSource.Tag))),f.rangeType===PWC.HmiAC.RangeType.PointCount?(i.push(0),o.push(f.measurementPoint)):(i.push(h),o.push(p)),k.push(0),q.push(a.index),a.clearTagList());n.length&&(this.sendDomainLogicRead(k,i,o,n,q,j.MoveToLast),this.moveToType=j.MoveToLast),this.timeAxisDrawn=!1}},this.enableScrollbarEvents=function(a){b[0].enableScrollbarEvents(a)},this.setAllXAxesZoom=function(b,c){var d,e,f=a.length;for(d=0;f>d;d++)e=a[d],e.name!==b&&e.setXZoomCount(c)},this.hasVerticalScrollbar=function(){var a,c,d,e,f=b.length;for(this.yAxesScrollbar=!1,a=0;f>a;a++)for(d=b[a].getYAxes(),e=d.length,c=0;e>c;c++)if(d[c].zoomInOutCount>0){this.yAxesScrollbar=!0;break}},this.resetZoom=function(a){var b,e,f,g,h=new PWC.HmiAC.TagList;for(this.oneToOneView=!1,PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.enable(this.screenItem,"OneToOneView",!1),b=d.length,e=0;b>e;e++)if(f=d[e],f.zoomInOutCount>0){if(f.zoomInOutCount=0,f.currentBeginValue=f.startValueBuffer,f.currentEndValue=f.endValueBuffer,f.startValueBuffer2=null,f.endValueBuffer2=null,f.labelText=f.labelTextBuffer,h.tryAdd(f.trendWindow),this.scrollbarMode===PWC.HmiAC.ScrollbarMode.WhenNeccessary)continue;f.visible&&(f.calculateGrid(),f.trendWindowDrawable&&(f.updateTicks(),f.showLabels&&f.updateLabels()))}for(b=c.length,e=0;b>e;e++)if(f=c[e],f.zoomInOutCount>0){if(f.zoomInOutCount=0,f.currentBeginValue=f.startValueBuffer,f.currentEndValue=f.endValueBuffer,h.tryAdd(f.trendWindow),this.scrollbarMode===PWC.HmiAC.ScrollbarMode.WhenNeccessary)continue;f.visible&&(f.calculateGrid(),f.trendWindowDrawable&&(f.updateTicks(),f.showLabels&&f.updateLabels()))}for(e=0;e<h.items.length;e++)g=this.getTrendWindowByName(h.items[e]),f=g.relativeAxis,f.zoomInOutCount>0&&(f.zoomInOutCount=0,f.currentBeginValue=f.startValueBuffer,f.currentEndValue=f.endValueBuffer,this.scrollbarMode!==PWC.HmiAC.ScrollbarMode.WhenNeccessary&&f.visible&&(f.calculateGrid(),f.trendWindowDrawable&&(f.updateTicks(),f.showLabels&&f.updateLabels()))),g.resetZoomCount(),this.scrollbarMode!==PWC.HmiAC.ScrollbarMode.WhenNeccessary&&g.resetTrendWindow();this.scrollbarMode===PWC.HmiAC.ScrollbarMode.WhenNeccessary&&this.redraw(),a||(this.requestHistoricalData(!0),this.rulerControl&&(this.showRuler||this.showStatisticRuler)&&this.calculateRulerData()),h.clear(),h=null},this.resetDrawableTrendWindows=function(a,c,d){var e,f,g=b.length;for(e=0;g>e;e++)f=e===d?c:void 0,b[e].resetTrendWindow(a,f)},this.enableDisableOriginalView=function(){var a,b,e=!1,f=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar;for(a=d.length,b=0;a>b;b++)if(d[b].zoomInOutCount>0){e=!0;break}if(!e)for(a=c.length,b=0;a>b;b++)if(c[b].zoomInOutCount>0){e=!0;break}e&&!this.oneToOneView?(this.oneToOneView=!0,f.enable(this.screenItem,"OneToOneView",!0)):!e&&this.oneToOneView&&(this.oneToOneView=!1,f.enable(this.screenItem,"OneToOneView",!1))},this.sendDomainLogicRead=function(a,b,c,d,e,f){var g=PWC.HmiAC.TrendControlEventID.TrendViewEventID_ReadRawData,h=[],i=[];f||(f=0),h[0]=this.screenItem.gfxWebLib.connection.getEventParamIDs().Value,i[0]=[a,b,c,d,e,f],this.screenItem.gfxWebLib.connection.sendDomainLogicEvent(this.screenItem.rtoid,g,h,i)},this.toolBarButton=function(b,c){var d;switch(c){case"ShowPercentageAxis":for(this.showRelativeAxis=!this.showRelativeAxis,PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar.check(this.screenItem,"ShowPercentageAxis",this.showRelativeAxis),d=0;d<a.length;d++)a[d].relativeAxis.visible=this.showRelativeAxis;this.redraw()}},this.setTrends=function(a){var b,c,d,f;for(e=a,g=[],f=e.length,b=0;b<e.length;b++)c=e[b],d=o.getDrawableTrendWindowByName(c.trendWindow),d&&d.trendWindowDrawn&&c.visibility&&c.currentXAxis&&c.currentYAxis&&g.push(c)},this.setTrendWindows=function(c){var d,e,f;for(a=c,f=a.length,b=[],d=0;f>d;d++)e=a[d],e.visible&&"0"!==e.spacePortion&&(e.index=b.length,b.push(e))},this.setXAxes=function(a){c=a},this.setYAxes=function(a){d=a},this.getPropertyBrowserHandlerName=function(){return"PropertyBrowser"},this.getPreDefTrendColor=function(){var a,b;for(a in h)(h[a]<h[b]||void 0===b)&&(b=a);return b},this.setPreDefTrendColorCount=function(a,b){void 0!==h[a]&&(b?h[a]++:h[a]--)},this.resetPreDefTrendColorCount=function(){var a,b,c=e.length;for(b in h)h[b]=0;for(a=0;c>a;a++)this.setPreDefTrendColorCount(e[a].color,!0)},this.setDrawableTrends=function(){var a,b=e.length,c={};for(g=[],f=[],a=0;b>a;a++)c=e[a],c.currentTrendWindow=o.getDrawableTrendWindowByName(c.trendWindow),c.currentTrendWindow&&c.visibility&&c.currentXAxis&&c.currentYAxis&&(g.push(c),f.push(c))},this.partCreated=function(a,b){var c,d=a.split(".")[0],e=PWC.HmiAC.TrendViewPartType;switch(d){case e.Trends:c=this.getTrendByName(b.Name),c.partId=c.propTrend.partid=b.partid;break;case e.TrendWindows:c=this.getTrendWindowByName(b.Name),c.partId=c.propTrendWindow.partid=b.partid;break;case e.TimeAxes:case e.XAxes:c=this.getXAxisByName(b.Name),c.partId=c.propAxis.partid=b.partid;break;case e.ValueAxes:case e.YAxes:c=this.getYAxisByName(b.Name),c.partId=c.propAxis.partid=b.partid;break;default:return}},this.partDeleted=function(){},this.addNewTrend=function(b,c){var d,f,g,h,i,j;if(!b)return i=a[0].name,p={Name:c,LineColor:m.hexStrToDecColor(this.getPreDefTrendColor()),DataSource:{TagDataSourceType:1,UpdateCycle:"0.2.0.0.0.0"},TimeAxis:y(i),TrendWindow:i,ValueAxis:z(i)},g=new PWC.HmiAC.OnlineTrend,g.initialize(p,o),g;for(h=c,f=h.length,d=0;f>d;d++)e.push(h[d]),q=h[d],o.screenItem.gfxWebLib.connection.sendPartCreate(o.screenItem.rtoid,"Trends",h[d].propTrend);for(this.setDrawableTrends(),j=0;f>j;j++)o.addToDisconnectedSources(h[j].name,h[j].dataSource.Tag)},this.addNewTrendWindow=function(b,c){var d,e,f,g,h;if(!b)return f={Name:c,CoarseGridColor:7758920,FineGridColor:9666651},d=new PWC.HmiAC.TrendWindow,d.init(f,o),d;for(h=c,e=h.length,g=0;e>g;g++)q=h[g],a.push(h[g]),o.screenItem.gfxWebLib.connection.sendPartCreate(o.screenItem.rtoid,"TrendWindows",h[g].propTrendWindow);this.setTrendWindows(a)},this.addNewTimeAxis=function(b,d,e){var f,g,h,i,j,k;if(i=PWC.Lib.Canvas.Converters.convertJSTimeStampToFileTime(e),!b)return h={Name:d,TrendWindow:a[0].name,BeginTime:i,EndTime:i},f=new PWC.HmiAC.TimeAxis,f.init(h,o,o.axisTypeEnum.xAxis),f;for(j=d,g=j.length,k=0;g>k;k++)q=j[k],c.push(j[k]),o.screenItem.gfxWebLib.connection.sendPartCreate(o.screenItem.rtoid,"TimeAxes",j[k].propAxis)},this.addNewValueAxis=function(b,c){var e,f,g,h,i;if(!b)return g={Name:c,TrendWindow:a[0].name},e=new PWC.HmiAC.ValueAxis,e.init(g,o,o.axisTypeEnum.yAxis),e;for(i=c,f=i.length,h=0;f>h;h++)q=i[h],d.push(i[h]),o.screenItem.gfxWebLib.connection.sendPartCreate(o.screenItem.rtoid,"ValueAxes",i[h].propAxis)},this.removeTrend=function(a){var b,c,d;for(c=a.length,b=0;c>b;b++)d=o.getTrendByName(a[b]),e.splice(e.indexOf(d),1),o.screenItem.gfxWebLib.connection.sendPartDelete(o.screenItem.rtoid,"Trends."+d.partId);for(this.setDrawableTrends(),b=0;c>b;b++)o.removeFromDisconnectedSources(a[b])},this.removeTrendWindow=function(b){var c,d,f,g,h,i;for(d=b.length,c=0;d>c;c++){for(f=o.getTrendWindowByName(b[c]),g=e.length,i=0;g>i;i++)h=e[i],h.trendWindow===f.name&&(h.removeXAxis(),h.removeYAxis(),h.removeTrendWindow());a.splice(a.indexOf(f),1),o.screenItem.gfxWebLib.connection.sendPartDelete(o.screenItem.rtoid,"TrendWindows."+f.partId)}this.setTrendWindows(a),this.setDrawableTrends()},this.removeTimeAxis=function(a){var b,d,e;for(d=a.length,b=0;d>b;b++)e=o.getXAxisByName(a[b]),c.splice(c.indexOf(e),1),o.screenItem.gfxWebLib.connection.sendPartDelete(o.screenItem.rtoid,"TimeAxes."+e.partId),o.updateRelatedTrends(o.axisTypeEnum.xAxis,e.name)},this.removeValueAxis=function(a){var b,c,e;for(c=a.length,b=0;c>b;b++)e=o.getYAxisByName(a[b]),d.splice(d.indexOf(e),1),o.screenItem.gfxWebLib.connection.sendPartDelete(o.screenItem.rtoid,"ValueAxes."+e.partId),o.updateRelatedTrends(o.axisTypeEnum.yAxis,e.name)},this.updateRelatedTrends=function(a,b){var c,d=e.length,f={},g=this.axisTypeEnum;for(c=0;d>c;c++)switch(f=e[c],a){case g.xAxis:f.timeAxis===b&&f.removeXAxis();break;case g.yAxis:f.valueAxis===b&&f.removeYAxis()}this.setDrawableTrends()},this.cleanUp=function(){var r,s;for(r=c.length,s=0;r>s;s++)c[s].cleanUp(),c[s]=null;for(r=d.length,s=0;r>s;s++)d[s].cleanUp(),d[s]=null;for(r=a.length,s=0;r>s;s++)a[s].cleanUp(),a[s]=null;for(r=e.length,s=0;r>s;s++)e[s].cleanUp(),e[s]=null;a=b=k=c=i=j=m=n=d=h=e=g=f=l=p=q=t=u=o=null}},PWC.HmiAC.OnlineTrendView.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.OnlineTrendView,PWC.HmiAC.TrendViewBase);var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TrendViewInterfaces=function(a){var b=a;this.subscribe=function(a,c){var d;switch(a){case"RulerView":b.rulerControl=c,d={unSubscribe:function(){b&&(b.rulerControlColumnType=null,b.rulerControl=null)},type:b.controlType,getRulerData:b.getRulerData,getSourceControlDimensions:b.getDimensions.bind(b),isSourceControlRulerEnabled:b.isRulerEnabled.bind(b)},b.resetRulerControlToolbarButtons();break;case"ShowTrendSelection":d={setTrendVisibility:b.setTrendVisibility.bind(b),getTrend:b.getTrend,moveTrendDown:b.moveTrendDown.bind(b),topLevelScreenWindowDiv:b.screenItem.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),textbib:b.screenItem.gfxWebLib.textbib,appDir:b.gfxWebLib.connection.getAppDir()};break;case"TagDialog":b.tagDialogInterface=c,d={tagBrowser:b.tagBrowser,getTagParentDetails:b.getTagPropDetails,topLevelScreenWindowDiv:b.screenItem.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),textbib:b.screenItem.gfxWebLib.textbib,appDir:b.gfxWebLib.connection.getAppDir(),handlerName:b.getPropertyBrowserHandlerName(),gfxWebLib:b.screenItem.gfxWebLib,parentRtoid:b.screenItem.rtoid,domParentId:b.screenItem.domParent.id};break;case"BrowsingView":d={unSubscribe:function(){b.browserControl=null},setSelectedTag:b.tagDialogInterface.setTagData};break;case"LimitValuesDialog":d={topLevelScreenWindowDiv:b.screenItem.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),textbib:b.screenItem.gfxWebLib.textbib,appDir:b.gfxWebLib.connection.getAppDir(),handlerName:b.getPropertyBrowserHandlerName()};break;case"TimeRangeSelection":d={timeRangePropsData:b.getTimeRangePropData(),setTimeRangePropsData:b.setTimeRangePropsData,topLevelScreenWindowDiv:b.screenItem.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),textbib:b.screenItem.gfxWebLib.textbib,appDir:b.screenItem.gfxWebLib.connection.getAppDir(),type:b.controlType,reload:b.reload}}return d},this.cleanUp=function(){b=null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.CustomDateFormat=PWC.HmiAC.CustomDateFormat||{},PWC.HmiAC.CustomDateFormat.prototype={getCustomTimeFormat:function(a){return a===PWC.HmiAC.TimeBase.UTC?function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return d=((c=a.getUTCFullYear())+"").slice(-2),g=(h=a.getUTCMonth()+1)<10?"0"+h:h,f=(e=["January","February","March","April","May","June","July","August","September","October","November","December"][h-1]).substring(0,3),k=(l=a.getUTCDate())<10?"0"+l:l,j=(i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getUTCDay()]).substring(0,3),m=l>=10&&20>=l?"th":1===(n=l%10)?"st":2===n?"nd":3===n?"rd":"th",b[1]&&(b[1]=b[1].replace("YYYY",c).replace("yyyy",c).replace("YY",d).replace("yy",d).replace("MMMM",e).replace("MMM",f).replace("MM",g).replace("M",h).replace("DDDD",i).replace("dddd",i).replace("DDD",j).replace("ddd",j).replace("DD",k).replace("dd",k).replace("d",l).replace("th",m)),q=o=a.getUTCHours(),-1!==b[0].indexOf("tt")&&(0===q&&(q=24),q>12&&(q-=12)),p=10>q?"0"+q:q,u=(t=12>o?"am":"pm").toUpperCase(),r=(r=a.getUTCMinutes())<10?"0"+r:r,s=(s=a.getUTCSeconds())<10?"0"+s:s,v=a.getUTCMilliseconds(),v=10>v?"0"+v:v,v=100>v?"0"+v:v,b[0]&&(b[0]=b[0].replace("hhh",o).replace("HH",p).replace("hh",p).replace("h",q).replace("mm",r).replace("ss",s).replace("ms",v).replace("tt",u)),b
}:function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return d=((c=a.getFullYear())+"").slice(-2),g=(h=a.getMonth()+1)<10?"0"+h:h,f=(e=["January","February","March","April","May","June","July","August","September","October","November","December"][h-1]).substring(0,3),k=(l=a.getDate())<10?"0"+l:l,j=(i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()]).substring(0,3),m=l>=10&&20>=l?"th":1===(n=l%10)?"st":2===n?"nd":3===n?"rd":"th",b[1]&&(b[1]=b[1].replace("YYYY",c).replace("yyyy",c).replace("YY",d).replace("yy",d).replace("MMMM",e).replace("MMM",f).replace("MM",g).replace("M",h).replace("DDDD",i).replace("dddd",i).replace("DDD",j).replace("ddd",j).replace("DD",k).replace("dd",k).replace("d",l).replace("th",m)),q=o=a.getHours(),-1!==b[0].indexOf("tt")&&(0===q&&(q=24),q>12&&(q-=12)),p=10>q?"0"+q:q,u=(t=12>o?"am":"pm").toUpperCase(),r=(r=a.getMinutes())<10?"0"+r:r,s=(s=a.getSeconds())<10?"0"+s:s,v=a.getMilliseconds(),v=10>v?"0"+v:v,v=100>v?"0"+v:v,b[0]&&(b[0]=b[0].replace("hhh",o).replace("HH",p).replace("hh",p).replace("h",q).replace("mm",r).replace("ss",s).replace("ms",v).replace("tt",u)),b}}},Date.prototype.getCorrectTime=function(a,b){if(b===PWC.HmiAC.TimeBase.LocalTimeZone||b===PWC.HmiAC.TimeBase.ProjectSetting){var c=new Date(a);a+=6e4*c.getTimezoneOffset()}return a},PWC.HmiAC.CustomDateFormat.prototype.validateDate=function(a){var b,c,d=a.date,e=a.time;return d.valueAsNumber?b=d.valueAsNumber+e.valueAsNumber:(c=Date.parse(d.replace(/-/g,"/")),b=new Date(d.replace(/-/g,"/")+" "+e),isNaN(c)||b.getMonth()+1!==parseInt(d[5]+d[6],10)||b.getDate()!==parseInt(d[8]+d[9],10)?b=!1:(b=b.getTime(),b-=6e4*new Date(b).getTimezoneOffset())),b};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.Alignment={},PWC.HmiAC.AlignmentForLeftAndRight={Left:"Left",Right:"Right",Top:"Top",Bottom:"Bottom"},PWC.HmiAC.AlignmentForTopAndBottom={Left:"Bottom",Right:"Top",Top:"Right",Bottom:"Left"},PWC.HmiAC.AxisType={},PWC.HmiAC.AxisTypeForLeftAndRight={uninitialized:0,xAxis:1,yAxis:2},PWC.HmiAC.AxisTypeForTopAndBottom={uninitialized:0,xAxis:2,yAxis:1},PWC.HmiAC.TextOrientation={FromRight:0,FromLeft:1,FromTop:2,FromBottom:3},PWC.HmiAC.MoveToType={NoMove:0,MoveToFirst:1,MoveToPrevious:2,MoveToNext:3,MoveToLast:4,MoveToSpecifiedTime:5,OnUnpause:6},PWC.HmiAC.TrendObjectType={Function:"Function",Online:"Online"},PWC.HmiAC.ScrollbarMode={No:0,WhenNeccessary:1,Always:2},PWC.HmiAC.LineStyle={Solid:0,Dashed:1,Dotted:2,DotDash:3,DashDotDot:4},PWC.HmiAC.TrendStyle={None:0,Linear:1,Step:2},PWC.HmiAC.PointStyle={NoPoint:0,Dot:1,Square:2,Circle:3},PWC.HmiAC.ElementId={TrendView:96,TrendWindow:97,XAxis:98,YAxis:99,Trend:104,ToolBar:105,StatusBar:106,Font:107},PWC.HmiAC.PropertyType={checkbox:1,combobox:2,text:3,button:4,color:5,dateTime:6,readonly:7},PWC.HmiAC.TrendViewPartType={Trends:"Trends",TrendWindows:"TrendWindows",TimeAxes:"TimeAxes",XAxes:"XAxes",ValueAxes:"ValueAxes",YAxes:"YAxes"},PWC.HmiAC.TrendViewPropId={GeneralTab:0,TrendTab:1,TrendWindowTab:2,TimeAxesTab:3,ValueAxesTab:4,FontTab:5,ToolBarTab:6,StatusBarTab:7,OnlineConfiguration:8,Export:9,BorderWidth:10,LineWidth:11,LineColor:12,BorderColor:13,Background:14,TimeBase:15,Orientation:16,ScrollbarMode:17,Window:18,WindowTitle:19,Text:20,Movable:21,Closable:22,Sizable:23,Style:24,CurrentPrintJob:25,Effects:26,Properties:27,ConnectTrendWindows:28,OpenPicture:29,Startingupdate:30,ShowRuler:31,LoadDataImmediately:32,DataConnection:33,XAxes:34,YAxes:35,Height:36,Width:37,Left:38,Top:39,Online:40,UseTrendNameAsLabel:41,Visible:42,ShowStatisticRuler:43},PWC.HmiAC.TrendWindowPropId={Name:0,Visible:1,RulerLayer:2,RulerStyle:3,RulerWidth:4,RulerColor:5,HorizontalGrid:6,VerticalGrid:7,CoarseGrid:8,FineGrid:9,CoarseGridColor:10,FineGridColor:11,GridInTrendColor:12,ForegroundTrendGrid:13,BackColor:14,UseBackColor:15,SpacePortion:16,TrendWindow:17,Ruler:18,RulerForStatisticsArea:19,StatisticRulerStyle:20,GridLines:21,Color:22,Weight:23,StatisticRulerColor:24,StatisticRulerWidth:25,Index:26},PWC.HmiAC.AxisPropId={Name:0,DisplayName:1,TrendWindow:2,Alignment:3,Visible:4,Color:5,InTrendColor:6,RangeType:7,BeginTime:8,EndTime:9,PointCount:10,Actualize:11,TimeFormat:12,DateFormat:13,ShowDate:14,BeginValue:15,ShowAllLabels:16,ShowLabels:17,EndValue:18,AutoRange:19,Index:20,DecimalPrecision:21,AutoDecimalPrecision:22,ScalingType:23,ExponentialFormat:24,ShowUserScaling:25,UserScaling:26,TimeRangeBase:27,TimeRangeFactor:28,FineGrid:29,CoarseGrid:30,Online:31,TimeRange:32,ObjectName:33,Use:34,Show:35,ExponentialNotation:36,Scaling:37,Effects:38,Refresh:39,StartTimeMsg:40,MeasurementPointMsg:41,TimeRangeMsg:42,ValueRange:43,StartAndEndValueMsg:44,GridProperties:45,AreaNames:47,LeftToRightAlign:48,TopToBottomAlign:49,NegativeMsg:50,LogarithmMsgCaption:51,InValidNumberMsg:52,LogarithmicValidNumberRangeMsg:53,LogarithmicInvalidNegNumberMsg:54,LinearMsgCaption:55,InValidNumberCaption:56,NegativeLogarithmMsgCaption:57,NegativeLogarithmicValidNumberRangeMsg:58,NegativeLogarithmicInvalidNegNumberMsg:59},PWC.HmiAC.TrendPropId={Name:0,TrendWindow:1,XAxis:2,YAxis:3,Visible:4,LineColor:5,LineStyle:6,LineWidth:7,FillStyle:8,PointStyle:9,Mode:10,PointWidth:11,DisplayName:12,ExtendedColorSet:13,PointColor:14,FillColor:15,TagNameX:16,TagNameY:17,RangeType:18,TimeRangeFactor:19,TimeRangeBase:20,BeginTime:21,EndTime:22,PointCount:23,Actualize:24,TimeAxis:25,ValueAxis:26,TagName:27,TagDataSourceType:28,DataConnection:29,Effects:30,ObjectName:31,Refresh:32,TimeRange:33,Setting:34,StartTimeMsg:35,MeasurementPointMsg:36,TimeRangeMsg:37,Index:38,CycleTime:39,CycleTimeX:40,CycleTimeY:41,TagNameButton:42,TagXNameButton:43,TagYNameButton:44,LimitValuesButton:45,LowLimit:46,LowLimitValue:47,LowLimitColor:48,HighLimit:49,HighLimitValue:50,HighLimitColor:51,UncertainQuality:52,UncertainQualityColor:53},PWC.HmiAC.TrendPropId.DataSource={Tag:PWC.HmiAC.TrendPropId.TagName,UpdateCycle:PWC.HmiAC.TrendPropId.CycleTime,TagDataSourceType:PWC.HmiAC.TrendPropId.TagDataSourceType},PWC.HmiAC.TrendPropId.DataSourceX={Tag:PWC.HmiAC.TrendPropId.TagNameX,UpdateCycle:PWC.HmiAC.TrendPropId.CycleTimeX,TagDataSourceType:PWC.HmiAC.TrendPropId.TagDataSourceType},PWC.HmiAC.TrendPropId.DataSourceY={Tag:PWC.HmiAC.TrendPropId.TagNameY,UpdateCycle:PWC.HmiAC.TrendPropId.CycleTimeY,TagDataSourceType:PWC.HmiAC.TrendPropId.TagDataSourceType},PWC.HmiAC.DateFormat={Automatic:"Automatic",dd_MM_yy_Dot:"dd.MM.yy",dd_MM_yyyy_Dot:"dd.MM.yyyy",dd_MM_yy_Slash:"dd/MM/yy",dd_MM_yyyy_Slash:"dd/MM/yyyy"},PWC.HmiAC.TimeFormat={Automatic:"Automatic",HH_mm_ss:"HH:mm:ss",HH_mm_ss_ms:"HH:mm:ss.ms",hh_mm_ss__tt:"hh:mm:ss tt",hh_mm_ss_ms__tt:"hh:mm:ss.ms tt"},PWC.HmiAC.RangeType={TimeRange:0,FromBeginToEnd:1,PointCount:2},PWC.HmiAC.RangeBase={"500 ms":1,Sec:2,Min:3,Hour:4,Day:5},PWC.HmiAC.TimeBase={LocalTimeZone:0,UTC:1,ProjectSetting:2},PWC.HmiAC.TrendControlEventID={Unknown:0,TrendViewEventID_ReadRawData:1,TrendEventID_UpdateCycleChange:3,Write:5,CreateOperatorMessage:6},PWC.HmiAC.ZoomAndMoveButtons={ZoomMove:"moveTrendArea",ZoomInOut:"zoomInOut",ZoomInOutX:"zoomInOutX",ZoomInOutY:"zoomInOutY",ZoomArea:"zoomArea"},PWC.HmiAC.MarkerPositionType={Normal:0,LowLimit:1,HighLimit:2,UncertainQuality:3},PWC.HmiAC.FontType={Aharoni:0,AndalusAngsana:1,"Angsana New":2,AparajitaBatang:3,Arial:4,"Arial Black":5,"Arial Narrow":6,"Arial Roundede MT Bold":7,Batang:8,BatangChe:9,"Book Antiqua":10,"Bookman Old Style":11,"Browallia New":12,BrowalliaUPC:13,"Bradley Hand ITC TT":14,Calibri:15,"Calibri Light":16,Candara:17,Cambria:18,"Cambria Math":19,Charcoal:20,Consolas:21,Constantia:22,Corbel:23,CordiaUPC:24,"Century Gothic":25,"Comic Sans MS":26,"Courier New":27,cursive:28,Courier:29,David:30,Dotum:31,Ebrima:32,FangSong:33,"Franklin Gothic Medium":34,FrankRuehl:35,Gabriola:36,Garamond:37,Gadget:38,Gautami:39,Georgia:40,Geneva:41,Gungsuh:42,GungsuhChe:43,Gulim:44,haettenschweiler:45,Impact:46,IrisUPC:47,JasmineUPC:48,Kalinga:49,Kartika:50,Kokila:51,Latha:52,"Levenim MT":53,Leelawadee:54,LilyUPC:55,"Lucida Console":56,"Lucida Bright":57,"lucida calligraphy":58,"Lucida Sans":59,"Lucida Sans Typewriter":60,"Lucida Sans Unicode":61,Mangal:62,Marlett:63,Meiryo:64,"Miriam Fixed":65,Miriam:66,"Microsoft Himalaya":67,"Microsoft JhengHei":68,"Microsoft Tai Le":69,"Microsoft PhagsPa":70,"MS Sans Serif":71,Mistral:72,MoolBoran:73,"MS Mincho":74,Monaco:75,"MV Boli":76,NSimSun:77,Narkisim:78,Nyala:79,Onyx:80,"Palatino Linotype":81,Papyrus:82,Perpetua:83,"perpetua titling mt":84,"Plantagenet Cherokee":85,Playbill:86,"PMingLiU-ExtB":87,PMingLiu:88,Raavi:89,Rod:90,Rockwell:91,"Rockwell Extra Bold":92,"Segoe Print":93,"Segoe Script":94,"Segoe UI":95,Shruti:96,"Shonar Bangla":97,SimHei:98,Stencil:99,Tahoma:100,"Times New Roman":101,"Traditional Arabic":102,"Trebuchet MS":103,Tunga:104,Utsaah:105,Vani:106,Verdana:107,Vrinda:108,"Wide Latin":109},PWC.HmiAC.FontSize={8:0,9:1,10:2,11:3,12:4,14:5,16:6,18:7,20:8,22:9,24:10,26:11,28:12,36:13,48:14,72:15},PWC.HmiAC.DataSourceType={None:0,OnlineTags:1,ArchiveTags:2,UserArchive:3},PWC.HmiAC.PostPropertyUpdate={Redraw:!1,CreateDrawableCollection:!1,Update:!1},PWC.HmiAC.FunctionKeyCodes={112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",0:"None"},PWC.HmiAC.RulerStyle={Simple:0,Graphic:1},PWC.HmiAC.RulerControlColumnType={Ruler:0,StatisticArea:1,StatisticResult:2},PWC.HmiAC.RulerControlColumns={None:0,Name:1,Index:2,Label:3,Show:4,TagNameY:5,TagNameX:6,ValueY:7,ValueX:8,ValueY_LL:9,TimeStamp_LL:10,ValueY_UL:11,TimeStamp_UL:12,Minimum:13,MinimumTimeStamp:14,Maximum:15,MaximumTimeStamp:16,Average:17,StandardDeviation:18,Integral:19,WeightedAverage:20,Duration:21,NumberOfValues:22,AreaName:23,AreaName_LL:24,AreaName_HL:25,LabelX:26,LabelY:27},PWC.HmiAC.CycleTime={"Upon Change":0,"250 ms":1,"500 ms":2,"1 s":3,"2 s":4,"5 s":5,"10 s":6,"1 min":7,"5 min":8,"10 min":9,"1 hr":10},PWC.HmiAC.ScalingType={Linear:0,Logarithmic:1,NegativeLogarithmic:2},PWC.HmiAC.TrendLimitModes={LowLimit:0,HighLimit:1};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TagList=function(){var a=[],b=function(a){this.items[this.items.length]=a},c=function(a){var b;return-1===(b=this.findIndexByName(a))&&(this.items[this.items.length]=a),b},d=function(a,b){this.items.length>0?this.items[b]=a:this.items[0]=a},e=function(a,b){return a===b},f=function(a){var b=-1,c=0;for(c=0;c<this.items.length;c++)if(this.isEqual(this.items[c],a)){b=c;break}return b},g=function(a){var b=-1,c=this.items.length,d=0;for(d=0;c>d;d++)if(this.isEqual(this.items[d].timeStamp,a)){b=d;break}return b},h=function(a,b,c){var d,e,f,g,h,i,j="",k=this.items,l=k.length;if(l>0&&a>=k[0].timeStamp&&a<=k[l-1].timeStamp){for(d=0;l>d;d++){if(e=k[d],this.isEqual(e.timeStamp,a)||b<=e.xTagPosition&&e.xTagPosition<=c){j=e.yTagValue;break}if(a<e.timeStamp)break}""===j&&(i=e.timeStamp,h=e.yTagValue,f=k[d-1].timeStamp,g=k[d-1].yTagValue,j=g+(a-f)*(h-g)/(i-f)+" i.")}return j},i=function(a,b,c){var d,e=this.items,f=e[b],g=e[c],h=f.timeStamp,i=f.yTagValue,j=g.yTagValue,k=g.timeStamp;return d=j>i?(a-i)/(j-i)*(k-h)+h:i>j?k-(a-j)/(i-j)*(k-h):i},j=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p={},q=this.items,r=q.length,s=0,t=0,u=0;for(c=0;r>c;c++)if(a<=q[c].timeStamp){f=c;break}if(void 0===f||b<q[f].timeStamp||a===b)p.integral="",p.duration="",p.weightedAverage="",p.numberOfValues=0,p.average="",p.standardDeviation="",p.minimum="",p.minimumTimeStamp="",p.maximum="",p.maximumTimeStamp="",p.statisticCalcSuccess=!1;else{for(c=f;r>c&&!(b<q[c].timeStamp);c++);for(g=c,e=q[f],i=h=f,s=e.yTagValue,t+=Math.pow(s,2),c=f+1;g>c;c++)d=q[c],l=d.yTagValue,s+=l,t+=Math.pow(l,2),l<q[i].yTagValue&&(i=c),l>q[h].yTagValue&&(h=c),m=d.timeStamp-e.timeStamp,l>0&&e.yTagValue>0?(l>e.yTagValue?(n=l,o=n-e.yTagValue):(n=e.yTagValue,o=n-l),u+=m*n-.5*m*o):0>l&&e.yTagValue<0?(l<e.yTagValue?(n=l,o=n-e.yTagValue):(n=e.yTagValue,o=n-l),u+=m*n-.5*m*o):u+=.5*(m/2)*l+.5*(m/2)*e.yTagValue,e=d,d=null;p.integral=u/1e3,p.duration=(b-a)/1e3,p.weightedAverage=p.integral/p.duration,p.numberOfValues=k=g-f,p.average=j=s/k,p.standardDeviation=k>1?Math.sqrt((t-Math.pow(s,2)/k)/(k-1)):0,p.minimum=q[i].yTagValue,p.minimumTimeStamp=q[i].timeStamp,p.maximum=q[h].yTagValue,p.maximumTimeStamp=q[h].timeStamp,p.statisticCalcSuccess=!0}return p},k=function(a){var b,c=[];for(b=0;b<this.items.length;b++)if(!(this.items[b].timeStamp<a)){c=this.items.splice(this.isEqual(this.items[b].timeStamp,a)?b+1:b);break}return c},l=function(a){var b;for(b=0;b<this.items.length&&this.items[b].timeStamp<a;b++);return this.items.splice(0,b)},m=function(a){var b;a>-1&&(b=this.items.splice(0,a),b=null)},n=function(a){var b;a>-1&&(b=this.items.splice(a,1),b=null)},o=function(a){this.items.unshift(a)},p=function(){this.items=[]};return{items:a,add:b,tryAdd:c,update:d,clear:p,isEqual:e,findIndexByName:f,findIndexByTimeStamp:g,removeAfterTimeStamp:k,removeBeforeTimeStamp:l,removeByIndex:n,removeItems:m,addToBeginning:o,getValueFromTimeStamp:h,getTimeStampFromValue:i,getStatistics:j}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.Point=function(){this.timeStamp=null,this.xTagPosition=null,this.yTagPosition=null,this.xTagValue=null,this.yTagValue=null,this.qualityCode=null};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertySet=function(a){this.TrendViewProp={GeneralTab:a.getText("TBID_TrendPB_General_Tab"),TrendTab:a.getText("TBID_TrendPB_Trend_Tab"),TrendWindowTab:a.getText("TBID_TrendPB_TrendWindow_Tab"),TimeAxesTab:a.getText("TBID_TrendPB_TimeAxes_Tab"),ValueAxesTab:a.getText("TBID_TrendPB_ValueAxes_Tab"),FontTab:a.getText("TBID_TrendPB_Font_Tab"),ToolBarTab:a.getText("TBID_HmiWindowPB_Toolbar_Tab"),StatusBarTab:a.getText("TBID_HmiWindowPB_Statusbar_Tab"),OnlineConfiguration:a.getText("TBID_TrendPB_OnlineConfiguration_Tab"),Export:a.getText("TBID_TrendPB_Export_Tab"),BorderWidth:a.getText("TBID_TrendPB_General_Weight"),LineWidth:a.getText("TBID_TrendPB_General_Weight"),Windowseparaterlines:a.getText("TBID_TrendPB_General_WindowSeparaterLines"),Border:a.getText("TBID_TrendPB_General_Border"),Background:a.getText("TBID_TrendPB_General_Background"),TimeBase:a.getText("TBID_TrendPB_General_Timebase"),TextOrientation:a.getText("TBID_TrendPB_General_TextOrientation"),ScrollbarMode:a.getText("TBID_TrendPB_General_Scrollbar"),Window:a.getText("TBID_TrendPB_General_Window"),WindowTitle:a.getText("TBID_TrendPB_General_Windowtitle"),Text:a.getText("TBID_TrendPB_General_Text"),Movable:a.getText("TBID_TrendPB_General_Movable"),Closable:a.getText("TBID_TrendPB_General_Closable"),Sizable:a.getText("TBID_TrendPB_General_Sizable"),Style:a.getText("TBID_TrendPB_General_Style"),CurrentPrintJob:a.getText("TBID_TrendPB_General_ViewCurrentPrintJob"),Effects:a.getText("TBID_TrendPB_General_Effects"),Properties:a.getText("TBID_TrendPB_General_Properties"),ConnectTrendWindow:a.getText("TBID_TrendPB_General_ConnectTrendWindow"),OpenPicture:a.getText("TBID_TrendPB_General_OpenPicture"),Startingupdate:a.getText("TBID_TrendPB_General_StartingUpdate"),ShowRuler:a.getText("TBID_TrendPB_General_Showruler"),LoadDataFromArchive:a.getText("TBID_TrendPB_General_LoadDataFromArchive"),DataConnection:a.getText("TBID_TrendPB_DataConnection_Tab"),XAxes:a.getText("TBID_TrendPB_XAxes_Tab"),YAxes:a.getText("TBID_TrendPB_YAxes_Tab"),UseTrendNameAsLabel:"Use trend name as label"},this.TrendWindowProp={Name:a.getText("TBID_TrendPB_TrendWindow_ObjectName"),ForegroundTrendGrid:a.getText("TBID_TrendPB_TrendWindow_OnlyForForeGroundTrend"),HorizontalGrid:a.getText("TBID_TrendPB_TrendWindow_ForValuesAxes"),VerticalGrid:a.getText("TBID_TrendPB_TrendWindow_ForTimeAxes"),Visible:a.getText("TBID_TrendPB_TrendWindow_Visible"),SpacePortion:a.getText("TBID_TrendPB_TrendWindow_ProportionalArea"),CoarseGrid:a.getText("TBID_TrendPB_TrendWindow_MainGridLine"),FineGrid:a.getText("TBID_TrendPB_TrendWindow_AuxiliaryGridline"),CoarseGridColor:a.getText("TBID_TrendPB_TrendWindow_MainGridColor"),FineGridColor:a.getText("TBID_TrendPB_TrendWindow_AuxiliaryGrid_Color"),BackColor:a.getText("TBID_TrendPB_TrendWindow_BackColor"),UseBackColor:a.getText("TBID_TrendPB_TrendWindow_UseTrendColor"),TrendWindow:a.getText("TBID_TrendPB_TrendWindow_TrendWindow"),RulerLayer:a.getText("TBID_TrendPB_TrendWindow_RulerLayer"),Ruler:a.getText("TBID_TrendPB_TrendWindow_Ruler"),RulerForStatisticsArea:a.getText("TBID_TrendPB_TrendWindow_RulerForStatisticsArea"),Effects:a.getText("TBID_TrendPB_TrendWindow_Effects"),GridLines:a.getText("TBID_TrendPB_TrendWindow_GridLines"),Color:a.getText("TBID_TrendPB_TrendWindow_Color"),Weight:a.getText("TBID_TrendPB_TrendWindow_Weight"),YGrid:a.getText("TBID_TrendPB_TrendWindow_FunctionYAxes"),XGrid:a.getText("TBID_TrendPB_TrendWindow_FunctionXAxes")},this.YAxisProp={Name:a.getText("TBID_TrendPB_ValueAxes_ValueAxes"),TrendWindow:a.getText("TBID_TrendPB_ValueAxes_Trendwindow"),Align:a.getText("TBID_TrendPB_ValueAxes_Alignment"),Visible:"Visible",Color:a.getText("TBID_TrendPB_ValueAxes_Color"),InTrendColor:a.getText("TBID_TrendPB_ValueAxes_Usetrendcolor"),ShowAllLabels:a.getText("TBID_TrendPB_ValueAxes_ShowAllLabels"),ShowLabels:a.getText("TBID_TrendPB_ValueAxes_ShowLabels"),AutoRange:a.getText("TBID_TrendPB_ValueAxes_Automatic"),Precisions:a.getText("TBID_TrendPB_ValueAxes_Decimalplaces"),AutoPrecisions:a.getText("TBID_TrendPB_ValueAxes_Automatic"),Index:"Index",BeginValue:"BeginValue",EndValue:"EndValue",FineGrid:a.getText("TBID_TrendPB_ValueAxes_FineGrid"),CoarseGrid:a.getText("TBID_TrendPB_ValueAxes_CoarseGrid"),Label:"Label",Use:a.getText("TBID_TrendPB_ValueAxes_Use"),Show:a.getText("TBID_TrendPB_ValueAxes_Show"),ExponentialNotation:a.getText("TBID_TrendPB_ValueAxes_Exponentialnotation"),ObjectName:a.getText("TBID_TrendPB_TimeAxes_ObjectName"),Scaling:a.getText("TBID_TrendPB_ValueAxes_Scaling"),ValueRange:a.getText("TBID_TrendPB_ValueAxes_ValueRange"),StartAndEndValueMsg:a.getText("TBID_TrendPB_ValueAxes_StartAndEndValueMsg"),Effects:a.getText("TBID_TrendPB_ValueAxes_Effects"),GridProperties:a.getText("TBID_TrendPB_ValueAxes_GridProperties"),UserScaling:a.getText("TBID_TrendPB_ValueAxes_UserScaling"),AreaNames:a.getText("TBID_TrendPB_ValueAxes_AreaNames"),FunctionTrendXAxes:a.getText("TBID_TrendPB_ValueAxes_FunctionTrendXAxes"),FunctionTrendYAxes:a.getText("TBID_TrendPB_ValueAxes_FunctionTrendYAxes"),NegativeMsg:a.getText("TBID_TrendPB_ValueAxes_NegativeMsg"),LogarithmMsgCaption:a.getText("TBID_TrendPB_ValueAxes_LogarithmMsgCaption"),InValidNumberMsg:a.getText("TBID_TrendPB_ValueAxes_InvalidNumberMsg"),LogarithmicValidNumberRangeMsg:a.getText("TBID_TrendPB_ValueAxes_LogarithmicValidNumberRangeMsg"),LogarithmicInvalidNegNumberMsg:a.getText("TBID_TrendPB_ValueAxes_LogarithmicInvalidNegNumberMsg"),LinearMsgCaption:a.getText("TBID_TrendPB_ValueAxes_LinearMsgCaption"),InValidNumberCaption:a.getText("TBID_TrendPB_ValueAxes_InvalidNumberCaption"),NegativeLogarithmMsgCaption:"Value range - negated logarthmic",NegativeLogarithmicValidNumberRangeMsg:"Enter values only between -1e-307 and -1e+307.",NegativeLogarithmicInvalidNegNumberMsg:"Positive values cannot be shown on a negated logarithmic scale. "},this.XAxisProp={Name:a.getText("TBID_TrendPB_TimeAxes_TimeAxes"),FunctionTrendValueAxisName:a.getText("TBID_TrendPB_TimeAxes_TimeAxes_FunctionValueAxis"),TrendWindow:a.getText("TBID_TrendPB_TimeAxes_Trendwindow"),Align:a.getText("TBID_TrendPB_TimeAxes_Alignment"),Visible:"Visible",Color:a.getText("TBID_TrendPB_TimeAxes_Color"),InTrendColor:a.getText("TBID_TrendPB_TimeAxes_UseTrendColor"),RangeType:a.getText("TBID_TrendPB_TimeAxes_Setting"),BeginTimeUTC:a.getText("TBID_TrendPB_TimeAxes_StartTime"),EndTimeUTC:a.getText("TBID_TrendPB_TimeAxes_EndTime"),ShowAllLabels:"ShowAllLabels",ShowLabels:"ShowLabels",AutoRange:"AutoRange",Precisions:"Precisions",AutoPrecisions:"AutoPrecisions",Index:"Index",MeasurePoints:a.getText("TBID_TrendPB_TimeAxes_MeasurePoints"),TimeFormat:a.getText("TBID_TrendPB_TimeAxes_TimeFormat"),DateFormat:a.getText("TBID_TrendPB_TimeAxes_DateFormat"),ShowDate:a.getText("TBID_TrendPB_TimeAxes_ShowDate"),RangeBase:"RangeBase",RangeFactor:"RangeFactor",BeginValue:"BeginValue",EndValue:"EndValue",FineGrid:"FineGrid",CoarseGrid:"CoarseGrid",Online:"Online",BeginDate:"BeginDate",EndDate:"EndDate",Label:a.getText("TBID_TrendPB_TimeAxes_Label"),TimeRange:a.getText("TBID_TrendPB_TimeAxes_Timerange"),ObjectName:a.getText("TBID_TrendPB_TimeAxes_ObjectName"),Effects:a.getText("TBID_TrendPB_TimeAxes_Effects"),Refresh:a.getText("TBID_TrendPB_TimeAxes_Refresh"),StartTimeMsg:a.getText("TBID_TrendPB_TimeAxes_StartTimeMsg"),MeasurementPointMsg:a.getText("TBID_TrendPB_TimeAxes_MeasurementPointMsg"),TimeRangeMsg:a.getText("TBID_TrendPB_TimeAxes_TimeRangeMsg")},this.TrendProp={Name:a.getText("TBID_TrendPB_Trend_TrendName"),ObjectName:a.getText("TBID_TrendPB_Trend_ObjectName"),TrendWindow:a.getText("TBID_TrendPB_Trend_TrendWindow"),XAxis:a.getText("TBID_TrendPB_Trend_TimeAxis"),YAxis:a.getText("TBID_TrendPB_Trend_ValueAxis"),Visible:a.getText("TBID_TrendPB_Trend_Visible"),Color:a.getText("TBID_TrendPB_Trend_TrendColor"),LineStyle:a.getText("TBID_TrendPB_Trend_LineStyle"),LineWidth:a.getText("TBID_TrendPB_Trend_LineWeight"),Fill:a.getText("TBID_TrendPB_Trend_Filled"),PointStyle:a.getText("TBID_TrendPB_Trend_DotType"),TrendStyle:a.getText("TBID_TrendPB_Trend_TrendType"),PointWidth:a.getText("TBID_TrendPB_Trend_DotWidth"),Label:a.getText("TBID_TrendPB_Trend_Lable"),ExtendedColorSet:a.getText("TBID_TrendPB_Trend_Extended"),PointColor:a.getText("TBID_TrendPB_Trend_DotColor"),FillColor:a.getText("TBID_TrendPB_Trend_FillColor"),TagNameX:a.getText("TBID_TrendPB_Trend_TagNameX"),TagNameY:a.getText("TBID_TrendPB_Trend_TagNameY"),RangeType:"RangeType",TimeRangeFactor:"TimeRangeFactor",TimeRangeBase:"TimeRangeBase",BeginTimeUTC:a.getText("TBID_TrendPB_Trend_StartTime"),EndTimeUTC:a.getText("TBID_TrendPB_Trend_EndTime"),MeasurePoints:a.getText("TBID_TrendPB_TimeAxes_MeasurePoints"),Actualize:"Actualize",TimeAxis:"TimeAxis",ValueAxis:"ValueAxis",DataSource:a.getText("TBID_TrendPB_Trend_DataSource"),TagName:a.getText("TBID_TrendPB_Trend_TagName"),DataConnection:a.getText("TBID_TrendPB_Trend_DataConnection"),Effects:a.getText("TBID_TrendPB_Trend_Effects"),Refresh:a.getText("TBID_TrendPB_Trend_Refresh"),TimeRange:a.getText("TBID_TrendPB_Trend_TimeRange"),Setting:a.getText("TBID_TrendPB_Trend_Setting"),StartTimeMsg:a.getText("TBID_TrendPB_Trend_StartTimeMsg"),MeasurementPointMsg:a.getText("TBID_TrendPB_Trend_MeasurementPointMsg"),TimeRangeMsg:a.getText("TBID_TrendPB_Trend_TimeRangeMsg"),TagButtonValue:a.getText("TBID_TrendPB_Trend_TagButtonValue"),LimitValuesButtonValue:a.getText("TBID_TrendPB_Trend_LimitValuesButtonValue")},this.FontProp={FontName:a.getText("TBID_TrendPB_Font_FontName"),FontArray:"FontArray",FontSize:a.getText("TBID_TrendPB_Font_Fontsize"),FontBold:a.getText("TBID_TrendPB_Font_FontBold"),FontItalic:a.getText("TBID_TrendPB_Font_FontItalic"),FontStrikeOut:a.getText("TBID_TrendPB_Font_FontStrikeThrough"),FontUnderline:a.getText("TBID_TrendPB_Font_FontUnderline"),FontProperties:a.getText("TBID_TrendPB_Font_FontProperties"),Effects:a.getText("TBID_TrendPB_Font_Effects"),SampleText:a.getText("TBID_TrendPB_Font_FontSampletext")},this.ButtonValueProps={OK:"OK",Cancel:"Cancel",Apply:"Apply",New:"New",Remove:"Remove",Up:"Up",Down:"Down",Close:a.getText("TBID_TrendPB_General_GeneralCloseButton")}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.RECT=function(){"use strict";this.height=0,this.width=0,this.left=0,this.top=0,this.Inflate=function(a){0>a?(a*=-1,this.top-=a,this.left-=a,this.width+=2*a,this.height+=2*a):(this.top+=a/2,this.left+=a/2,this.width-=a,this.height-=a)},this.isEmpty=function(){return this.width<=1||this.height<=1}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.svgShape=function(){var a=function(){},b="http://www.w3.org/2000/svg",c=function(a,c){var d,e,f=document.createElementNS(b,a);if(c)for(d in c)if(d)switch(e=c[d],d){case"rect":f.setAttributeNS(null,"x",e.left),f.setAttributeNS(null,"y",e.top),f.setAttributeNS(null,"width",e.width),f.setAttributeNS(null,"height",e.height);break;case"displayText":var g=document.createTextNode(e);f.appendChild(g);break;case"appendTo":e.appendChild(f);break;case"textDecoration":f.style.textDecoration=e;break;default:f.setAttributeNS(null,d,e)}return f},d=function(a,b){var c,d;for(c in b)if(c)switch(d=b[c],c){case"rect":a.setAttributeNS(null,"x",d.left),a.setAttributeNS(null,"y",d.top),a.setAttributeNS(null,"width",d.width),a.setAttributeNS(null,"height",d.height);break;case"displayText":var e=document.createTextNode(d);a.appendChild(e);break;case"appendTo":d.appendChild(a);break;case"textDecoration":a.style.textDecoration=d;break;default:a.setAttributeNS(null,c,d)}},e=function(a,b){var c,d;if(b)for(c in b)c&&(d=b[c],a.addEventListener(c,d,!1))},f=function(a,b){var c,d;if(b)for(c in b)c&&(d=b[c],a.removeEventListener(c,d,!1))};return a.prototype={constructor:a,CreateSvgElement:c,AddSvgEvents:e,RemoveSvgEvents:f,SetAttributes:d},a.prototype}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.Tick=function(a,b,c){this.value=c,this.position=a,this.isMajor=b,this.displayValue=""};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ToolTip=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=b,q={},r=a,s=0,t=0,u=PWC.Lib.Canvas.Svg,v=20,w=5,x=100,y="M 5 15 L 15 15 25 15",z="M 15 15 L  25 15 25 25 5 25 5 15 15 15",A={FontSize:12,FontName:"Serif"};this.createToolTip=function(a,b,p,r){var w,B,C,D=PWC.HmiAC.svgShape.CreateSvgElement,E=20,F=0,G=p.data.length;for(l=new Array(G),m=new Array(G),d=q.x=a,e=q.y=b,h=D("g",{id:r+"_svgToolTip",visibility:"hidden",fill:"black",stroke:"none","stroke-width":1,"font-family":A.FontName,"font-size":A.FontSize}),i=D("g",{id:r+"_svgToolTipHighLighterGroup",visibility:"hidden"}),c=D("rect",{x:0,y:0,id:"tooltipRect",stroke:"black",fill:"khaki",appendTo:h}),f=D("circle",{cx:0,cy:0,r:7,fill:"black",visibility:"hidden",opacity:.4,id:r+"_toolTipHighlighterCircle",appendTo:i}),g=D("rect",{x:0,y:0,height:4,width:4,fill:"black",visibility:"hidden",opacity:.4,id:r+"_toolTipHighlighterRect",appendTo:i}),w=0;G>w;w++)B=u.getTextBBox(A,p.data[w]+":  ").width,B>s&&(s=B),""!==p.value[w]&&(B=u.getTextBBox(A,p.value[w]).width,B>F&&(F=B));for(s+=v,o=D("path",{visibility:"hidden",d:z,stroke:"none",appendTo:h}),n=D("path",{visibility:"hidden",d:y,fill:"none",appendTo:h}),D("rect",{x:5,y:5,height:20,width:20,stroke:"black",fill:"none",appendTo:h}),j=D("text",{displayText:"?",dx:10,dy:E,"font-size":20,"font-weight":"bold",appendTo:h}),k=D("text",{displayText:"",dx:30,dy:E,appendTo:h}),E+=10,C=D("line",{x1:5,y1:E,y2:E,stroke:"black",appendTo:h}),E+=20,w=0;G>w;w++)D("text",{displayText:p.data[w]+":  ",dx:10,dy:E,appendTo:h}),void 0!==p.value[w]&&(l[w]=D("text",{displayText:p.value[w],dx:s,dy:E,appendTo:h})),E+=20;t=F+s+v,x=E-10,c.setAttribute("height",x),c.setAttribute("width",t),C.setAttribute("x2",t-10),C=null},this.showToolTip=function(a,b,c){a?(h.setAttribute("visibility","visible"),j.setAttribute("visibility","visible"),p.style.cursor="crosshair"):(h.setAttribute("visibility","hidden"),i.setAttribute("visibility","hidden"),g.setAttribute("visibility","hidden"),f.setAttribute("visibility","hidden"),j.setAttribute("visibility","hidden"),n.setAttribute("visibility","hidden"),o.setAttribute("visibility","hidden"),p.style.cursor="Default"),void 0!==b&&(b+=w,c+=w,parseInt(b+t,10)>r.left+r.width&&(b-=t,b-=2*w),parseInt(c+x,10)>r.top+r.height&&(c-=x,c-=2*w),d+=b-q.x,e+=c-q.y,h.setAttribute("transform","translate("+d+","+e+")"),q.x=b,q.y=c)},this.draw=function(){p.appendChild(i),p.appendChild(h)},this.clearToolTip=function(){var a,b=l.length;for(a=0;b>a;a++)l[a].textContent="";t=s+v,c.setAttribute("width",t),k.textContent="",n.setAttribute("visibility","hidden"),o.setAttribute("visibility","hidden"),j.setAttribute("visibility","visible")},this.setToolTipValueData=function(a,b,m,y,z){var B,C,D=a.value.length,E=0,F=PWC.HmiAC.PointStyle,G=b,H=m;for(k.textContent=a.header,void 0!==y?(j.setAttribute("visibility","hidden"),n.setAttribute("stroke",y.trendColor),n.setAttribute("stroke-width",y.lineWidth),n.setAttribute("stroke-dasharray",y.lineStyle),n.setAttribute("visibility","visible"),n.setAttribute("marker-mid","url(#marker_"+y.id+")"),o.setAttribute("visibility","visible"),o.setAttribute("fill",y.fillColor)):(j.setAttribute("visibility","visible"),n.setAttribute("visibility","hidden"),o.setAttribute("visibility","hidden")),B=0;D>B;B++)(""!==l[B].textContent||""!==a.value[B])&&(l[B].textContent=a.value[B],C=u.getTextBBox(A,a.value[B]).width,C>E&&(E=C));t=s+E+v,c.setAttribute("width",t),void 0!==b&&(b+=w,m+=w,d+=b-q.x,e+=m-q.y,h.setAttribute("transform","translate("+d+","+e+")"),q.x=b,q.y=m),parseInt(q.x+t,10)>r.left+r.width&&(C=q.x-t-2*w,d+=C-q.x,h.setAttribute("transform","translate("+d+","+e+")"),q.x=C),parseInt(m+x,10)>r.top+r.height&&(C=q.y-x-2*w,e+=C-q.y,h.setAttribute("transform","translate("+d+","+e+")"),q.y=C),h.setAttribute("visibility","visible"),p.style.cursor="crosshair",z?(y.markerStyle===F.Square?(g.setAttribute("x",G-y.markerWidth/2),g.setAttribute("y",H-y.markerWidth/2),g.setAttribute("height",y.markerWidth),g.setAttribute("width",y.markerWidth),g.setAttribute("fill",y.markerColor),g.setAttribute("visibility","visible")):(f.setAttribute("r",y.markerWidth/2),f.setAttribute("fill",y.markerColor),f.setAttribute("cx",G),f.setAttribute("cy",H),f.setAttribute("visibility","visible")),i.setAttribute("visibility","visible"),p.style.cursor="default"):(i.setAttribute("visibility","hidden"),g.setAttribute("visibility","hidden"),f.setAttribute("visibility","hidden"))},this.cleanUp=function(){c=j=k=n=o=h=i=f=g=p=u=null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TrendWindowEventManager=function(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=a,F=b,G=null,H=null,I=c,J=this,K=1,L=3,M=150,N={point:{},timeStamp:""},O={},P=null,Q=null,R=null,S=!1,T=!1,U=!1,V=!1,W=d,X=!1,Y=PWC.HmiAC.HammerEvents,Z=0,$=.05,_=PWC.HmiAC.ScrollbarMode,ab=17,bb=null,cb=function(a){var b,c,d,e,f=!1,g={};PWC.Lib.HmiTypes.HmiObject.getRelPosToTLSW(E.screenItem.container,g),c=g.adaptScreenToWindowFactor,b=a?a:F.getDrawableAreaRect(),e=b.getScreenCTM(),1>c&&-1===navigator.appName.indexOf("Microsoft")&&(f=!0,d=b.getBoundingClientRect(),e.e=d.left,e.f=d.top),h.x=O.x,h.y=O.y,h=h.matrixTransform(e.inverse()),O.x=h.x,O.y=h.y,f&&(O.x=O.x/c,O.y=O.y/c)},db=function(a){var b,c,d=a.target;"mousedown"===a.type&&a.which===K||"touchstart"===a.type?(bb=d.id,C=null,-1!==bb.indexOf(A)?C=o:-1!==bb.indexOf(B)?C=t:W.idMatch(bb)?(W.onPointerDown(bb),X=!0):bb=null,C&&(D=d.parentNode,O=lb(a),cb(D),b=O.x,c=O.y,C.onPointerDown(b,c,d))):("mouseup"===a.type&&a.which===K||"touchend"===a.type)&&(C?(C.onPointerUp(b,c),C=null,D=null):X&&(W.onPointerUp(),X=!1),bb=null)},eb=function(a){null===bb&&(bb=a.target.id,bb!==j&&!nb(bb)||!E.moveTrendArea&&!E.zoomArea?bb=null:V=!0)},fb=function(a){a.preventDefault();var b,c;C?((-1!==bb.indexOf(A)||-1!==bb.indexOf(B))&&(O=mb(a),cb(D),b=O.x,c=O.y),a.eventType===l.INPUT_MOVE?C.onPointerMove(b,c)||m.stop():a.eventType===l.INPUT_END&&(C.onPointerUp(b,c),bb=null,C=null,D=null)):X?a.eventType===l.INPUT_MOVE?W.onPointerMove(a.deltaX,a.deltaY)||m.stop():a.eventType===l.INPUT_END&&(W.onPointerUp(),X=!1,bb=null):V&&(a.eventType===l.INPUT_END&&(V=!1,bb=null),F.onPan(a))},gb=function(a){var b,c;c=void 0!==a.deltaY?a.deltaY:a.detail,a.ctrlKey?E.online||E.isZooming||a.target.id!==j&&!nb(a.target.id)||(a.preventDefault(),b=c>0?.8:1.2,F.pinchScrollZoom(lb(a),b),F.onPinchScrollEnd()):o&&o.getState()&&!V&&(a.preventDefault(),c>0^i?(b=z-.03)<0&&(b=0):(b=z+.03)>1&&(b=1),o.scrollToPercent(b))},hb=function(a){a.preventDefault(),Math.abs(Z-a.scale)>$&&(Z=a.scale,F.pinchScrollZoom(a.center,a.scale)),a.eventType===l.INPUT_END&&(m.stop(),F.onPinchScrollEnd(),Z=0)},ib=function(a){(a.target.id===j||nb(a.target.id))&&F.onSingleTap(a)},jb=function(a){(a.target.id===j||nb(a.target.id))&&(F.twoFingerSingleTap(a),m.stop())},kb=function(a,b,c,d){var e,f,g,h,i,j,k=a,l=!1,m=!0,n=PWC.HmiAC.TextOrientation,o=[],p=[],q=[],r=[],s=[];
if(k===A)e=F.getYAxes(),z=d,E.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(e.push(F.relativeAxis),m=!1);else if(E.connectTrendWindows?e=E.getXAxes(!0):(e=F.getXAxes(),i=F.name),E.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&y!==d){switch(l=!0,j=d>y,E.textOrientation){case n.FromRight:case n.FromBottom:j=d>y;break;case n.FromLeft:case n.FromTop:j=y>d}y=d}for(f=e.length,g=0;f>g;g++)h=e[g],h.zoomInOutCount>0&&(h.moveToPerc(d),l&&h.requestHistoricalData(j,p,o,r,q,s,!0));E.connectTrendWindows?E.resetDrawableTrendWindows():F.resetTrendWindow(),q.length&&E.sendDomainLogicRead(p,o,r,q,s,5),E.rulerControl&&(E.showRuler||E.showStatisticRuler)&&m&&E.calculateRulerData()},lb=function(a){var b={};return a.changedTouches?(b.x=a.changedTouches[0].clientX,b.y=a.changedTouches[0].clientY):(b.x=a.clientX,b.y=a.clientY),b},mb=function(a){var b={};return b.x=a.pointers[0].clientX,b.y=a.pointers[0].clientY,b},nb=function(a){var b,c=null,d=E.getDrawableTrend(),e=d.length;for(b=0;e>b;b++)if(-1!==a.indexOf(d[b].id)){c=d[b];break}return c},ob=function(a){if(a&&!U)e.addEventListener("wheel",gb);else{if(a||!U||o&&o.getState()||!E.online&&!E.isZooming)return;e.removeEventListener("wheel",gb)}U=a},pb=function(){A=I+"_Verti_Scrollbar",B=I+"_Horiz_Scrollbar",P="url("+E.gfxWebLib.connection.getAppDir()+"content/SystemData/zoomin.cur), default",Q="url("+E.gfxWebLib.connection.getAppDir()+"content/SystemData/zoomout.cur), default",j=F.getEventRectId(),i=F.getIsLeftOrRight(),F.setScrollbarDim=J.setScrollbarDim,F.enableScrollbarEvents=J.enableDisableScrollbarEvents,F.enableTrendAreaMove=J.enableTrendAreaMove,F.enableDisablePinchAndScroll=J.enableDisablePinchAndScroll};this.onTrendWindowMouseOut=function(a){e.style.cursor="Default",(a.which===L||2===a.buttons)&&k.showToolTip(!1,g.left,g.left)},this.onTrendWindowMouseDown=function(a){a.preventDefault(),(a.which===L||2===a.buttons)&&(E.zoomInOut||E.zoomInOutX||E.zoomInOutY?(N.point=lb(a),N.timeStamp=a.timeStamp):a.target.id===j||a.target.getAttribute("ignoreEvent")?(O=lb(a),cb(),k.showToolTip(!0,O.x,O.y),k.clearToolTip()):(R=nb(a.target.id))&&J.setTooltipText(a,R))},this.onTrendWindowMouseUp=function(a){a.preventDefault(),(a.which===L||2===a.buttons)&&(E.zoomInOut||E.zoomInOutX||E.zoomInOutY?a.timeStamp-N.timeStamp<=M&&F.twoFingerSingleTap(N.point,!0):R?(R=null,J.hideTooltip()):k.showToolTip(!1,g.left,g.left))},this.onTrendWindowMouseMove=function(a){a.preventDefault();var b=E.zoomInOut||E.zoomInOutX||E.zoomInOutY;return b||a.which!==L&&2!==a.buttons?(E.moveTrendArea?e.style.cursor="all-scroll":b&&(a.altKey||a.shiftKey)?e.style.cursor=Q:(b||E.zoomArea)&&(e.style.cursor=P),void(a=null)):void(a.target.id===j||a.target.getAttribute("ignoreEvent")?R?(R=null,J.setTooltipText(a,null,!0)):(O=lb(a),cb(),k.showToolTip(!0,O.x,O.y),k.clearToolTip()):(R||(R=nb(a.target.id)))&&J.setTooltipText(a,R))},this.initHammer=function(){var a,b=E.screenItem.gfxWebLib.textbib;g=F.getRect(),f=F.getEventSVG(),e=F.getSVG(),h=E.SVGParent.createSVGPoint(),l=E.Hammer,l&&(m&&(m.destroy(),m=null),m=new l.Manager(e,{prevent_default:!0,transform_always_block:!0}),m.add(new l.Tap({event:Y.TWO_FINGER_SINGLE_TAP,taps:1,pointers:2,time:200,threshold:10})),m.add(new l.Tap({event:Y.SINGLE_TAP,taps:1,pointers:1,time:M,threshold:2})),m.add(new l.Pan({event:Y.PAN,pointers:1,direction:l.DIRECTION_ALL,threshold:5})),n=new l.Pinch({event:Y.PINCH,pointers:2,threshold:0,enable:!0})),S=!1,T=!1,U=!1,(E.showStatisticRuler||E.showRuler)&&this.enableScrollbarEvents(),a=E.trendObjectType===PWC.HmiAC.TrendObjectType.Online?{data:[b.getText("TBID_TrendTooltip_DataConnection"),b.getText("TBID_TrendTooltip_TimeStamp"),b.getText("TBID_TrendTooltip_YValue")],value:["","",""]}:{data:[b.getText("TBID_TrendTooltip_DataConnection")+" X",b.getText("TBID_TrendTooltip_DataConnection")+" Y","X Value",b.getText("TBID_TrendTooltip_YValue")],value:["","","",""]},k=new PWC.HmiAC.ToolTip(g,e),k.createToolTip(g.left,g.top,a,I),PWC.HmiAC.svgShape.AddSvgEvents(f,{mousedown:this.onTrendWindowMouseDown,mouseout:this.onTrendWindowMouseOut,mouseup:this.onTrendWindowMouseUp,mousemove:this.onTrendWindowMouseMove})},this.setIsLeftOrRight=function(a){i=a},this.setScrollbarDim=function(a,b,c,d,e,f){p=a,q=b,u=c,v=d,i?(r=e,w=f,s=x=ab):(r=w=ab,s=e,x=f)},this.drawScrollbars=function(a,b){var c=!1,d=E.getLineWidth();H&&H.parentNode&&H.parentNode.removeChild(H),!b&&E.scrollbarMode!==_.Always||E.scrollbarMode===_.No?(H=null,o&&(o.remove(),o=null)):(H=PWC.HmiAC.svgShape.CreateSvgElement("rect",{x:p-d/2,y:q-d/2,width:s+d,height:r+d,stroke:E.getLineColor(),"stroke-width":d,appendTo:e}),this.drawVertScrollbar(b)&&(c=!0)),G&&G.parentNode&&G.parentNode.removeChild(G),!a&&E.scrollbarMode!==_.Always||E.connectTrendWindows&&0!==F.index||E.scrollbarMode===_.No?(G=null,t&&(t.remove(),t=null)):(G=PWC.HmiAC.svgShape.CreateSvgElement("rect",{x:u-d/2,y:v-d/2,width:w+d,height:x+d,stroke:E.getLineColor(),"stroke-width":d,appendTo:e}),this.drawHorizScrollbar(!1,a)&&(c=!0)),E.showRuler||E.showStatisticRuler||(c?this.enableScrollbarEvents():this.disableScrollbarEvents())},this.updateScrollbars=function(a,b){var c=!1,d=E.getLineWidth();!b&&E.scrollbarMode!==_.Always||E.scrollbarMode===_.No?(H&&H.parentNode&&H.parentNode.removeChild(H),H=null):(H&&PWC.HmiAC.svgShape.SetAttributes(H,{x:p-d/2,y:q-d/2,width:s+d,height:r+d,stroke:E.getLineColor(),"stroke-width":d}),c=this.updateVertScrollbar(b)),!a&&E.scrollbarMode!==_.Always||E.connectTrendWindows&&0!==F.index||E.scrollbarMode===_.No?(G&&G.parentNode&&G.parentNode.removeChild(G),G=null):(G&&PWC.HmiAC.svgShape.SetAttributes(G,{x:u-d/2,y:v-d/2,width:w+d,height:x+d,stroke:E.getLineColor(),"stroke-width":d}),c=this.updateHorizScrollbar(a)),!c||E.showRuler||E.showStatisticRuler||this.enableScrollbarEvents()},this.drawHorizScrollbar=function(a,b){var c,d,f,g,h,j,k,l,m=E.connectTrendWindows?E.getXAxes(!0):F.getXAxes(),n=m.length,o=!0,p=PWC.HmiAC.TextOrientation,q=0,r=.01;if(t&&(t.remove(),t=null),a){for(f=0;n>f;f++)d=m[f],d.zoomInOutCount>q&&(q=d.zoomInOutCount,g=f);E.connectTrendWindows&&E.setAllXAxesZoom(F.name,q-b),b=q,d=m[g]}else for(f=0;n>f&&(d=m[f],d.zoomInOutCount!==b);f++);if(0!==b&&E.oneToOneView){switch(E.trendObjectType===PWC.HmiAC.TrendObjectType.Online||d.scalingType===PWC.HmiAC.ScalingType.Linear?(h=d.currentBeginValue,j=d.currentEndValue,k=d.startValueBuffer,l=d.endValueBuffer):d.scalingType===PWC.HmiAC.ScalingType.Logarithmic?(h=Math.log(d.currentBeginValue)/Math.LN10,j=Math.log(d.currentEndValue)/Math.LN10,k=Math.log(d.startValueBuffer)/Math.LN10,l=Math.log(d.endValueBuffer)/Math.LN10):d.scalingType===PWC.HmiAC.ScalingType.NegativeLogarithmic&&(h=-Math.log(-d.currentBeginValue)/Math.LN10,j=-Math.log(-d.currentEndValue)/Math.LN10,k=-Math.log(-d.startValueBuffer)/Math.LN10,l=-Math.log(-d.endValueBuffer)/Math.LN10),E.textOrientation){case p.FromRight:case p.FromBottom:y=(h-k)/(l-k-j+h);break;case p.FromLeft:case p.FromTop:y=(l-j)/(l-k-j+h)}c=(j-h)/(l-k)}else c=y=0;return i&&w>2*x||!i&&x>2*w?(t=new PWC.Lib.Canvas.ScrollBar(B,e,u,v,w,x,0,500,c,y,r,"top_bottom",kb),F.setScrollbarRef(t),0===b&&(E.scrollbarMode===_.Always?t.disable():E.scrollbarMode===_.WhenNeccessary&&E.redraw(),o=!1)):o=!1,o},this.drawVertScrollbar=function(a){var b,c,d,f,g,h,j,k=F.getYAxes(),l=k.length,m=!0,n=PWC.HmiAC.TextOrientation,t=.01;for(o&&(o.remove(),o=null),d=0;l>d&&(c=k[d],c.zoomInOutCount!==a);d++)c=null;if(0!==a&&E.oneToOneView&&null!==c){switch(c.scalingType===PWC.HmiAC.ScalingType.Linear?(f=c.currentBeginValue,g=c.currentEndValue,h=c.startValueBuffer,j=c.endValueBuffer):c.scalingType===PWC.HmiAC.ScalingType.Logarithmic?(f=Math.log(c.currentBeginValue)/Math.LN10,g=Math.log(c.currentEndValue)/Math.LN10,h=Math.log(c.startValueBuffer)/Math.LN10,j=Math.log(c.endValueBuffer)/Math.LN10):c.scalingType===PWC.HmiAC.ScalingType.NegativeLogarithmic&&(f=-Math.log(-c.currentBeginValue)/Math.LN10,g=-Math.log(-c.currentEndValue)/Math.LN10,h=-Math.log(-c.startValueBuffer)/Math.LN10,j=-Math.log(-c.endValueBuffer)/Math.LN10),E.textOrientation){case n.FromRight:case n.FromLeft:z=(j-g)/(j-h-g+f);break;case n.FromBottom:case n.FromTop:z=(f-h)/(j-h-g+f)}b=(g-f)/(j-h)}else b=z=0;return i&&r>2*s||!i&&s>2*r?(o=new PWC.Lib.Canvas.ScrollBar(A,e,p,q,s,r,0,500,b,z,t,"top_bottom",kb),F.setScrollbarRef(null,o),0===a&&(E.scrollbarMode===_.Always?o.disable():E.scrollbarMode===_.WhenNeccessary&&E.redraw(),m=!1)):m=!1,m},this.updateHorizScrollbar=function(a){return t?(t.hide(),void((i&&w>2*x||!i&&x>2*w)&&(t.updateScrollbar(u,v,w,x),t.show()))):this.drawHorizScrollbar(!1,a)},this.updateVertScrollbar=function(a){return o?(o.hide(),void((i&&r>2*s||!i&&s>2*r)&&(o.updateScrollbar(p,q,s,r),o.show()))):this.drawVertScrollbar(a)},this.disableScrollbarEvents=function(){S=!1,m&&(PWC.HmiAC.svgShape.RemoveSvgEvents(e,{mousedown:db,mouseup:db,touchstart:db,touchend:db}),T===!1&&m&&m.handlers.hasOwnProperty(Y.PAN)&&m.off(Y.PAN,fb),ob(!1))},this.enableScrollbarEvents=function(){S=!0,m&&(PWC.HmiAC.svgShape.AddSvgEvents(e,{mousedown:db,mouseup:db,touchstart:db,touchend:db}),T===!1&&m&&m.on(Y.PAN,fb),ob(!0))},this.enableDisablePinchAndScroll=function(a){m&&(a?(m.add(n),m.on(Y.PINCH,hb)):m.handlers.hasOwnProperty(Y.PINCH)&&(m.off(Y.PINCH,hb),m.remove(n))),ob(a)},this.enableDisableScrollbarEvents=function(a){o.getState()||E.showRuler||E.showStatisticRuler||(a===K?J.enableScrollbarEvents():J.disableScrollbarEvents())},this.enableTrendAreaMove=function(a){T=!0,m&&(m.on(Y.TWO_FINGER_SINGLE_TAP,jb),m.on(Y.SINGLE_TAP,ib),S===!1&&m.on(Y.PAN,fb),m.on(Y.PAN_START,eb)),a&&J.enableDisablePinchAndScroll(!1)},this.disableTrendAreaMove=function(a){T=!1,m&&(m.handlers.hasOwnProperty(Y.TWO_FINGER_SINGLE_TAP)&&m.off(Y.TWO_FINGER_SINGLE_TAP,jb),m.handlers.hasOwnProperty(Y.SINGLE_TAP)&&m.off(Y.SINGLE_TAP,ib),S===!1&&m.handlers.hasOwnProperty(Y.PAN)&&m.off(Y.PAN,fb),m.handlers.hasOwnProperty(Y.PAN_START)&&m.off(Y.PAN_START,eb)),a&&J.enableDisablePinchAndScroll(!0)},this.setTooltipText=function(a,b,c){var d,e,f,h,j,l,m,n,o,p,q={},r="",s="",t="",u="none",v=0,w=!1,x=0,y=0;if(O=lb(a),cb(),c===!0)f="",h="";else{if(void 0!==b)for(n=b.points,l=n.split(" "),j=b.pointWidth>6?b.pointWidth+2:6,v=0;v<l.length;v++)if(m=l[v].split(","),o=parseInt(m[0],10),p=parseInt(m[1],10),O.x>=o-j&&O.x<=o+j&&O.y>=p-j&&O.y<=p+j){x=o,y=p,w=!0;break}q.x=O.x-g.left,q.y=g.height-(O.y-g.top),i?(q.y=Math.round(b.currentYAxis.getValueFromPosition(q.y)),q.y=parseFloat(q.y).trimNum(2,null),q.x=b.currentXAxis.getValueFromPosition(q.x),E.trendObjectType===PWC.HmiAC.TrendObjectType.Online?(q.x=parseInt(q.x,10),q.x=b.currentXAxis.getDisplayValue(q.x)):(q.x=parseFloat(Math.round(q.x)).trimNum(2,null),w||(q.x=q.x+"i")),w||(q.y=q.y+"i"),f=q.x,h=q.y):(q.x=Math.round(b.currentYAxis.getValueFromPosition(g.width-q.x)),q.x=parseFloat(q.x).trimNum(2,null),q.y=b.currentXAxis.getValueFromPosition(g.height-q.y),E.trendObjectType===PWC.HmiAC.TrendObjectType.Online?(q.y=parseInt(q.y,10),q.y=b.currentXAxis.getDisplayValue(q.y)):(q.y=parseFloat(Math.round(q.y)).trimNum(2,null),w||(q.y=q.y+"i")),w||(q.x=q.x+"i"),f=q.y,h=q.x),e=b.trendStyle===PWC.HmiAC.TrendStyle.None?0:b.lineWidth,b.fill&&(u=b.fillColor),t=E.useTrendNameAsLabel||""===b.displayName?b.name:b.displayName,d={id:b.id,trendColor:b.color,lineWidth:e,lineStyle:b.getLineStyle(),fillColor:u,markerColor:b.pointColor,markerWidth:j,markerStyle:b.pointStyle,trendWindowColor:b.currentTrendWindow.backColor}}w||(x=O.x,y=O.y),b&&(E.trendObjectType===PWC.HmiAC.TrendObjectType.Online?(s=b.dataSource.Tag,k.setToolTipValueData({value:[s,f,h],header:t},x,y,d,w)):(r=b.dataSourceX.Tag,s=b.dataSourceY.Tag,k.setToolTipValueData({value:[r,s,f,h],header:t},x,y,d,w)))},this.hideTooltip=function(){k.showToolTip(!1)},this.drawRulerAndTooltip=function(){W.draw(),k.draw()},this.cleanUp=function(){m&&m.destroy(),k&&k.cleanUp(),f&&PWC.HmiAC.svgShape.RemoveSvgEvents(f,{mousedown:this.onTrendWindowMouseDown,mouseout:this.onTrendWindowMouseOut,mouseup:this.onTrendWindowMouseUp,mousemove:this.onTrendWindowMouseMove}),E=F=l=m=n=C=t=o=e=f=g=W=k=G=H=h=N=O=P=Q=_=D=J=R=null},pb(),a=b=c=d=null};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.Axis=function(){"use strict";var a,b,c,d,e,f,g,h,i=this,j="",k=8,l=4,m=function(){i.Hammer=i.trendView.Hammer,i.Hammer&&(h&&(h.destroy(),h=null),h=new i.Hammer.Manager(c),h.add(new i.Hammer.Pan({event:PWC.HmiAC.HammerEvents.PAN,pointers:1,direction:i.Hammer.DIRECTION_ALL,threshold:5})))},n=function(a,c){var d=document.createElementNS("http://www.w3.org/2000/svg","text"),e=document.createElementNS("http://www.w3.org/2000/svg","tspan"),f=document.createElementNS("http://www.w3.org/2000/svg","tspan");return d.setAttribute("x",a.left),d.setAttribute("y",a.top),b||d.setAttribute("transform","rotate(-90,"+a.left+","+a.top+")"),e.setAttribute("x",a.left),e.setAttribute("y",a.top),e.textContent=i.axisTicks[c].displayValue[0],f.setAttribute("x",a.left+2),f.setAttribute("dy","1.1em"),f.textContent=i.axisTicks[c].displayValue[1],d.appendChild(e),d.appendChild(f),d.style.textDecoration="inherit",d},o=function(b){var c,d,e,f,g,h,j,k=0;return i.align===a.Left||i.align===a.Right?(d=i.innerRect.top,e=d+i.innerRect.height,g=i.bBoxText.height/4,h=3*g,j=i.bBoxText.height/2,k=g):(d=i.innerRect.left,e=d+i.innerRect.width,h=g=j=i.bBoxText.width/2),f=b+d,c=f+k,d>f?c+=j:d+j>f?c=d+h:f>e?c-=j:f>e-j&&(c=e-g),c},p=PWC.HmiAC.svgShape.CreateSvgElement;this.getPos=function(a){var b={};return b.x=a.pointers[0].pageX,b.y=a.pointers[0].pageY,b},this.onAxisMouseOver=function(){switch(i.axisType){case i.trendView.axisTypeEnum.xAxis:i.svgParent.style.cursor=b?"w-resize":"s-resize";break;case i.trendView.axisTypeEnum.yAxis:i.svgParent.style.cursor=b?"s-resize":"w-resize"}},this.onAxisMouseOut=function(){i.svgParent.style.cursor="Default"},this.getTrends=function(a){var b,c,d,e,f,g=[];for(a?(d="getTrend",e=i.trendView.getTrendCount()):(d="getDrawableTrend",e=i.trendView.getDrawableTrendCount()),f=0;e>f;f++)b=i.trendView[d](f),c=i.axisType===i.trendView.axisTypeEnum.xAxis?b.getXAxis():b.getYAxis(),c===i.name&&g.push(b);return g},this.innerRect=new PWC.HmiAC.RECT,this.setBaseAxisAlignment=function(c,d){a=c,b=d},this.setTrendWindowDrawability=function(){var a=this.trendView.getDrawableTrendWindowByName(this.trendWindow);this.trendWindowDrawable=a&&a.trendWindowDrawn?!0:!1},this.drawTicks=function(){var b,e,f,g,h,k,l,m,n,o=this.innerRect,q=i.axisTicks.length,r=i.MajorTickSize,s=i.MinorTickSize;switch(n=this.trendView.SVGParent.getElementById(i.id+"_Ticks")||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.trendView.SVGParent,"g",i.id+"_Ticks"),n&&n.parentNode.removeChild(n),n=p("g",{id:i.id+"_Ticks"}),n.style.clipPath=j,i.align){case a.Top:case a.Bottom:for(i.align===a.Top?(b=-1,f=o.top+o.height):(b=1,f=o.top),k=0;q>k;++k){if(i.axisTicks[k].isMajor){if(!this.CoarseGrid)continue;l=r}else{if(!this.FineGrid)continue;l=s}h=f+b*l,m=i.axisTicks[k].position,e=p("line",{x1:o.left+m,y1:f,x2:o.left+m,y2:h}),n.appendChild(e)}break;case a.Left:for(k=0;q>k;++k){if(i.axisTicks[k].isMajor){if(!this.CoarseGrid)continue;l=r}else{if(!this.FineGrid)continue;l=s}g=o.left+o.width-l,m=i.axisTicks[k].position,e=p("line",{x1:g,y1:o.top+m,x2:o.left+o.width,y2:o.top+m}),n.appendChild(e)}break;case a.Right:for(k=0;q>k;++k){if(i.axisTicks[k].isMajor){if(!this.CoarseGrid)continue;l=r}else{if(!this.FineGrid)continue;l=s}g=o.left+l,m=i.axisTicks[k].position,e=p("line",{x1:g,y1:o.top+m,x2:o.left,y2:o.top+m}),n.appendChild(e)}}e=null,d.insertBefore(n,c),n=null},this.drawAxisLabel=function(){var a,c,e,h,i,j,m=this.innerRect,n=this.Label,o=PWC.HmiAC.svgShape.SetAttributes;switch(this.axisType){case this.trendView.axisTypeEnum.yAxis:(!b||this.labelWidth>=f-k)&&(n=this.truncateLabel(n,f-k)),e=this.labelHeight-(b?0:l/2),h=this.labelWidth,a=new PWC.HmiAC.RECT,b?(a.left=m.left+this.LabelToBorderSpace,a.top=m.top+this.LabelToBorderSpace):(a.left=m.left+m.width-g-this.LabelToBorderSpace,a.top=m.top+this.LabelToBorderSpace),j=this.trendView.SVGParent.getElementById(this.labelId)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.trendView.SVGParent,"svg",this.labelId),j?(o(j,{x:a.left,y:a.top,width:b?h:g,height:e}),c=j.childNodes[0],o(c,{fill:this.trendView.backColor,title:this.Label}),i=j.childNodes[1],o(i,{"font-size":this.trendView.trendViewFont.fontSize,dx:h/2,dy:3*e/4,"font-family":this.trendView.trendViewFont.fontName,"font-style":this.trendView.trendViewFont.fontStyle[1],"text-decoration":this.trendView.trendViewFont.fontStyle[2],"font-weight":this.trendView.trendViewFont.fontStyle[0]}),i.setAttribute("displayText",n)):(j=p("svg",{id:this.labelId,x:a.left,y:a.top,width:b?h:g,height:e,stroke:"inherit","text-anchor":"middle"}),c=p("rect",{fill:this.trendView.backColor,title:this.Label,"fill-opacity":1,"stroke-width":1,"stroke-opacity":1,width:"100%",height:"100%","class":this.trendView.axisLabelClass,appendTo:j}),i=p("text",{"font-size":this.trendView.trendViewFont.fontSize,fill:"inherit",displayText:n,dx:h/2,dy:3*e/4,"stroke-width":0,"font-family":this.trendView.trendViewFont.fontName,"font-style":this.trendView.trendViewFont.fontStyle[1],"text-decoration":this.trendView.trendViewFont.fontStyle[2],"font-weight":this.trendView.trendViewFont.fontStyle[0],"class":"fontClass",appendTo:j}));break;case this.trendView.axisTypeEnum.xAxis:n=this.truncateLabel(n,g-k),e=this.labelHeight-(b?l/2:0),h=this.labelWidth,0!==e&&0!==h&&(a=new PWC.HmiAC.RECT,a.left=m.left+(this.trendView.textOrientation===PWC.HmiAC.TextOrientation.FromLeft?this.LabelToBorderSpace:m.width-(b?g+this.LabelToBorderSpace:this.LabelToMajorTickSpace+this.MajorTickSize+this.labelHeight)),a.top=m.top+(this.trendView.textOrientation===PWC.HmiAC.TextOrientation.FromBottom?m.height-this.LabelToBorderSpace-h:b?m.height-this.LabelToBorderSpace-e:this.LabelToBorderSpace),j=this.trendView.SVGParent.getElementById(this.labelId)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.trendView.SVGParent,"svg",this.labelId),j?(o(j,{x:a.left,y:a.top,width:b?g:e,height:b?e:g}),c=j.childNodes[0],o(c,{title:this.Label,fill:this.trendView.backColor}),j.removeChild(j.lastChild),i=p("text",{displayText:n,dx:b?g/2:0,dy:b?.75*e:3*e/4-h/2,"font-family":this.trendView.trendViewFont.fontName,"font-style":this.trendView.trendViewFont.fontStyle[1],"font-weight":this.trendView.trendViewFont.fontStyle[0],"font-size":this.trendView.trendViewFont.fontSize,"text-decoration":this.trendView.trendViewFont.fontStyle[2],"stroke-width":0,fill:"inherit","class":"fontClass",appendTo:j}),b||i.setAttribute("transform","rotate(-90,"+h/2+",0)")):(j=p("svg",{id:this.labelId,x:a.left,y:a.top,width:b?g:e,height:b?e:g,stroke:"inherit","text-anchor":"middle"}),c=p("rect",{title:this.Label,width:"100%",height:"100%",fill:this.trendView.backColor,"fill-opacity":1,"stroke-width":1,"stroke-opacity":2,appendTo:j,"class":this.trendView.axisLabelClass}),i=p("text",{displayText:n,dx:b?g/2:0,dy:b?.75*e:3*e/4-h/2,"font-family":this.trendView.trendViewFont.fontName,"font-style":this.trendView.trendViewFont.fontStyle[1],"font-weight":this.trendView.trendViewFont.fontStyle[0],"font-size":this.trendView.trendViewFont.fontSize,"text-decoration":this.trendView.trendViewFont.fontStyle[2],"stroke-width":0,fill:"inherit","class":"fontClass",appendTo:j}),b||i.setAttribute("transform","rotate(-90,"+h/2+",0)")))}this.Label.trim().length>0&&d.appendChild(j)},this.drawTopBottomLabels=function(){var a,b,c,d,e,f,g,h,k,l,m=i.axisTicks.length,q=this.innerRect,r=p("g",{id:i.id+"_Labels"}),s=r.style,t=PWC.HmiAC.TextOrientation,u=1.25;for(s.clipPath=j,k=i.trendView.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&i.axisType===this.trendView.axisTypeEnum.xAxis,c=k?q.top+q.height-i.LabelToMajorTickSpace-i.MajorTickSize-i.bBoxText.height*(i.showDate?u:u-1):q.top+q.height-i.LabelToMajorTickSpace-i.MajorTickSize,r.setAttribute("text-anchor","middle"),i.showAllLabels||(f=q.left,i.axisType===this.trendView.axisTypeEnum.yAxis||i.axisType===this.trendView.axisTypeEnum.xAxis&&this.trendView.textOrientation===t.FromRight?(d=f,e=f+q.width,g=!0):(e=f,d=f+q.width,g=!1)),h=0;m>h;)if(l=i.axisTicks[h],l.isMajor){if(a=new PWC.HmiAC.RECT,a.left=k?q.left+l.position:o(l.position),a.top=c,a.height=20,a.width=20,b=k?n(a,h):p("text",{displayText:l.displayValue,x:a.left,y:a.top,textDecoration:"inherit"}),r.appendChild(b),!i.showAllLabels){if(!(g?f+l.position<d:f+l.position>d))break;r.removeChild(b)}h+=i.MinorTickCount}else h++;if(!i.showAllLabels)for(h=m-1;h>=0;){if(l=i.axisTicks[h],l.isMajor){if(a=new PWC.HmiAC.RECT,a.left=o(l.position),a.top=c,a.height=20,a.width=20,g?f+l.position>e:l.position+f<e){h--;continue}b=p("text",{displayText:l.displayValue,x:a.left,y:a.top,textDecoration:"inherit"}),r.appendChild(b);break}h--}this.setLabelGroupAttributes(r)},this.drawLeftRightLabels=function(b){var c,d,e,f,g,h,k,l,m,q=i.axisTicks.length,r=this.innerRect,s=p("g",{id:i.id+"_Labels"}),t=s.style,u=0,v="",w=1.25;for(t.clipPath=j,l=i.trendView.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&i.axisType===this.trendView.axisTypeEnum.xAxis,b?l?(e=r.left+i.bBoxText.height+i.LabelToMajorTickSpace+i.MajorTickSize,s.setAttribute("text-anchor","middle")):(e=r.left+i.LabelToMajorTickSpace+i.MajorTickSize,s.setAttribute("text-anchor","start")):l?(e=r.left+r.width-i.bBoxText.height*(i.showDate?w:w-1)-i.LabelToMajorTickSpace-i.MajorTickSize,s.setAttribute("text-anchor","middle")):(e=r.left+r.width-i.LabelToMajorTickSpace-i.MajorTickSize,s.setAttribute("text-anchor","end")),h=r.width-(this.MajorTickSize+this.LabelToMajorTickSpace+this.LabelToBorderSpace+this.trendView.getLineWidth()),f=r.top+r.height,k=0;q>k;)if(m=i.axisTicks[k],m.isMajor){if(c=new PWC.HmiAC.RECT,c.left=e,c.top=l?r.top+m.position:o(m.position),c.width=20,c.height=20,d=l?n(c,k):p("text",{displayText:m.displayValue,x:c.left,y:c.top,textDecoration:"inherit"}),!l)if(d.textContent.length<=this.labelText.length)u<d.textContent.length&&(v=d.textContent,u=v.length);else if(v=this.labelText=d.textContent,u=v.length,this.getLabelTextWidth(this.labelText)>h)return this.trendView.redraw(),!1;if(s.appendChild(d),!i.showAllLabels){if(!(m.position+r.top>f))break;s.removeChild(d)}k+=i.MinorTickCount}else k++;if(!i.showAllLabels)for(g=r.top,k=q-1;k>=0;){if(m=i.axisTicks[k],m.isMajor){if(c=new PWC.HmiAC.RECT,c.left=e,c.top=o(m.position),m.position+c.top<g){k--;continue}if(c.width=20,c.height=20,d=p("text",{displayText:m.displayValue,x:c.left,y:c.top,textDecoration:"inherit"}),d.textContent.length<=this.labelText.length)u<d.textContent.length&&(v=d.textContent,u=v.length);else if(v=this.labelText=d.textContent,u=v.length,this.getLabelTextWidth(this.labelText)>h)return this.trendView.redraw(),!1;s.appendChild(d);break}k--}return!l&&u<this.labelText.length&&(this.labelText=v,this.align===a.Left||this.align===a.Right)?(this.trendView.redraw(),!1):(this.setLabelGroupAttributes(s),!0)},this.draw=function(){var b,f,g,h,k,l=0,n=this.trendView.getLineWidth(),o=this.axisType===this.trendView.axisTypeEnum.yAxis;if(this.currentBeginValue>=this.currentEndValue)return!1;if(o&&this.trendIndicatorClipRect&&(this.trendIndicatorGroup=p("g",{id:this.id+"_TrendIndicatorGroup",appendTo:this.svgParent}),f=p("defs",{appendTo:this.trendIndicatorGroup}),g=p("clipPath",{id:this.id+"_TrendIndicatorRect_clippath",appendTo:f}),this.trendIndicatorRectClippathId="url(#"+this.id+"_TrendIndicatorRect_clippath)",h=p("rect",{x:this.trendIndicatorClipRect.left,y:this.trendIndicatorClipRect.top,width:this.trendIndicatorClipRect.width,height:this.trendIndicatorClipRect.height,appendTo:g})),d=p("g",{id:this.id+"_group",stroke:i.color,fill:i.color}),j=this.id+"clippath",j=j.replace(/\s+/g,""),f=p("defs",{appendTo:d}),g=p("clipPath",{id:j,appendTo:f}),j="url(#"+j+")",h=p("rect",{x:this.innerRect.left,y:this.innerRect.top,width:this.innerRect.width,height:this.innerRect.height,appendTo:g}),this.visible){if(b=this.trendView.getLineColor(),l=n,this.inTrendColor?(i.setAxisColor(),k=e):k=this.color,d.setAttribute("stroke",k),d.setAttribute("fill",k),c=p("rect",{fill:this.trendView.backColor,id:this.id,"data-tif-id":this.id,stroke:b,title:this.name,"fill-opacity":0,"stroke-width":l,"stroke-opacity":1,rect:i.rect,"class":"lineColorClass"}),m(),this.trendView.moveAxes&&(this.trendView.getStartStop()&&this.refresh||o?(o||this.trendView.trendObjectType===PWC.HmiAC.TrendObjectType.Function)&&this.enableAxesMove():this.enableAxesMove()),d.appendChild(c),this.svgParent.appendChild(d),i.calculateGrid(),(this.FineGrid||this.CoarseGrid)&&i.drawTicks(),i.showLabels)switch(i.align){case a.Top:i.drawTopBottomLabels();break;case a.Bottom:i.drawTopBottomLabels();break;case a.Left:if(i.drawLeftRightLabels(!1)===!1)return!1;break;case a.Right:if(i.drawLeftRightLabels(!0)===!1)return!1}i.Label.trim().length>0&&i.drawAxisLabel()}return!0},this.update=function(){var a,b,d=this.trendView.getLineWidth(),e=this.id+"clippath";if(e=e.replace(/\s+/g,""),this.visible){if(a=this.trendView.SVGParent.getElementById(e)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.trendView.SVGParent,"clipPath",e),a.removeChild(a.lastChild),b=p("rect",{x:this.innerRect.left,y:this.innerRect.top,width:this.innerRect.width,height:this.innerRect.height,appendTo:a}),this.axisType===this.trendView.axisTypeEnum.yAxis&&this.trendIndicatorClipRect&&(a=this.trendView.SVGParent.getElementById(this.id+"_TrendIndicatorRect_clippath")||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.trendView.SVGParent,"clipPath",this.id+"_TrendIndicatorRect_clippath"),a.removeChild(a.lastChild),b=p("rect",{x:this.trendIndicatorClipRect.left,y:this.trendIndicatorClipRect.top,width:this.trendIndicatorClipRect.width,height:this.trendIndicatorClipRect.height,appendTo:a})),PWC.HmiAC.svgShape.SetAttributes(c,{rect:i.rect,"stroke-width":d}),i.calculateGrid(),(this.FineGrid||this.CoarseGrid)&&i.updateTicks(),i.showLabels&&i.updateLabels()===!1)return!1;i.Label.trim().length>0&&i.drawAxisLabel()}return!0},this.enableAxesMove=function(){c&&h&&(h.on(PWC.HmiAC.HammerEvents.PAN,this.onPan),PWC.HmiAC.svgShape.AddSvgEvents(c,{mouseover:this.onAxisMouseOver,mouseout:this.onAxisMouseOut}))},this.disableAxesMove=function(a){c&&h&&(h.handlers.hasOwnProperty(PWC.HmiAC.HammerEvents.PAN)&&h.off(PWC.HmiAC.HammerEvents.PAN,this.onPan),PWC.HmiAC.svgShape.RemoveSvgEvents(c,{mouseover:this.onAxisMouseOver,mouseout:this.onAxisMouseOut}),a!==!1||this.axisType!==this.trendView.axisTypeEnum.yAxis&&this.trendView.trendObjectType!==PWC.HmiAC.TrendObjectType.Function||(0===this.zoomInOutCount&&this.invalidate(),this.endValueBuffer2&&(this.endValueBuffer=this.endValueBuffer2,this.startValueBuffer=this.startValueBuffer2,this.endValueBuffer2=null,this.startValueBuffer2=null)))},this.updateTicks=function(){var b,c,d,e,f,g,h,j,k,l,m=this.trendView.SVGParent.getElementById(i.id+"_Ticks")||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.trendView.SVGParent,"g",i.id+"_Ticks"),n=i.axisTicks.length,o=0,q=0,r=this.innerRect;if(m){switch(q=m.childElementCount,i.align){case a.Top:k=-1,l=r.top+r.height;break;case a.Bottom:k=1,l=r.top}switch(i.align){case a.Top:case a.Bottom:for(b=0;n>b;++b){if(i.axisTicks[b].isMajor){if(!this.CoarseGrid)continue;h=i.MajorTickSize}else{if(!this.FineGrid)continue;h=i.MinorTickSize}c=r.left+i.axisTicks[b].position,f=l+k*h,q>o?(j=m.childNodes[o],j.setAttribute("y2",f),j.setAttribute("x1",c),j.setAttribute("x2",c),j.setAttribute("y1",l),m.childNodes[o].setAttribute("visibility",i.trendViewVisibility),o++):(e=j?j.getAttribute("y1"):l,j=p("line",{x1:c,y1:e,x2:c,y2:f}),m.appendChild(j))}for(g=o;q>g;g++)m.childNodes[g].setAttribute("visibility","hidden");break;case a.Left:for(b=0;n>b;++b){if(i.axisTicks[b].isMajor){if(!this.CoarseGrid)continue;h=i.MajorTickSize}else{if(!this.FineGrid)continue;h=i.MinorTickSize}c=r.left+r.width-h,e=r.top+i.axisTicks[b].position,q>o?(j=m.childNodes[o],j.setAttribute("y1",e),j.setAttribute("y2",e),j.setAttribute("x1",c),j.setAttribute("x2",r.left+r.width),m.childNodes[o].setAttribute("visibility",i.trendViewVisibility),o++):(d=j?j.getAttribute("x2"):c+h,j=p("line",{x1:c,y1:e,x2:d,y2:e}),m.appendChild(j))}for(g=o;q>g;g++)m.childNodes[g].setAttribute("visibility","hidden");break;case a.Right:for(b=0;n>b;++b){if(i.axisTicks[b].isMajor){if(!this.CoarseGrid)continue;h=i.MajorTickSize}else{if(!this.FineGrid)continue;h=i.MinorTickSize}e=r.top+i.axisTicks[b].position,c=r.left+h,q>o?(j=m.childNodes[o],j.setAttribute("y1",e),j.setAttribute("y2",e),j.setAttribute("x1",c),j.setAttribute("x2",r.left),m.childNodes[o].setAttribute("visibility",i.trendViewVisibility),o++):(d=j?j.getAttribute("x2"):r.left,j=p("line",{x1:c,y1:e,x2:d,y2:e}),m.appendChild(j))}for(g=o;q>g;g++)m.childNodes[g].setAttribute("visibility","hidden")}j=null,m=null}},this.updateLabels=function(){var b;switch(this.align){case a.Top:b=i.updateTopBottomLabels();break;case a.Bottom:b=i.updateTopBottomLabels();break;case a.Left:b=i.updateLeftRightLabels(!1);break;case a.Right:b=i.updateLeftRightLabels(!0)}return b},this.updateTopBottomLabels=function(){var a,b,c,d,e,f,g,h,k,l,m,q=i.axisTicks.length,r=this.innerRect,s=0,t="",u=0,v="x",w="y",x=2,y=this.trendView.SVGParent.getElementById(i.id+"_Labels")||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.trendView.SVGParent,"g",i.id+"_Labels"),z=0,A=i.trendView.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&i.axisType===this.trendView.axisTypeEnum.xAxis,B=PWC.HmiAC.TextOrientation,C=1.25;if(y){for(y.style.clipPath=j,l=r.top+r.height-i.LabelToMajorTickSpace-i.MajorTickSize,A&&(l-=i.bBoxText.height*(i.showDate?C:C-1)),y.setAttribute("text-anchor","middle"),i.autoPrecision||(x=i.decimalPrecision),z=y.childElementCount,e=r.left,i.axisType===this.trendView.axisTypeEnum.yAxis||i.axisType===this.trendView.axisTypeEnum.xAxis&&this.trendView.textOrientation===B.FromRight?(d=e,c=e+r.width,f=!0):(c=e,d=e+r.width,f=!1),g=0;q>g;)if(m=i.axisTicks[g],m.isMajor){if(!i.showAllLabels&&(f?e+m.position<d:m.position+e>d)){g++;continue}if(z>u?(b=y.childNodes[u++],A?(h=b.childNodes[0],k=b.childNodes[1],b.setAttribute(v,r.left+m.position),b.setAttribute(w,l),h.textContent=m.displayValue[0],h.setAttribute(v,r.left+m.position),h.setAttribute(w,l),k.textContent=m.displayValue[1],k.setAttribute(v,r.left+m.position),k.setAttribute(w,l)):(b.setAttribute(v,o(m.position)),b.setAttribute(w,l),b.textContent=m.displayValue),b.setAttribute("visibility",i.trendViewVisibility)):(a=new PWC.HmiAC.RECT,a.top=b?b.getAttribute("y"):l,a.left=A?r.left+m.position:o(m.position),a.height=20,a.width=20,b=A?n(a,g):p("text",{displayText:m.displayValue,x:a.left,y:a.top,textDecoration:"inherit"}),y.appendChild(b)),A||(b.textContent.length<=this.labelText.length?s<b.textContent.length&&(t=b.textContent,s=t.length):(t=this.labelText=b.textContent,s=t.length)),g+=i.MinorTickCount,!i.showAllLabels)break}else g++;if(!i.showAllLabels)for(g=q-1;g>=0;){if(m=i.axisTicks[g],m.isMajor){if(f?e+m.position>c:m.position+e<c){g--;continue}z>u?(b=y.childNodes[u++],A?(h=b.childNodes[0],k=b.childNodes[1],b.setAttribute(v,r.left+m.position),b.setAttribute(w,l),h.textContent=m.displayValue[0],h.setAttribute(v,r.left+m.position),h.setAttribute(w,l),k.textContent=m.displayValue[1],k.setAttribute(v,r.left+m.position),k.setAttribute(w,l)):(b.setAttribute(v,o(m.position)),b.setAttribute(w,l),b.textContent=m.displayValue),b.setAttribute("visibility",i.trendViewVisibility)):(a=new PWC.HmiAC.RECT,a.top=b?b.getAttribute("y"):l,a.left=A?r.left+m.position:o(m.position),a.height=20,a.width=20,b=m.displayValue.length>1?n(a,g):p("text",{displayText:m.displayValue,x:a.left,y:a.top,textDecoration:"inherit"}),y.appendChild(b));break}g--}for(!A&&s<this.labelText.length&&(this.labelText=t),g=u;z>g;g++)b=y.childNodes[g],b.setAttribute("visibility","hidden");this.setLabelGroupAttributes(y)}},this.updateLeftRightLabels=function(a){var c,d,e,f,g,h,k,l,m,q,r,s,t,u=i.axisTicks.length,v=this.innerRect,w=0,x=2,y=this.trendView.SVGParent.getElementById(i.id+"_Labels")||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.trendView.SVGParent,"g",i.id+"_Labels"),z=0,A=0,B="",C="x",D="y",E=i.trendView.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&i.axisType===this.trendView.axisTypeEnum.xAxis,F=1.25;
if(y.style.clipPath=j,y){for(a?E?(r=v.left+i.bBoxText.height+i.LabelToMajorTickSpace+i.MajorTickSize,y.setAttribute("text-anchor","middle")):(r=v.left+i.LabelToMajorTickSpace+i.MajorTickSize,y.setAttribute("text-anchor","start")):E?(r=v.left+v.width-i.bBoxText.height*(i.showDate?F:F-1)-i.LabelToMajorTickSpace-i.MajorTickSize,y.setAttribute("text-anchor","middle")):(r=v.left+v.width-i.LabelToMajorTickSpace-i.MajorTickSize,y.setAttribute("text-anchor","end")),t=v.top,i.autoPrecision||(x=i.decimalPrecision),z=y.childElementCount,i.axisType===this.trendView.axisTypeEnum.xAxis&&this.trendView.textOrientation===PWC.HmiAC.TextOrientation.FromBottom?(e=t+v.height,f=t,h=!0):(f=t+v.height,e=t,h=!1),g=t,q=v.width-(this.MajorTickSize+this.LabelToMajorTickSpace+this.LabelToBorderSpace+this.trendView.getLineWidth()),k=0;u>k;)if(s=i.axisTicks[k],s.isMajor){if(!i.showAllLabels&&(h?s.position+g<f:g+s.position>f)){k++;continue}if(z>w?(d=y.childNodes[w++],E?(l=d.childNodes[0],m=d.childNodes[1],d.setAttribute(C,r+s.position),d.setAttribute(D,t),d.setAttribute("transform","rotate(-90,"+d.getAttribute("x")+","+(t+s.position)+")"),l.textContent=s.displayValue[0],l.setAttribute(C,r+s.position),l.setAttribute(D,t),m.textContent=s.displayValue[1],m.setAttribute(C,r+s.position),m.setAttribute(D,t)):(d.textContent=s.displayValue,d.setAttribute(D,o(s.position)),d.setAttribute(C,r)),d.setAttribute("visibility",i.trendViewVisibility)):(c=new PWC.HmiAC.RECT,c.left=d?d.getAttribute("x"):r,c.top=E?t+s.position:o(s.position),c.height=20,c.width=20,d=E?n(c,k):p("text",{displayText:s.displayValue,x:c.left,y:c.top,textDecoration:"inherit"}),y.appendChild(d)),!E)if(d.textContent.length<=this.labelText.length)A<d.textContent.length&&(B=d.textContent,A=B.length);else if(B=this.labelText=d.textContent,A=B.length,this.getLabelTextWidth(this.labelText)>q)return this.trendView.update(),!1;if(k+=i.MinorTickCount,!i.showAllLabels)break}else k++;if(!i.showAllLabels)for(k=u-1;k>=0;){if(s=s,s.isMajor){if(h?s.position+g>e:g+s.position<e){k--;continue}if(z>w?(d=y.childNodes[w++],E?(l=d.childNodes[0],m=d.childNodes[1],d.setAttribute(C,r+s.position),d.setAttribute(D,t),b||d.setAttribute("transform","rotate(-90,"+d.getAttribute("x")+","+(t+s.position)+")"),l.textContent=s.displayValue[0],l.setAttribute(C,r+s.position),l.setAttribute(D,t),m.textContent=s.displayValue[1],m.setAttribute(C,r+s.position),m.setAttribute(D,t)):(d.setAttribute(D,o(s.position)),d.setAttribute(C,r),d.textContent=s.displayValue,d.setAttribute("visibility",i.trendViewVisibility))):(c=new PWC.HmiAC.RECT,c.left=d?d.getAttribute("x"):r,c.top=o(s.position),c.height=20,c.width=20,d=E?n(c,k):p("text",{displayText:s.displayValue,x:c.left,y:c.top,textDecoration:"inherit"})),!E)if(d.textContent.length<=this.labelText.length)A<d.textContent.length&&(B=d.textContent,A=B.length),y.appendChild(d);else if(B=this.labelText=d.textContent,A=B.length,this.getLabelTextWidth(this.labelText)>q)return this.trendView.update(),!1;break}k--}if(!E&&A<this.labelText.length)return this.labelText=B,this.trendView.update(),!1;for(k=w;z>k;k++)d=y.childNodes[k],d.setAttribute("visibility","hidden");this.setLabelGroupAttributes(y)}},this.setLabelGroupAttributes=function(a){a.setAttribute("stroke-width",0),a.setAttribute("font-weight",i.trendView.trendViewFont.fontStyle[0]),a.setAttribute("font-family",i.trendView.trendViewFont.fontName),a.setAttribute("font-style",i.trendView.trendViewFont.fontStyle[1]),a.style.textDecoration=i.trendView.trendViewFont.fontStyle[2],a.setAttribute("font-size",i.trendView.trendViewFont.fontSize),a.setAttribute("class","fontClass"),d.insertBefore(a,c)},this.setAxisColor=function(){var a,b,c=this.trendView.getDrawableTrendCount();if(this.inTrendColor){for(e=null,a=0;c>a;a++)if(b=this.trendView.getDrawableTrend(a),b.visibility&&(b.getYAxis()===this.name||b.getXAxis()===this.name)){e=b.color;break}e||(e=this.color)}},this.pixelRangeToValueRange=function(a){var b=this.getValueFromPosition(0),c=this.getValueFromPosition(a);return Math.abs(c-b)},this.calculateLabelSize=function(){var a,c,d,e,h;f=g=this.getLabelTextWidth("0000000"),e={FontSize:i.trendView.trendViewFont.fontSize,FontItalic:i.trendView.trendViewFont.fontItalic,FontBold:i.trendView.trendViewFont.fontBold,FontName:i.trendView.trendViewFont.fontName,FontUnderline:i.trendView.trendViewFont.fontUnderline,FontStrikeOut:i.trendView.trendViewFont.fontStrikeOut},a="string"==typeof this.labelText?this.labelText:this.labelText[0],d=PWC.Lib.Canvas.Svg.getTextBBox(e,a),i.bBoxText={x:d.x,y:d.y,width:d.width,height:d.height},i.Label=i.Label.split(" ").join(" "),b&&i.axisType===i.trendView.axisTypeEnum.yAxis&&i.Label.trim().length>0&&(d=PWC.Lib.Canvas.Svg.getTextBBox(e,i.Label?i.Label:""),c={x:d.x,y:d.y,width:d.width,height:d.height},c.width+=k,c.height+=l,f=f<=i.bBoxText.width?i.bBoxText.width:g,c.width=c.width<=f?c.width:f,i.bBoxText.width=i.bBoxText.width>=c.width?i.bBoxText.width:c.width,h=f-(this.trendView.getLineWidth()+this.MajorTickSize+this.LabelToMajorTickSpace+this.LabelToBorderSpace),i.bBoxText.width>=h?i.bBoxText.width=i.labelWidth=f:i.labelWidth=i.bBoxText.width,i.labelHeight=c.height)},this.getLabelTextWidth=function(a){var b,c;return c={FontSize:i.trendView.trendViewFont.fontSize,FontItalic:i.trendView.trendViewFont.fontItalic,FontBold:i.trendView.trendViewFont.fontBold,FontName:i.trendView.trendViewFont.fontName,FontUnderline:i.trendView.trendViewFont.fontUnderline,FontStrikeOut:i.trendView.trendViewFont.fontStrikeOut},b=PWC.Lib.Canvas.Svg.getTextBBox(c,a),b.width},this.truncateLabel=function(a,b){var c,d,e,f,g,h,i,j,m="...";if(j={FontSize:this.trendView.trendViewFont.fontSize,FontItalic:this.trendView.trendViewFont.fontItalic,FontBold:this.trendView.trendViewFont.fontBold,FontName:this.trendView.trendViewFont.fontName,FontUnderline:this.trendView.trendViewFont.fontUnderline,FontStrikeOut:this.trendView.trendViewFont.fontStrikeOut},c=PWC.Lib.Canvas.Svg.getTextBBox(j,m).width,d=a,i=PWC.Lib.Canvas.Svg.getTextBBox(j,d),i.width>b)if(g=i.width/a.length,h=b-c,f=h/g,d=a.substring(0,f),i.width>h){do if(d=d.substring(0,d.length-1),0===d.length)break;while(PWC.Lib.Canvas.Svg.getTextBBox(j,d).width>h);d+=m}else if(i.width<h){e=d.length+1;do if(d=a.substring(0,e),e++,PWC.Lib.Canvas.Svg.getTextBBox(j,d).width>h){d=d.substring(0,d.length-1);break}while(PWC.Lib.Canvas.Svg.getTextBBox(j,d).width<h);d+=m}return i=PWC.Lib.Canvas.Svg.getTextBBox(j,d),this.labelWidth=b+k,this.labelHeight=i.height+l,d},this.OnUpdate=function(a,c,d){var f,g,h,j,k,l=PWC.HmiAC.AxisPropId,m=this.trendView.SVGParent,n=i.color,o=PWC.Lib.Canvas.Converters,p=o.enumConverter.Color,q=PWC.HmiAC.Common.HelperUtil;switch(a){case l.Name:return(g=this.trendView.getXAxisByName(c))||(g=this.trendView.getYAxisByName(c)),g;case l.Alignment:d?(this.align=b?c:c===this.trendView.alignmentEnum.Top?this.trendView.alignmentEnum.Right:c===this.trendView.alignmentEnum.Left?this.trendView.alignmentEnum.Bottom:c===this.trendView.alignmentEnum.Right?this.trendView.alignmentEnum.Top:this.trendView.alignmentEnum.Left,c=this.align===this.trendView.alignmentEnum.Right?1:this.align===this.trendView.alignmentEnum.Left?0:b^this.align===this.trendView.alignmentEnum.Bottom):this.align=b?i.axisType===this.trendView.axisTypeEnum.xAxis?c?this.trendView.alignmentEnum.Top:this.trendView.alignmentEnum.Bottom:c?this.trendView.alignmentEnum.Right:this.trendView.alignmentEnum.Left:i.axisType===this.trendView.axisTypeEnum.xAxis?c?this.trendView.alignmentEnum.Right:this.trendView.alignmentEnum.Left:c?this.trendView.alignmentEnum.Bottom:this.trendView.alignmentEnum.Top,this.setPropPart("Alignment",c,d),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case l.Visible:this.visible=c,c?this.setPropPart("Visible",1,d):(this.setPropPart("Visible",0,d),this.trendView.allAreasDrawn===!1&&this.axisType===this.trendView.axisTypeEnum.xAxis&&(PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection=!0)),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case l.Color:d?(j=c,k=q.hexStrToDecColor(c)):(j=o.convertTo(p,c),k=c),this.color=j,this.setPropPart("Color",k,d),this.inTrendColor||(g=m.getElementById(i.id+"_group"))&&(g.setAttribute("stroke",this.color),g.setAttribute("fill",this.color));break;case l.InTrendColor:this.inTrendColor=c,c?this.setPropPart("InTrendColor",1,d):this.setPropPart("InTrendColor",0,d),this.inTrendColor?(this.setAxisColor(),n=e):n=this.color,(g=m.getElementById(i.id+"_group"))&&(g.setAttribute("stroke",n),g.setAttribute("fill",n));break;case l.Actualize:this.actualize=c;break;case l.ShowAllLabels:this.showAllLabels=c,c?this.setPropPart("ShowAllLabels",1,d):this.setPropPart("ShowAllLabels",0,d),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case l.ShowLabels:f=i.id+"_Labels",this.showLabels=c,c?this.setPropPart("ShowLabels",1,d):this.setPropPart("ShowLabels",0,d),h=this.trendView.SVGParent.getElementById(f),this.showLabels?h?h.setAttribute("visibility",i.trendViewVisibility):PWC.HmiAC.PostPropertyUpdate.Redraw=!0:h&&h.setAttribute("visibility","hidden");break;case l.FineGrid:this.FineGrid=c,c?this.setPropPart("FineGrid",1,d):this.setPropPart("FineGrid",0,d),f=this.trendView.SVGParent.getElementById(i.id+"_Ticks"),f&&f.parentNode.removeChild(f),this.visible&&this.trendWindowDrawable&&this.drawTicks();break;case l.CoarseGrid:this.CoarseGrid=c,c?this.setPropPart("CoarseGrid",1,d):this.setPropPart("CoarseGrid",0,d),f=this.trendView.SVGParent.getElementById(i.id+"_Ticks"),f&&f.parentNode.removeChild(f),this.visible&&this.trendWindowDrawable&&this.drawTicks();break;case l.TrendWindow:this.setPropPart("TrendWindow",c),this.trendWindow=c,this.setTrendWindowDrawability(),PWC.HmiAC.PostPropertyUpdate.Redraw=!0,this.trendView.updateRelatedTrends(this.axisType,this.name);break;default:return this.UpdateProperty(a,c,d)}},this.cleanUp=function(){if(h&&h.destroy(),d)for(;d.lastChild;)d.removeChild(d.lastChild);this.rect=this.axisTicks=this.innerRect=this.trendView=this.trendIndicatorGroup=this.svgParent=this.trendIndicatorClipRect=this.bBoxText=this.labelText=this.propAxis=this.trendIndicatorRect=i.Hammer=h=c=d=i=null}},PWC.HmiAC.Axis.prototype={TrendView:null,AxisType:0,MajorTickSize:5,MinorTickSize:3,MinorTickCount:0,MinimumLabelSpace:10,LabelToMajorTickSpace:4,LabelToBorderSpace:10,axisTicks:[],rect:null,svgParent:null};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ValueAxisBase=function(){"use strict";PWC.HmiAC.ValueAxisBase.baseCtor.call(this);var a,b={},c=0,d=0,e=PWC.HmiAC.Tick,f=1,g=3,h=1.6,i=this;this.zoomInOutCount=0,this.minTickThreshold=5,this.minimumLabelHeight=0,this.majorTickThreshold=30,this.maxAllowedValue=1e307,this.minAllowedValue=1e-307,this.getLogValue=null,this.getPowValue=null,this.calculateAxisMoveEndValues=null,this.getPositionFromValue=null,this.getValueFromPosition=null,this.calculateTicks=null,this.zoomInOut=function(a,b){var c,d,e,h,i=PWC.HmiAC.FloatMath,j=this.getValueFromPosition(a),k=!0;if(this.scalingType>=PWC.HmiAC.ScalingType.Logarithmic&&(this.currentBeginValue=this.getLogValue(this.currentBeginValue),this.currentEndValue=this.getLogValue(this.currentEndValue),j=this.getLogValue(j),this.zoomInOutCount>0&&(this.startValueBuffer=this.getLogValue(this.startValueBuffer),this.endValueBuffer=this.getLogValue(this.endValueBuffer))),c=i.floatSub(this.currentEndValue,this.currentBeginValue),b===f)c.trimNum(6,null)<=5e-6?k=!1:(1e-5>c&&(c=1e-5),d=c/4,0===this.zoomInOutCount&&(this.startValueBuffer=this.currentBeginValue,this.endValueBuffer=this.currentEndValue,this.labelTextBuffer=this.labelText,this.zoomInOutCount++,this.trendView.enableDisableOriginalView(),this.zoomInOutCount--),h=i.floatSub(j,d),e=i.floatAdd(j,d),h<this.startValueBuffer?(this.currentBeginValue=this.startValueBuffer,this.currentEndValue=i.floatAdd(this.currentBeginValue,2*d)):e>this.endValueBuffer?(this.currentEndValue=this.endValueBuffer,this.currentBeginValue=i.floatSub(this.currentEndValue,2*d)):(this.currentBeginValue=h,this.currentEndValue=e),this.zoomInOutCount++);else if(b===g)switch(d=c,this.zoomInOutCount){case 1:this.currentBeginValue=this.startValueBuffer,this.currentEndValue=this.endValueBuffer,this.zoomInOutCount--,this.trendView.enableDisableOriginalView();break;case 0:k=!1;break;default:h=i.floatSub(j,d),e=i.floatAdd(j,d),h<this.startValueBuffer?(this.currentBeginValue=this.startValueBuffer,this.currentEndValue=i.floatAdd(this.currentBeginValue,2*d)):e>this.endValueBuffer?(this.currentEndValue=this.endValueBuffer,this.currentBeginValue=i.floatSub(this.currentEndValue,2*d)):(this.currentBeginValue=h,this.currentEndValue=e),this.zoomInOutCount--}return this.scalingType>=PWC.HmiAC.ScalingType.Logarithmic&&(this.currentBeginValue=this.getPowValue(this.currentBeginValue),this.currentEndValue=this.getPowValue(this.currentEndValue),this.zoomInOutCount>0&&(this.startValueBuffer=this.getPowValue(this.startValueBuffer),this.endValueBuffer=this.getPowValue(this.endValueBuffer))),k&&this.visible&&(this.calculateGrid(),this.updateTicks(),this.showLabels&&this.updateLabels()),k},this.zoomArea=function(a,b){var c,d=PWC.HmiAC.FloatMath,e=this.getValueFromPosition(a),f=this.getValueFromPosition(b),g=d.floatSub(f,e),h=!0;if(g.trimNum(6,null)<=5e-6||e===this.currentBeginValue&&f===this.currentEndValue)h=!1;else{0===this.zoomInOutCount&&(this.startValueBuffer=this.currentBeginValue,this.endValueBuffer=this.currentEndValue,this.labelTextBuffer=this.labelText,this.zoomInOutCount++,this.trendView.enableDisableOriginalView()),c=d.floatSub(this.endValueBuffer,this.startValueBuffer),this.zoomInOutCount=0;do this.zoomInOutCount++,c/=2;while(c>g);this.currentBeginValue=e,this.currentEndValue=f,this.visible&&(this.calculateGrid(),this.updateTicks(),this.showLabels&&this.updateLabels())}return h},this.zoomByScale=function(a,b){var c,d,e,f,g,h,i=PWC.HmiAC.FloatMath,j=i.floatSub(this.currentEndValue,this.currentBeginValue),k=this.getValueFromPosition(a),l=j/b,m=!0;if(b>1?l.trimNum(6,null)<=5e-6?m=!1:(0===this.zoomInOutCount&&(this.startValueBuffer=this.currentBeginValue,this.endValueBuffer=this.currentEndValue,this.labelTextBuffer=this.labelText,this.zoomInOutCount++,this.trendView.enableDisableOriginalView()),d=this.currentBeginValue,e=this.currentEndValue):0===this.zoomInOutCount||1===b?m=!1:(d=this.startValueBuffer,e=this.endValueBuffer),m){if(c=i.floatSub(this.endValueBuffer,this.startValueBuffer),this.zoomInOutCount=0,l>=c)this.currentBeginValue=this.startValueBuffer,this.currentEndValue=this.endValueBuffer,this.startValueBuffer=null,this.endValueBuffer=null,this.trendView.enableDisableOriginalView();else{do this.zoomInOutCount++,c/=2;while(c>l);f=l/2,g=i.floatSub(k,f),h=i.floatAdd(k,f),d>g?(this.currentBeginValue=d,this.currentEndValue=i.floatAdd(this.currentBeginValue,2*f)):h>e?(this.currentEndValue=e,this.currentBeginValue=i.floatSub(this.currentEndValue,2*f)):(this.currentBeginValue=g,this.currentEndValue=h)}this.visible&&(this.calculateGrid(),this.trendWindowDrawable&&(this.updateTicks(),this.showLabels&&this.updateLabels()))}return m},this.onPan=function(a){a.preventDefault();var e,f,g,h,j,k=i.trendView.getDrawableTrendWindowByName(i.trendWindow),l=!0,m=null,n=null,o=[];if(i.trendView.showRelativeAxis?(o=k.getYAxes(),o.push(k.relativeAxis)):o.push(i),j=o.length,a.eventType===i.Hammer.INPUT_MOVE){switch(f=i.getPos(a),c=a.deltaX-c,d=a.deltaY-d,b.x=f.x-c,b.y=f.y-d,c=a.deltaX,d=a.deltaY,i.axisType){case i.trendView.axisTypeEnum.xAxis:e=i.isLeftOrRight?i.getValueFromPosition(f.x)-i.getValueFromPosition(b.x):i.getValueFromPosition(f.y)-i.getValueFromPosition(b.y),i.currentEndValue=i.currentEndValue-e,i.currentBeginValue=i.currentBeginValue-e,i.zoomInOutCount>0&&(i.endValueBuffer=i.endValueBuffer-e,i.startValueBuffer=i.startValueBuffer-e),g=i.name,i.calculateGrid(),i.updateTicks(),i.showLabels&&i.updateLabels();break;case i.trendView.axisTypeEnum.yAxis:for(i.trendView.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(l=!1),m=i.name,h=0;j>h;h++)n=o[h],i.isLeftOrRight?n.calculateAxisMoveEndValues(f.y,b.y):n.calculateAxisMoveEndValues(f.x,b.x),n.invalidated=!0,n.calculateGrid(),n.updateTicks(),n.showLabels&&n.updateLabels()}k.reDraw(g,m),i.trendView.rulerControl&&(i.trendView.showRuler||i.trendView.showStatisticRuler)&&l&&i.trendView.calculateRulerData()}else c=0,d=0},this.setAxisAlignment=function(b,c){a=b,this.isLeftOrRight=c,this.setBaseAxisAlignment(b,c)},this.getLinearPositionFromValue=function(a){var b,c,d,e,f,g=i.currentBeginValue,h=i.currentEndValue,j=PWC.HmiAC.TextOrientation,k=h-g,l=a,m=0,n=this.innerRect;switch(i.axisType){case this.trendView.axisTypeEnum.xAxis:b=this.isLeftOrRight?n.width:n.height;break;case this.trendView.axisTypeEnum.yAxis:b=this.isLeftOrRight?n.height:n.width}return c=b-m,d=c/k,i.axisType===this.trendView.axisTypeEnum.yAxis&&this.isLeftOrRight||i.axisType===this.trendView.axisTypeEnum.xAxis&&(this.trendView.textOrientation===j.FromTop||this.trendView.textOrientation===j.FromLeft)?(e=b+d*g,f=e-d*l):(e=b-d*h,f=d*l+e),f},this.getLinearValueFromPosition=function(b){var c,d,e,f,g,h=0,j=PWC.HmiAC.TextOrientation,k=i.currentBeginValue,l=i.currentEndValue,m=l-k,n=this.innerRect;switch(i.align){case a.Top:case a.Bottom:c=n.width;break;case a.Left:case a.Right:c=n.height}return d=c-h,e=m/d,i.axisType===this.trendView.axisTypeEnum.yAxis&&this.isLeftOrRight||i.axisType===this.trendView.axisTypeEnum.xAxis&&(this.trendView.textOrientation===j.FromRight||this.trendView.textOrientation===j.FromBottom)?(f=l-e*c,g=e*b+f):(f=l+e*h,g=f-PWC.HmiAC.FloatMath.floatMul(e,b)),g},this.calculateGrid=function(){i.calculateLabelSize();var b,c,d,e,f,g,j;switch(i.align){case a.Top:case a.Bottom:f=parseInt(i.innerRect.width/i.bBoxText.width,10),g=parseInt(i.innerRect.width/(i.bBoxText.width*h),10),d=(h-.9)*i.bBoxText.width,b=i.bBoxText.width;break;case a.Left:case a.Right:d=b=i.bBoxText.height}e=b+d,j=i.pixelRangeToValueRange(e),c=PWC.HmiAC.ValueAxisBase.getGridInfo(j),i.invalidated=!0,i.axisTicks=i.calculateTicks(c)},this.getExponentialTicks=function(a,b){var c,d,f,g,h,j,k=i,l=a.getMajor(!0),m=a.getMinor(!0),n=0,o=null,p=null,q=[],r=!1,s=1,t=1,u=0,v=k.currentEndValue.toString().indexOf(".")>-1?!0:!1,w=k.currentBeginValue.toString().indexOf(".")>-1?!0:!1,x=12,y=1,z=0,A=0;for(u=k.currentBeginValue/l,m>0&&l>m&&(n=parseInt(l/m,10),b&&--n),i.MinorTickCount=n+1,c=k.currentBeginValue;!r;){if(c>k.currentEndValue){r=!0;break}if(d=this.getPositionFromValue(c),o=new e(d,!0,c),q.push(o),h=b?c+l:+c.toPrecision(s)+ +l.toPrecision(s),v||w){if(h=PWC.HmiAC.FloatMath.floatAdd(c,l),z=h.toString().indexOf(".")>-1?h.toString().split(".")[1].split("e")[0]:null,A=c.toString().indexOf(".")>-1?c.toString().split(".")[1].split("e")[0]:null,null!=z&&null!=A&&h.toString().charAt(0)===c.toString().charAt(0))for(var B=0;B<z.length&&z.charAt(B)===A.charAt(B);B++)y+=1;t=y>t?y:t,y=1}c+=l}for(q=[],c=k.axisBeginValue,k.axisBeginValue>k.currentBeginValue&&(c=k.axisBeginValue-l*Math.ceil((k.axisBeginValue-k.currentBeginValue)/l)),l=l,(-1===k.axisEndValue.toString().indexOf(".")||-1===k.axisBeginValue.toString().indexOf("."))&&(l=+PWC.HmiAC.Common.HelperUtil.getExponentNotation(l.toString(),0,1)),r=!1;!r;){if(c>k.currentEndValue){r=!0;break}if(j=-1===k.currentEndValue.toString().indexOf("e")&&-1===k.currentBeginValue.toString().indexOf("e")?i.getDisplayValue(c,0,t,l):PWC.HmiAC.Common.HelperUtil.getExponentNotation(c.toString(),0,t>x?1:t),d=this.getPositionFromValue(c),o=new e(d,!0,c),o.displayValue=j,q.push(o),n>0)for(f=c,g=0;n>g;++g)f=PWC.HmiAC.FloatMath.floatAdd(f,m),d=this.getPositionFromValue(f),p=new e(d,!1,f),p.value=f,q.push(p);c+=l}return q},this.calculateLinearTicks=function(b){var c,d,f,g,h,j,k=b.getMajor(i.autoPrecision),l=b.getMinor(i.autoPrecision),m=0,n=null,o=null,p=[],q=!1,r=0,s=i.currentBeginValue/k,t=1e307,u=-1e307;if(PWC.HmiAC.Common.HelperUtil.setMaxDecimalandPowerLength(15,3),!(i.currentEndValue>t||i.currentBeginValue<u)){if(i.currentEndValue.toString().indexOf("e")>-1||i.currentBeginValue.toString().indexOf("e")>-1)return i.getExponentialTicks(b,!0);for(l>0&&k>l&&(m=parseInt(k/l,10),--m),i.MinorTickCount=m+1,!this.autoPrecision&&k<Math.pow(10,0-i.decimalPrecision)&&(r=1),s=Math.floor(s),c=PWC.HmiAC.FloatMath.floatMul(s,k),this.autoPrecision?(k=k.toString(),j=(h=k.indexOf("."))>-1?k.length-h-1:(h=k.indexOf("e"))>-1?k.substring(h+2,k.length):9):j=i.decimalPrecision;!q;){if(c>i.currentEndValue&&(q=!0),d=this.getPositionFromValue(c),n=new e(d,!0,c),n.displayValue=i.getDisplayValue(c,r,j,k),(this.align===a.Top||this.align===a.Bottom)&&n.displayValue.length>this.labelText.length)return this.labelText=n.displayValue,this.calculateGrid(),i.axisTicks;if(p.push(n),m>0)for(f=c,g=0;m>g;++g)f=PWC.HmiAC.FloatMath.floatAdd(f,l),d=i.getPositionFromValue(f),o=new e(d,!1),p.push(o);c=PWC.HmiAC.FloatMath.floatAdd(c,k),c>k/2*-1&&k/2>c&&(c=0)}return p}},this.calculateLinearAxisMoveEndValues=function(a,b){var c,d=1e307,e=-1e307;c=this.getValueFromPosition(a)-this.getValueFromPosition(b),this.currentEndValue-c<d&&this.currentBeginValue-c>e&&(this.currentEndValue=this.currentEndValue+c,this.currentBeginValue=this.currentBeginValue+c,this.zoomInOutCount>0&&(null===this.endValueBuffer2&&(this.endValueBuffer2=this.endValueBuffer,this.startValueBuffer2=this.startValueBuffer),this.endValueBuffer=this.endValueBuffer+c,this.startValueBuffer=this.startValueBuffer+c))}},PWC.HmiAC.ValueAxisBase.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.ValueAxisBase,PWC.HmiAC.Axis);var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ValueAxisBase=PWC.HmiAC.ValueAxisBase||{},PWC.HmiAC.ValueAxisBase.getGridInfo=function(a){for(var b,c,d=1,e=parseFloat(a),f=PWC.HmiAC.ValueAxisBase.StepInfo.StepInfo,g=f.length;(1>e||e>=10)&&(1>e?(e=10*e,d/=10):(e/=10,d=10*d),0!==e&&0!==d););for(c=0;g>c;++c)if(e<f[c].x){b=f[c];break}return new PWC.HmiAC.TrendWindowGrid(b,d)},PWC.HmiAC.ValueAxisBase.StepInfo={StepInfo:[{x:"2.0",y:"0.5"},{x:"2.5",y:"0.5"},{x:"5.0",y:"1"},{x:"10",y:"2"}]},PWC.HmiAC.TrendWindowGrid=function(a,b){var c=function(a,b){var c,d,e;return b||(c=a=a.toString(),a.indexOf(".")>-1||a.indexOf("e")>-1?a.indexOf("e")>-1?(a=parseFloat(a).toFixed(20),d=a.match(/[1-9]/),null!==d?(e=a.indexOf(d),a=parseFloat(a.substring(0,e+1)),a=parseFloat(a)):a=parseFloat(c)):a.indexOf(".")>-1&&(d=a.match(/[1-9]/),e=a.indexOf(d),a=parseFloat(a.substring(0,e+1)),a=parseFloat(a)):a=parseInt(a,10)),a};this.stepInfo=a,this.normFactor=b,this.getMajor=function(a){var b;return b=PWC.HmiAC.FloatMath.floatMul(this.stepInfo.x,this.normFactor),c(b,a)},this.getMinor=function(a){var b;return b=PWC.HmiAC.FloatMath.floatMul(this.stepInfo.y,this.normFactor),c(b,a)}},PWC.HmiAC.FloatMath={floatAdd:function(a,b){var c,d,e=0,f=0,g=0;return a=a.toString(),b=b.toString(),(c=a.indexOf("."))>-1&&(f=a.length-c-1),(c=b.indexOf("."))>-1&&(g=b.length-c-1),e=f>g?f:g,d=this.floatMul(parseFloat(a),Math.pow(10,e))+this.floatMul(parseFloat(b),Math.pow(10,e)),d/=Math.pow(10,e)},floatSub:function(a,b){var c,d,e=0,f=0,g=0;return a=a.toString(),b=b.toString(),(c=a.indexOf("."))>-1&&(f=a.length-c-1),(c=b.indexOf("."))>-1&&(g=b.length-c-1),e=f>g?f:g,d=this.floatMul(parseFloat(a),Math.pow(10,e))-this.floatMul(parseFloat(b),Math.pow(10,e)),d/=Math.pow(10,e)},calcMethod:function(a){var b,c,d,e=0,f=a.number.toString();return(f.indexOf(".")>-1||f.indexOf("e")>-1)&&(d=f,(c=f.indexOf("e"))>-1&&(e=f.substring(c+1,d.length),f=f.substring(0,c),d=f),(b=f.indexOf("."))>-1&&(f=f.substring(0,b),d=d.substring(b+1,d.length),f+=d,a.exp=f.length-b,f=+f)),a.number=f,a.eNum=parseInt(e,10),a.eNum<0?(a.eNum*=-1,a.denominator*=Math.pow(10,a.eNum)):a.numerator*=Math.pow(10,a.eNum),a},floatMul:function(a,b){var c,d={},e={};return a=a.toString(),b=b.toString(),a.indexOf("e")===a.indexOf(".")===b.indexOf("e")===b.indexOf(".")===-1?c=parseInt(a,10)*parseInt(b,10):(d.number=a.toString(),d.exp=0,d.eNum=0,d.denominator=1,d.numerator=1,e.number=b.toString(),e.exp=0,e.eNum=0,e.denominator=1,e.numerator=1,d=this.calcMethod(d),e=this.calcMethod(e),c=parseInt(d.number,10)*parseInt(e.number,10)*d.numerator*e.numerator/(Math.pow(10,d.exp)*Math.pow(10,e.exp)*d.denominator*e.denominator)),c}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ValueAxis=function(){"use strict";PWC.HmiAC.ValueAxis.baseCtor.call(this);var a,b=PWC.HmiAC.Tick,c=this,d=PWC.Lib.Config.Properties;this.setPropPart=function(a,b,e){d.setPropPart(c.propAxis,a,b),e&&this.trendView.screenItem.gfxWebLib.connection.sendPartPropertyByName(this.trendView.screenItem.rtoid,"ValueAxes."+c.partId,a,b,!1,!1)},this.trendIndicatorRect=new PWC.HmiAC.RECT,this.trendIndicatorClipRect=new PWC.HmiAC.RECT,this.trendIndicatorGroup=null,this.drawTrendIndicators=!1,this.setExtremeAxisValues=function(a){var b,d,e,f,g=null,h=null,i=null,j=null,k=c.trendView.getDrawableTrendCount(),l=!1;for(b=0;k>b;b++)d=c.trendView.getDrawableTrend(b),c.axisType===c.trendView.axisTypeEnum.xAxis?d.getXAxis()===c.name&&(i=d.getXStartValue(),j=d.getXEndValue()):d.getYAxis()===c.name&&(i=d.getYStartValue(),j=d.getYEndValue()),(null===g||g>i)&&void 0!==i&&(g=i),j>h&&(h=j),(null===h||j>h)&&void 0!==j&&(h=j),g>i&&(g=i);if(null!==g&&void 0!==g&&null!==h&&void 0!==h){if(g===h&&(g-=.1,h+=.1,g===h&&(g/=2,h+=g,h>=1e307&&(g=1e306,h=1e307))),a){if(c.startValueBuffer!==g||c.endValueBuffer!==h){if(c.startValueBuffer=g,c.endValueBuffer=h,f=h-g,e=c.currentEndValue-c.currentBeginValue,c.zoomInOutCount=0,e>=f)c.currentEndValue=c.endValueBuffer,c.currentBeginValue=c.startValueBuffer;else{c.currentBeginValue<c.startValueBuffer?(c.currentBeginValue=c.startValueBuffer,c.currentEndValue=c.currentBeginValue+e):c.currentEndValue>c.endValueBuffer&&(c.currentEndValue=c.endValueBuffer,c.currentBeginValue=c.currentEndValue-e);do c.zoomInOutCount++,f/=2;while(f>e)}l=!0}}else(c.currentBeginValue!==g||c.currentEndValue!==h)&&(c.currentBeginValue=g,c.currentEndValue=h,l=!0);return l}},this.moveToPerc=null,this.calculateLogAxisMoveEndValues=function(a,b){var c,d,e,f=a-b,g=this.innerRect,h=this.trendView.alignmentEnum;switch(this.align){case h.Top:case h.Bottom:c=g.width;break;case h.Left:case h.Right:c=g.height}this.isLeftOrRight?(d=this.getLogarithmicValueFromPosition(c+f),e=this.getLogarithmicValueFromPosition(f)):(e=this.getLogarithmicValueFromPosition(c+f),d=this.getLogarithmicValueFromPosition(f)),1/0!==d&&1/0!==e&&(this.scalingType===PWC.HmiAC.ScalingType.Logarithmic&&d>=this.minAllowedValue&&d<=this.maxAllowedValue&&e>=this.minAllowedValue&&e<=this.maxAllowedValue||d>=-this.maxAllowedValue&&d<=-this.minAllowedValue&&e>=-this.maxAllowedValue&&e<=-this.minAllowedValue)&&(this.zoomInOutCount>0&&(null===this.endValueBuffer2&&(this.endValueBuffer2=this.endValueBuffer,this.startValueBuffer2=this.startValueBuffer),this.endValueBuffer=this.endValueBuffer/this.currentEndValue*d,this.startValueBuffer=this.startValueBuffer/this.currentBeginValue*e),this.currentBeginValue=e,this.currentEndValue=d)},this.moveToPercLogScale=function(a){var b=this.getLogValue(this.endValueBuffer),c=this.getLogValue(this.startValueBuffer),d=this.getLogValue(this.currentEndValue),e=this.getLogValue(this.currentBeginValue),f=d-e,g=b-c,h=g-f,i=PWC.HmiAC.TextOrientation;switch(this.trendView.textOrientation){case i.FromRight:case i.FromLeft:this.axisType===this.trendView.axisTypeEnum.yAxis?(d=b-h*a,e=d-f):(e=c+h*a,d=e+f);break;case i.FromBottom:case i.FromTop:this.axisType===this.trendView.axisTypeEnum.yAxis?(e=c+h*a,d=e+f):(d=b-h*a,e=d-f)}this.currentBeginValue=this.getPowValue(e),this.currentEndValue=this.getPowValue(d),this.visible&&(this.calculateGrid(),this.updateTicks(),this.showLabels&&this.updateLabels())},this.moveToPercLinearScale=function(a){var b=this.endValueBuffer-this.startValueBuffer,c=this.currentEndValue-this.currentBeginValue,d=b-c,e=PWC.HmiAC.TextOrientation;if(this.axisType===this.trendView.axisTypeEnum.yAxis)switch(this.trendView.textOrientation){case e.FromRight:case e.FromLeft:this.currentEndValue=this.endValueBuffer-d*a,this.currentBeginValue=this.currentEndValue-c;break;case e.FromBottom:case e.FromTop:this.currentBeginValue=this.startValueBuffer+d*a,this.currentEndValue=this.currentBeginValue+c}else switch(this.trendView.textOrientation){case e.FromRight:case e.FromBottom:this.currentBeginValue=this.startValueBuffer+d*a,this.currentEndValue=this.currentBeginValue+c;break;case e.FromLeft:case e.FromTop:this.currentEndValue=this.endValueBuffer-d*a,this.currentBeginValue=this.currentEndValue-c}this.visible&&(this.calculateGrid(),this.updateTicks(),this.showLabels&&this.updateLabels())},this.getNormalizedCount=function(a){return isNaN(a)?-1:a=a>=10?10:a>=5?5:a>=4?4:a>=2?2:1},this.getLogarithmicPositionFromValue=function(a){var b,c,d,e,f,g=this.currentBeginValue||1,h=this.currentEndValue,i=PWC.HmiAC.TextOrientation,j=this.innerRect,k=0;switch(this.axisType){case this.trendView.axisTypeEnum.xAxis:b=this.isLeftOrRight?j.width:j.height;break;case this.trendView.axisTypeEnum.yAxis:b=this.isLeftOrRight?j.height:j.width}return this.scalingType===PWC.HmiAC.ScalingType.Logarithmic&&0>=a?k=this.axisType===this.trendView.axisTypeEnum.yAxis&&this.isLeftOrRight||this.axisType===this.trendView.axisTypeEnum.xAxis&&(this.trendView.textOrientation===i.FromTop||this.trendView.textOrientation===i.FromLeft)?b+100:-100:this.scalingType===PWC.HmiAC.ScalingType.NegativeLogarithmic&&a>=0?k=this.axisType===this.trendView.axisTypeEnum.yAxis&&this.isLeftOrRight||this.axisType===this.trendView.axisTypeEnum.xAxis&&(this.trendView.textOrientation===i.FromTop||this.trendView.textOrientation===i.FromLeft)?-100:b+100:(g=this.getLogValue(g),h=this.getLogValue(h),c=h-g,f=this.getLogValue(a),e=b/c,this.axisType===this.trendView.axisTypeEnum.yAxis&&this.isLeftOrRight||this.axisType===this.trendView.axisTypeEnum.xAxis&&(this.trendView.textOrientation===i.FromTop||this.trendView.textOrientation===i.FromLeft)?(d=b+e*g,k=d-e*f):(d=b-e*h,k=e*f+d)),k},this.getLogarithmicValueFromPosition=function(a){var b,c,d,e,f,g=0,h=PWC.HmiAC.TextOrientation,i=this.getLogValue(this.currentBeginValue),j=this.getLogValue(this.currentEndValue),k=j-i,l=this.trendView.alignmentEnum,m=this.innerRect;switch(this.align){case l.Top:case l.Bottom:b=m.width;break;case l.Left:case l.Right:b=m.height}return c=b-g,d=k/c,this.axisType===this.trendView.axisTypeEnum.yAxis&&this.isLeftOrRight||this.axisType===this.trendView.axisTypeEnum.xAxis&&(this.trendView.textOrientation===h.FromRight||this.trendView.textOrientation===h.FromBottom)?(e=j-d*b,f=d*a+e):(e=j+d*g,f=e-d*a),this.getPowValue(f)},this.getMinorTickCount=function(a,b,c){var d,e,f,g,h,i;return e=b*a,f=b*(a-1),g=this.getLogarithmicPositionFromValue(e),h=this.getLogarithmicPositionFromValue(f),i=PWC.HmiAC.FloatMath.floatSub(h,g),d=Math.abs(i)/c,this.getNormalizedCount(d)},this.calculateLogarithmicTicks=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=[],B=0,C=this.scalingType===PWC.HmiAC.ScalingType.Logarithmic;if(this.MinorTickCount=1,PWC.HmiAC.Common.HelperUtil.setMaxDecimalandPowerLength(15,3),this.axisType===this.trendView.axisTypeEnum.yAxis&&this.isLeftOrRight||this.axisType===this.trendView.axisTypeEnum.xAxis&&!this.isLeftOrRight?(this.minimumLabelHeight=this.bBoxText.height>this.majorTickThreshold?this.bBoxText.height:this.bBoxText.height+this.majorTickThreshold,b=this.innerRect.height):(this.minimumLabelHeight=1.5*this.bBoxText.width,b=this.innerRect.width),m=Math.floor(this.getLogValue(this.currentBeginValue)),n=Math.ceil(this.getLogValue(this.currentEndValue)),n-m===1)return this.axisBeginValue.toString().indexOf(".")>-1||this.axisEndValue.toString().indexOf(".")>-1||this.axisBeginValue.toString().indexOf("e")>-1||this.axisEndValue.toString().indexOf("e")>-1?this.getExponentialTicks(a,!1):this.calculateLogTicksInSingleDecade(this.currentBeginValue,this.currentEndValue,b);if(c=this.getPowValue(m),d=this.getPowValue(n),k=Math.floor(b/this.minimumLabelHeight),e=this.getNormalizedCount(k/(n-m)),n-m>k)for(s=Math.ceil((n-m)/k),x=Math.floor(this.getLogValue(this.axisBeginValue)),x=x>m?x-s*Math.ceil((x-m)/s):x,w=Math.abs((x-n)/s),w=Math.ceil(w),t=this.getLogarithmicPositionFromValue(this.getPowValue(x+1*s)),u=this.getLogarithmicPositionFromValue(this.getPowValue(x+2*s)),v=Math.abs(t-u),h=v/(this.minimumLabelHeight/4),h=this.getNormalizedCount(h),o=0;w>o;o++)for(g=this.getPowValue(Math.ceil(x+s*o)),r=PWC.HmiAC.Common.HelperUtil.getExponentNotation(g.toString(),0,1),l=this.createTickObjectByTickValue(+r,!0),l.displayValue=r,l&&A.push(l),f=x+s*(o+1),i=s/h,q=1;h>q;q++)j=this.getPowValue(x+s*o+i*q),l=this.createTickObjectByTickValue(j,!1),l&&A.push(l);
else for(l=C?this.createTickObjectByTickValue(Math.pow(10,m),!0):this.createTickObjectByTickValue(-Math.pow(10,-n),!0),l&&A.push(l),o=m;n>o;o++)for(f=C?Math.pow(10,o+1)/e:-Math.pow(10,-o)/e,h=this.getMinorTickCount(e,f,this.minTickThreshold),5===e&&5===h&&(h=this.getNormalizedCount(h-1)),i=f/h,p=1;e>=p;p++){for(q=1;h>q;q++)j=C?B+i*q:f-i*q,l=this.createTickObjectByTickValue(j,!1),l&&A.push(l);g=f*p,l=this.createTickObjectByTickValue(g,!0),l&&(z=f.toString(),z.indexOf(".")>-1&&(y=z.split(".")[1],l.displayValue=Number(l.displayValue).toFixed(y.length)),A.push(l)),B=g}return A},this.calculateLogTicksInSingleDecade=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=[],y=PWC.HmiAC.FloatMath;for(q=Math.floor(this.getLogValue(a)),t=Math.ceil(this.getLogValue(b)),c=this.getPowValue(q),d=this.getPowValue(t),u=this.getLogarithmicPositionFromValue(c),v=this.getLogarithmicPositionFromValue(d),w=Math.abs(u-v),h=Math.floor(w/this.minimumLabelHeight),i=d/h,r=c,r/=i,i=r>5?c/10:r>4?c/5:r>2?c/4:r>1?c/2:c,e=d,f=e-i,g=y.floatSub(this.getLogarithmicPositionFromValue(f),this.getLogarithmicPositionFromValue(e)),j=this.getNormalizedCount(g/this.minTickThreshold),k=i/j,o=0,l=c;d>l;){if(m=this.createTickObjectByTickValue(l,!0),null!==m)for(m.displayValue=Number(m.displayValue),x.push(m),p=1;j>=p;p++)n=l+k*p,m=this.createTickObjectByTickValue(n,!1),null!==m&&x.push(m);o++,l=this.scalingType===PWC.HmiAC.ScalingType.Logarithmic?c+i*o:c-i*o}if(i=i.toString(),i.indexOf(".")>-1)for(s=i.split(".")[1],o=0;o<x.length;o++)x[o].isMajor&&(x[o].displayValue=Number(x[o].displayValue).toFixed(s.length));return x},this.createTickObjectByTickValue=function(a,c){var d,e=null,f=16;return d=this.getLogarithmicPositionFromValue(a),isFinite(d)&&(c?(e=new b(d,!0,a),e.displayValue=Math.ceil(this.getLogValue(a))>f?PWC.HmiAC.Common.HelperUtil.getExponentNotation(a.toString(),0,1):a.toString()):e=new b(d,!1)),e},this.init=function(a,b,e){var f,g,h,i,j,k=b.isLeftOrRight,l=PWC.Lib.Canvas.Converters;if(this.propAxis=a,a)for(this.scalingType=d.getPropPart(a,"ValueAxis","ScalingType"),this.scalingType===PWC.HmiAC.ScalingType.Linear?(this.calculateAxisMoveEndValues=this.calculateLinearAxisMoveEndValues,this.moveToPerc=this.moveToPercLinearScale,this.getPositionFromValue=this.getLinearPositionFromValue,this.getValueFromPosition=this.getLinearValueFromPosition,this.calculateTicks=this.calculateLinearTicks):this.scalingType>=PWC.HmiAC.ScalingType.Logarithmic&&(this.scalingType===PWC.HmiAC.ScalingType.Logarithmic?(this.getLogValue=function(a){return Math.log(a)/Math.LN10},this.getPowValue=function(a){return Math.pow(10,a)}):(this.getLogValue=function(a){return-Math.log(-a)/Math.LN10},this.getPowValue=function(a){return-Math.pow(10,-a)}),this.calculateAxisMoveEndValues=this.calculateLogAxisMoveEndValues,this.moveToPerc=this.moveToPercLogScale,this.getPositionFromValue=this.getLogarithmicPositionFromValue,this.getValueFromPosition=this.getLogarithmicValueFromPosition,this.calculateTicks=this.calculateLogarithmicTicks),this.isLeftOrRight=b.isLeftOrRight,this.setAxisAlignment(b.alignmentEnum,this.isLeftOrRight),this.axisType=e,this.trendViewVisibility=b.getVisibility(),this.rect=new PWC.HmiAC.RECT,this.color=d.getPropPart(a,"ValueAxis","Color",l.enumConverter.Color),this.inTrendColor=d.getPropPart(a,"ValueAxis","InTrendColor"),this.Label=d.getPropPart(a,"ValueAxis","DisplayName"),this.labelWidth=0,this.labelHeight=0,this.name=d.getPropPart(a,"ValueAxis","Name"),this.invalidated=!1,this.trendWindow=d.getPropPart(a,"ValueAxis","TrendWindow"),this.visible=1===d.getPropPart(a,"ValueAxis","Visible")?!0:!1,this.trendView=b,this.currentBeginValue=d.getPropPart(a,"ValueAxis","BeginValue"),this.currentEndValue=d.getPropPart(a,"ValueAxis","EndValue"),this.axisBeginValue=this.currentBeginValue,this.axisEndValue=this.currentEndValue,this.id=(c.trendView.getControlName()+"_"+c.trendWindow+"_"+c.name).replace(/\s+/g,"").replace(/\(/g,"_ob_").replace(/\)/g,"_cb_").replace(/\\/g,"_bs_").replace(/\'/g,"_sq_").replace(/\"/g,"_dq_"),b.axisTypeEnum.xAxis===e?(this.align=0===d.getPropPart(a,"ValueAxis","Alignment")?"Bottom":"Top",this.labelId=this.id+"_XAxisLabel"):(this.align=0===d.getPropPart(a,"ValueAxis","Alignment")?k?"Left":"Right":k?"Right":"Left",this.labelId=this.id+"_YAxisLabel",this.trendIndicatorRectClippathId=null),this.showLabels=1===d.getPropPart(a,"ValueAxis","ShowLabels")?!0:!1,this.showAllLabels=1===d.getPropPart(a,"ValueAxis","ShowAllLabels")?!0:!1,this.index=d.getPropPart(a,"ValueAxis","Index"),void 0===a.Index&&0===this.index&&(j=b.axisTypeEnum.xAxis===e?b.getXAxisCount():b.getYAxisCount(),j>0&&(this.index=j)),j=void 0,this.autoRange=1===d.getPropPart(a,"ValueAxis","AutoRange")?!0:!1,this.bBoxText=null,this.autoPrecision=1===d.getPropPart(a,"ValueAxis","AutoDecimalPrecision")?!0:!1,this.exponentialFormat=1===d.getPropPart(a,"ValueAxis","ExponentialFormat")?!0:!1,this.FineGrid=1===d.getPropPart(a,"ValueAxis","FineGrid")?!0:!1,this.CoarseGrid=1===d.getPropPart(a,"ValueAxis","CoarseGrid")?!0:!1,this.trendWindowDrawable=!1,this.zoomInOutCount=0,this.startValueBuffer=null,this.endValueBuffer=null,this.startValueBuffer2=null,this.endValueBuffer2=null,this.decimalPrecision=d.getPropPart(a,"ValueAxis","DecimalPrecision"),f=this.currentBeginValue.toFixed(this.decimalPrecision).toString().length,g=this.currentEndValue.toFixed(this.decimalPrecision).toString().length,this.labelText="0",a.partid&&(this.partId=d.getPropPart(a,"ValueAxis","partid")),this.autoPrecision?h=this.labelText.length:(i=this.currentBeginValue.toFixed(this.decimalPrecision).toString(),(j=i.indexOf("."))>-1&&(f-j-1>this.decimalPrecision?f=j+this.decimalPrecision:f-=1),i=this.currentEndValue.toFixed(this.decimalPrecision).toString(),(j=i.indexOf("."))>-1&&(g-j-1>this.decimalPrecision?g=j+this.decimalPrecision:g-=1),h=g>=f?g:f),j=0;h>j;j++)this.labelText+="0";a=b=e=null},this.invalidate=function(a){return this.autoRange?this.invalidated=this.setExtremeAxisValues(a):(this.invalidated=!1,a?(this.startValueBuffer!==this.axisBeginValue||this.endValueBuffer!==this.axisEndValue)&&(this.startValueBuffer=this.axisBeginValue,this.endValueBuffer=this.axisEndValue,this.invalidated=!0):(this.currentBeginValue!==this.axisBeginValue||this.currentEndValue!==this.axisEndValue)&&(this.currentBeginValue=this.axisBeginValue,this.currentEndValue=this.axisEndValue,this.invalidated=!0)),this.visible&&this.invalidated&&(c.calculateGrid(),c.updateTicks(),c.showLabels&&c.updateLabels()),this.invalidated&&a},this.getNeededDimension=function(){var a=0,b=0;if(this.visible){switch(this.calculateLabelSize(),c.axisType){case this.trendView.axisTypeEnum.xAxis:b=this.isLeftOrRight?c.bBoxText.height:c.bBoxText.width;break;case this.trendView.axisTypeEnum.yAxis:b=this.isLeftOrRight?c.bBoxText.width:c.bBoxText.height}a=this.MajorTickSize+this.LabelToMajorTickSpace+this.trendView.getLineWidth()+this.LabelToBorderSpace+b}return a},this.getDisplayValue=function(a,b,c,d){var e,f,g,h,i,j,k,l=0;if(this.exponentialFormat)e=PWC.HmiAC.Common.HelperUtil.getExponentNotation(a.toString(),this.autoPrecision,this.decimalPrecision);else if(d=d.toString(),c=9>c?c:9,e=parseFloat(a).trimNum(c,null),e=e.toString(),1===b&&e!==a&&(e=""),""!==e&&(d.indexOf(".")>-1||d.indexOf("e")>-1||!this.autoPrecision))if(-1===(g=e.indexOf("e")))for((f=e.indexOf("."))>-1?c=(k=e.substring(f+1,e.length).length)<c?c-k:0:-1===f&&(e+=".");c>0;)e+="0",c--;else{for(h=e.substring(g+2,e.length),j=c-h,e=e.substring(0,g),h=parseInt(h,10),i=e.length,l=h;l>i;l--)e="0"+e;for(e="0."+e;j>0;)e+="0",j--;e=+e+ +a.split("e")[0]}return e},this.setTrendIndicatorPoints=function(b){var c,d,e,f,g,h,i,j,k,l=this.getTrends(),m=l.length,n=0,o=0,p=1,q=8,r=this.trendIndicatorRect;for(void 0!==b&&(a=b),d=0;m>d;d++)c=l[d],o+=c.getWidth();for(this.isLeftOrRight?(e=r.left,g=e+r.width,f=g-r.width/2,h=r.top,n=(r.height-o)/(m-1),i=h+r.height):(e=r.top,g=e+r.height,f=g-r.height/2,n=(r.width-o)/(m-1),h=r.left,i=h+r.width,a&&(p=-1,n*=p,q*=p,i=h,h+=r.width)),d=0;m>d;d++)c=l[d],k=c.getWidth()/2*p,this.visible&&this.drawTrendIndicators&&(!this.isLeftOrRight&&a?(h+=k)>i:(h+=k)<i)?(c.trendIndicatorPoints=this.isLeftOrRight?e+","+h+" "+f+","+h+" "+g+","+h:h+","+e+" "+h+","+f+" "+h+","+g,0===d&&c.fill?(j=h+k+q,c.dummyTrendIndicatorFill=this.isLeftOrRight?e+","+j+" "+c.trendIndicatorPoints+" "+g+","+j:j+","+e+" "+c.trendIndicatorPoints+" "+j+","+g):c.dummyTrendIndicatorFill="",h+=k+n):c.trendIndicatorPoints=""},this.UpdateProperty=function(a,b,c){var d,e,f,g,h=PWC.HmiAC.AxisPropId,i={},j=[],k=[];switch(g=this.trendView.screenItem.gfxWebLib.textbib,a){case h.DecimalPrecision:this.setPropPart("DecimalPrecision",b,c),this.decimalPrecision=b,PWC.HmiAC.PostPropertyUpdate.Update=!0;break;case h.ExponentialNotation:this.setPropPart("ExponentialNotation",b,c),this.exponentialFormat=b,PWC.HmiAC.PostPropertyUpdate.Update=!0;break;case h.AutoDecimalPrecision:b?this.setPropPart("AutoDecimalPrecision",1,c):this.setPropPart("AutoDecimalPrecision",0,c),this.autoPrecision=b,PWC.HmiAC.PostPropertyUpdate.Update=!0;break;case h.AutoRange:if(this.autoRange=b,b)this.setPropPart("AutoRange",1,c),this.setExtremeAxisValues();else{for(this.setPropPart("AutoRange",0,c),this.scalingType===PWC.HmiAC.ScalingType.Logarithmic?this.axisBeginValue<=0&&(this.axisBeginValue=1,this.axisEndValue<=0&&(this.axisEndValue=100)):this.scalingType===PWC.HmiAC.ScalingType.NegativeLogarithmic&&this.axisBeginValue>=0&&(this.axisBeginValue=-100,this.axisEndValue>=0&&(this.axisEndValue=-1)),k=this.getTrends(),e=k.length,f=0;e>f;f++)k[f].resetMinAndMaxValue(this.axisType);this.currentBeginValue=this.axisBeginValue,this.currentEndValue=this.axisEndValue}PWC.HmiAC.PostPropertyUpdate.Update=!0;break;case h.ScalingType:for(c?this.scalingType=PWC.HmiAC.ScalingType[b]:(b>PWC.HmiAC.ScalingType.NegativeLogarithmic&&(b=PWC.HmiAC.ScalingType.Linear),this.scalingType=b),this.scalingType===PWC.HmiAC.ScalingType.Linear?(this.calculateAxisMoveEndValues=this.calculateLinearAxisMoveEndValues,this.moveToPerc=this.moveToPercLinearScale,this.getPositionFromValue=this.getLinearPositionFromValue,this.getValueFromPosition=this.getLinearValueFromPosition,this.calculateTicks=this.calculateLinearTicks):this.scalingType>=PWC.HmiAC.ScalingType.Logarithmic&&(this.scalingType===PWC.HmiAC.ScalingType.Logarithmic?(this.getLogValue=function(a){return Math.log(a)/Math.LN10},this.getPowValue=function(a){return Math.pow(10,a)}):(this.getLogValue=function(a){return-Math.log(-a)/Math.LN10},this.getPowValue=function(a){return-Math.pow(10,-a)}),this.calculateAxisMoveEndValues=this.calculateLogAxisMoveEndValues,this.moveToPerc=this.moveToPercLogScale,this.getPositionFromValue=this.getLogarithmicPositionFromValue,this.getValueFromPosition=this.getLogarithmicValueFromPosition,this.calculateTicks=this.calculateLogarithmicTicks,this.scalingType===PWC.HmiAC.ScalingType.Logarithmic?(this.axisBeginValue<=0&&(this.axisBeginValue=1,this.axisEndValue<=this.axisBeginValue&&(this.axisEndValue=100)),this.currentBeginValue<=0&&(this.currentBeginValue=1,this.currentEndValue<=this.currentBeginValue&&(this.currentEndValue=100))):this.scalingType===PWC.HmiAC.ScalingType.NegativeLogarithmic&&(this.axisEndValue>=0&&(this.axisEndValue=-1,this.axisEndValue<=this.axisBeginValue&&(this.axisBeginValue=-100)),this.currentEndValue>=0&&(this.currentEndValue=-1,this.currentEndValue<=this.currentBeginValue&&(this.currentBeginValue=-100)))),k=this.getTrends(),e=k.length,f=0;e>f;f++)k[f].resetMinAndMaxValue(this.axisType);this.setPropPart("ScalingType",this.scalingType,c),PWC.HmiAC.PostPropertyUpdate.Update=!0;break;case h.BeginValue:this.axisBeginValue=Number(b),this.setPropPart("BeginValue",this.axisBeginValue,c),this.autoRange||(this.currentBeginValue=this.axisBeginValue,PWC.HmiAC.PostPropertyUpdate.Update=!0);break;case h.EndValue:this.axisEndValue=Number(b),this.setPropPart("EndValue",this.axisEndValue,c),this.autoRange||(this.currentEndValue=this.axisEndValue,PWC.HmiAC.PostPropertyUpdate.Update=!0);break;case h.DisplayName:if(0===b&&(b="",d=this.trendView.SVGParent.getElementById(this.labelId),d&&d.parentNode.removeChild(d)),this.setPropPart("DisplayName",b,c),this.Label=b,PWC.HmiAC.PostPropertyUpdate.Redraw=!0,this.trendView.rulerControl&&(this.trendView.showRuler||this.trendView.showStatisticRuler)){for(k=this.getTrends(!0),e=k.length,f=0;e>f;f++)j.push(k[f].name);i.source=PWC.HmiAC.RulerControlColumns.LabelY,i.value=b,this.trendView.rulerControl.updateCell(j,i)}}}},PWC.HmiAC.ValueAxis.prototype={},Number.prototype.trimNum=function(a,b){b=b||"round";var c=parseFloat(this),d=Math.pow(10,a);return Number(Math[b](c*d)/d)},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.ValueAxis,PWC.HmiAC.ValueAxisBase),PWC.HmiAC.FloatMath={floatAdd:function(a,b){var c,d,e=0,f=0,g=0;return a.toString().indexOf("e")>-1&&b.toString().indexOf("e")>-1?d=a+b:0===a?d=b:0===b?d=a:(a=a.toString(),b=b.toString(),(c=a.indexOf("."))>-1&&(f=a.length-c-1),(c=b.indexOf("."))>-1&&(g=b.length-c-1),e=f>g?f:g,d=this.floatMul(parseFloat(a),Math.pow(10,e))+this.floatMul(parseFloat(b),Math.pow(10,e)),d/=Math.pow(10,e)),d},floatSub:function(a,b){var c,d,e=0,f=0,g=0;return a=a.toString(),b=b.toString(),(c=a.indexOf("."))>-1&&(f=a.length-c-1),(c=b.indexOf("."))>-1&&(g=b.length-c-1),e=f>g?f:g,d=this.floatMul(parseFloat(a),Math.pow(10,e))-this.floatMul(parseFloat(b),Math.pow(10,e)),d/=Math.pow(10,e)},calcMethod:function(a){var b,c,d,e=0,f=a.number.toString();return(f.indexOf(".")>-1||f.indexOf("e")>-1)&&(d=f,(c=f.indexOf("e"))>-1&&(e=f.substring(c+1,d.length),f=f.substring(0,c),d=f),(b=f.indexOf("."))>-1&&(f=f.substring(0,b),d=d.substring(b+1,d.length),f+=d,a.exp=f.length-b,f=+f)),a.number=f,a.eNum=parseInt(e,10),a.eNum<0?(a.eNum*=-1,a.denominator*=Math.pow(10,a.eNum)):a.numerator*=Math.pow(10,a.eNum),a},floatMul:function(a,b){var c,d,e,f,g={},h={};return a=a.toString(),b=b.toString(),a.indexOf("e")>-1||b.indexOf("e")>-1?c=a*b:a.indexOf("e")===a.indexOf(".")===b.indexOf("e")===b.indexOf(".")===-1?c=parseInt(a,10)*parseInt(b,10):(g.number=a,g.exp=0,g.eNum=0,g.denominator=1,g.numerator=1,h.number=b,h.exp=0,h.eNum=0,h.denominator=1,h.numerator=1,g=this.calcMethod(g),h=this.calcMethod(h),d=parseInt(g.number,10)/Math.pow(10,g.exp),e=parseInt(h.number,10)/Math.pow(10,h.exp),f=h.numerator*g.numerator/(g.denominator*h.denominator),c=d*e*f),c}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.FileTime=PWC.HmiAC.FileTime||{},PWC.HmiAC.FileTime.MS=PWC.HmiAC.FileTime.MS||{},PWC.HmiAC.FileTime.MS=1,PWC.HmiAC.FileTime.MS250=PWC.HmiAC.FileTime.MS250||{},PWC.HmiAC.FileTime.MS250=250*PWC.HmiAC.FileTime.MS,PWC.HmiAC.FileTime.MS500=PWC.HmiAC.FileTime.MS500||{},PWC.HmiAC.FileTime.MS500=500*PWC.HmiAC.FileTime.MS,PWC.HmiAC.FileTime.Sec=PWC.HmiAC.FileTime.Sec||{},PWC.HmiAC.FileTime.Sec=1e3*PWC.HmiAC.FileTime.MS,PWC.HmiAC.FileTime.Minute=PWC.HmiAC.FileTime.Minute||{},PWC.HmiAC.FileTime.Minute=60*PWC.HmiAC.FileTime.Sec,PWC.HmiAC.FileTime.Hour=PWC.HmiAC.FileTime.Hour||{},PWC.HmiAC.FileTime.Hour=60*PWC.HmiAC.FileTime.Minute,PWC.HmiAC.FileTime.Day=PWC.HmiAC.FileTime.Day||{},PWC.HmiAC.FileTime.Day=24*PWC.HmiAC.FileTime.Hour,PWC.HmiAC.TimeAxis=function(){"use strict";PWC.HmiAC.TimeAxis.baseCtor.call(this);var a,b,c=this,d=PWC.HmiAC.RangeType,e=PWC.Lib.Config.Properties,f={},g=0,h=1e4,i=1,j=3,k=116444736e5,l=PWC.HmiAC.CustomDateFormat.prototype.validateDate,m=function(){var a=c.endValueBuffer-c.startValueBuffer,b=n();if(b>=a)c.currentEndValue=c.endValueBuffer,c.currentBeginValue=c.startValueBuffer,c.zoomInOutCount=0;else{c.currentBeginValue<c.startValueBuffer?(c.currentBeginValue=c.startValueBuffer,c.currentEndValue=c.currentBeginValue+b):c.currentEndValue>c.endValueBuffer&&(c.currentEndValue=c.endValueBuffer,c.currentBeginValue=c.currentEndValue-b),c.zoomInOutCount=0;do c.zoomInOutCount++,a/=2;while(a>b)}c.trendView.connectTrendWindows?c.trendView.getDrawableTrendWindow(0).updateHorizScrollbar(!0):c.trendView.getDrawableTrendWindowByName(c.trendWindow).updateHorizScrollbar(!0)},n=function(){return c.currentEndValue-c.currentBeginValue},o=function(){var a,b,d;d={FontSize:c.trendView.fontSize,FontItalic:c.trendView.fontItalic,FontBold:c.trendView.fontBold,FontName:c.trendView.fontName,FontUnderline:c.trendView.fontUnderline,FontStrikeOut:c.trendView.fontStrikeOut},a="string"==typeof c.labelText?c.labelText:c.labelText[0],b=PWC.Lib.Canvas.Svg.getTextBBox(d,a),c.bBoxText={x:b.x,y:b.y,width:b.width,height:b.height}};this.setPropPart=function(a,b,d){e.setPropPart(c.propAxis,a,b),d&&this.trendView.screenItem.gfxWebLib.connection.sendPartPropertyByName(this.trendView.screenItem.rtoid,"TimeAxes."+c.partId,a,b,!1,!1)},this.zoomInOut=function(a,b){var c,d,e,f=this.currentEndValue-this.currentBeginValue,g=this.getValueFromPosition(a),h=!0;if(b===i)500===f?h=!1:(1e3>f&&(f=1e3),c=f/4,0===this.zoomInOutCount&&(this.startValueBuffer=this.currentBeginValue,this.endValueBuffer=this.currentEndValue,this.zoomInOutCount++,this.trendView.enableDisableOriginalView(),this.zoomInOutCount--),e=g-c,d=g+c,e<this.startValueBuffer?(this.currentBeginValue=this.startValueBuffer,this.currentEndValue=this.currentBeginValue+2*c):d>this.endValueBuffer?(this.currentEndValue=this.endValueBuffer,this.currentBeginValue=this.currentEndValue-2*c):(this.currentBeginValue=e,this.currentEndValue=d),this.zoomInOutCount++);else if(b===j)switch(c=f,this.zoomInOutCount){case 1:this.currentBeginValue=this.startValueBuffer,this.currentEndValue=this.endValueBuffer,this.startValueBuffer=null,this.endValueBuffer=null,this.zoomInOutCount--,this.trendView.enableDisableOriginalView();break;case 0:h=!1;break;default:e=g-c,d=g+c,e<this.startValueBuffer?(this.currentBeginValue=this.startValueBuffer,this.currentEndValue=this.currentBeginValue+2*c):d>this.endValueBuffer?(this.currentEndValue=this.endValueBuffer,this.currentBeginValue=this.currentEndValue-2*c):(this.currentBeginValue=e,this.currentEndValue=d),this.zoomInOutCount--}return h&&this.visible&&(this.calculateGrid(),this.trendWindowDrawable&&(this.updateTicks(),this.showLabels&&this.updateLabels())),h},this.zoomArea=function(a,b){var c,d=this.getValueFromPosition(a),e=this.getValueFromPosition(b),f=e-d,g=!0;if(500>f||d===this.currentBeginValue&&e===this.currentEndValue)g=!1;else{0===this.zoomInOutCount&&(this.startValueBuffer=this.currentBeginValue,this.endValueBuffer=this.currentEndValue,this.zoomInOutCount++,this.trendView.enableDisableOriginalView()),c=this.endValueBuffer-this.startValueBuffer,this.zoomInOutCount=0;do this.zoomInOutCount++,c/=2;while(c>f);this.currentBeginValue=d,this.currentEndValue=e,this.visible&&(this.calculateGrid(),this.trendWindowDrawable&&(this.updateTicks(),this.showLabels&&this.updateLabels()))}return g},this.zoomByScale=function(a,b){var c,d,e,f,g,h,i=this.currentEndValue-this.currentBeginValue,j=this.getValueFromPosition(a),k=i/b,l=!0;if(b>1?500>k?l=!1:(0===this.zoomInOutCount&&(this.startValueBuffer=this.currentBeginValue,this.endValueBuffer=this.currentEndValue,this.zoomInOutCount++,this.trendView.enableDisableOriginalView()),d=this.currentBeginValue,e=this.currentEndValue):0===this.zoomInOutCount||1===b?l=!1:(d=this.startValueBuffer,e=this.endValueBuffer),l){if(c=this.endValueBuffer-this.startValueBuffer,this.zoomInOutCount=0,k>=c)this.currentBeginValue=this.startValueBuffer,this.currentEndValue=this.endValueBuffer,this.startValueBuffer=null,this.endValueBuffer=null,this.trendView.enableDisableOriginalView();else{do this.zoomInOutCount++,c/=2;while(c>k);f=k/2,g=j-f,h=j+f,d>g?(this.currentBeginValue=d,this.currentEndValue=this.currentBeginValue+2*f):h>e?(this.currentEndValue=e,this.currentBeginValue=this.currentEndValue-2*f):(this.currentBeginValue=g,this.currentEndValue=h)}this.visible&&(this.calculateGrid(),this.trendWindowDrawable&&(this.updateTicks(),this.showLabels&&this.updateLabels()))}return l},this.onPan=function(a){a.preventDefault();var d,e,h,i,j,k=c.trendView.getDrawableTrendWindowByName(c.trendWindow),l=null,m=new PWC.HmiAC.TagList,n=[],o=[],p=[],q=[],r=[];if(a.eventType===c.Hammer.INPUT_MOVE){if(e=c.getPos(a),b?(g=a.deltaX-g,f.x=e.x-g,g=a.deltaX,d=c.getValueFromPosition(e.x)-c.getValueFromPosition(f.x)):(g=a.deltaY-g,f.y=e.y-g,g=a.deltaY,d=c.getValueFromPosition(e.y)-c.getValueFromPosition(f.y)),c.currentEndValue=c.currentEndValue-d,c.currentBeginValue=c.currentBeginValue-d,c.zoomInOutCount>0&&(c.endValueBuffer=c.endValueBuffer-d,c.startValueBuffer=c.startValueBuffer-d),l=c.name,c.trendView.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&c.requestHistoricalData(d,o,n,q,p,r),p.length&&c.trendView.sendDomainLogicRead(o,n,q,p,r,5),c.calculateGrid(),c.updateTicks(),c.showLabels&&c.updateLabels(),c.trendView.connectTrendWindows){for(i=c.getTrends(),j=i.length,h=0;j>h;h++)i[h].timeAxis===l&&(k=c.trendView.getDrawableTrendWindowByName(i[h].trendWindow),m.tryAdd(k));for(j=m.items.length,h=0;j>h;h++)m.items[h].reDraw(l,null)}else k.reDraw(l,null);c.trendView.rulerControl&&(c.trendView.showRuler||c.trendView.showStatisticRuler)&&c.trendView.calculateRulerData(),m.clear(),m=null,n=[],o=[],p=[],q=[],r=[]}else g=0},this.moveToPerc=function(a){var b=this.endValueBuffer-this.startValueBuffer,c=this.currentEndValue-this.currentBeginValue,d=b-c,e=PWC.HmiAC.TextOrientation;switch(this.trendView.textOrientation){case e.FromRight:case e.FromBottom:this.currentBeginValue=this.startValueBuffer+d*a,this.currentEndValue=this.currentBeginValue+c;break;case e.FromLeft:case e.FromTop:this.currentEndValue=this.endValueBuffer-d*a,this.currentBeginValue=this.currentEndValue-c}this.visible&&(this.calculateGrid(),this.trendWindowDrawable&&(this.updateTicks(),this.showLabels&&this.updateLabels()))},this.setAxisAlignment=function(c,d){a=c,b=d,this.setBaseAxisAlignment(c,d)},this.calculateGrid=function(){var a,b,d,e,f;a=c.bBoxText.width,d=c.bBoxText.width/2,e=a+d,f=c.pixelRangeToValueRange(e),b=PWC.HmiAC.TimeAxis.getGridInfo(f),c.axisTicks=c.calculateTicks(b)},this.calculateTicks=function(a){var b,d,e,f,g=a.getMajor(),h=a.getMinor(),i=0,j=null,k=null,l=[],m=!1,n=PWC.HmiAC.Tick,o=c.currentBeginValue/g;for(h>0&&g>h&&(i=parseInt(g/h,10),--i),c.MinorTickCount=i+1,o=Math.floor(o),b=o*a.getMajor();;){if(d=this.getPositionFromValue(b),j=new n(d,!0,b),j.displayValue=c.getDisplayValue(b),l.push(j),m)break;if(i>0)for(e=b,f=0;i>f;++f)e+=h,d=c.getPositionFromValue(e),k=new n(d,!1),l.push(k);b+=g,b>=c.currentEndValue&&(m=!0)}return l},this.getPositionFromValue=function(a){var c,d,e,f=PWC.HmiAC.TextOrientation,g=n(),h=0,i=b?this.innerRect.width:this.innerRect.height,j=i-h,k=parseFloat(j)/parseFloat(g);return this.trendView.textOrientation===f.FromRight||this.trendView.textOrientation===f.FromBottom?(c=this.currentEndValue,d=parseFloat(i)-k*parseFloat(c),e=k*parseFloat(a)+d):(c=this.currentBeginValue,d=parseFloat(i)+k*parseFloat(c),e=d-k*parseFloat(a)),e},this.getValueFromPosition=function(b){var d,e,f,g,h,i=PWC.HmiAC.TextOrientation,j=0,k=this.currentEndValue,l=this.currentBeginValue,m=k-l,n=this.innerRect;switch(c.align){case a.Top:case a.Bottom:d=n.width;break;case a.Left:case a.Right:d=n.height}return e=d-j,f=m/e,this.trendView.textOrientation===i.FromRight||this.trendView.textOrientation===i.FromBottom?(g=k-f*d,h=f*b+g):(g=k+f*j,h=g-f*b),Math.round(h)},this.init=function(f,g,h){var i,j=new Date,k=PWC.Lib.Canvas.Converters;this.propAxis=f,f&&(this.isTimeAxis=!0,a=g.alignmentEnum,b=g.isLeftOrRight,f.partid&&(this.partId=e.getPropPart(f,"TimeAxis","partid")),this.setBaseAxisAlignment(a,b),this.axisType=h,this.axisTimeRange=null,this.trendViewVisibility=g.getVisibility(),this.rect=new PWC.HmiAC.RECT,this.align=0===e.getPropPart(f,"TimeAxis","Alignment")?"Bottom":"Top",this.color=e.getPropPart(f,"TimeAxis","Color",k.enumConverter.Color),this.inTrendColor=1===e.getPropPart(f,"TimeAxis","InTrendColor")?!0:!1,this.Label=e.getPropPart(f,"TimeAxis","DisplayName"),this.measurementPoint=e.getPropPart(f,"TimeAxis","PointCount"),this.name=e.getPropPart(f,"TimeAxis","Name"),this.invalidated=!1,this.trendWindow=e.getPropPart(f,"TimeAxis","TrendWindow"),this.visible=1===e.getPropPart(f,"TimeAxis","Visible")?!0:!1,this.trendView=g,this.id=(c.trendView.getControlName()+"_"+c.trendWindow+"_"+c.name).replace(/\s+/g,"").replace(/\(/g,"_ob_").replace(/\)/g,"_cb_").replace(/\\/g,"_bs_").replace(/\'/g,"_sq_").replace(/\"/g,"_dq_"),this.labelId=this.id+"_XAxisLabel",this.showLabels=1===e.getPropPart(f,"TimeAxis","ShowLabels")?!0:!1,this.showAllLabels=1===e.getPropPart(f,"TimeAxis","ShowAllLabels")?!0:!1,this.index=e.getPropPart(f,"TimeAxis","Index"),void 0===f.Index&&0===this.index&&(i=g.getXAxisCount())>0&&(this.index=i),this.rangeType=e.getPropPart(f,"TimeAxis","RangeType"),this.refresh=1===e.getPropPart(f,"TimeAxis","Online")?!0:!1,this.rangeBase=e.getPropPart(f,"TimeAxis","TimeRangeBase"),this.rangeFactor=e.getPropPart(f,"TimeAxis","TimeRangeFactor"),this.BeginTimeUTC=PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(e.getPropPart(f,"TimeAxis","BeginTime")),this.EndTimeUTC=PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(e.getPropPart(f,"TimeAxis","EndTime")),this.FineGrid=1===e.getPropPart(f,"TimeAxis","FineGrid")?!0:!1,this.CoarseGrid=1===e.getPropPart(f,"TimeAxis","CoarseGrid")?!0:!1,this.EndTimeUTC=this.getLongTimeFromDate(this.EndTimeUTC),this.BeginTimeUTC=this.getLongTimeFromDate(this.BeginTimeUTC),this.EndTimeUTC=Date.prototype.getCorrectTime(this.EndTimeUTC,g.timeBase),this.BeginTimeUTC=Date.prototype.getCorrectTime(this.BeginTimeUTC,g.timeBase),this.trendWindowDrawable=!1,this.zoomInOutCount=0,this.startValueBuffer=null,this.endValueBuffer=null,this.axisTimeRange=this.rangeType===d.TimeRange?this.calculateTimeRange():this.EndTimeUTC-this.BeginTimeUTC,this.refresh&&this.trendView.online?(this.currentEndValue=this.getLongTimeFromDate(j),this.currentBeginValue=this.currentEndValue-this.axisTimeRange):(this.currentBeginValue=this.BeginTimeUTC,this.currentEndValue=this.currentBeginValue+this.axisTimeRange),this.dateFormat=e.getPropPart(f,"TimeAxis","DateFormat"),""===this.dateFormat&&(this.dateFormat=this.trendView.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f),this.showDate=e.getPropPart(f,"TimeAxis","ShowDate"),this.timeFormat=e.getPropPart(f,"TimeAxis","TimeFormat"),""===this.timeFormat&&(this.timeFormat=this.trendView.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f),this.labelText=new Array(2),this.labelText[0]=this.timeFormat,this.labelText[1]=this.showDate?this.dateFormat:null,o()),f=g=h=null},this.calculateTimeRange=function(){var a;if(this.rangeType===d.PointCount||this.rangeType===d.FromBeginToEnd)return this.currentEndValue-this.currentBeginValue;switch(this.rangeBase){case 1:case"1":a=PWC.HmiAC.FileTime.MS500;break;case 2:case"2":a=PWC.HmiAC.FileTime.Sec;break;case 3:case"3":a=PWC.HmiAC.FileTime.Minute;break;case 4:case"4":a=PWC.HmiAC.FileTime.Hour;break;case 5:case"5":a=PWC.HmiAC.FileTime.Day}return a*this.rangeFactor},this.invalidate=function(){var a,b,e,f,g,h=0,i=0,j=0;if(this.invalidated=!1,this.trendView.getStartStop()&&this.refresh){for(e=c.trendView.getDrawableTrendCount(),a=0;e>a;a++)b=c.trendView.getDrawableTrend(a),b.getXAxis()===c.name&&(f=b.getXStartValue(),f>0&&(0===h?h=f:h>f&&(h=f)),g=b.getXEndValue(),g>0&&g>i&&(i=g));if(h>0&&i>=h){switch(j=0,this.rangeType){case d.TimeRange:j=this.calculateTimeRange();break;case d.FromBeginToEnd:j=this.axisTimeRange;break;case d.PointCount:j=0}j>0?(this.currentEndValue=i,this.currentBeginValue=this.currentEndValue-j,this.invalidated=!0):i>h?(this.currentEndValue=i,this.currentBeginValue=500>i-h?i-500:h,this.invalidated=!0):h===i&&(this.currentEndValue=i,this.currentBeginValue=i-500,this.invalidated=!0)}this.invalidated&&this.visible&&c.calculateGrid()}return this.invalidated},this.historicalInvalidate=function(){var a,b,e,f,g,h,i=c.trendView.getDrawableTrendCount(),j=0,k=0,l=0,m=!1;for(a=0;i>a;a++)b=c.trendView.getDrawableTrend(a),2===b.dataSource.TagDataSourceType&&b.getXAxis()===c.name&&(m=!0,e=b.getXStartValue(),e>0&&(0===j?j=e:j>e&&(j=e)),f=b.getXEndValue(),f>0&&f>k&&(k=f));if(m){if(this.zoomInOutCount>0&&(g=this.currentBeginValue-this.startValueBuffer,h=this.endValueBuffer-this.currentEndValue),j>0&&k>=j){switch(l=0,this.rangeType){case d.TimeRange:l=this.zoomInOutCount>0?this.currentEndValue-this.currentBeginValue:this.calculateTimeRange();break;case d.FromBeginToEnd:l=this.axisTimeRange;break;case d.PointCount:l=0}l>0?this.trendView.moveToType===PWC.HmiAC.MoveToType.MoveToFirst?(this.currentBeginValue=j,this.currentEndValue=j+l):(this.currentEndValue=k,this.currentBeginValue=this.currentEndValue-l):k>j?(this.currentEndValue=k,this.currentBeginValue=500>k-j?k-500:j):j===k&&(this.currentEndValue=k,this.currentBeginValue=k-500)}this.zoomInOutCount>0&&(this.startValueBuffer=this.currentBeginValue-g,this.endValueBuffer=this.currentEndValue+h),this.visible&&(this.calculateGrid(),this.trendWindowDrawable&&(this.updateTicks(),this.showLabels&&this.updateLabels()))}},this.getNeededDimension=function(){var a=0,b=0;if(this.visible){switch(this.calculateLabelSize(),c.axisType){case this.trendView.axisTypeEnum.xAxis:b=c.bBoxText.height;break;case this.trendView.axisTypeEnum.yAxis:b=c.bBoxText.width}a=this.MajorTickSize+this.LabelToMajorTickSpace+b+this.LabelToBorderSpace+this.trendView.getLineWidth()}return this.showDate?1.5*a:a},this.getDisplayValue=function(a){var b,c=[];return c=this.labelText.slice(0),b=this.trendView.customFormat(new Date(a),c)},this.getLongTimeFromDate=function(a){return new Date(a).getTime()},this.clearBoundingValues=function(){var a,b,c=this.getTrends(),d=c.length;for(b=0;d>b;b++)a=c[b],a.boundingValue&&(a.boundingValue=null)},this.requestHistoricalData=function(a,b,d,e,f,g,i){var j,l,m,n=c.getTrends(),o=!1;for(l=0;l<n.length;l++)j=n[l],j.timeAxis===c.name&&2===j.dataSource.TagDataSourceType&&void 0!==j.dataSource.Tag&&(j.boundingValue=null,0>a?(j.removePointsAfterTime(c.currentEndValue+a),d.push((c.currentEndValue+k)*h),b.push((j.getXEndValue()+k)*h),o=!0):a>0&&j.getXStartValue()>c.currentBeginValue?(d.push((j.getXStartValue()+k)*h),b.push((c.currentBeginValue+k)*h),o=!0):a===!1&&j.getXStartValue()>c.currentBeginValue?(d.push((j.getXStartValue()+k)*h),b.push((c.currentBeginValue+k)*h),o=!0):a===!0&&j.getXEndValue()<c.currentEndValue&&(d.push((c.currentEndValue+k)*h),b.push((j.getXEndValue()+k)*h),o=!0),o&&(m=c.rangeType!==PWC.HmiAC.RangeType.PointCount||i?Math.floor(this.trendView.getDrawableTrendWindowByName(j.trendWindow).getRect().width):c.measurementPoint,f.push(this.trendView.screenItem.gfxWebLib.connection.datatypesToString(this.trendView.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(j.dataSource.Tag))),e.push(m),g.push(j.index),c.trendView.timeAxisDrawn=!0,o=!1,j.historicalDataRequested=!0))},this.UpdateProperty=function(a,b,c){var e,f,g,i,j,n,o,p,q=PWC.HmiAC.AxisPropId;switch(a){case q.RangeType:switch(this.rangeType===d.PointCount&&this.clearBoundingValues(),this.rangeType=c?d[b]:b,this.setPropPart("RangeType",this.rangeType,c),this.rangeType){case d.TimeRange:this.axisTimeRange=this.calculateTimeRange(),this.trendView.getStartStop()&&this.refresh?this.currentBeginValue=this.currentEndValue-this.axisTimeRange:this.zoomInOutCount>0?(this.endValueBuffer=this.startValueBuffer+this.axisTimeRange,m()):this.currentEndValue=this.currentBeginValue+this.axisTimeRange,this.trendView.requestHistoricalData(null,null,this.name);break;case d.FromBeginToEnd:this.axisTimeRange=this.EndTimeUTC-this.BeginTimeUTC,this.trendView.getStartStop()&&this.refresh?this.currentBeginValue=this.currentEndValue-this.axisTimeRange:this.zoomInOutCount>0?(this.endValueBuffer=this.startValueBuffer+this.axisTimeRange,m()):this.currentEndValue=this.currentBeginValue+this.axisTimeRange,this.trendView.requestHistoricalData(null,null,this.name);break;case d.PointCount:if(!this.trendView.getStartStop()||!this.refresh)for(e=this.getTrends(),i=e.length,g=0;i>g;g++)if(f=e[g],2===f.dataSource.TagDataSourceType){this.trendView.requestHistoricalData(null,null,this.name);
break}}break;case q.BeginTime:c?(o=l(b),this.BeginTimeUTC=Date.prototype.getCorrectTime(o,this.trendView.timeBase),n=(this.BeginTimeUTC+k)*h):(n=b,this.BeginTimeUTC=Date.prototype.getCorrectTime(this.getLongTimeFromDate(PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(b)),this.trendView.timeBase)),this.setPropPart("BeginTime",n,c),this.rangeType===d.FromBeginToEnd&&(this.trendView.getStartStop()&&this.refresh||(this.zoomInOutCount>0?(this.startValueBuffer=this.BeginTimeUTC,this.endValueBuffer=this.EndTimeUTC,m()):(this.currentBeginValue=this.BeginTimeUTC,this.currentEndValue=this.EndTimeUTC),this.trendView.requestHistoricalData(null,null,this.name)),this.axisTimeRange=this.EndTimeUTC-this.BeginTimeUTC);break;case q.EndTime:c?(o=l(b),this.EndTimeUTC=Date.prototype.getCorrectTime(o,this.trendView.timeBase),n=(this.EndTimeUTC+k)*h):(n=b,this.EndTimeUTC=Date.prototype.getCorrectTime(this.getLongTimeFromDate(PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(b)),this.trendView.timeBase)),this.setPropPart("EndTime",n,c),this.rangeType===d.FromBeginToEnd&&(this.trendView.getStartStop()&&this.refresh||(this.zoomInOutCount>0?(this.startValueBuffer=this.BeginTimeUTC,this.endValueBuffer=this.EndTimeUTC,m()):(this.currentBeginValue=this.BeginTimeUTC,this.currentEndValue=this.EndTimeUTC),this.trendView.requestHistoricalData(null,null,this.name)),this.axisTimeRange=this.EndTimeUTC-this.BeginTimeUTC);break;case q.PointCount:if(this.trendView.getStartStop()&&this.refresh&&1===this.measurementPoint&&this.clearBoundingValues(),this.measurementPoint=parseInt(b,10),this.setPropPart("PointCount",this.measurementPoint,c),this.rangeType===d.PointCount)for(e=this.getTrends(),i=e.length,g=0;i>g;g++)if(f=e[g],2===f.dataSource.TagDataSourceType&&0===this.zoomInOutCount){this.trendView.requestHistoricalData(null,null,this.name);break}break;case q.TimeFormat:this.setPropPart("TimeFormat",b,c),this.timeFormat=b,this.timeFormat===PWC.HmiAC.TimeFormat.Automatic&&(this.timeFormat=this.trendView.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f),this.labelText[0]=this.timeFormat,this.labelText[1]=this.showDate?this.dateFormat:null;break;case q.DateFormat:this.setPropPart("DateFormat",b,c),this.dateFormat=b,this.dateFormat===PWC.HmiAC.DateFormat.Automatic&&(this.dateFormat=this.trendView.screenItem.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f),this.labelText[0]=this.timeFormat,this.labelText[1]=this.showDate?this.dateFormat:null;break;case q.ShowDate:this.setPropPart("ShowDate",b,c),this.showDate=b,this.labelText[0]=this.timeFormat,this.labelText[1]=this.showDate?this.dateFormat:null;break;case q.TimeRangeBase:this.rangeBase=c?PWC.HmiAC.RangeBase[b]:b,this.setPropPart("TimeRangeBase",this.rangeBase,c),this.rangeType===d.TimeRange&&(this.axisTimeRange=this.calculateTimeRange(),this.trendView.getStartStop()&&this.refresh?this.currentBeginValue=this.currentEndValue-this.axisTimeRange:this.zoomInOutCount>0?(this.endValueBuffer=this.startValueBuffer+this.axisTimeRange,m()):this.currentEndValue=this.currentBeginValue+this.axisTimeRange,this.trendView.requestHistoricalData(null,null,this.name));break;case q.TimeRangeFactor:this.rangeFactor=parseInt(b,10),this.setPropPart("TimeRangeFactor",this.rangeFactor,c),this.rangeType===d.TimeRange&&(this.axisTimeRange=this.calculateTimeRange(),this.trendView.getStartStop()&&this.refresh?this.currentBeginValue=this.currentEndValue-this.axisTimeRange:this.zoomInOutCount>0?(this.endValueBuffer=this.startValueBuffer+this.axisTimeRange,m()):this.currentEndValue=this.currentBeginValue+this.axisTimeRange,this.trendView.requestHistoricalData(null,null,this.name));break;case q.Online:b?this.setPropPart("Online",1,c):this.setPropPart("Online",0,c),this.refresh=b,this.trendView.getStartStop()&&(j=this.rangeType===PWC.HmiAC.RangeType.PointCount?this.currentEndValue-this.currentBeginValue:this.axisTimeRange,this.currentEndValue=this.getLongTimeFromDate(new Date),this.currentBeginValue=this.currentEndValue-j,this.trendView.requestHistoricalData(null,null,this.name));break;case q.DisplayName:if(0===b&&(b="",p=this.trendView.SVGParent.getElementById(this.labelId),p&&p.parentNode.removeChild(p)),this.setPropPart("DisplayName",b,c),this.Label=b,this.trendView.rulerControl&&(this.trendView.showRuler||this.trendView.showStatisticRuler)){for(e=this.getTrends(!0),i=e.length,f=[],g=0;i>g;g++)f.push(e[g].name);n={},n.source=PWC.HmiAC.RulerControlColumns.LabelX,n.value=b,this.trendView.rulerControl.updateCell(f,n)}}PWC.HmiAC.PostPropertyUpdate.Update=!0}},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.TimeAxis,PWC.HmiAC.Axis),PWC.HmiAC.TimeAxis.getGridInfo=function(a){var b,c,d=PWC.HmiAC.StepInfo.StepInfo,e=d.length,f=0;if(a<=PWC.HmiAC.FileTime.Day){for(b=0;e-1>b;++b)if(a<=d[b].x)return new PWC.HmiAC.TimeAxis.TrendWindowGrid(d[b]);return null}return c=a/PWC.HmiAC.FileTime.Day,++c,c%5===0?f=c/5:c%4===0?f=c/4:c%3===0?f=c/3:c%2===0?f=c/2:(++c,f=c/2),d[e-1].x=c*PWC.HmiAC.FileTime.Day,d[e-1].y=f*PWC.HmiAC.FileTime.Day,new PWC.HmiAC.TimeAxis.TrendWindowGrid(d[e-1])},PWC.HmiAC.StepInfo={StepInfo:[{index:0,x:100*PWC.HmiAC.FileTime.MS,y:50*PWC.HmiAC.FileTime.MS},{index:1,x:200*PWC.HmiAC.FileTime.MS,y:50*PWC.HmiAC.FileTime.MS},{index:2,x:250*PWC.HmiAC.FileTime.MS,y:50*PWC.HmiAC.FileTime.MS},{index:3,x:500*PWC.HmiAC.FileTime.MS,y:100*PWC.HmiAC.FileTime.MS},{index:4,x:1*PWC.HmiAC.FileTime.Sec,y:100*PWC.HmiAC.FileTime.MS},{index:5,x:2*PWC.HmiAC.FileTime.Sec,y:500*PWC.HmiAC.FileTime.MS},{index:6,x:3*PWC.HmiAC.FileTime.Sec,y:1*PWC.HmiAC.FileTime.Sec},{index:7,x:5*PWC.HmiAC.FileTime.Sec,y:1*PWC.HmiAC.FileTime.Sec},{index:8,x:6*PWC.HmiAC.FileTime.Sec,y:1*PWC.HmiAC.FileTime.Sec},{index:9,x:10*PWC.HmiAC.FileTime.Sec,y:2*PWC.HmiAC.FileTime.Sec},{index:10,x:15*PWC.HmiAC.FileTime.Sec,y:5*PWC.HmiAC.FileTime.Sec},{index:11,x:20*PWC.HmiAC.FileTime.Sec,y:5*PWC.HmiAC.FileTime.Sec},{index:12,x:30*PWC.HmiAC.FileTime.Sec,y:5*PWC.HmiAC.FileTime.Sec},{index:13,x:1*PWC.HmiAC.FileTime.Minute,y:10*PWC.HmiAC.FileTime.Sec},{index:14,x:2*PWC.HmiAC.FileTime.Minute,y:30*PWC.HmiAC.FileTime.Sec},{index:15,x:3*PWC.HmiAC.FileTime.Minute,y:30*PWC.HmiAC.FileTime.Sec},{index:16,x:5*PWC.HmiAC.FileTime.Minute,y:1*PWC.HmiAC.FileTime.Minute},{index:17,x:6*PWC.HmiAC.FileTime.Minute,y:1*PWC.HmiAC.FileTime.Minute},{index:18,x:10*PWC.HmiAC.FileTime.Minute,y:2*PWC.HmiAC.FileTime.Minute},{index:19,x:15*PWC.HmiAC.FileTime.Minute,y:5*PWC.HmiAC.FileTime.Minute},{index:20,x:20*PWC.HmiAC.FileTime.Minute,y:5*PWC.HmiAC.FileTime.Minute},{index:21,x:30*PWC.HmiAC.FileTime.Minute,y:5*PWC.HmiAC.FileTime.Minute},{index:22,x:1*PWC.HmiAC.FileTime.Hour,y:10*PWC.HmiAC.FileTime.Minute},{index:23,x:2*PWC.HmiAC.FileTime.Hour,y:30*PWC.HmiAC.FileTime.Minute},{index:24,x:3*PWC.HmiAC.FileTime.Hour,y:30*PWC.HmiAC.FileTime.Minute},{index:25,x:6*PWC.HmiAC.FileTime.Hour,y:1*PWC.HmiAC.FileTime.Hour},{index:26,x:12*PWC.HmiAC.FileTime.Hour,y:2*PWC.HmiAC.FileTime.Hour},{index:27,x:1*PWC.HmiAC.FileTime.Day,y:6*PWC.HmiAC.FileTime.Hour},{index:-1,x:"",y:""}]},PWC.HmiAC.TimeAxis.TrendWindowGrid=function(a){this.stepInfo=a,this.getMajor=function(){return this.stepInfo.x},this.getMinor=function(){return this.stepInfo.y}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.RelativeAxis=function(){"use strict";PWC.HmiAC.RelativeAxis.baseCtor.call(this);var a,b=this;this.calculateAxisMoveEndValues=this.calculateLinearAxisMoveEndValues,this.getPositionFromValue=this.getLinearPositionFromValue,this.getValueFromPosition=this.getLinearValueFromPosition,this.calculateTicks=this.calculateLinearTicks,this.moveToPerc=function(a){var b=this.endValueBuffer-this.startValueBuffer,c=this.currentEndValue-this.currentBeginValue,d=b-c,e=PWC.HmiAC.TextOrientation;switch(this.trendView.textOrientation){case e.FromRight:case e.FromLeft:this.currentEndValue=this.endValueBuffer-d*a,this.currentBeginValue=this.currentEndValue-c;break;case e.FromBottom:case e.FromTop:this.currentBeginValue=this.startValueBuffer+d*a,this.currentEndValue=this.currentBeginValue+c}this.visible&&(this.calculateGrid(),this.updateTicks(),this.showLabels&&this.updateLabels())},this.init=function(c,d,e){a=c.alignmentEnum,this.isLeftOrRight=c.isLeftOrRight,this.setAxisAlignment(a,this.isLeftOrRight),this.axisType=e,this.trendViewVisibility=c.getVisibility(),this.rect=new PWC.HmiAC.RECT,this.align=this.isLeftOrRight?"Right":"Left",this.color="black",this.inTrendColor=!1,this.Label="%",this.labelWidth=0,this.labelHeight=0,this.name="RelativeAxis",this.invalidated=!1,this.trendWindow=d,this.visible=!1,this.trendView=c,this.currentBeginValue=0,this.currentEndValue=100,this.axisBeginValue=this.currentBeginValue,this.axisEndValue=this.currentEndValue,this.id=(b.trendView.getControlName()+"_"+b.trendWindow+"_"+b.name).replace(/\s+/g,""),this.labelId=this.id+"_YAxisLabel",this.showLabels=!0,this.showAllLabels=!0,this.index=0,this.bBoxText=null,this.FineGrid=!0,this.CoarseGrid=!0,this.trendWindowDrawable=null,this.setTrendWindowDrawability(),this.zoomInOutCount=0,this.startValueBuffer=null,this.endValueBuffer=null,this.startValueBuffer2=null,this.endValueBuffer2=null,this.decimalPrecision=0,this.labelText="000"},this.invalidate=function(){this.currentBeginValue=this.axisBeginValue,this.currentEndValue=this.axisEndValue,this.invalidated=!0,this.trendView.showRelativeAxis&&(this.calculateGrid(),this.updateTicks(),this.updateLabels())},this.getNeededDimension=function(){var a=0,c=0;if(this.visible){switch(this.calculateLabelSize(),b.axisType){case this.trendView.axisTypeEnum.xAxis:c=b.bBoxText.height;break;case this.trendView.axisTypeEnum.yAxis:c=this.isLeftOrRight?b.bBoxText.width:b.bBoxText.height}a=this.MajorTickSize+this.LabelToMajorTickSpace+this.trendView.getLineWidth()+this.LabelToBorderSpace+c}else a=1;return a},this.getDisplayValue=function(a){return a}},PWC.HmiAC.RelativeAxis.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.RelativeAxis,PWC.HmiAC.ValueAxisBase);var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.RulerView=function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=a,x=b,y=w.trendObjectType===PWC.HmiAC.TrendObjectType.Online,z=PWC.HmiAC.svgShape.SetAttributes,A=PWC.HmiAC.RulerStyle,B=c,C=w.isLeftOrRight,D=null,E=null,F=null,G=12,H={id:"_VertRulerLine",start:0,end:0,pos:0,percOfPos:.5},I={id:"_HorizRulerLine",start:0,end:0,pos:0,percOfPos:.5},J=!1,K={id:"_StatisticLine1",start:0,end:0,pos:0,percOfPos:.05},L={id:"_StatisticLine2",start:0,end:0,pos:0,percOfPos:.95},M={},N=!1,O=this,P=function(){C?(H.pos=M.left+M.width*H.percOfPos,y?(K.pos=M.left+M.width*K.percOfPos,L.pos=M.left+M.width*L.percOfPos):I.pos=M.top+M.height*I.percOfPos):(H.pos=M.top+M.height*H.percOfPos,y?(K.pos=M.top+M.height*K.percOfPos,L.pos=M.top+M.height*L.percOfPos):I.pos=M.left+M.width*I.percOfPos)},Q=function(a){a.percOfPos=J^C?(a.pos-M.left)/M.width:(a.pos-M.top)/M.height},R=function(){M=x.getRect(),M.right=M.left+M.width,M.bottom=M.top+M.height,(C=w.isLeftOrRight)?(H.start=K.start=L.start=M.top,H.end=K.end=L.end=M.bottom,I.start=M.left,I.end=M.right):(H.start=K.start=L.start=M.left,H.end=K.end=L.end=M.right,I.start=M.top,I.end=M.bottom),P()},S=function(a){return a=a.slice(1),a=parseInt(a,16),a=16777215^a,a=a.toString(16),a=("00000"+a).slice(-6),a="#"+a},T=function(){var a,b,c=PWC.HmiAC.svgShape.CreateSvgElement,d=S(x.getBackColor());l=PWC.HmiAC.svgShape.CreateSvgElement("g",{id:B+"_RulerViewGroup","clip-path":"url(#"+x.getClipPathId()+")",stroke:d,"stroke-width":1}),x.rulerStyle===A.Graphic?(d=x.rulerColor,a=x.rulerWidth,b=a>G?a+4:G):(d=a="inherit",b=G),m=PWC.HmiAC.svgShape.CreateSvgElement("g",{id:B+"_RulerGroup",stroke:d,"stroke-width":a,appendTo:l}),o=c("line",{id:B+H.id,stroke:"inherit","stroke-width":"inherit",appendTo:m}),p=c("line",{id:B+H.id+"_dummy",stroke:"inherit",opacity:0,"stroke-width":b,appendTo:m}),y?(x.statisticRulerStyle===A.Graphic?(d=x.statisticRulerColor,a=x.statisticRulerWidth,b=a>G?a+4:G):(d=a="inherit",b=G),n=PWC.HmiAC.svgShape.CreateSvgElement("g",{id:B+"_StatisticRulerGroup",stroke:d,"stroke-width":a,appendTo:l}),s=c("line",{id:B+K.id,stroke:"inherit","stroke-width":"inherit",appendTo:n}),t=c("line",{id:B+K.id+"_dummy",stroke:"inherit",opacity:0,"stroke-width":b,appendTo:n}),u=c("line",{id:B+L.id,stroke:"inherit","stroke-width":"inherit",appendTo:n}),v=c("line",{id:B+L.id+"_dummy",stroke:"inherit",opacity:0,"stroke-width":b,appendTo:n}),O.hideStatisticRuler()):(q=c("line",{id:B+I.id,stroke:"inherit","stroke-width":"inherit",appendTo:m}),r=c("line",{id:B+I.id+"_dummy",stroke:"inherit",opacity:0,"stroke-width":b,appendTo:m})),O.hideRuler()};this.panDeltaCoords={x:0,y:0},this.draw=function(){d=x.getSVG(),d.appendChild(l),this.update()},this.update=function(){R(),C?(e="ew-resize",f="ns-resize",h="pos",i="pos",j="start",k="end"):(e="ns-resize",f="ew-resize",h="start",i="end",j="pos",k="pos"),z(o,{x1:H[h],x2:H[i],y1:H[j],y2:H[k]}),z(p,{x1:H[h],x2:H[i],y1:H[j],y2:H[k],cursor:e}),y?(z(s,{x1:K[h],x2:K[i],y1:K[j],y2:K[k]}),z(t,{x1:K[h],x2:K[i],y1:K[j],y2:K[k],cursor:e}),z(u,{x1:L[h],x2:L[i],y1:L[j],y2:L[k]}),z(v,{x1:L[h],x2:L[i],y1:L[j],y2:L[k],cursor:e})):(z(q,{x1:I[j],x2:I[k],y1:I[h],y2:I[i]}),z(r,{x1:I[j],x2:I[k],y1:I[h],y2:I[i],cursor:f}))},this.onPointerMove=function(a,b){var c;return N?(J^C?(c=a-this.panDeltaCoords.x,F.pos=F.pos+c,F.pos<M.left?F.pos=M.left:F.pos>M.right&&(F.pos=M.right)):(c=b-this.panDeltaCoords.y,F.pos=F.pos+c,F.pos<M.top?F.pos=M.top:F.pos>M.bottom&&(F.pos=M.bottom)),J?(z(D,{x1:F[j],x2:F[k],y1:F[h],y2:F[i]}),z(E,{x1:F[j],x2:F[k],y1:F[h],y2:F[i]}),d.style.cursor=f):(z(D,{x1:F[h],x2:F[i],y1:F[j],y2:F[k]}),z(E,{x1:F[h],x2:F[i],y1:F[j],y2:F[k]}),d.style.cursor=e),Q(F),this.panDeltaCoords.x=a,this.panDeltaCoords.y=b,w.rulerControl&&w.rulerControlColumnType!==PWC.HmiAC.RulerControlColumnType.StatisticResult&&w.calculateRulerData(x.name),!0):!1},this.onPointerUp=function(){D=null,F=null,z(E,{opacity:0}),E=null,J=!1,N=!1,this.panDeltaCoords={x:0,y:0},d.style.cursor=g},this.onPointerDown=function(a){N=!0,D||(N=this.idMatch(a)),g=d.style.cursor,E&&z(E,{opacity:.4})},this.hideRuler=function(){z(o,{display:"none"}),z(p,{display:"none"}),y||(z(q,{display:"none"}),z(r,{display:"none"}))},this.showRuler=function(){z(o,{display:"inherit"}),z(p,{display:"inherit"}),y||(z(q,{display:"inherit"}),z(r,{display:"inherit"}))},this.hideStatisticRuler=function(){z(s,{display:"none"}),z(t,{display:"none"}),z(u,{display:"none"}),z(v,{display:"none"})},this.showStatisticRuler=function(){z(s,{display:"inherit"}),z(t,{display:"inherit"}),z(u,{display:"inherit"}),z(v,{display:"inherit"})},this.idMatch=function(a){var b=!0;return-1!==a.indexOf(H.id)?(D=o,E=p,F=H):-1!==a.indexOf(I.id)?(D=q,E=r,F=I,J=!0):-1!==a.indexOf(K.id)?(D=s,E=t,F=K):-1!==a.indexOf(L.id)?(D=u,E=v,F=L):b=!1,b},this.getVertRulerPos=function(){var a;return a=C?H.pos-M.left:H.pos-M.top},this.getHorizRulerPos=function(){var a;return a=C?M.bottom-I.pos:M.right-I.pos},this.getStatisticRulerPos=function(){var a={};return C?(a.lowerLimit=K.pos-M.left,a.upperLimit=L.pos-M.left):(a.lowerLimit=K.pos-M.top,a.upperLimit=L.pos-M.top),a},this.updateColor=function(a){z(l,{stroke:S(a)})},this.onUpdate=function(a){var b,c=PWC.HmiAC.TrendWindowPropId;switch(a){case c.RulerStyle:x.rulerStyle===A.Simple?(z(m,{stroke:"inherit","stroke-width":"inherit"}),b=G):(z(m,{stroke:x.rulerColor,"stroke-width":x.rulerWidth}),b=x.rulerWidth>G?x.rulerWidth+4:G),z(p,{"stroke-width":b}),y||z(r,{"stroke-width":b});break;case c.RulerColor:x.rulerStyle===A.Graphic&&z(m,{stroke:x.rulerColor});break;case c.RulerWidth:x.rulerStyle===A.Graphic&&(z(m,{"stroke-width":x.rulerWidth}),b=x.rulerWidth>G?x.rulerWidth+4:G,z(p,{"stroke-width":b}),y||z(r,{"stroke-width":b}));break;case c.StatisticRulerStyle:x.statisticRulerStyle===A.Simple?(z(n,{stroke:"inherit","stroke-width":"inherit"}),b=G):(z(n,{stroke:x.statisticRulerColor,"stroke-width":x.statisticRulerWidth}),b=x.statisticRulerWidth>G?x.statisticRulerWidth+4:G),z(t,{"stroke-width":b}),z(v,{"stroke-width":b});break;case c.StatisticRulerColor:x.statisticRulerStyle===A.Graphic&&z(n,{stroke:x.statisticRulerColor});break;case c.StatisticRulerWidth:x.statisticRulerStyle===A.Graphic&&(z(n,{"stroke-width":x.statisticRulerWidth}),b=x.statisticRulerWidth>G?x.statisticRulerWidth+4:G,z(t,{"stroke-width":b}),z(v,{"stroke-width":b}))}},this.cleanUp=function(){w=x=d=l=m=n=o=p=q=r=s=t=u=v=M=O=null},T()};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TrendBase=function(){},PWC.HmiAC.TrendBase.prototype={getPointWidth:function(){var a,b=PWC.HmiAC.PointStyle;switch(this.pointStyle){case b.Dot:a=1;break;case b.NoPoint:a=0;break;case b.Square:case b.Circle:a=this.pointWidth}return a},getWidth:function(){return this.lineWidth>0&&this.trendStyle!==PWC.HmiAC.TrendStyle.None?this.lineWidth:this.getPointWidth()},getPointElement:function(a,b){"use strict";var c,d,e,f=PWC.HmiAC.PointStyle,g=this.viewBoxDim/2;switch(b){case PWC.HmiAC.MarkerPositionType.HighLimit:e=this.highLimitColor;break;case PWC.HmiAC.MarkerPositionType.LowLimit:e=this.lowLimitColor;break;case PWC.HmiAC.MarkerPositionType.UncertainQuality:e=this.uncertainQualityColor;break;default:e=this.pointColor}switch(this.pointStyle){case f.Dot:c={cx:g,cy:g,r:1,"stroke-width":0,fill:e,appendTo:a},PWC.HmiAC.svgShape.CreateSvgElement("circle",c);break;case f.Square:d=(this.viewBoxDim-this.pointWidth)/2,c={x:d,y:d,height:this.pointWidth,width:this.pointWidth,"stroke-width":0,fill:e,appendTo:a},PWC.HmiAC.svgShape.CreateSvgElement("rect",c);break;case f.Circle:c={cx:g,cy:g,r:this.pointWidth/2,"stroke-width":0,fill:e,appendTo:a},PWC.HmiAC.svgShape.CreateSvgElement("circle",c);break;case f.NoPoint:c={cx:g,cy:g,r:0,"stroke-width":0,fill:"none",appendTo:a},PWC.HmiAC.svgShape.CreateSvgElement("circle",c)}c=null},getLineStyle:function(){"use strict";var a=null,b=PWC.HmiAC.LineStyle;switch(this.lineStyle){case b.Dashed:a="10,5";break;case b.Dotted:a="5,5";break;case b.DotDash:a="5,5,10,5";break;case b.DashDotDot:a="10,5,5,5,5,5"}return a},renderTrend:function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=PWC.HmiAC.TrendStyle,H=PWC.HmiAC.svgShape.CreateSvgElement;switch(this.createPointCollection(a),b=this.currentTrendWindow.getEventSVG(),o=this.parentTrendView.SVGParent.getElementById("TrendPropertyGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","TrendPropertyGroup"+this.id),o&&o.parentNode.removeChild(o),o=H("g",{id:"TrendPropertyGroup"+this.id}),p=this.parentTrendView.SVGParent.getElementById("LowLimitTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","LowLimitTrendGroup"+this.id),p&&p.parentNode.removeChild(p),q=this.parentTrendView.SVGParent.getElementById("LowLimitDummyTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","LowLimitDummyTrendGroup"+this.id),q&&q.parentNode.removeChild(q),r=this.parentTrendView.SVGParent.getElementById("LowLimitFillTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","LowLimitFillTrendGroup"+this.id),r&&r.parentNode.removeChild(r),s=this.parentTrendView.SVGParent.getElementById("HighLimitTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","HighLimitTrendGroup"+this.id),s&&s.parentNode.removeChild(s),t=this.parentTrendView.SVGParent.getElementById("HighLimitDummyTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","HighLimitDummyTrendGroup"+this.id),t&&t.parentNode.removeChild(t),u=this.parentTrendView.SVGParent.getElementById("HighLimitFillTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","HighLimitFillTrendGroup"+this.id),u&&u.parentNode.removeChild(u),v=this.parentTrendView.SVGParent.getElementById("UncertainQualityTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","UncertainQualityTrendGroup"+this.id),v&&v.parentNode.removeChild(v),w=this.parentTrendView.SVGParent.getElementById("UncertainQualityDummyTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","UncertainQualityDummyTrendGroup"+this.id),w&&w.parentNode.removeChild(w),x=this.parentTrendView.SVGParent.getElementById("UncertainQualityFillTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","UncertainQualityFillTrendGroup"+this.id),x&&x.parentNode.removeChild(x),E=this.parentTrendView.SVGParent.getElementById("TrendFillPropertyGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","TrendFillPropertyGroup"+this.id),E&&E.parentNode.removeChild(E),E=H("g",{id:"TrendFillPropertyGroup"+this.id}),n=H("defs",{id:"defs_"+this.id,appendTo:o}),f=H("marker",{id:"marker_"+this.id,viewBox:"0 0 "+this.viewBoxDim+" "+this.viewBoxDim,refX:this.viewBoxDim/2,refY:this.viewBoxDim/2,markerWidth:this.viewBoxDim,markerHeight:this.viewBoxDim,orient:"0",markerUnits:"userSpaceOnUse",appendTo:n}),this.getPointElement(f,PWC.HmiAC.MarkerPositionType.Normal),this.highLimit&&(g=H("marker",{id:this.highLimitMarkerId,viewBox:"0 0 "+this.viewBoxDim+" "+this.viewBoxDim,refX:this.viewBoxDim/2,refY:this.viewBoxDim/2,markerWidth:this.viewBoxDim,markerHeight:this.viewBoxDim,orient:"0",markerUnits:"userSpaceOnUse",appendTo:n}),this.getPointElement(g,PWC.HmiAC.MarkerPositionType.HighLimit),s=H("g",{id:"HighLimitTrendGroup"+this.id,stroke:this.highLimitColor}),t=H("g",{id:"HighLimitDummyTrendGroup"+this.id,stroke:this.highLimitColor}),u=H("g",{id:"HighLimitFillTrendGroup"+this.id,fill:this.highLimitColor})),this.lowLimit&&(h=H("marker",{id:this.lowLimitMarkerId,viewBox:"0 0 "+this.viewBoxDim+" "+this.viewBoxDim,refX:this.viewBoxDim/2,refY:this.viewBoxDim/2,markerWidth:this.viewBoxDim,markerHeight:this.viewBoxDim,orient:"0",markerUnits:"userSpaceOnUse",appendTo:n}),this.getPointElement(h,PWC.HmiAC.MarkerPositionType.LowLimit),p=H("g",{id:"LowLimitTrendGroup"+this.id,stroke:this.lowLimitColor}),q=H("g",{id:"LowLimitDummyTrendGroup"+this.id,stroke:this.lowLimitColor}),r=H("g",{id:"LowLimitFillTrendGroup"+this.id,fill:this.lowLimitColor})),this.uncertainQuality&&(i=H("marker",{id:this.uncertainQualityMarkerId,viewBox:"0 0 "+this.viewBoxDim+" "+this.viewBoxDim,refX:this.viewBoxDim/2,refY:this.viewBoxDim/2,markerWidth:this.viewBoxDim,markerHeight:this.viewBoxDim,orient:"0",markerUnits:"userSpaceOnUse",appendTo:n}),this.getPointElement(i,PWC.HmiAC.MarkerPositionType.UncertainQuality),v=H("g",{id:"UncertainQualityTrendGroup"+this.id,stroke:this.uncertainQualityColor}),w=H("g",{id:"UncertainQualityDummyTrendGroup"+this.id,stroke:this.uncertainQualityColor}),x=H("g",{id:"UncertainQualityFillTrendGroup"+this.id,fill:this.uncertainQualityColor})),j=this.parentTrendView.SVGParent.getElementById("polyline_"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"polyline","polyline_"+this.id),j&&(j.parentNode.removeChild(j),j=null),A=this.lineWidth,z=this.getLineStyle(),this.trendStyle){case G.Step:if(A=0,m=this.parentTrendView.SVGParent.getElementById("polyline_"+this.id+"_dummy")||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"polyline","polyline_"+this.id+"_dummy"),m&&(m.parentNode.removeChild(m),m=null),F=H("polyline",{points:this.dummyPoints.trim(),"stroke-dasharray":z,id:"polyline_"+this.id+"_dummy",fill:"none",stroke:this.color,"stroke-width":this.lineWidth,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:o}),this.lowLimit){for(e=this.lowLimitDummyPoints.length,c=0;e>c;c++)d=this.lowLimitDummyPoints[c],H("polyline",{points:d.trim(),"stroke-dasharray":"inherit",id:"lowLimit_polyline_"+this.id+"_dummy_"+c,fill:"none",stroke:"inherit","stroke-width":"inherit","clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:q});q.setAttribute("stroke-width",this.lineWidth),q.setAttribute("stroke-dasharray",z)}if(this.highLimit){for(e=this.highLimitDummyPoints.length,c=0;e>c;c++)d=this.highLimitDummyPoints[c],H("polyline",{points:d.trim(),"stroke-dasharray":"inherit",id:"highLimit_polyline_"+this.id+"_dummy_"+c,fill:"none",stroke:"inherit","stroke-width":"inherit","clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:t});t.setAttribute("stroke-width",this.lineWidth),t.setAttribute("stroke-dasharray",z)}if(this.uncertainQuality){for(e=this.uncertainQualityDummyPoints.length,c=0;e>c;c++)d=this.uncertainQualityDummyPoints[c],H("polyline",{points:d.trim(),"stroke-dasharray":"inherit",id:"uncertainQuality_polyline_"+this.id+"_dummy_"+c,fill:"none",stroke:"inherit","stroke-width":"inherit","clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:w});w.setAttribute("stroke-width",this.lineWidth),w.setAttribute("stroke-dasharray",z)}case G.None:A=0;case G.Linear:if(y={points:this.points.trim(),id:"polyline_"+this.id,fill:"none",stroke:this.color,"stroke-dasharray":z,"stroke-width":A,"marker-start":"url(#marker_"+this.id+")","marker-mid":"url(#marker_"+this.id+")","marker-end":"url(#marker_"+this.id+")","clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:o},j=H("polyline",y),this.fill&&j&&(C=j.cloneNode(!0),C.id="fillPolyline_"+this.id,C.setAttribute("points",this.trendFillPoints.trim()),C.setAttribute("fill",this.fillColor),C.setAttribute("stroke","none"),C.setAttribute("ignoreEvent",!0),C.setAttribute("marker-start","none"),C.setAttribute("marker-end","none"),C.setAttribute("marker-mid","none"),E.appendChild(C)),this.lowLimit){for(e=this.lowLimitPoints.length,c=0;e>c;c++)d=this.lowLimitPoints[c],H("polyline",{points:d.trim(),"stroke-dasharray":"inherit",id:"lowLimit_polyline_"+this.id+"_"+c,fill:"none",stroke:"inherit","stroke-width":"inherit","marker-start":this.lowLimitMarkerPositions[c].markerStart,"marker-mid":"url(#lowLimitMarker_"+this.id+")","marker-end":this.lowLimitMarkerPositions[c].markerEnd,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:p});this.fill&&H("polyline",{points:this.lowLimitFillPoints.trim(),id:"lowLimit_fillPolyline_"+this.id,fill:"inherit",stroke:"none","stroke-width":"inherit",ignoreEvent:!0,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:r}),p.setAttribute("stroke-width",A),p.setAttribute("stroke-dasharray",z),o.appendChild(r),o.appendChild(q),o.appendChild(p)}if(this.highLimit){for(e=this.highLimitPoints.length,c=0;e>c;c++)d=this.highLimitPoints[c],H("polyline",{points:d.trim(),"stroke-dasharray":"inherit",id:"highLimit_polyline_"+this.id+"_"+c,fill:"none",stroke:"inherit","stroke-width":"inherit","marker-start":this.highLimitMarkerPositions[c].markerStart,"marker-mid":"url(#highLimitMarker_"+this.id+")","marker-end":this.highLimitMarkerPositions[c].markerEnd,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:s}),this.fill&&H("polyline",{points:this.highLimitFillPoints[c].trim(),id:"highLimit_fillPolyline_"+this.id+"_"+c,fill:"inherit",stroke:"none","stroke-width":"inherit",ignoreEvent:!0,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:u});s.setAttribute("stroke-width",A),s.setAttribute("stroke-dasharray",z),o.appendChild(u),o.appendChild(t),o.appendChild(s)}if(this.uncertainQuality){for(e=this.uncertainQualityPoints.length,c=0;e>c;c++)d=this.uncertainQualityPoints[c],H("polyline",{points:d.trim(),"stroke-dasharray":"inherit",id:"uncertainQuality_polyline_"+this.id+"_"+c,fill:"none",stroke:"inherit","stroke-width":"inherit","marker-start":"url(#uncertainQualityMarker_"+this.id+")","marker-mid":"url(#uncertainQualityMarker_"+this.id+")","marker-end":"url(#uncertainQualityMarker_"+this.id+")","clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:v}),this.fill&&H("polyline",{points:this.uncertainQualityFillPoints[c].trim(),id:"uncertainQuality_fillPolyline_"+this.id+"_"+c,fill:"inherit",stroke:"none","stroke-width":"inherit",ignoreEvent:!0,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:x});v.setAttribute("stroke-width",A),v.setAttribute("stroke-dasharray",z),o.appendChild(x),o.appendChild(w),o.appendChild(v)}F||(F=j)}if(null!==this.currentYAxis.trendIndicatorGroup)switch(k=this.parentTrendView.SVGParent.getElementById("trendIndicator_"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"polyline","trendIndicator_"+this.id),k&&(k.parentNode.removeChild(k),k=null),l=this.parentTrendView.SVGParent.getElementById("filltrendIndicator_"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"polyline","filltrendIndicator_"+this.id),l&&(l.parentNode.removeChild(l),l=null),A=this.lineWidth,this.trendStyle){case G.None:A=0;case G.Step:case G.Linear:this.currentYAxis.visible&&(this.fill&&""!==this.dummyTrendIndicatorFill&&H("polyline",{points:this.dummyTrendIndicatorFill.trim(),id:"filltrendIndicator_"+this.id,fill:this.fillColor,stroke:"none","clip-path":this.currentYAxis.trendIndicatorRectClippathId,appendTo:this.currentYAxis.trendIndicatorGroup}),D={points:this.trendIndicatorPoints.trim(),id:"trendIndicator_"+this.id,fill:this.fillColor,stroke:this.color,"stroke-dasharray":z,"stroke-width":A,"marker-start":"none","marker-mid":"url(#marker_"+this.id+")","marker-end":"none","clip-path":this.currentYAxis.trendIndicatorRectClippathId,appendTo:this.currentYAxis.trendIndicatorGroup},H("polyline",D))}b.appendChild(o),E&&b.insertBefore(E,o),f=null,n=null,y=null,o=null,E=null,j=null,p=null,q=null,r=null,s=null,t=null,u=null,B=null,C=null,D=null,F=null},updateTrend:function(a){"use strict";var b,c,d,e,f=PWC.HmiAC.svgShape.CreateSvgElement,g=PWC.HmiAC.TrendStyle,h=this.currentTrendWindow.getEventSVG(),i=this.parentTrendView.SVGParent.getElementById("TrendPropertyGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","TrendPropertyGroup"+this.id),j=this.parentTrendView.SVGParent.getElementById("HighLimitTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","HighLimitTrendGroup"+this.id),k=this.parentTrendView.SVGParent.getElementById("LowLimitTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","LowLimitTrendGroup"+this.id),l=this.parentTrendView.SVGParent.getElementById("UncertainQualityTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","UncertainQualityTrendGroup"+this.id),m=this.parentTrendView.SVGParent.getElementById("LowLimitDummyTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","LowLimitDummyTrendGroup"+this.id),n=this.parentTrendView.SVGParent.getElementById("HighLimitDummyTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","HighLimitDummyTrendGroup"+this.id),o=this.parentTrendView.SVGParent.getElementById("UncertainQualityDummyTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","UncertainQualityDummyTrendGroup"+this.id),p=this.parentTrendView.SVGParent.getElementById("LowLimitFillTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","LowLimitFillTrendGroup"+this.id),q=this.parentTrendView.SVGParent.getElementById("HighLimitFillTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","HighLimitFillTrendGroup"+this.id),r=this.parentTrendView.SVGParent.getElementById("UncertainQualityFillTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","UncertainQualityFillTrendGroup"+this.id),s=this.parentTrendView.SVGParent.getElementById("TrendFillPropertyGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","TrendFillPropertyGroup"+this.id);
switch(this.createPointCollection(a),this.trendStyle){case g.Step:if(d=this.parentTrendView.SVGParent.getElementById("polyline_"+this.id+"_dummy")||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"polyline","polyline_"+this.id+"_dummy"),d&&d.setAttribute("points",this.dummyPoints.trim()),this.highLimit&&(c=this.highLimitDummyPoints.length)>0){for(b=0;c>b;b++)(d=n.childNodes[b])?(d.setAttribute("points",this.highLimitDummyPoints[b].trim()),d.setAttribute("id","highLimit_polyline_"+this.id+"_dummy_"+b)):f("polyline",{points:this.highLimitDummyPoints[b].trim(),"stroke-dasharray":"inherit",id:"highLimit_polyline_"+this.id+"_dummy_"+b,fill:"none",stroke:"inherit","stroke-width":"inherit","clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:n});for(;c<n.childElementCount;)n.removeChild(n.lastElementChild);i.removeChild(n),i.appendChild(n)}if(this.lowLimit&&(c=this.lowLimitDummyPoints.length)>0){for(b=0;c>b;b++)(d=m.childNodes[b])?(d.setAttribute("points",this.lowLimitDummyPoints[b].trim()),d.setAttribute("id","lowLimit_polyline_"+this.id+"_dummy_"+b)):f("polyline",{points:this.lowLimitDummyPoints[b].trim(),"stroke-dasharray":"inherit",id:"lowLimit_polyline_"+this.id+"_dummy_"+b,fill:"none",stroke:"inherit","stroke-width":"inherit","clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:m});for(;c<m.childElementCount;)m.removeChild(m.lastElementChild);i.removeChild(m),i.appendChild(m)}if(this.uncertainQuality&&(c=this.uncertainQualityDummyPoints.length)>0){for(b=0;c>b;b++)(d=o.childNodes[b])?(d.setAttribute("points",this.uncertainQualityDummyPoints[b].trim()),d.setAttribute("id","uncertainQuality_polyline_"+this.id+"_dummy_"+b)):f("polyline",{points:this.uncertainQualityDummyPoints[b].trim(),"stroke-dasharray":"inherit",id:"uncertainQuality_polyline_"+this.id+"_dummy_"+b,fill:"none",stroke:"inherit","stroke-width":"inherit","clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:o});for(;c<o.childElementCount;)o.removeChild(o.lastElementChild);i.removeChild(o),i.appendChild(o)}case g.None:case g.Linear:if(this.fill&&(e=this.parentTrendView.SVGParent.getElementById("fillPolyline_"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"polyline","fillPolyline_"+this.id),e&&e.setAttribute("points",this.trendFillPoints.trim())),e=this.parentTrendView.SVGParent.getElementById("polyline_"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"polyline","polyline_"+this.id),e&&e.setAttribute("points",this.points.trim()),this.highLimit&&(c=this.highLimitPoints.length)>0){for(b=0;c>b;b++)(e=j.childNodes[b])?(e.setAttribute("points",this.highLimitPoints[b].trim()),e.setAttribute("marker-start",this.highLimitMarkerPositions[b].markerStart),e.setAttribute("marker-end",this.highLimitMarkerPositions[b].markerEnd),e.setAttribute("id","highLimit_polyline_"+this.id+"_"+b)):f("polyline",{points:this.highLimitPoints[b].trim(),"stroke-dasharray":"inherit",id:"highLimit_polyline_"+this.id+"_"+b,fill:"none",stroke:"inherit","stroke-width":"inherit","marker-start":this.highLimitMarkerPositions[b].markerStart,"marker-mid":"url(#highLimitMarker_"+this.id+")","marker-end":this.highLimitMarkerPositions[b].markerEnd,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:j}),this.fill&&((e=q.childNodes[b])?(e.setAttribute("points",this.highLimitFillPoints[b].trim()),e.setAttribute("id","highLimit_fillPolyline_"+this.id+"_"+b)):f("polyline",{points:this.highLimitFillPoints[b].trim(),id:"highLimit_fillPolyline_"+this.id+"_"+b,fill:"inherit",stroke:"none","stroke-width":"inherit",ignoreEvent:!0,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:q}));for(;c<j.childElementCount;)j.removeChild(j.lastElementChild);if(this.fill)for(;c<q.childElementCount;)q.removeChild(q.lastElementChild);i.removeChild(q),i.appendChild(q),i.removeChild(j),i.appendChild(j)}if(this.lowLimit){if((c=this.lowLimitPoints.length)>0){for(b=0;c>b;b++)(e=k.childNodes[b])?(e.setAttribute("points",this.lowLimitPoints[b].trim()),e.setAttribute("marker-start",this.lowLimitMarkerPositions[b].markerStart),e.setAttribute("marker-end",this.lowLimitMarkerPositions[b].markerEnd),e.setAttribute("id","lowLimit_polyline_"+this.id+"_"+b)):f("polyline",{points:this.lowLimitPoints[b].trim(),"stroke-dasharray":"inherit",id:"lowLimit_polyline_"+this.id+"_"+b,fill:"none",stroke:"inherit","stroke-width":"inherit","marker-start":this.lowLimitMarkerPositions[b].markerStart,"marker-mid":"url(#lowLimitMarker_"+this.id+")","marker-end":this.lowLimitMarkerPositions[b].markerEnd,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:k});for(;c<k.childElementCount;)k.removeChild(k.lastElementChild)}this.fill&&(e=p.lastChild)&&e.setAttribute("points",this.lowLimitFillPoints.trim()),i.removeChild(p),i.appendChild(p),i.removeChild(k),i.appendChild(k)}if(this.uncertainQuality&&(c=this.uncertainQualityPoints.length)>0){for(b=0;c>b;b++)(e=l.childNodes[b])?(e.setAttribute("points",this.uncertainQualityPoints[b].trim()),e.setAttribute("id","uncertainQuality_polyline_"+this.id+"_"+b)):f("polyline",{points:this.uncertainQualityPoints[b].trim(),"stroke-dasharray":"inherit",id:"uncertainQuality_polyline_"+this.id+"_"+b,fill:"none",stroke:"inherit","stroke-width":"inherit","marker-start":"url(#uncertainQualityMarker_"+this.id+")","marker-mid":"url(#uncertainQualityMarker_"+this.id+")","marker-end":"url(#uncertainQualityMarker_"+this.id+")","clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:l}),this.fill&&((e=r.childNodes[b])?(e.setAttribute("points",this.uncertainQualityFillPoints[b].trim()),e.setAttribute("id","uncertainQuality_fillPolyline_"+this.id+"_"+b)):f("polyline",{points:this.uncertainQualityFillPoints[b].trim(),id:"uncertainQuality_fillPolyline_"+this.id+"_"+b,fill:"inherit",stroke:"none","stroke-width":"inherit",ignoreEvent:!0,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:r}));for(;c<l.childElementCount;)l.removeChild(l.lastElementChild);if(this.fill)for(;c<r.childElementCount;)r.removeChild(r.lastElementChild);i.removeChild(r),i.appendChild(r),i.removeChild(l),i.appendChild(l)}}i&&(i.parentNode.removeChild(i),h.appendChild(i)),s&&(s.parentNode.removeChild(s),h.insertBefore(s,i)),d=null,e=null,h=null,i=null,j=null,k=null,m=null,n=null,p=null,q=null,s=null},swapWithNextTrend:function(){var a=this.parentTrendView.SVGParent.getElementById("TrendPropertyGroup"+this.id),b=this.parentTrendView.SVGParent.getElementById("TrendFillPropertyGroup"+this.id),c=a.parentNode;c.insertBefore(a,b.previousElementSibling.previousElementSibling),c.insertBefore(b,a),c=null,a=null,b=null},setIndicatorPoints:function(){var a;this.fill&&(a=this.parentTrendView.SVGParent.getElementById("filltrendIndicator_"+this.id),a?(a.setAttribute("points",this.dummyTrendIndicatorFill.trim()),a=null):""!==this.dummyTrendIndicatorFill&&PWC.HmiAC.svgShape.CreateSvgElement("polyline",{points:this.dummyTrendIndicatorFill.trim(),id:"filltrendIndicator_"+this.id,fill:this.fillColor,stroke:"none",appendTo:this.currentYAxis.trendIndicatorGroup})),this.parentTrendView.SVGParent.getElementById("trendIndicator_"+this.id).setAttribute("points",this.trendIndicatorPoints.trim())},OnUpdate:function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m=PWC.HmiAC.TrendPropId,n="polyline_"+this.id,o=this.parentTrendView.SVGParent,p="trendIndicator_"+this.id,q=o.getElementById("fillPolyline_"+this.id),r=o.getElementById("filltrendIndicator_"+this.id),s=o.getElementById("HighLimitTrendGroup"+this.id),t=o.getElementById("LowLimitTrendGroup"+this.id),u=o.getElementById("UncertainQualityTrendGroup"+this.id),v=o.getElementById("LowLimitDummyTrendGroup"+this.id),w=o.getElementById("HighLimitDummyTrendGroup"+this.id),x=o.getElementById("UncertainQualityDummyTrendGroup"+this.id),y=o.getElementById("LowLimitFillTrendGroup"+this.id),z=o.getElementById("HighLimitFillTrendGroup"+this.id),A=o.getElementById("UncertainQualityFillTrendGroup"+this.id),B=PWC.HmiAC.TrendStyle,C=PWC.Lib.Canvas.Converters,D=C.enumConverter.Color,E=PWC.HmiAC.Common.HelperUtil;switch(a){case m.Index:this.index=b,this.setPropPart("Index",b,c);break;case m.DisplayName:this.displayName=b,this.setPropPart("DisplayName",b,c);break;case m.Visible:b?(this.setPropPart("Visible",1,c),this.visibility=1,h=this.tagList.items,this.fill&&this.filledSVGCreation(),this.parentTrendView.trendObjectType===PWC.HmiAC.TrendObjectType.Function?this.parentTrendView.createDrawableCollections():this.parentTrendView.createDrawableCollections(this.valueAxis),this.parentTrendView.trendObjectType===PWC.HmiAC.TrendObjectType.Online?this.trendWindow&&!this.currentTrendWindow.visible||this.valueAxis&&this.timeAxis&&!this.tagInvalid||this.parentTrendView.addToDisconnectedSources(this.name,this.dataSource.Tag):this.trendWindow&&!this.currentTrendWindow.visible||this.xAxis&&this.yAxis&&!this.tagInvalid||this.parentTrendView.addToDisconnectedSources(this.name,this.dataSourceX.Tag,this.dataSourceY.Tag),this.parentTrendView.updateConnectionState()):(this.setPropPart("Visible",0,c),this.visibility=0,this.clearTagList(),g=this.valueAxis,this.parentTrendView.trendObjectType===PWC.HmiAC.TrendObjectType.Function?this.parentTrendView.createDrawableCollections():this.parentTrendView.createDrawableCollections(g),this.parentTrendView.removeFromDisconnectedSources(this.name)),this.parentTrendView.trendObjectType===PWC.HmiAC.TrendObjectType.Online?this.visibility&&2===this.dataSource.TagDataSourceType&&this.requestHistoricalData():this.parentTrendView.trendObjectType===PWC.HmiAC.TrendObjectType.Function&&this.visibility&&2===this.dataSourceX.TagDataSourceType&&this.requestHistoricalData();break;case m.LineColor:c?(k=b,l=E.hexStrToDecColor(b)):(k=C.convertTo(D,b),l=b),this.setPropPart("LineColor",l,c),this.color=k,this.visibility&&(this.trendStyle===B.Step?(i=o.getElementById(n+"_dummy"))&&i.setAttribute("stroke",k):(i=o.getElementById(n))&&i.setAttribute("stroke",k),(i=o.getElementById(p))&&i.setAttribute("stroke",k),f=this.parentTrendView.getXAxisByName(this.getXAxis()),g=this.parentTrendView.getYAxisByName(this.getYAxis()),null!==f&&f.inTrendColor&&f.getTrends()[0].name===this.name&&(e=o.getElementById(f.id+"_group"))&&(e.setAttribute("stroke",k),e.setAttribute("fill",k)),null!==g&&g.inTrendColor&&g.getTrends()[0].name===this.name&&(e=o.getElementById(g.id+"_group"))&&(e.setAttribute("stroke",k),e.setAttribute("fill",k)));break;case m.LineStyle:this.lineStyle=c?PWC.HmiAC.LineStyle[b]:b,this.setPropPart("LineStyle",this.lineStyle,c),this.visibility&&(j=this.getLineStyle(),this.trendStyle===B.Step?((i=o.getElementById(n+"_dummy"))&&i.setAttribute("stroke-dasharray",j),this.highLimit&&w.setAttribute("stroke-dasharray",j),this.lowLimit&&v.setAttribute("stroke-dasharray",j),this.uncertainQuality&&x.setAttribute("stroke-dasharray",j)):((i=o.getElementById(n))&&i.setAttribute("stroke-dasharray",j),this.highLimit&&s.setAttribute("stroke-dasharray",j),this.lowLimit&&t.setAttribute("stroke-dasharray",j),this.uncertainQuality&&u.setAttribute("stroke-dasharray",j)),(i=o.getElementById(p))&&i.setAttribute("stroke-dasharray",j));break;case m.LineWidth:this.lineWidth=parseInt(b,10),this.setPropPart("LineWidth",this.lineWidth,c),this.visibility&&(this.trendStyle===B.Step?((i=o.getElementById(n+"_dummy"))&&i.setAttribute("stroke-width",this.lineWidth),this.highLimit&&w.setAttribute("stroke-width",this.lineWidth),this.lowLimit&&v.setAttribute("stroke-width",this.lineWidth),this.uncertainQuality&&x.setAttribute("stroke-width",this.lineWidth)):((i=o.getElementById(n))&&i.setAttribute("stroke-width",this.lineWidth),this.highLimit&&s.setAttribute("stroke-width",this.lineWidth),this.lowLimit&&t.setAttribute("stroke-width",this.lineWidth),this.uncertainQuality&&u.setAttribute("stroke-width",this.lineWidth)),this.parentTrendView.trendObjectType===PWC.HmiAC.TrendObjectType.Function?void 0!==this.yAxis&&this.parentTrendView.setTrendIndicatorPoints(this.yAxis):void 0!==this.valueAxis&&this.parentTrendView.setTrendIndicatorPoints(this.valueAxis),(i=o.getElementById(p))&&i.setAttribute("stroke-width",this.lineWidth));break;case m.PointStyle:this.pointStyle=c?PWC.HmiAC.PointStyle[b]:b,this.setPropPart("PointStyle",this.pointStyle,c),d=o.getElementById("marker_"+this.id),d&&(d.removeChild(d.childNodes[0]),this.getPointElement(d)),this.highLimit&&(d=o.getElementById(this.highLimitMarkerId))&&(d.removeChild(d.childNodes[0]),this.getPointElement(d,PWC.HmiAC.MarkerPositionType.HighLimit)),this.lowLimit&&(d=o.getElementById(this.lowLimitMarkerId))&&(d.removeChild(d.childNodes[0]),this.getPointElement(d,PWC.HmiAC.MarkerPositionType.LowLimit)),this.uncertainQuality&&(d=o.getElementById(this.uncertainQualityMarkerId))&&(d.removeChild(d.childNodes[0]),this.getPointElement(d,PWC.HmiAC.MarkerPositionType.UncertainQuality));break;case m.Mode:this.trendStyle=c?PWC.HmiAC.TrendStyle[b]:b,this.setPropPart("Mode",this.trendStyle,c),this.draw(!this.parentTrendView.online);break;case m.PointWidth:this.pointWidth=parseInt(b,10),this.setPropPart("PointWidth",this.pointWidth,c),this.viewBoxDim=this.pointWidth+1,this.visibility&&(d=o.getElementById("marker_"+this.id),d.setAttribute("viewBox","0 0 "+this.viewBoxDim+" "+this.viewBoxDim),d.setAttribute("refX",this.viewBoxDim/2),d.setAttribute("refY",this.viewBoxDim/2),d.setAttribute("markerWidth",this.viewBoxDim),d.setAttribute("markerHeight",this.viewBoxDim),d.removeChild(d.childNodes[0]),this.getPointElement(d),this.highLimit&&(d=o.getElementById(this.highLimitMarkerId))&&(d.setAttribute("viewBox","0 0 "+this.viewBoxDim+" "+this.viewBoxDim),d.setAttribute("refX",this.viewBoxDim/2),d.setAttribute("refY",this.viewBoxDim/2),d.setAttribute("markerWidth",this.viewBoxDim),d.setAttribute("markerHeight",this.viewBoxDim),d.removeChild(d.childNodes[0]),this.getPointElement(d,PWC.HmiAC.MarkerPositionType.HighLimit)),this.lowLimit&&(d=o.getElementById(this.lowLimitMarkerId))&&(d.setAttribute("viewBox","0 0 "+this.viewBoxDim+" "+this.viewBoxDim),d.setAttribute("refX",this.viewBoxDim/2),d.setAttribute("refY",this.viewBoxDim/2),d.setAttribute("markerWidth",this.viewBoxDim),d.setAttribute("markerHeight",this.viewBoxDim),d.removeChild(d.childNodes[0]),this.getPointElement(d,PWC.HmiAC.MarkerPositionType.LowLimit)),this.uncertainQuality&&(d=o.getElementById(this.uncertainQualityMarkerId))&&(d.setAttribute("viewBox","0 0 "+this.viewBoxDim+" "+this.viewBoxDim),d.setAttribute("refX",this.viewBoxDim/2),d.setAttribute("refY",this.viewBoxDim/2),d.setAttribute("markerWidth",this.viewBoxDim),d.setAttribute("markerHeight",this.viewBoxDim),d.removeChild(d.childNodes[0]),this.getPointElement(d,PWC.HmiAC.MarkerPositionType.UncertainQuality)));break;case m.PointColor:c?(k=b,l=E.hexStrToDecColor(b)):(k=C.convertTo(D,b),l=b),this.setPropPart("PointColor",l,c),this.pointColor=k,this.visibility&&(i=o.getElementById("marker_"+this.id))&&i.childNodes[0].setAttribute("fill",k);break;case m.FillStyle:if(c&&b||!c&&0===+b)h=this.tagList.items,this.setPropPart("FillStyle",0,c),this.fill=!0,this.filledSVGCreation(),i=o.getElementById("filltrendIndicator_"+this.id),i&&i.setAttribute("fill",this.fillColor);else{if(this.setPropPart("FillStyle",65536,c),this.fill=!1,q&&(q.parentNode.removeChild(q),r&&r.parentNode.removeChild(r)),y)for(;y.childElementCount;)y.removeChild(y.lastChild);if(z)for(;z.childElementCount;)z.removeChild(z.lastChild);if(A)for(;A.childElementCount;)A.removeChild(A.lastChild)}break;case m.FillColor:c?(k=b,l=E.hexStrToDecColor(b)):(k=C.convertTo(D,b),l=b),this.setPropPart("FillColor",l,c),this.fillColor=k,this.fill&&((i=o.getElementById("fillPolyline_"+this.id))&&i.setAttribute("fill",this.fillColor),(i=o.getElementById("filltrendIndicator_"+this.id))&&i.setAttribute("fill",this.fillColor));break;case m.Actualize:this.actualize=b;break;case m.TrendWindow:this.setPropPart("TrendWindow",b),this.trendWindow=b,this.currentTrendWindow=this.parentTrendView.getDrawableTrendWindowByName(this.trendWindow),this.removeXAxis(),this.removeYAxis(),this.parentTrendView.addToDisconnectedSources(this.name,this.dataSource.Tag),this.parentTrendView.setDrawableTrends(),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case m.TagDataSourceType:break;case m.LowLimit:this.lowLimit===!1&&b?(this.lowLimit=b,this.createLowLimitTagList(),this.lowLimitPartIndex=this.limitParts.length,b=this.highLimit&&1===this.limitParts[this.highLimitPartIndex].partid?2:1,this.limitParts.push({Mode:PWC.HmiAC.TrendLimitModes.LowLimit,FillColor:E.hexStrToDecColor(this.lowLimitColor),Value:this.lowLimitValue,partid:b}),this.draw(!this.parentTrendView.online)):this.lowLimit&&b===!1&&(this.lowLimit=b,this.clearLowLimitTagList(),this.limitParts.splice(this.lowLimitPartIndex,1),this.lowLimitPartIndex=null,this.draw(!this.parentTrendView.online));break;case m.LowLimitColor:c?(k=b,l=E.hexStrToDecColor(b)):(k=C.convertTo(D,b),l=b),this.lowLimitColor=k,this.lowLimit&&(this.visibility&&((d=o.getElementById(this.lowLimitMarkerId))&&d.childNodes[0].setAttribute("fill",k),this.trendStyle===B.Step?v.setAttribute("stroke",k):t.setAttribute("stroke",k),y&&y.setAttribute("fill",k)),PWC.Lib.Config.Properties.setPropPart(this.limitParts[this.lowLimitPartIndex],"FillColor",l));break;case m.LowLimitValue:this.lowLimitValue=parseInt(b,10),this.lowLimit&&(this.createLowLimitTagList(),this.draw(!this.parentTrendView.online),PWC.Lib.Config.Properties.setPropPart(this.limitParts[this.lowLimitPartIndex],"Value",this.lowLimitValue));break;case m.HighLimit:this.highLimit===!1&&b?(this.highLimit=b,this.createHighLimitTagList(),this.highLimitPartIndex=this.limitParts.length,b=this.lowLimit&&1===this.limitParts[this.lowLimitPartIndex].partid?2:1,this.limitParts.push({Mode:PWC.HmiAC.TrendLimitModes.HighLimit,FillColor:E.hexStrToDecColor(this.highLimitColor),Value:this.highLimitValue,partid:b}),this.draw(!this.parentTrendView.online)):this.highLimit&&b===!1&&(this.highLimit=b,this.clearHighLimitTagList(),this.limitParts.splice(this.highLimitPartIndex,1),this.highLimitPartIndex=null,this.draw(!this.parentTrendView.online));break;case m.HighLimitColor:c?(k=b,l=E.hexStrToDecColor(b)):(k=C.convertTo(D,b),l=b),this.highLimitColor=k,this.highLimit&&(this.visibility&&((d=o.getElementById(this.highLimitMarkerId))&&d.childNodes[0].setAttribute("fill",k),this.trendStyle===B.Step?w.setAttribute("stroke",k):s.setAttribute("stroke",k),z&&z.setAttribute("fill",k)),PWC.Lib.Config.Properties.setPropPart(this.limitParts[this.highLimitPartIndex],"FillColor",l));break;case m.HighLimitValue:this.highLimitValue=parseInt(b,10),this.highLimit&&(this.createHighLimitTagList(),this.draw(!this.parentTrendView.online),PWC.Lib.Config.Properties.setPropPart(this.limitParts[this.highLimitPartIndex],"Value",this.highLimitValue));break;case m.UncertainQuality:(this.uncertainQuality=b)?(this.createUncertainQualityTagList(),this.qualityPart.push({FillColor:E.hexStrToDecColor(this.uncertainQualityColor),partid:1})):(this.clearUncertainQualityTagList(),this.qualityPart.splice(0,1)),this.draw(!this.parentTrendView.online);break;case m.UncertainQualityColor:c?(k=b,l=E.hexStrToDecColor(b)):(k=C.convertTo(D,b),l=b),this.uncertainQualityColor=k,this.uncertainQuality&&(this.visibility&&((d=o.getElementById(this.uncertainQualityMarkerId))&&d.childNodes[0].setAttribute("fill",k),this.trendStyle===B.Step?x.setAttribute("stroke",k):u.setAttribute("stroke",k),A&&A.setAttribute("fill",k)),PWC.Lib.Config.Properties.setPropPart(this.qualityPart[0],"FillColor",l));break;default:this.updateProperty(a,b,c)}o=null,i=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.FunctionTrend=function(){"use strict";PWC.HmiAC.FunctionTrend.baseCtor.call(this);var a,b=PWC.HmiAC.RangeType,c=this,d=PWC.HmiAC.RangeType,e=PWC.Lib.Config.Properties,f=1e4,g=116444736e5,h=PWC.HmiAC.CustomDateFormat.prototype.validateDate,i=[],j="0.0.0.0.0.0",k=1e6,l=function(a){return-k>a?a=-k:a>k&&(a=k),a},m=function(){var a,b,e,f,g,h=c.tagList.items,i=h.length,j=c.tagList,k=[],l=!1,m=!1;if(g=c.rangeType,g===d.PointCount){for(b=0;b<i-c.pointCount&&(l||c.xminVal!==h[b].xTagValue&&c.xmaxVal!==h[b].xTagValue||(l=!0,!m))&&(m||c.ymaxVal!==h[b].yTagValue&&c.yminVal!==h[b].yTagValue||(m=!0,!l));b++);1===c.pointCount&&i>c.pointCount&&(c.boundingValue=j.items[i-c.pointCount-1]),j.removeItems(i-c.pointCount)}else if(0!==h.length){for(f=(new Date).getTime()-c.axisTimeRange,b=0;i>b;b++)h[b].timeStamp<f&&k.push(h[b].timeStamp);for(b=0;b<k.length;b++)a=k[b],e=j.findIndexByTimeStamp(a),-1!==e&&(l||c.xminVal!==h[b].xTagValue&&c.xmaxVal!==h[b].xTagValue||(l=!0),m||c.ymaxVal!==h[b].yTagValue&&c.yminVal!==h[b].yTagValue||(m=!0),c.tagList.removeByIndex(e));k=[]}if((l||m)&&h.length>0)for(c.ymaxVal=c.yminVal=h[0].yTagValue,c.xmaxVal=c.xminVal=h[0].xTagValue,b=1;b<h.length;b++)c.yminVal>h[b].yTagValue&&(c.yminVal=h[b].yTagValue),c.ymaxVal<h[b].yTagValue&&(c.ymaxVal=h[b].yTagValue),c.xminVal>h[b].xTagValue&&(c.xminVal=h[b].xTagValue),c.xmaxVal<h[b].xTagValue&&(c.xmaxVal=h[b].xTagValue);return{extremeXRemoved:l,extremeYRemoved:m}};this.polyDummyPoints="",this.polyPoints="",this.points="",this.dummyPoints="",this.xminVal=void 0,this.xmaxVal=0,this.yminVal=void 0,this.ymaxVal=0,this.xYTagUpdateCycleSame=void 0,this.setPropPart=function(a,b){e.setPropPart(c.propTrend,a,b),this.parentTrendView.screenItem.gfxWebLib.connection.sendPartPropertyByName(this.parentTrendView.screenItem.rtoid,"Trends."+this.partId,a,b,!1,!1)},this.yminValTemp=void 0,this.ymaxValTemp=void 0,this.xminValTemp=void 0,this.xmaxValTemp=void 0,this.clearTagList=function(){this.tagList.items=[],this.oldTagList.items=[],this.xminVal=void 0,this.xmaxVal=0,this.yminVal=void 0,this.ymaxVal=0,this.yminValTemp=void 0,this.ymaxValTemp=void 0,this.xminValTemp=void 0,this.xmaxValTemp=void 0},this.initialize=function(c,d){var e,f=PWC.Lib.Config.Properties,g=PWC.Lib.Canvas.Converters;this.name=f.getPropPart(c,"FunctionTrend","Name"),this.displayName=f.getPropPart(c,"FunctionTrend","DisplayName"),this.parentTrendView=d,this.trendWindow=f.getPropPart(c,"FunctionTrend","TrendWindow"),this.xAxis=f.getPropPart(c,"FunctionTrend","XAxis"),this.yAxis=f.getPropPart(c,"FunctionTrend","YAxis"),this.id=(this.parentTrendView.getControlName()+"_"+this.trendWindow+"_"+this.name).replace(/\s+/g,"").replace(/\(/g,"_ob_").replace(/\)/g,"_cb_").replace(/\\/g,"_bs_").replace(/\'/g,"_sq_").replace(/\"/g,"_dq_"),this.color=f.getPropPart(c,"FunctionTrend","LineColor",g.enumConverter.Color),d.setPreDefTrendColorCount(this.color,!0),this.lineStyle=f.getPropPart(c,"FunctionTrend","LineStyle"),this.lineWidth=f.getPropPart(c,"FunctionTrend","LineWidth"),this.pointStyle=f.getPropPart(c,"FunctionTrend","PointStyle"),this.pointWidth=f.getPropPart(c,"FunctionTrend","PointWidth"),this.label=f.getPropPart(c,"FunctionTrend","DisplayName"),this.pointColor=f.getPropPart(c,"FunctionTrend","PointColor",g.enumConverter.Color),this.fillColor=f.getPropPart(c,"FunctionTrend","FillColor",g.enumConverter.Color),this.index=parseInt(f.getPropPart(c,"FunctionTrend","Index"),10),void 0===c.Index&&0===this.index&&(e=d.getTrendCount())>0&&(this.index=e),this.partId=f.getPropPart(c,"FunctionTrend","partid"),this.visibility=f.getPropPart(c,"FunctionTrend","Visible"),this.trendStyle=f.getPropPart(c,"FunctionTrend","Mode"),this.viewBoxDim=parseInt(this.pointWidth,10)+10,this.dataSourceXProp=f.getPropPart(c,"FunctionTrend","DataSourceX"),this.dataSourceX={},this.dataSourceX.Tag=f.getPropPart(this.dataSourceXProp,"TagDataSource","Tag"),this.dataSourceX.TagDataSourceType=f.getPropPart(this.dataSourceXProp,"TagDataSource","TagDataSourceType"),this.dataSourceX.CycleTimeProp=f.getPropPart(this.dataSourceXProp,"TagDataSource","UpdateCycle"),this.dataSourceX.cycleTime="string"==typeof this.dataSourceX.CycleTimeProp?+this.dataSourceX.CycleTimeProp.split(".")[1]:this.dataSourceX.CycleTimeProp,this.dataSourceYProp=f.getPropPart(c,"FunctionTrend","DataSourceY"),this.dataSourceY={},this.dataSourceY.Tag=f.getPropPart(this.dataSourceYProp,"TagDataSource","Tag"),this.dataSourceY.TagDataSourceType=f.getPropPart(this.dataSourceYProp,"TagDataSource","TagDataSourceType"),this.dataSourceY.CycleTimeProp=f.getPropPart(this.dataSourceYProp,"TagDataSource","UpdateCycle"),this.dataSourceY.cycleTime="string"==typeof this.dataSourceY.CycleTimeProp?+this.dataSourceY.CycleTimeProp.split(".")[1]:this.dataSourceY.CycleTimeProp,this.xYTagUpdateCycleSame=this.dataSourceX.cycleTime===this.dataSourceY.cycleTime,this.currentXAxis=d.getXAxisByName(this.xAxis),this.currentYAxis=d.getYAxisByName(this.yAxis),this.currentTrendWindow=d.getDrawableTrendWindowByName(c.TrendWindow),this.rulerControlData={value:"",dateTime:""},this.rangeType=f.getPropPart(c,"FunctionTrend","RangeType"),this.timeRangeFactor=f.getPropPart(c,"FunctionTrend","TimeRangeFactor"),this.timeRangeBase=f.getPropPart(c,"FunctionTrend","TimeRangeBase"),this.beginTimeUTC=PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(f.getPropPart(c,"FunctionTrend","BeginTime")),this.endTimeUTC=PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(f.getPropPart(c,"FunctionTrend","EndTime")),this.endTimeUTC=Date.prototype.getCorrectTime(this.endTimeUTC,this.parentTrendView.timeBase),this.beginTimeUTC=Date.prototype.getCorrectTime(this.beginTimeUTC,this.parentTrendView.timeBase),this.tagList=new PWC.HmiAC.TagList,this.oldTagList=new PWC.HmiAC.TagList,this.pointCount=f.getPropPart(c,"FunctionTrend","PointCount"),this.refresh=f.getPropPart(c,"FunctionTrend","Online"),this.axisTimeRange=this.rangeType===b.TimeRange?this.calculateTimeRange():this.endTimeUTC-this.beginTimeUTC,this.propTrend=c,this.previousYTagValueTemp=null,this.previousXTagValueTemp=null,this.historicalDataRequested=!1,a=d.isLeftOrRight,this.tagInvalid=!1,this.dataSourceX.Tag&&""!==this.dataSourceX.Tag||(this.dataSourceX.Tag="",this.tagInvalid=!0),this.dataSourceY.Tag&&""!==this.dataSourceY.Tag||(this.dataSourceY.Tag="",this.tagInvalid=!0)},this.calculateTimeRange=function(){var a;if(this.rangeType===b.PointCount||this.rangeType===b.FromBeginToEnd)return this.endTimeUTC-this.beginTimeUTC;switch(this.timeRangeBase){case 1:case"1":a=PWC.HmiAC.FileTime.MS500;break;case 2:case"2":a=PWC.HmiAC.FileTime.Sec;break;case 3:case"3":a=PWC.HmiAC.FileTime.Minute;break;case 4:case"4":a=PWC.HmiAC.FileTime.Hour;break;case 5:case"5":a=PWC.HmiAC.FileTime.Day}return a*this.timeRangeFactor},this.onTagListChanged=function(a,b){var c,d,e,f=this.tagList,g={updateRequiredX:!1,updateRequiredY:!1},h=!1,j=!1,k={extremeXRemoved:!1,extremeYRemoved:!1};if(this.historicalDataRequested){if(b)return i=i.concat(a),g;this.parentTrendView.online?i.length>0&&(a=a.concat(i)):f=this.oldTagList,i=[],this.historicalDataRequested=!1}for(c=0;c<a.length;++c)d=new PWC.HmiAC.Point,d.timeStamp=a[c].timeStamp,d.xTagValue=a[c].xTagValue,d.yTagValue=a[c].yTagValue,f&&(f.items.length>0?(e=f.findIndexByTimeStamp(d.timeStamp),-1===e&&(d.yTagValue<this.yminVal&&(this.yminVal=d.yTagValue),d.yTagValue>this.ymaxVal&&(this.ymaxVal=d.yTagValue),d.xTagValue<this.xminVal&&(this.xminVal=d.xTagValue),d.xTagValue>this.xmaxVal&&(this.xmaxVal=d.xTagValue),(this.yminVal<this.currentYAxis.currentBeginValue||this.ymaxVal>this.currentYAxis.currentEndValue)&&(j=!0),(this.xminVal<this.currentXAxis.currentBeginValue||this.xmaxVal>this.currentXAxis.currentEndValue)&&(h=!0),f.add(d))):(this.yminVal=this.ymaxVal=d.yTagValue,this.xminVal=this.xmaxVal=d.xTagValue,j=!0,h=!0,f.add(d)));return(0===this.rangeType||1===this.rangeType||2===this.rangeType)&&this.refresh&&f.items.length>1&&(k=m()),g.updateRequiredX=h||k.extremeXRemoved,g.updateRequiredY=j||k.extremeYRemoved,d=null,g},this.requestHistoricalData=function(){var a=[],b=0,c=0,d=[],e=[],h=0,i=[],j=[],k=PWC.HmiAC.MoveToType.MoveToLast;h=Math.floor(Math.pow(2,31)-1),2===this.dataSourceX.TagDataSourceType&&void 0!==this.dataSourceX.Tag&&(this.clearTagList(),this.rangeType!==PWC.HmiAC.RangeType.FromBeginToEnd||this.parentTrendView.online?this.rangeType===PWC.HmiAC.RangeType.PointCount?h=this.pointCount:c=this.calculateTimeRange():(b=(this.beginTimeUTC+g)*f,c=(this.endTimeUTC+g)*f,k=PWC.HmiAC.MoveToType.MoveToSpecifiedTime),a.push(b),a.push(b),d.push(c),d.push(c),i.push(h),i.push(h),e.push(this.parentTrendView.screenItem.gfxWebLib.connection.datatypesToString(this.parentTrendView.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(this.dataSourceX.Tag))),e.push(this.parentTrendView.screenItem.gfxWebLib.connection.datatypesToString(this.parentTrendView.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(this.dataSourceY.Tag))),j.push(this.index),j.push(this.index),this.historicalDataRequested=!0),e.length&&this.parentTrendView.sendDomainLogicRead(a,d,i,e,j,k)},this.onTagListChangedY=function(a){var b,c,d,e;for(b=0;b<a.length;++b)c=new PWC.HmiAC.Point,c.yTagValue=a[b].TagValue,c.timeStamp=a[b].TimeStamp,this.tagList&&(e=this.tagList.findIndexByTimeStamp(c.timeStamp),(c.yTagValue<this.yminVal||void 0===this.yminVal)&&(this.yminVal=c.yTagValue),c.yTagValue>this.ymaxVal&&(this.ymaxVal=c.yTagValue),-1!==e?(d=this.tagList.items[e],null!==d.xTagValue&&(d.yTagValue=c.yTagValue,this.tagList.update(d,e),this.invalidate())):this.tagList.add(c))},this.createPointCollection=function(a){var b,c,d,e,f={xTagPosition:null,yTagPosition:null};for(this.trendFillPoints="",b=a?this.oldTagList.items:this.tagList.items,c=b.length,this.points="",this.dummyPoints="",d=0;c>d;++d){if(e=b[d],null===e.xTagPosition||null===e.yTagPosition)return;(e.xTagPosition!==f.xTagPosition||e.yTagPosition!==f.yTagPosition)&&(this.points+=e.xTagPosition+","+e.yTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(this.dummyPoints+=e.xTagPosition+","+e.yTagPosition+" ",b[d+1]&&(this.dummyPoints+=b[d+1].xTagPosition+","+e.yTagPosition+" "),this.polyDummyPoints=this.dummyPoints),this.polyPoints=this.points,this.trendFillPoints=this.points+" "+this.trendCoordinateFill+" ",f=e)}f=e=null},this.invalidate=function(){var a,b,c,d,e=!1,f=!1,g=this.tagList.items,h=g.length,i=null,j=null;this.parentTrendView.getStartStop()&&(e=this.currentXAxis.invalidate(),this.parentTrendView.moveAxes||(f=this.currentYAxis.invalidate())),(e||f)&&(e&&(i=this.currentXAxis.name),f&&(j=this.currentYAxis.name)),e||(a=g[h-1],b=this.tagList.findIndexByTimeStamp(a.timeStamp),c=this.currentTrendWindow.getRect().left+this.currentXAxis.getPositionFromValue(a.xTagValue),-1!==b&&(d=g[b],null!==d.yTagValue&&(d.xTagPosition=l(c),this.tagList.update(d,b)))),f||(a=g[h-1],b=this.tagList.findIndexByTimeStamp(a.timeStamp),c=this.currentTrendWindow.getRect().top+this.currentYAxis.getPositionFromValue(a.yTagValue),-1!==b&&(d=g[b],null!==d.xTagValue&&(d.yTagPosition=l(c),this.tagList.update(d,b)))),(e||f)&&this.currentTrendWindow.reDraw(i,j),this.parentTrendView.getStartStop()&&this.draw(!1)},this.recalculateX=function(b){var c,d,e,f,g,h,i,j=this.currentTrendWindow.getRect();for(b?(c=this.oldTagList.items,e=this.oldTagList):(c=this.tagList.items,e=this.tagList),d=c.length,i=0;d>i;++i)f=c[i],h=a?j.left+this.currentXAxis.getPositionFromValue(f.xTagValue):j.top+this.currentXAxis.getPositionFromValue(f.xTagValue),null!==f.yTagValue&&(a?f.xTagPosition=l(h):f.yTagPosition=l(h),e.update(f,g))},this.setIsLeftOrRight=function(b){a=b},this.recalculateY=function(b){var c,d,e,f,g,h,i,j=this.currentTrendWindow.getRect();for(b?(c=this.oldTagList.items,e=this.oldTagList):(c=this.tagList.items,e=this.tagList),d=c.length,i=0;d>i;++i)f=c[i],h=a?j.top+this.currentYAxis.getPositionFromValue(f.yTagValue):j.left+this.currentYAxis.getPositionFromValue(f.yTagValue),null!==f.xTagValue&&(a?f.yTagPosition=l(h):f.xTagPosition=l(h),e.update(f,g))},this.saveTagList=function(){var a,b=this.tagList.items.length;for(this.xminValTemp=this.xminVal,this.xmaxValTemp=this.xmaxVal,this.yminValTemp=this.yminVal,this.ymaxValTemp=this.ymaxVal,a=0;b>a;a++)this.oldTagList.update(this.tagList.items[a],a)
},this.getXAxis=function(){return this.xAxis},this.getYAxis=function(){return this.yAxis},this.updateProperty=function(a,c,d){var i,k,l=PWC.HmiAC.TrendPropId,m=[];switch(a){case l.RangeType:switch(this.rangeType=d?b[c]:c,this.setPropPart("RangeType",this.rangeType),this.rangeType){case b.TimeRange:this.axisTimeRange=this.calculateTimeRange();break;case b.FromBeginToEnd:this.axisTimeRange=this.endTimeUTC-this.beginTimeUTC}2===this.dataSourceX.TagDataSourceType&&this.requestHistoricalData();break;case l.XAxis:break;case l.YAxis:break;case l.PointCount:this.parentTrendView.getStartStop()&&this.refresh&&1===this.measurePoints&&(this.boundingValue=null),this.pointCount=parseInt(c,10),this.setPropPart("PointCount",this.pointCount),this.rangeType===b.PointCount&&2===this.dataSourceX.TagDataSourceType&&this.requestHistoricalData();break;case l.BeginTime:if(d?(i=h(c),c=Date.prototype.getCorrectTime(i,this.parentTrendView.timeBase),k=(c+g)*f):(k=c,c=Date.prototype.getCorrectTime(PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(c),this.parentTrendView.timeBase)),c>=this.endTimeUTC)return PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.Info,"Begin time should be less than end time."),!1;this.setPropPart("BeginTime",k),this.beginTimeUTC=c,this.rangeType===b.FromBeginToEnd&&(this.axisTimeRange=this.endTimeUTC-this.beginTimeUTC),2===this.dataSourceX.TagDataSourceType&&this.requestHistoricalData();break;case l.EndTime:if(d?(i=h(c),c=Date.prototype.getCorrectTime(i,this.parentTrendView.timeBase),k=(c+g)*f):(k=c,c=Date.prototype.getCorrectTime(PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp(c),this.parentTrendView.timeBase)),c<=this.beginTimeUTC)return PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.Info,"End time should be greater than begin time."),!1;this.setPropPart("EndTime",k),this.endTimeUTC=c,this.rangeType===b.FromBeginToEnd&&(this.axisTimeRange=this.endTimeUTC-this.beginTimeUTC),2===this.dataSourceX.TagDataSourceType&&this.requestHistoricalData();break;case l.TimeRangeBase:this.timeRangeBase=d?PWC.HmiAC.RangeBase[c]:c,this.setPropPart("TimeRangeBase",this.timeRangeBase),this.rangeType===b.TimeRange&&(this.axisTimeRange=this.calculateTimeRange(),2===this.dataSourceX.TagDataSourceType&&this.requestHistoricalData());break;case l.TimeRangeFactor:this.timeRangeFactor=parseInt(c,10),this.setPropPart("TimeRangeFactor",this.timeRangeBase),this.rangeType===b.TimeRange&&(this.axisTimeRange=this.calculateTimeRange(),2===this.dataSourceX.TagDataSourceType&&this.requestHistoricalData());break;case l.TagNameX:0===c&&(c=""),this.tagInvalid=""===c.trim()?!0:!1,this.dataSourceX.Tag=c,this.visibility&&(""===this.trendWindow||this.currentTrendWindow.visible||this.tagInvalid)&&this.parentTrendView.addToDisconnectedSources(this.name,this.dataSourceX.Tag,this.dataSourceY.Tag),e.setPropPart(this.dataSourceXProp,"Tag",this.dataSourceX.Tag),d&&this.parentTrendView.screenItem.gfxWebLib.connection.sendPartPropertyByName(this.parentTrendView.screenItem.rtoid,"Trends."+this.partId+":DataSourceX","Tag",c,!0,!1),this.clearTagList(),this.parentTrendView.getDrawableTrendByName(this.name)&&this.partId&&this.draw(!this.parentTrendView.online);break;case l.TagNameY:0===c&&(c=""),this.tagInvalid=""===c.trim()?!0:!1,this.dataSourceY.Tag=c,this.visibility&&(""===this.trendWindow||this.currentTrendWindow.visible||this.tagInvalid)&&this.parentTrendView.addToDisconnectedSources(this.name,this.dataSourceX.Tag,this.dataSourceY.Tag),e.setPropPart(this.dataSourceYProp,"Tag",this.dataSourceY.Tag),d&&this.parentTrendView.screenItem.gfxWebLib.connection.sendPartPropertyByName(this.parentTrendView.screenItem.rtoid,"Trends."+this.partId+":DataSourceY","Tag",c,!0,!1),this.clearTagList(),this.parentTrendView.getDrawableTrendByName(this.name)&&this.partId&&this.draw(!this.parentTrendView.online);break;case l.CycleTimeX:d?(this.dataSourceX.cycleTime=PWC.HmiAC.CycleTime[c],m=j.split("."),m[1]=this.dataSourceX.cycleTime,this.dataSourceX.CycleTimeProp=m.join("."),e.setPropPart(this.dataSourceXProp,"UpdateCycle",this.dataSourceX.CycleTimeProp),this.parentTrendView.screenItem.gfxWebLib.connection.sendPartPropertyByName(this.parentTrendView.screenItem.rtoid,"Trends."+this.partId+":DataSourceX","UpdateCycle",this.parentTrendView.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(this.dataSourceX.CycleTimeProp),!0,!1)):("string"==typeof this.dataSourceX.CycleTimeProp?(this.dataSourceX.CycleTimeProp=c,m=c.split("."),this.dataSourceX.cycleTime=+m[1]):this.dataSourceX.cycleTime=c,e.setPropPart(this.dataSourceXProp,"UpdateCycle",c));break;case l.CycleTimeY:d?(this.dataSourceY.cycleTime=PWC.HmiAC.CycleTime[c],m=j.split("."),m[1]=this.dataSourceY.cycleTime,this.dataSourceY.CycleTimeProp=m.join("."),e.setPropPart(this.dataSourceYProp,"UpdateCycle",this.dataSourceY.CycleTimeProp),this.parentTrendView.screenItem.gfxWebLib.connection.sendPartPropertyByName(this.parentTrendView.screenItem.rtoid,"Trends."+this.partId+":DataSourceY","UpdateCycle",this.parentTrendView.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(this.dataSourceY.CycleTimeProp),!0,!1)):("string"==typeof this.dataSourceY.CycleTimeProp?(this.dataSourceY.CycleTimeProp=c,m=c.split("."),this.dataSourceY.cycleTime=+m[1]):this.dataSourceY.cycleTime=c,e.setPropPart(this.dataSourceYProp,"UpdateCycle",c))}},this.draw=function(a){this.renderTrend(a)},this.getXStartValue=function(){return this.parentTrendView.online?this.xminVal:this.xminValTemp},this.getXEndValue=function(){return this.parentTrendView.online?this.xmaxVal:this.xmaxValTemp},this.getYStartValue=function(){return this.parentTrendView.online?this.yminVal:this.yminValTemp},this.getYEndValue=function(){return this.parentTrendView.online?this.ymaxVal:this.ymaxValTemp},this.resetMinAndMaxValue=function(a){var b,c,d,e=this.tagList.items,f=e.length,g=PWC.HmiAC.ScalingType;if(a===PWC.HmiAC.AxisType.xAxis)for(d=this.currentXAxis.scalingType,this.xminVal=this.xmaxVal=void 0,b=0;f>b;b++)c=e[b],(d===g.Linear||d===g.Logarithmic&&c.xTagValue>0||d===g.NegativeLogarithmic&&c.xTagValue<0)&&((c.xTagValue<this.xminVal||void 0===this.xminVal)&&(this.xminVal=c.xTagValue),(c.xTagValue>this.xmaxVal||void 0===this.xmaxVal)&&(this.xmaxVal=c.xTagValue));else if(a===PWC.HmiAC.AxisType.yAxis)for(d=this.currentYAxis.scalingType,this.yminVal=this.ymaxVal=void 0,b=0;f>b;b++)c=e[b],(d===g.Linear||d===g.Logarithmic&&c.yTagValue>0||d===g.NegativeLogarithmic&&c.yTagValue<0)&&((c.yTagValue<this.yminVal||void 0===this.yminVal)&&(this.yminVal=c.yTagValue),(c.yTagValue>this.ymaxVal||void 0===this.ymaxVal)&&(this.ymaxVal=c.yTagValue))},this.calculateRulerValue=function(a){var b,c,d,e,f,g,h,i;if(this.parentTrendView.rulerControlColumnType===PWC.HmiAC.RulerControlColumnType.Ruler&&a){for(b=this.currentXAxis.getValueFromPosition(a[0]),c=this.currentYAxis.getValueFromPosition(a[1]),g=(this.getPointWidth()||1)/2,h=this.currentXAxis.pixelRangeToValueRange(g),i=this.currentYAxis.pixelRangeToValueRange(g),d=this.parentTrendView.online?this.tagList.items:this.oldTagList.items,f=d.length-1;f>=0;f--)if(e=d[f],e.xTagValue>b-h&&e.xTagValue<b+h&&e.yTagValue>c-i&&e.yTagValue<c+i)return this.rulerControlData.xValue=e.xTagValue,void(this.rulerControlData.yValue=e.yTagValue);this.rulerControlData.xValue=b+" i.",this.rulerControlData.yValue=c+" i."}else this.rulerControlData.xValue="",this.rulerControlData.yValue=""},this.cleanUp=function(){this.propTrend=null,this.currentTrendWindow=null,this.parentTrendView=null,this.points="",this.dummyPoints="",this.trendIndicatorPoints="",this.rulerControlData=null,this.trendFillPoints="",this.boundingValue=null,this.currentXAxis=null,this.currentYAxis=null,this.tagList.clear(),this.tagList=null,this.oldTagList.clear(),this.oldTagList=null,this.dataSourceX=null,this.dataSourceXProp=null,this.dataSourceY=null,this.dataSourceYProp=null,c=i=null}},PWC.HmiAC.FunctionTrend.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.FunctionTrend,PWC.HmiAC.TrendBase);var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.OnlineTrend=function(){"use strict";PWC.HmiAC.OnlineTrend.baseCtor.call(this);var a,b,c,d,e,f,g,h=!1,i=!1,j=!1,k=!1,l=!1,m=!1,n=PWC.HmiAC.Common.HelperUtil.getQualityOfValue,o=this,p=PWC.HmiAC.RangeType,q=PWC.Lib.Config.Properties,r="0.0.0.0.0.0",s=1e4,t=116444736e5,u=1e6,v=function(a){return-u>a?a=-u:a>u&&(a=u),a},w=function(){var a,d,g,h,i,j=o.tagList.items,k=j.length,l=o.tagList,m=[],n=!1,q=PWC.HmiAC.ScalingType;if(b){if(h=b.rangeType,h===p.PointCount){for(o.boundingValue=null,d=0;d<k-b.measurementPoint;d++)if(n||o.minVal===j[d].yTagValue||o.maxVal===j[d].yTagValue){n=!0;break}k>b.measurementPoint&&(g=l.items[k-b.measurementPoint-1]).timeStamp<b.currentBeginValue&&(o.boundingValue=g),l.removeItems(k-b.measurementPoint)}else if(m=o.tagList.removeBeforeTimeStamp(b.currentBeginValue),g=m[m.length-1]){for(o.boundingValue=g,i=m.length,d=0;i>d;d++)(m[d].yTagValue===o.minVal||m[d].yTagValue===o.maxVal)&&(n=!0);if(o.lowLimit)for(k=o.lowLimitLines.length,d=0;k>d;d++){m=o.lowLimitLines[d].removeBeforeTimeStamp(o.boundingValue.timeStamp);{if(0!==o.lowLimitLines[d].items.length){m.length>0&&(o.lowLimitMarkerPositions[d].markerStart=e);break}o.lowLimitLines.splice(d,1),o.lowLimitMarkerPositions.splice(d,1),--d,--k}}if(o.highLimit)for(k=o.highLimitLines.length,d=0;k>d;d++){m=o.highLimitLines[d].removeBeforeTimeStamp(o.boundingValue.timeStamp);{if(0!==o.highLimitLines[d].items.length){m.length>0&&(o.highLimitMarkerPositions[d].markerStart=f);break}o.highLimitLines.splice(d,1),o.highLimitMarkerPositions.splice(d,1),--d,--k}}if(o.uncertainQuality)for(k=o.uncertainQualityLines.length,d=0;k>d;d++){m=o.uncertainQualityLines[d].removeBeforeTimeStamp(o.boundingValue.timeStamp);{if(0!==o.uncertainQualityLines[d].items.length)break;o.uncertainQualityLines.splice(d,1),--d,--k}}}if(n&&(o.maxVal=o.minVal=void 0,j.length>0))switch(c.scalingType){case q.Linear:for(o.maxVal=o.minVal=j[0].yTagValue,d=1;d<j.length;d++)o.minVal>j[d].yTagValue&&(o.minVal=j[d].yTagValue),o.maxVal<j[d].yTagValue&&(o.maxVal=j[d].yTagValue);break;case q.Logarithmic:for(d=0;d<j.length;d++)a=j[d].yTagValue,(o.minVal>a||void 0===o.minVal)&&a>0&&(o.minVal=a),(o.maxVal<a||void 0===o.maxVal)&&a>0&&(o.maxVal=a);break;case q.NegativeLogarithmic:for(d=0;d<j.length;d++)a=j[d].yTagValue,(o.minVal>a||void 0===o.minVal)&&0>a&&(o.minVal=a),(o.maxVal<a||void 0===o.maxVal)&&0>a&&(o.maxVal=a)}return n&&j.length>0}},x="Trend",y=function(a,b){return q.getPropPart(o.propTrend,x,a,b)},z=function(d){var e,f,g=d.items,h=g.length,i=o.currentTrendWindow.getRect(),j=c.invalidated;for(f=0;h>f;++f)e=g[f],e.xTagPosition=v((a?i.left:i.top)+b.getPositionFromValue(e.xTagValue)),(j||null===e.yTagPosition)&&(e.yTagPosition=v((a?i.top:i.left)+c.getPositionFromValue(e.yTagValue))),d.update(e,f)};this.setPropPart=function(a,b,c){q.setPropPart(o.propTrend,a,b),c&&this.parentTrendView.screenItem.gfxWebLib.connection.sendPartPropertyByName(this.parentTrendView.screenItem.rtoid,"Trends."+this.partId,a,b,!1,!1)},this.minVal=void 0,this.maxVal=void 0,this.points="",this.dummyPoints="",this.trendIndicatorPoints="",this.dummyTrendIndicatorFill="",this.trendFillPoints="",this.lowLimitLines=[],this.lowLimitPoints=[],this.lowLimitFillPoints="",this.lowLimitMarkerPositions=[],this.highLimitLines=[],this.highLimitPoints=[],this.highLimitFillPoints=[],this.highLimitMarkerPositions=[],this.uncertainQualityLines=[],this.uncertainQualityPoints=[],this.uncertainQualityFillPoints=[],this.boundingValue=null,this.historicalDataRequested=!1,this.clearTagList=function(){this.tagList.items=[],this.clearLowLimitTagList(),this.clearHighLimitTagList(),this.clearUncertainQualityTagList(),this.minVal=void 0,this.maxVal=void 0,this.boundingValue=null},this.clearLowLimitTagList=function(){this.lowLimitLines=[],this.lowLimitMarkerPositions=[],this.lowLimitPoints=[],this.lowLimitFillPoints="",h=!1,j=!1},this.clearHighLimitTagList=function(){this.highLimitLines=[],this.highLimitMarkerPositions=[],this.highLimitPoints=[],this.highLimitFillPoints=[],i=!1,k=!1},this.clearUncertainQualityTagList=function(){this.uncertainQualityLines=[],this.uncertainQualityPoints=[],this.uncertainQualityFillPoints=[],l=!1,m=!1},this.initialize=function(d,h){var i,j,k,l=PWC.Lib.Canvas.Converters;for(a=h.isLeftOrRight,this.propTrend=d,this.name=y("Name"),this.displayName=y("DisplayName"),this.parentTrendView=h,this.trendWindow=y("TrendWindow"),this.id=(this.parentTrendView.getControlName()+"_"+this.trendWindow+"_"+this.name).replace(/\s+/g,"").replace(/\(/g,"_ob_").replace(/\)/g,"_cb_").replace(/\\/g,"_bs_").replace(/\'/g,"_sq_").replace(/\"/g,"_dq_"),this.color=y("LineColor",l.enumConverter.Color),h.setPreDefTrendColorCount(this.color,!0),this.lineStyle=y("LineStyle"),this.lineWidth=y("LineWidth"),this.pointStyle=y("PointStyle"),this.pointWidth=y("PointWidth"),this.pointColor=y("PointColor",l.enumConverter.Color),this.fillColor=y("FillColor",l.enumConverter.Color),this.fill=0===+y("FillStyle")?!0:!1,this.visibility=y("Visible"),this.limitParts=y("Limits"),this.highLimit=!1,this.highLimitPartIndex=null,this.lowLimit=!1,this.lowLimitPartIndex=null,j=this.limitParts.length,i=0;j>i;i++)k=q.getPropPart(this.limitParts[i],"TrendLimitMarker","Mode"),k===PWC.HmiAC.TrendLimitModes.LowLimit?(this.lowLimitPartIndex=i,this.lowLimit=!0):(this.highLimitPartIndex=i,this.highLimit=!0);this.lowLimitMarkerId="lowLimitMarker_"+this.id,e="url(#"+this.lowLimitMarkerId+")",this.lowLimit?(this.lowLimitColor=q.getPropPart(this.limitParts[this.lowLimitPartIndex],"TrendLimitMarker","FillColor",l.enumConverter.Color),this.lowLimitValue=q.getPropPart(this.limitParts[this.lowLimitPartIndex],"TrendLimitMarker","Value")):(this.lowLimitValue=0,this.lowLimitColor="#000000"),this.highLimitMarkerId="highLimitMarker_"+this.id,f="url(#"+this.highLimitMarkerId+")",this.highLimit?(this.highLimitColor=q.getPropPart(this.limitParts[this.highLimitPartIndex],"TrendLimitMarker","FillColor",l.enumConverter.Color),this.highLimitValue=q.getPropPart(this.limitParts[this.highLimitPartIndex],"TrendLimitMarker","Value")):(this.highLimitValue=1,this.highLimitColor="#000000"),this.qualityPart=y("Qualities"),this.uncertainQualityMarkerId="uncertainQualityMarker_"+this.id,g="url(#"+this.uncertainQualityMarkerId+")",this.qualityPart.length>0?(this.uncertainQuality=!0,this.uncertainQualityColor=q.getPropPart(this.qualityPart[0],"TrendQualityMarker","FillColor",l.enumConverter.Color)):(this.uncertainQuality=!1,this.uncertainQualityColor="#000000"),this.trendStyle=y("Mode"),this.index=parseInt(y("Index"),10),void 0===d.Index&&0===this.index&&(i=h.getTrendCount())>0&&(this.index=i),this.propTrend.partid&&(this.partId=y("partid")),this.viewBoxDim=parseInt(this.pointWidth,10)+1,this.dataSourceProp=y("DataSource"),this.dataSource={},this.dataSource.Tag=q.getPropPart(this.dataSourceProp,"TagDataSource","Tag"),this.dataSource.Tag&&""!==this.dataSource.Tag?this.tagInvalid=!1:(this.dataSource.Tag="",this.tagInvalid=!0),this.dataSource.TagDataSourceType=q.getPropPart(this.dataSourceProp,"TagDataSource","TagDataSourceType"),this.dataSource.CycleTimeProp=q.getPropPart(this.dataSourceProp,"TagDataSource","UpdateCycle"),this.dataSource.cycleTime="string"==typeof this.dataSource.CycleTimeProp?+this.dataSource.CycleTimeProp.split(".")[1]:this.dataSource.CycleTimeProp,this.timeAxis=y("TimeAxis"),this.valueAxis=y("ValueAxis"),b=h.getXAxisByName(this.timeAxis),c=h.getYAxisByName(this.valueAxis),this.rulerControlData={},this.currentXAxis=b,this.currentYAxis=c,this.currentTrendWindow=h.getDrawableTrendWindowByName(this.trendWindow),this.tagList=new PWC.HmiAC.TagList},this.onTagListChangedX=function(a,d,g,o){var p,q,r,s,t=!1,u=!1,v=PWC.HmiAC.TrendStyle,w=this.tagList.items,x=w.length&&d[0]<w[0].timeStamp,y=PWC.HmiAC.ScalingType;if(!b||o&&this.historicalDataRequested)return{trendDrawRequired:u,yAxisUpdateRequired:t};if(!o&&this.historicalDataRequested&&(this.historicalDataRequested=!1,this.lowLimit&&(j=!1,h=!1,w.length&&(x?w[0].yTagValue<=this.lowLimitValue&&(j=!0):w[w.length-1].yTagValue<=this.lowLimitValue&&(h=!0))),this.highLimit&&(k=!1,i=!1,w.length&&(x?w[0].yTagValue>=this.highLimitValue&&(k=!0):w[w.length-1].yTagValue>=this.highLimitValue&&(i=!0))),this.uncertainQuality&&(l=!1,m=!1,w.length&&(x?w[0].qualityCode===PWC.HmiAC.QualityCode.Uncertain&&(m=!0):w[w.length-1].qualityCode===PWC.HmiAC.QualityCode.Uncertain&&(l=!0)))),!o&&x)for(p=a.length-1;p>=0;--p)q=new PWC.HmiAC.Point,q.xTagValue=q.timeStamp=d[p],q.yTagValue=a[p],s=this.tagList.findIndexByTimeStamp(q.timeStamp),-1===s&&(q.qualityCode=n(g[p]),(c.scalingType===y.Linear||c.scalingType===y.Logarithmic&&q.yTagValue>0||c.scalingType===y.NegativeLogarithmic&&q.yTagValue<0)&&((q.yTagValue<this.minVal||void 0===this.minVal)&&(this.minVal=q.yTagValue),(q.yTagValue>this.maxVal||void 0===this.maxVal)&&(this.maxVal=q.yTagValue)),this.tagList.addToBeginning(q),this.lowLimit&&(q.yTagValue>this.lowLimitValue?j&&(this.tagList.items[1].yTagValue!==this.lowLimitValue&&(this.lowLimitMarkerPositions[0].markerStart="none",r=new PWC.HmiAC.Point,r.yTagValue=this.lowLimitValue,r.xTagValue=r.timeStamp=this.trendStyle===v.Step?this.tagList.items[1].timeStamp:this.tagList.getTimeStampFromValue(this.lowLimitValue,0,1),this.lowLimitLines[0].addToBeginning(r)),j=!1):(j||(this.lowLimitLines.unshift(new PWC.HmiAC.TagList),j=!0,this.lowLimitMarkerPositions.unshift({markerStart:e,markerEnd:e}),q.yTagValue!==this.lowLimitValue&&this.tagList.items.length>1&&(this.lowLimitMarkerPositions[0].markerEnd="none",r=new PWC.HmiAC.Point,r.yTagValue=this.lowLimitValue,r.xTagValue=r.timeStamp=this.trendStyle===v.Step?this.tagList.items[1].timeStamp:this.tagList.getTimeStampFromValue(this.lowLimitValue,0,1),this.lowLimitLines[0].addToBeginning(r))),this.lowLimitLines[0].addToBeginning(q))),this.highLimit&&(q.yTagValue<this.highLimitValue?k&&(this.tagList.items[1].yTagValue!==this.highLimitValue&&(this.highLimitMarkerPositions[0].markerStart="none",r=new PWC.HmiAC.Point,r.yTagValue=this.highLimitValue,r.xTagValue=r.timeStamp=this.trendStyle===v.Step?this.tagList.items[1].timeStamp:this.tagList.getTimeStampFromValue(this.highLimitValue,0,1),this.highLimitLines[0].addToBeginning(r)),k=!1):(k||(this.highLimitLines.unshift(new PWC.HmiAC.TagList),k=!0,this.highLimitMarkerPositions.unshift({markerStart:f,markerEnd:f}),q.yTagValue!==this.highLimitValue&&this.tagList.items.length>1&&(this.highLimitMarkerPositions[0].markerEnd="none",r=new PWC.HmiAC.Point,r.yTagValue=this.highLimitValue,r.xTagValue=r.timeStamp=this.trendStyle===v.Step?this.tagList.items[1].timeStamp:this.tagList.getTimeStampFromValue(this.highLimitValue,0,1),this.highLimitLines[0].addToBeginning(r))),this.highLimitLines[0].addToBeginning(q))),this.uncertainQuality&&(q.qualityCode===PWC.HmiAC.QualityCode.Uncertain?(m||(this.uncertainQualityLines.unshift(new PWC.HmiAC.TagList),m=!0),this.uncertainQualityLines[0].addToBeginning(q)):m&&(m=!1))),q=null;else for(p=0;p<a.length&&(q=new PWC.HmiAC.Point,q.xTagValue=q.timeStamp=d[p],q.yTagValue=a[p],this.parentTrendView.online&&b.refresh||!o||2!==this.dataSource.TagDataSourceType||!(q.timeStamp>b.currentEndValue));++p)s=this.tagList.findIndexByTimeStamp(q.timeStamp),-1===s&&(q.qualityCode=n(g[p]),(0===w.length||w[w.length-1].timeStamp<b.currentEndValue||this.parentTrendView.online)&&(u=!0),this.tagList.add(q),(c.scalingType===y.Linear||c.scalingType===y.Logarithmic&&q.yTagValue>0||c.scalingType===y.NegativeLogarithmic&&q.yTagValue<0)&&((q.yTagValue<this.minVal||void 0===this.minVal)&&(this.minVal=q.yTagValue,(q.timeStamp<b.currentEndValue||this.parentTrendView.online)&&(t=!0)),(q.yTagValue>this.maxVal||void 0===this.maxVal)&&(this.maxVal=q.yTagValue,(q.timeStamp<b.currentEndValue||this.parentTrendView.online)&&(t=!0))),this.addLimitValuePoints(q,void 0,!0,!0,!0)),q=null;return{trendDrawRequired:u,yAxisUpdateRequired:t}},this.addLimitValuePoints=function(a,b,c,d,g){var j,k=PWC.HmiAC.TrendStyle;void 0===b&&(b=this.tagList.items.length-2),c&&this.lowLimit&&(a.yTagValue>this.lowLimitValue?h&&(this.tagList.items[b].yTagValue!==this.lowLimitValue&&(this.lowLimitMarkerPositions[this.lowLimitMarkerPositions.length-1].markerEnd="none",j=new PWC.HmiAC.Point,j.yTagValue=this.lowLimitValue,j.xTagValue=j.timeStamp=this.trendStyle===k.Step?this.tagList.items[b+1].timeStamp:this.tagList.getTimeStampFromValue(this.lowLimitValue,b,b+1),this.lowLimitLines[this.lowLimitLines.length-1].add(j)),h=!1):(h||(this.lowLimitLines.push(new PWC.HmiAC.TagList),this.lowLimitMarkerPositions.push({markerStart:e,markerEnd:e}),h=!0,a.yTagValue!==this.lowLimitValue&&b>=0&&(this.lowLimitMarkerPositions[this.lowLimitMarkerPositions.length-1].markerStart="none",j=new PWC.HmiAC.Point,j.yTagValue=this.lowLimitValue,j.xTagValue=j.timeStamp=this.trendStyle===k.Step?this.tagList.items[b+1].timeStamp:this.tagList.getTimeStampFromValue(this.lowLimitValue,b,b+1),this.lowLimitLines[this.lowLimitLines.length-1].add(j))),this.lowLimitLines[this.lowLimitLines.length-1].add(a))),d&&this.highLimit&&(a.yTagValue<this.highLimitValue?i&&(this.tagList.items[b].yTagValue!==this.highLimitValue&&(this.highLimitMarkerPositions[this.highLimitMarkerPositions.length-1].markerEnd="none",j=new PWC.HmiAC.Point,j.yTagValue=this.highLimitValue,j.xTagValue=j.timeStamp=this.trendStyle===k.Step?this.tagList.items[b+1].timeStamp:this.tagList.getTimeStampFromValue(this.highLimitValue,b,b+1),this.highLimitLines[this.highLimitLines.length-1].add(j)),i=!1):(i||(this.highLimitLines.push(new PWC.HmiAC.TagList),this.highLimitMarkerPositions.push({markerStart:f,markerEnd:f}),i=!0,a.yTagValue!==this.highLimitValue&&b>=0&&(this.highLimitMarkerPositions[this.highLimitMarkerPositions.length-1].markerStart="none",j=new PWC.HmiAC.Point,j.yTagValue=this.highLimitValue,j.xTagValue=j.timeStamp=this.trendStyle===k.Step?this.tagList.items[b+1].timeStamp:this.tagList.getTimeStampFromValue(this.highLimitValue,b,b+1),this.highLimitLines[this.highLimitLines.length-1].add(j))),this.highLimitLines[this.highLimitLines.length-1].add(a))),g&&this.uncertainQuality&&(a.qualityCode===PWC.HmiAC.QualityCode.Uncertain?(l||(this.uncertainQualityLines.push(new PWC.HmiAC.TagList),l=!0),this.uncertainQualityLines[this.uncertainQualityLines.length-1].add(a)):l&&(l=!1))},this.createLowLimitTagList=function(){var a,b,c;for(this.clearLowLimitTagList(),a=this.tagList.items,b=a.length,c=0;b>c;c++)this.addLimitValuePoints(a[c],c-1,!0);for(b=this.lowLimitLines.length,c=0;b>c;c++)z(this.lowLimitLines[c])},this.createHighLimitTagList=function(){var a,b,c;for(this.clearHighLimitTagList(),a=this.tagList.items,b=a.length,c=0;b>c;c++)this.addLimitValuePoints(a[c],c-1,void 0,!0);for(b=this.highLimitLines.length,c=0;b>c;c++)z(this.highLimitLines[c])},this.createUncertainQualityTagList=function(){var a,b,c;for(this.clearUncertainQualityTagList(),a=this.tagList.items,b=a.length,c=0;b>c;c++)this.addLimitValuePoints(a[c],c-1,void 0,void 0,!0);for(b=this.uncertainQualityLines.length,c=0;b>c;c++)z(this.uncertainQualityLines[c])},this.removePointsAfterTime=function(a){var b,c,d;if(this.tagList.removeAfterTimeStamp(a),this.lowLimit)for(b=this.lowLimitLines.length,c=b-1;c>=0;c--){d=this.lowLimitLines[c].removeAfterTimeStamp(a);{if(0!==this.lowLimitLines[c].items.length){d.length>0&&(this.lowLimitMarkerPositions[c].markerEnd=e);break}this.lowLimitLines.splice(c,1),this.lowLimitMarkerPositions.splice(c,1)}}if(this.highLimit)for(b=this.highLimitLines.length,c=b-1;c>=0;c--){d=this.highLimitLines[c].removeAfterTimeStamp(a);{if(0!==this.highLimitLines[c].items.length){d.length>0&&(this.highLimitMarkerPositions[c].markerEnd=f);break}this.highLimitLines.splice(c,1),this.highLimitMarkerPositions.splice(c,1)}}if(this.uncertainQuality)for(b=this.uncertainQualityLines.length,c=b-1;c>=0;c--){d=this.uncertainQualityLines[c].removeAfterTimeStamp(a);{if(0!==this.uncertainQualityLines[c].items.length)break;this.uncertainQualityLines.splice(c,1)}}},this.createPointCollection=function(b){var e,f,g,h,i,j,k=this.tagList.items,l=k.length,m="",n="",o="",p="",q="",r="",s=[];if(this.points="",this.lowLimitPoints=[],this.highLimitPoints=[],this.uncertainQualityPoints=[],this.lowLimitFillPoints="",this.highLimitFillPoints=[],this.uncertainQualityFillPoints=[],this.dummyPoints="",this.lowLimitDummyPoints=[],this.highLimitDummyPoints=[],this.uncertainQualityDummyPoints=[],this.trendFillPoints="",a){for(this.boundingValue&&null!==this.boundingValue.xTagPosition&&(this.points+=this.boundingValue.xTagPosition+","+this.boundingValue.yTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(this.dummyPoints+=this.boundingValue.xTagPosition+","+this.boundingValue.yTagPosition+" ",k[0]&&(this.dummyPoints+=k[0].xTagPosition+","+this.boundingValue.yTagPosition+" "))),g=0;l>g;++g)j=k[g],this.points+=j.xTagPosition+","+j.yTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(this.dummyPoints+=j.xTagPosition+","+j.yTagPosition+" ",k[g+1]&&(this.dummyPoints+=k[g+1].xTagPosition+","+j.yTagPosition+" "));if(this.lowLimit)for(f=this.lowLimitLines.length,e=0;f>e;e++){for(k=this.lowLimitLines[e].items,l=k.length,g=0;l>g;++g)j=k[g],m+=j.xTagPosition+","+j.yTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(n+=j.xTagPosition+","+j.yTagPosition+" ",k[g+1]&&(n+=k[g+1].xTagPosition+","+j.yTagPosition+" "));if(b&&-1!==m.indexOf("null")){""!==(m=m.split(null)[0])&&this.lowLimitPoints.push(m),""!==(n=n.split(null)[0])&&this.lowLimitDummyPoints.push(n);break}this.lowLimitPoints.push(m),this.lowLimitDummyPoints.push(n),m="",n=""}if(this.highLimit)for(f=this.highLimitLines.length,e=0;f>e;e++){for(k=this.highLimitLines[e].items,l=k.length,g=0;l>g;++g)j=k[g],m+=j.xTagPosition+","+j.yTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(n+=j.xTagPosition+","+j.yTagPosition+" ",k[g+1]&&(n+=k[g+1].xTagPosition+","+j.yTagPosition+" "));if(b&&-1!==m.indexOf("null")){""!==(m=m.split(null)[0])&&this.highLimitPoints.push(m),""!==(n=n.split(null)[0])&&this.highLimitDummyPoints.push(n);break}this.highLimitPoints.push(m),this.highLimitDummyPoints.push(n),m="",n=""}if(this.uncertainQuality)for(f=this.uncertainQualityLines.length,e=0;f>e;e++){for(k=this.uncertainQualityLines[e].items,l=k.length,g=0;l>g;++g)j=k[g],m+=j.xTagPosition+","+j.yTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(n+=j.xTagPosition+","+j.yTagPosition+" ",k[g+1]&&(n+=k[g+1].xTagPosition+","+j.yTagPosition+" "));if(b&&-1!==m.indexOf("null")){""!==(m=m.split(null)[0])&&this.uncertainQualityPoints.push(m),""!==(n=n.split(null)[0])&&this.uncertainQualityDummyPoints.push(n);break}this.uncertainQualityPoints.push(m),this.uncertainQualityDummyPoints.push(n),m="",n=""}}else{for(this.boundingValue&&null!==this.boundingValue.yTagPosition&&(this.points+=this.boundingValue.yTagPosition+","+this.boundingValue.xTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(this.dummyPoints+=this.boundingValue.yTagPosition+","+this.boundingValue.xTagPosition+" ",k[0]&&(this.dummyPoints+=k[0].yTagPosition+","+this.boundingValue.xTagPosition+" "))),g=0;l>g;++g)j=k[g],this.points+=j.yTagPosition+","+j.xTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(this.dummyPoints+=j.yTagPosition+","+j.xTagPosition+" ",k[g+1]&&(this.dummyPoints+=k[g+1].yTagPosition+","+j.xTagPosition+" "));if(this.lowLimit)for(f=this.lowLimitLines.length,e=0;f>e;e++){for(k=this.lowLimitLines[e].items,l=k.length,g=0;l>g;++g)j=k[g],m+=j.yTagPosition+","+j.xTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(n+=j.yTagPosition+","+j.xTagPosition+" ",k[g+1]&&(n+=k[g+1].yTagPosition+","+j.xTagPosition+" "));if(b&&-1!==m.indexOf("null")){""!==(m=m.split(null)[0])&&this.lowLimitPoints.push(m),""!==(n=n.split(null)[0])&&this.lowLimitDummyPoints.push(n);break}this.lowLimitPoints.push(m),this.lowLimitDummyPoints.push(n),m="",n=""}if(this.highLimit)for(f=this.highLimitLines.length,e=0;f>e;e++){for(k=this.highLimitLines[e].items,l=k.length,g=0;l>g;++g)j=k[g],m+=j.yTagPosition+","+j.xTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(n+=j.yTagPosition+","+j.xTagPosition+" ",k[g+1]&&(n+=k[g+1].yTagPosition+","+j.xTagPosition+" "));if(b&&-1!==m.indexOf("null")){""!==(m=m.split(null)[0])&&this.highLimitPoints.push(m),""!==(n=n.split(null)[0])&&this.highLimitDummyPoints.push(n);break}this.highLimitPoints.push(m),this.highLimitDummyPoints.push(n),m="",n=""}if(this.uncertainQuality)for(f=this.uncertainQualityLines.length,e=0;f>e;e++){for(k=this.uncertainQualityLines[e].items,l=k.length,g=0;l>g;++g)j=k[g],m+=j.yTagPosition+","+j.xTagPosition+" ",this.trendStyle===PWC.HmiAC.TrendStyle.Step&&(n+=j.yTagPosition+","+j.xTagPosition+" ",k[g+1]&&(n+=k[g+1].yTagPosition+","+j.xTagPosition+" "));if(b&&-1!==m.indexOf("null")){""!==(m=m.split(null)[0])&&this.uncertainQualityPoints.push(m),""!==(n=n.split(null)[0])&&this.uncertainQualityDummyPoints.push(n);break}this.uncertainQualityPoints.push(m),this.uncertainQualityDummyPoints.push(n),m="",n=""}}if(b&&(this.points=this.points.split(null)[0],this.dummyPoints=this.dummyPoints.split(null)[0]),k=this.tagList.items,k.length>1&&this.fill&&this.trendStyle!==PWC.HmiAC.TrendStyle.None){if(h=this.boundingValue||k[0],a){if(o=this.currentTrendWindow.getRect().top+c.getPositionFromValue(0),p=d.xTagPosition+","+o,q=h.xTagPosition+","+o,r=p+" "+q+" ",this.lowLimit){for(s=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.lowLimitDummyPoints:this.lowLimitPoints,f=s.length,h.yTagValue>this.lowLimitValue?this.lowLimitFillPoints=q+" "+h.xTagPosition+","+(this.currentTrendWindow.getRect().top+c.getPositionFromValue(this.lowLimitValue))+" ":this.lowLimitLines.length>0&&(this.lowLimitFillPoints=this.lowLimitLines[0].items[0].xTagPosition+","+o+" "),e=0;f>e;e++)k=this.lowLimitLines[e].items,this.lowLimitFillPoints+=s[e];this.lowLimitLines.length>0?(e--,this.lowLimitFillPoints+=d.xTagPosition+","+this.lowLimitLines[e].items[s[e].split(",").length-2].yTagPosition+" "+p+" "):this.lowLimitFillPoints+=d.xTagPosition+","+(this.currentTrendWindow.getRect().top+c.getPositionFromValue(this.lowLimitValue))+" "+p+" "}if(this.highLimit)for(o=this.currentTrendWindow.getRect().top+c.getPositionFromValue(this.highLimitValue),s=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.highLimitDummyPoints:this.highLimitPoints,f=s.length,e=0;f>e;e++)k=this.highLimitLines[e].items,m=s[e],i=m.split(",").length-2,k[0].yTagValue!==this.highLimitValue&&(m=k[0].xTagPosition+","+o+" "+m),k[i].yTagValue!==this.highLimitValue&&(m+=" "+k[i].xTagPosition+","+o),m+=" ",this.highLimitFillPoints.push(m);if(this.uncertainQuality)for(s=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.uncertainQualityDummyPoints:this.uncertainQualityPoints,f=s.length,e=0;f>e;e++){for(k=this.uncertainQualityLines[e].items,j=k[0].yTagValue,l=k.length,g=1;l>g;g++)j>k[g].yTagValue&&(j=k[g].yTagValue);o=this.currentTrendWindow.getRect().top+c.getPositionFromValue(j),m=s[e],i=m.split(",").length-2,k[0].yTagValue!==j&&(m=k[0].xTagPosition+","+o+" "+m),k[i].yTagValue!==j&&(m+=" "+k[i].xTagPosition+","+o),m+=" ",this.uncertainQualityFillPoints.push(m)}}else{if(o=this.currentTrendWindow.getRect().left+c.getPositionFromValue(0),p=o+","+h.xTagPosition,q=o+","+d.xTagPosition,r=q+" "+p+" ",this.lowLimit){for(s=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.lowLimitDummyPoints:this.lowLimitPoints,f=s.length,h.yTagValue>this.lowLimitValue?this.lowLimitFillPoints=p+" "+(this.currentTrendWindow.getRect().left+c.getPositionFromValue(this.lowLimitValue))+","+h.xTagPosition+" ":this.lowLimitLines.length>0&&(this.lowLimitFillPoints=o+","+this.lowLimitLines[0].items[0].xTagPosition+" "),e=0;f>e;e++)k=this.lowLimitLines[e].items,this.lowLimitFillPoints+=s[e];this.lowLimitLines.length>0?(e--,this.lowLimitFillPoints+=this.lowLimitLines[e].items[s[e].split(",").length-2].yTagPosition+","+d.xTagPosition+" "+q+" "):this.lowLimitFillPoints+=this.currentTrendWindow.getRect().left+c.getPositionFromValue(this.lowLimitValue)+","+d.xTagPosition+" "+q+" "}if(this.highLimit)for(o=this.currentTrendWindow.getRect().left+c.getPositionFromValue(this.highLimitValue),s=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.highLimitDummyPoints:this.highLimitPoints,f=s.length,e=0;f>e;e++)k=this.highLimitLines[e].items,m=s[e],i=m.split(",").length-2,k[0].yTagValue!==this.highLimitValue&&(m=o+","+k[0].xTagPosition+" "+m),k[i].yTagValue!==this.highLimitValue&&(m+=" "+o+","+k[i].xTagPosition),m+=" ",this.highLimitFillPoints.push(m);
if(this.uncertainQuality)for(s=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.uncertainQualityDummyPoints:this.uncertainQualityPoints,f=s.length,e=0;f>e;e++){for(k=this.uncertainQualityLines[e].items,j=k[0].yTagValue,l=k.length,g=1;l>g;g++)j>k[g].yTagValue&&(j=k[g].yTagValue);o=this.currentTrendWindow.getRect().left+c.getPositionFromValue(j),m=s[e],i=m.split(",").length-2,k[0].yTagValue!==j&&(m=o+","+k[0].xTagPosition+" "+m),k[i].yTagValue!==j&&(m+=" "+o+","+k[i].xTagPosition),m+=" ",this.uncertainQualityFillPoints.push(m)}}this.trendFillPoints=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.dummyPoints+" "+r+" ":this.points+" "+r+" "}},this.filledSVGCreation=function(){var b,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=this.parentTrendView.SVGParent,x=this.tagList.items,y=PWC.HmiAC.svgShape.CreateSvgElement,z="fillPolyline_"+this.id,A=w.getElementById("filltrendIndicator_"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(w,"g","filltrendIndicator_"+this.id),B="";if(x.length>1){if(n=this.parentTrendView.SVGParent.getElementById("polyline_"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"polyline","polyline_"+this.id),r=w.getElementById("TrendFillPropertyGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(w,"g","TrendFillPropertyGroup"+this.id),t=this.parentTrendView.SVGParent.getElementById("LowLimitFillTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","LowLimitFillTrendGroup"+this.id),u=this.parentTrendView.SVGParent.getElementById("HighLimitFillTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","HighLimitFillTrendGroup"+this.id),v=this.parentTrendView.SVGParent.getElementById("UncertainQualityFillTrendGroup"+this.id)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(this.parentTrendView.SVGParent,"g","UncertainQualityFillTrendGroup"+this.id),this.lowLimitFillPoints="",this.highLimitFillPoints=[],this.uncertainQualityFillPoints=[],l=this.boundingValue||x[0],this.trendStyle!==PWC.HmiAC.TrendStyle.None){if(a){if(o=this.currentTrendWindow.getRect().top+c.getPositionFromValue(0),p=d.xTagPosition+","+o,q=l.xTagPosition+","+o,s=p+" "+q+" ",this.lowLimit){for(e=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.lowLimitDummyPoints:this.lowLimitPoints,g=e.length,l.yTagValue>this.lowLimitValue?this.lowLimitFillPoints=q+" "+l.xTagPosition+","+(this.currentTrendWindow.getRect().top+c.getPositionFromValue(this.lowLimitValue))+" ":this.lowLimitLines.length>0&&(this.lowLimitFillPoints=this.lowLimitLines[0].items[0].xTagPosition+","+o+" "),f=0;g>f;f++)x=this.lowLimitLines[f].items,this.lowLimitFillPoints+=e[f];this.lowLimitLines.length>0?(f--,this.lowLimitFillPoints+=d.xTagPosition+","+this.lowLimitLines[f].items[e[f].split(",").length-2].yTagPosition+" "+p+" "):this.lowLimitFillPoints+=d.xTagPosition+","+(this.currentTrendWindow.getRect().top+c.getPositionFromValue(this.lowLimitValue))+" "+p+" "}if(this.highLimit)for(o=this.currentTrendWindow.getRect().top+c.getPositionFromValue(this.highLimitValue),e=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.highLimitDummyPoints:this.highLimitPoints,g=e.length,f=0;g>f;f++)x=this.highLimitLines[f].items,i=e[f],m=i.split(",").length-2,x[0].yTagValue!==this.highLimitValue&&(i=x[0].xTagPosition+","+o+" "+i),x[m].yTagValue!==this.highLimitValue&&(i+=" "+x[m].xTagPosition+","+o),i+=" ",this.highLimitFillPoints.push(i);if(this.uncertainQuality)for(e=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.uncertainQualityDummyPoints:this.uncertainQualityPoints,g=e.length,f=0;g>f;f++){for(x=this.uncertainQualityLines[f].items,j=x[0].yTagValue,k=x.length,h=1;k>h;h++)j>x[h].yTagValue&&(j=x[h].yTagValue);o=this.currentTrendWindow.getRect().top+c.getPositionFromValue(j),i=e[f],m=i.split(",").length-2,x[0].yTagValue!==j&&(i=x[0].xTagPosition+","+o+" "+i),x[m].yTagValue!==j&&(i+=" "+x[m].xTagPosition+","+o),i+=" ",this.uncertainQualityFillPoints.push(i)}}else{if(o=this.currentTrendWindow.getRect().left+c.getPositionFromValue(0),p=o+","+l.xTagPosition,q=o+","+d.xTagPosition,s=q+" "+p+" ",this.lowLimit){for(e=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.lowLimitDummyPoints:this.lowLimitPoints,g=e.length,l.yTagValue>this.lowLimitValue?this.lowLimitFillPoints=p+" "+(this.currentTrendWindow.getRect().left+c.getPositionFromValue(this.lowLimitValue))+","+l.xTagPosition+" ":this.lowLimitLines.length>0&&(this.lowLimitFillPoints=o+","+this.lowLimitLines[0].items[0].xTagPosition),f=0;g>f;f++)x=this.lowLimitLines[f].items,this.lowLimitFillPoints+=e[f];this.lowLimitLines.length>0?(f--,this.lowLimitFillPoints+=this.lowLimitLines[f].items[e[f].split(",").length-2].yTagPosition+","+d.xTagPosition+" "+q+" "):this.lowLimitFillPoints+=this.currentTrendWindow.getRect().left+c.getPositionFromValue(this.lowLimitValue)+","+d.xTagPosition+" "+q+" "}if(this.highLimit)for(o=this.currentTrendWindow.getRect().left+c.getPositionFromValue(this.highLimitValue),e=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.highLimitDummyPoints:this.highLimitPoints,g=e.length,f=0;g>f;f++)x=this.highLimitLines[f].items,i=e[f],m=i.split(",").length-2,x[0].yTagValue!==this.highLimitValue&&(i=o+","+x[0].xTagPosition+" "+i),x[m].yTagValue!==this.highLimitValue&&(i+=" "+o+","+x[m].xTagPosition),i+=" ",this.highLimitFillPoints.push(i);if(this.uncertainQuality)for(e=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.uncertainQualityDummyPoints:this.uncertainQualityPoints,g=e.length,f=0;g>f;f++){for(x=this.uncertainQualityLines[f].items,j=x[0].yTagValue,k=x.length,h=1;k>h;h++)j>x[h].yTagValue&&(j=x[h].yTagValue);o=this.currentTrendWindow.getRect().left+c.getPositionFromValue(j),i=e[f],m=i.split(",").length-2,x[0].yTagValue!==j&&(i=o+","+x[0].xTagPosition+" "+i),x[m].yTagValue!==j&&(i+=" "+o+","+x[m].xTagPosition),i+=" ",this.uncertainQualityFillPoints.push(i)}}B=this.trendStyle===PWC.HmiAC.TrendStyle.Step?this.dummyPoints+" "+s+" ":this.points+" "+s+" "}if(n&&((b=w.getElementById(z)||PWC.HmiAC.Common.HelperUtil.getElementByIDSafariHack(w,"polyline",z))&&r.removeChild(b),b=n.cloneNode(!0),b.id=z,b.setAttribute("points",B.trim()),b.setAttribute("fill",this.fillColor),b.setAttribute("stroke","none"),b.setAttribute("ignoreEvent",!0),r.appendChild(b)),this.lowLimit){for(;t.childElementCount;)t.removeChild(t.lastChild);y("polyline",{points:this.lowLimitFillPoints.trim(),id:"lowLimit_fillPolyline_"+this.id,fill:"inherit",stroke:"none","stroke-width":"inherit",ignoreEvent:!0,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:t})}if(this.highLimit){for(g=this.highLimitFillPoints.length;u.childElementCount;)u.removeChild(u.lastChild);for(f=0;g>f;f++)y("polyline",{points:this.highLimitFillPoints[f].trim(),id:"highLimit_fillPolyline_"+this.id+"_"+f,fill:"inherit",stroke:"none","stroke-width":"inherit",ignoreEvent:!0,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:u})}if(this.uncertainQuality){for(g=this.uncertainQualityFillPoints.length;v.childElementCount;)v.removeChild(v.lastChild);for(f=0;g>f;f++)y("polyline",{points:this.uncertainQualityFillPoints[f].trim(),id:"uncertainQuality_fillPolyline_"+this.id+"_"+f,fill:"inherit",stroke:"none","stroke-width":"inherit",ignoreEvent:!0,"clip-path":"url(#"+this.currentTrendWindow.getClipPathId()+")",appendTo:v})}}A&&A.parentNode.removeChild(A),this.parentTrendView.setTrendIndicatorPoints(this.valueAxis)},this.invalidate=function(){return this.currentTrendWindow.trendWindowDrawn&&this.tagList.items.length&&this.parentTrendView.getStartStop()&&(0===b.rangeType||1===b.rangeType||2===b.rangeType&&b.refresh)?w():void 0},this.recalculateX=function(){var c,d,e=this.tagList.items,f=e.length,g=this.currentTrendWindow.getRect();for(d=0;f>d;++d)c=e[d],c.xTagPosition=v((a?g.left:g.top)+b.getPositionFromValue(c.xTagValue)),this.tagList.update(c,d);this.boundingValue&&(this.boundingValue.xTagPosition=v((a?g.left:g.top)+b.getPositionFromValue(this.boundingValue.xTagValue)))},this.recalculateY=function(){var b,d,e,f,g,h=this.tagList.items,i=h.length,j=this.currentTrendWindow.getRect();for(g=0;i>g;++g)e=h[g],e.yTagPosition=v((a?j.top:j.left)+c.getPositionFromValue(e.yTagValue)),this.tagList.update(e,g);if(this.lowLimit)for(d=this.lowLimitLines.length,f=0;d>f;f++)for(b=this.lowLimitLines[f],h=b.items,i=h.length,g=0;i>g;++g)e=h[g],e.yTagPosition=v((a?j.top:j.left)+c.getPositionFromValue(e.yTagValue)),b.update(e,g);if(this.highLimit)for(d=this.highLimitLines.length,f=0;d>f;f++)for(b=this.highLimitLines[f],h=b.items,i=h.length,g=0;i>g;++g)e=h[g],e.yTagPosition=v((a?j.top:j.left)+c.getPositionFromValue(e.yTagValue)),b.update(e,g);if(this.uncertainQuality)for(d=this.uncertainQualityLines.length,f=0;d>f;f++)for(b=this.uncertainQualityLines[f],h=b.items,i=h.length,g=0;i>g;++g)e=h[g],e.yTagPosition=v((a?j.top:j.left)+c.getPositionFromValue(e.yTagValue)),b.update(e,g);this.boundingValue&&(this.boundingValue.yTagPosition=v((a?j.top:j.left)+c.getPositionFromValue(this.boundingValue.yTagValue)))},this.setIsLeftOrRight=function(b){a=b},this.recalculate=function(){var e,f=this.tagList.items.length,g=this.currentTrendWindow.getRect();if(z(this.tagList),d=this.tagList.items[f-1],this.lowLimit)for(f=this.lowLimitLines.length,e=0;f>e;e++)z(this.lowLimitLines[e]);if(this.highLimit)for(f=this.highLimitLines.length,e=0;f>e;e++)z(this.highLimitLines[e]);if(this.uncertainQuality)for(f=this.uncertainQualityLines.length,e=0;f>e;e++)z(this.uncertainQualityLines[e]);this.boundingValue&&(this.boundingValue.xTagPosition=v((a?g.left:g.top)+b.getPositionFromValue(this.boundingValue.xTagValue)),this.boundingValue.yTagPosition=v((a?g.top:g.left)+c.getPositionFromValue(this.boundingValue.yTagValue)))},this.getXAxis=function(){return this.timeAxis},this.getYAxis=function(){return this.valueAxis},this.removeXAxis=function(){this.timeAxis=null,this.currentXAxis=b=null,this.setPropPart("TimeAxis",""),this.parentTrendView.addToDisconnectedSources(this.name)},this.removeYAxis=function(){this.valueAxis=null,this.currentYAxis=c=null,this.setPropPart("ValueAxis",""),this.parentTrendView.addToDisconnectedSources(this.name)},this.removeTrendWindow=function(){this.setPropPart("TrendWindow",""),this.trendWindow=null,this.currentTrendWindow=null,this.parentTrendView.addToDisconnectedSources(this.name)},this.updateProperty=function(a,d,e){var f=PWC.HmiAC.TrendPropId,g=[];switch(a){case f.TagName:this.dataSource.Tag=d,0===d&&(d=""),this.tagInvalid=""===d.trim()?!0:!1,this.visibility&&(""===this.trendWindow||this.currentTrendWindow.visible)&&this.parentTrendView.addToDisconnectedSources(this.name,d),q.setPropPart(this.dataSourceProp,"Tag",this.dataSource.Tag),e&&this.parentTrendView.screenItem.gfxWebLib.connection.sendPartPropertyByName(this.parentTrendView.screenItem.rtoid,"Trends."+this.partId+":DataSource","Tag",this.parentTrendView.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(d),!0,!1),this.clearTagList();break;case f.CycleTime:e?(this.dataSource.cycleTime=PWC.HmiAC.CycleTime[d],g=r.split("."),g[1]=this.dataSource.cycleTime,this.dataSource.CycleTimeProp=g.join("."),q.setPropPart(this.dataSourceProp,"UpdateCycle",this.dataSource.CycleTimeProp),this.parentTrendView.screenItem.gfxWebLib.connection.sendPartPropertyByName(this.parentTrendView.screenItem.rtoid,"Trends."+this.partId+":DataSource","UpdateCycle",this.parentTrendView.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(this.dataSource.CycleTimeProp),!0,!1)):("string"==typeof this.dataSource.CycleTimeProp?(this.dataSource.CycleTimeProp=d,g=d.split("."),this.dataSource.cycleTime=+g[1]):this.dataSource.cycleTime=d,q.setPropPart(this.dataSourceProp,"UpdateCycle",d));break;case f.TimeAxis:d=d.trim(),""===d&&this.visibility&&(""===this.trendWindow||this.currentTrendWindow.visible)?this.parentTrendView.addToDisconnectedSources(this.name,this.dataSource.Tag):!this.timeAxis&&this.valueAxis&&this.trendWindow&&!this.tagInvalid&&this.parentTrendView.removeFromDisconnectedSources(this.name),this.timeAxis=d,this.currentXAxis=b=this.parentTrendView.getXAxisByName(this.timeAxis),this.setPropPart("TimeAxis",d),this.parentTrendView.setDrawableTrends(),PWC.HmiAC.PostPropertyUpdate.Redraw=!0;break;case f.ValueAxis:d=d.trim(),""===d&&this.visibility&&(""===this.trendWindow||this.currentTrendWindow.visible)?this.parentTrendView.addToDisconnectedSources(this.name,this.dataSource.Tag):!this.valueAxis&&this.timeAxis&&this.trendWindow&&!this.tagInvalid&&this.parentTrendView.removeFromDisconnectedSources(this.name),this.valueAxis=d,this.currentYAxis=c=this.parentTrendView.getYAxisByName(this.valueAxis),c&&c.invalidate(),this.setPropPart("ValueAxis",d),this.parentTrendView.setDrawableTrends(),PWC.HmiAC.PostPropertyUpdate.Redraw=!0}},this.draw=function(a){this.renderTrend(a)},this.getXStartValue=function(){var a=this.tagList.items.length;return a>0?this.currentXAxis.rangeType===PWC.HmiAC.RangeType.PointCount&&a>this.currentXAxis.measurementPoint?this.tagList.items[a-this.currentXAxis.measurementPoint].xTagValue:this.tagList.items[0].xTagValue:void 0},this.getXEndValue=function(){var a=this.tagList.items.length;return a>0?this.tagList.items[a-1].xTagValue:void 0},this.getYStartValue=function(){return this.minVal},this.getYEndValue=function(){return this.maxVal},this.resetMinAndMaxValue=function(){var a,b,d=this.tagList.items,e=d.length,f=PWC.HmiAC.ScalingType,g=c.scalingType;for(this.minVal=this.maxVal=void 0,a=0;e>a;a++)b=d[a],(g===f.Linear||g===f.Logarithmic&&b.yTagValue>0||g===f.NegativeLogarithmic&&b.yTagValue<0)&&((b.yTagValue<this.minVal||void 0===this.minVal)&&(this.minVal=b.yTagValue),(b.yTagValue>this.maxVal||void 0===this.maxVal)&&(this.maxVal=b.yTagValue))},this.getDecimalPrecision=function(){var a,b,d;c.autoPrecision?(b=c.labelText,d=b.indexOf("."),a=-1===d?1:b.length-d-1):a=c.decimalPrecision},this.calculateRulerValue=function(c){var d,e,f,g,h,i,j,k=PWC.HmiAC.RulerControlColumnType,l=this.currentTrendWindow.getRect(),m=a?l.left:l.top,n=1;switch(this.parentTrendView.rulerControlColumnType){case k.Ruler:c===!1?this.rulerControlData={value:"",dateTime:""}:(this.rulerControlData={},h=c[0],i=m+h+n,j=m+h-n,d=b.getValueFromPosition(h),g=this.tagList.getValueFromTimeStamp(d,j,i),this.rulerControlData.value=g,this.rulerControlData.dateTime=d);break;case k.StatisticArea:c===!1?this.rulerControlData={lowerLimitValue:"",lowerLimitDateTime:"",upperLimitValue:"",upperLimitDateTime:""}:(this.rulerControlData={},h=c[0].lowerLimit,i=m+h+n,j=m+h-n,d=b.getValueFromPosition(h),g=this.tagList.getValueFromTimeStamp(d,j,i),this.rulerControlData.lowerLimitValue=g,this.rulerControlData.lowerLimitDateTime=d,h=c[0].upperLimit,i=m+h+n,j=m+h-n,d=b.getValueFromPosition(h),g=this.tagList.getValueFromTimeStamp(d,j,i),this.rulerControlData.upperLimitValue=g,this.rulerControlData.upperLimitDateTime=d);break;case k.StatisticResult:c===!1?this.rulerControlData={lowerLimitDateTime:"",upperLimitDateTime:"",minimum:"",minimumTimeStamp:"",maximum:"",maximumTimeStamp:"",average:"",standardDeviation:"",integral:"",weightedAverage:"",duration:"",numberOfValues:""}:this.parentTrendView.calculateStatistics&&(this.rulerControlData={},d=b.getValueFromPosition(c[0].lowerLimit),e=b.getValueFromPosition(c[0].upperLimit),this.rulerControlData=d>e?this.tagList.getStatistics(e,d):this.tagList.getStatistics(d,e),this.rulerControlData.lowerLimitDateTime=d,this.rulerControlData.upperLimitDateTime=e,this.rulerControlData.statisticCalcSuccess&&(f=b.getDisplayValue(this.rulerControlData.minimumTimeStamp),f=f[1]+" "+f[0],this.rulerControlData.minimumTimeStamp=f,f=b.getDisplayValue(this.rulerControlData.maximumTimeStamp),f=f[1]+" "+f[0],this.rulerControlData.maximumTimeStamp=f));break;default:this.rulerControlData={value:"",dateTime:"",lowerLimitValue:"",lowerLimitDateTime:"",upperLimitValue:"",upperLimitDateTime:"",minimum:"",minimumTimeStamp:"",maximum:"",maximumTimeStamp:"",average:"",standardDeviation:"",integral:"",weightedAverage:"",duration:"",numberOfValues:"",foreColor:"",backColor:""}}},this.requestHistoricalData=function(){var a=[],c=[],d=[],e=0,f=[],g=[];e=this.parentTrendView.getDrawableTrendWindowByName(b.trendWindow).getRect().width,e=Math.floor(e),this.tagList.items=[],b.rangeType===PWC.HmiAC.RangeType.PointCount?(e=b.measurementPoint,a.push(this.parentTrendView.online&&b.refresh?0:(b.currentBeginValue+t)*s),c.push(0),this.parentTrendView.timeAxisDrawn=!1):(a.push(!this.parentTrendView.loadDataImmediately&&this.parentTrendView.bufferTime>b.currentBeginValue?(this.parentTrendView.bufferTime+t)*s:(b.currentBeginValue+t)*s),c.push((b.currentEndValue+t)*s)),f.push(e),d.push(this.parentTrendView.screenItem.gfxWebLib.connection.datatypesToString(this.parentTrendView.screenItem.gfxWebLib.connection.datatypesToGfxCHROMID(this.dataSource.Tag))),g.push(this.index),this.historicalDataRequested=!0,d.length&&this.parentTrendView.sendDomainLogicRead(a,c,f,d,g,5)},this.cleanUp=function(){this.propTrend=null,this.currentTrendWindow=null,this.parentTrendView=null,this.points="",this.dummyPoints="",this.trendIndicatorPoints="",this.dummyTrendIndicatorFill="",this.lowLimitLines=null,this.lowLimitPoints=null,this.lowLimitFillPoints="",this.lowLimitMarkerPositions=null,this.highLimitLines=null,this.highLimitPoints=null,this.highLimitFillPoints=null,this.highLimitMarkerPositions=null,this.uncertainQualityLines=null,this.uncertainQualityPoints=null,this.uncertainQualityFillPoints=null,this.rulerControlData=null,d=null,this.trendFillPoints="",this.boundingValue=null,b=null,c=null,this.currentXAxis=null,this.currentYAxis=null,this.tagList.clear(),this.tagList=null,this.dataSource=this.dataSourceProp=this.highLimitDummyPoints=this.limitParts=this.lowLimitDummyPoints=this.qualityPart=this.uncertainQualityDummyPoints=o=null}},PWC.HmiAC.OnlineTrend.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.OnlineTrend,PWC.HmiAC.TrendBase);var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TrendWindow=function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=null,t=null,u=null,v=null,w=null,x=null,y={},z=0,A=0,B=null,C=null,D=0,E=0,F=1,G=1,H=3,I=PWC.Lib.Config.Properties,J=this,K={},L=PWC.HmiAC.ScrollbarMode,M=function(a,b,c){I.setPropPart(J.propTrendWindow,a,b),c&&t.screenItem.gfxWebLib.connection.sendPartPropertyByName(t.screenItem.rtoid,"TrendWindows."+J.partId,a,b,!1,!1)},N=function(a,b,c){b?M(a,1,c):M(a,0,c)},O=function(a){var c,d,e,f,g=!1,h={};PWC.Lib.HmiTypes.HmiObject.getRelPosToTLSW(t.screenItem.container,h),d=h.adaptScreenToWindowFactor,c=a?a:n,f=c.getScreenCTM(),1>d&&-1===navigator.appName.indexOf("Microsoft")&&(g=!0,e=c.getBoundingClientRect(),f.e=e.left,f.f=e.top),b.x=y.x,b.y=y.y,b=b.matrixTransform(f.inverse()),y.x=b.x,y.y=b.y,g&&(y.x=y.x/d+c.x.baseVal.value,y.y=y.y/d+c.y.baseVal.value)},P=function(){return t.scrollbarMode===L.No||!E&&(t.connectTrendWindows&&0!==J.index||!D)},Q=function(){var a,b,c=[],d=J.name,e=t.getDrawableTrendCount();for(a=0;e>a;++a)b=t.getDrawableTrend(a),null!==b&&b.trendWindow===d&&c.push(b);return c},R=function(a){var b,c,d,e=!0;b=S(a,!1),c=T(a,!1),(c||b)&&(t.redrawForScrollbars?(t.update(),t.redrawForScrollbars=!1):t.connectTrendWindows&&b?t.resetDrawableTrendWindows(b,c,J.index):(J.resetTrendWindow(b,c),d=J.name),t.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(b?(t.requestHistoricalData(!0,d),t.timeAxisDrawn=!0):e=!1),t.rulerControl&&(t.showRuler||t.showStatisticRuler)&&e&&t.calculateRulerData())},S=function(a,b){var d,e,f,g,i=t.connectTrendWindows,j=null,k=!1;for(i?f=t.getXAxes(!0):(e=J.name,f=J.getXAxes()),g=f.length,d=0;g>d;d++)j=f[d],c?j.zoomInOut(y.x-h.left,a)&&(k=!0):j.zoomInOut(y.y-h.top,a)&&(k=!0);return k&&((a===G&&1===++D||a===H&&0===--D)&&(t.scrollbarMode===L.Always?i&&0!==J.index?t.enableScrollbarEvents(a):a===G?(r.enable(),q.getState()||t.showRuler||t.showStatisticRuler||o.enableScrollbarEvents()):(r.disable(),q.getState()||t.showRuler||t.showStatisticRuler||o.disableScrollbarEvents()):t.scrollbarMode===L.WhenNeccessary&&(t.redrawForScrollbars=!0)),i&&t.setAllXAxesZoom(J.name,a===G?1:-1),b&&(t.redrawForScrollbars?(t.update(),t.redrawForScrollbars=!1):i?t.resetDrawableTrendWindows(k):J.resetTrendWindow(k),t.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(t.requestHistoricalData(!0,e),t.timeAxisDrawn=!0)),t.rulerControl&&(t.showRuler||t.showStatisticRuler)&&t.calculateRulerData()),k},T=function(a,b){var d,e=J.getYAxes(),f=e.length,g=!0,i=null,j=c?h.height-(y.y-h.top):h.width-(y.x-h.left),k=!1;for(d=0;f>d;d++)i=e[d],i.zoomInOut(j,a)&&(k=!0);return k&&t.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(J.relativeAxis.zoomInOut(j,a),g=!1),k&&((a===G&&1===++E||a===H&&0===--E)&&(t.scrollbarMode===L.Always?a===G?(q.enable(),(!t.connectTrendWindows||0===J.index)&&r.getState()||t.showRuler||t.showStatisticRuler||o.enableScrollbarEvents()):(q.disable(),(!t.connectTrendWindows||0===J.index)&&r.getState()||t.showRuler||t.showStatisticRuler||o.disableScrollbarEvents()):t.scrollbarMode===L.WhenNeccessary&&(t.redrawForScrollbars=!0)),b&&(t.redrawForScrollbars?(t.update(),t.redrawForScrollbars=!1):J.resetTrendWindow(null,k)),t.rulerControl&&(t.showRuler||t.showStatisticRuler)&&g&&t.calculateRulerData()),k},U=function(){var a,b;c?(a=C.x,b=C.y):(a=C.y,b=C.x),B=PWC.HmiAC.svgShape.CreateSvgElement("rect",{fill:"none","fill-opacity":0,stroke:"black","stroke-width":1,x:a,y:b,width:0,height:0}),k.appendChild(B)},V=function(){var a,b,c=h.left,d=h.left+h.width,e=h.top,f=h.top+h.height;y.x<c?y.x=c:y.x>d&&(y.x=d),y.y<e?y.y=e:y.y>f&&(y.y=f),a=y.y-C.y,b=y.x-C.x,0>b?(B.setAttributeNS(null,"x",y.x),b=Math.abs(b)):B.setAttributeNS(null,"x",C.x),0>a?(B.setAttributeNS(null,"y",y.y),a=Math.abs(a)):B.setAttributeNS(null,"y",C.y),B.setAttributeNS(null,"height",a),B.setAttributeNS(null,"width",b)},W=function(){var a,b,c,d,e,f,g,i,j,l,m,n,p=null,s=!0,u=!1,v=!1,w=t.connectTrendWindows,x=D,z=PWC.HmiAC.TextOrientation;switch(f=Number(B.getAttribute("x"))-h.left,g=f+Number(B.getAttribute("width")),e=h.height-(Number(B.getAttribute("y"))-h.top),i=e-Number(B.getAttribute("height")),t.textOrientation){case z.FromLeft:a=g,b=f,c=i,d=e;break;case z.FromRight:a=f,b=g,c=i,d=e;break;case z.FromTop:a=h.height-i,b=h.height-e,c=h.width-f,d=h.width-g;break;case z.FromBottom:a=h.height-e,b=h.height-i,c=h.width-f,d=h.width-g}for(y={},C=null,k.removeChild(B),B=null,w?l=t.getXAxes(!0):(l=J.getXAxes(),n=J.name),m=l.length,j=0;m>j;j++)p=l[j],p.zoomArea(a,b)&&(u=!0);for(l=J.getYAxes(),m=l.length,j=0;m>j;j++)p=l[j],p.zoomArea(c,d)&&(v=!0);v&&t.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&J.relativeAxis.zoomArea(c,d),(u||v)&&(D&&E||(t.scrollbarMode===L.Always?(u&&(w&&0!==J.index?t.enableScrollbarEvents(G):(r.enable(),q.getState()||t.showRuler||t.showStatisticRuler||o.enableScrollbarEvents())),v&&(q.enable(),(!t.connectTrendWindows||0===J.index)&&r.getState()||t.showRuler||t.showStatisticRuler||o.enableScrollbarEvents())):t.scrollbarMode===L.WhenNeccessary&&(t.redrawForScrollbars=!0)),X(),w&&u&&t.setAllXAxesZoom(J.name,D-x),t.redrawForScrollbars?(t.update(),t.redrawForScrollbars=!1):w?t.resetDrawableTrendWindows(u,v,J.index):J.resetTrendWindow(u,v),t.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(u?(t.requestHistoricalData(!0,n),t.timeAxisDrawn=!0):s=!1),t.rulerControl&&(t.showRuler||t.showStatisticRuler)&&s&&t.calculateRulerData())},X=function(){var a,b,c=t.connectTrendWindows?t.getXAxes(!0):J.getXAxes(),d=c.length;for(D=0,E=0,b=0;d>b;b++)D=(a=c[b].zoomInOutCount)>D?a:D;for(c=J.getYAxes(),d=c.length,b=0;d>b;b++)E=(a=c[b].zoomInOutCount)>E?a:E},Y=function(a){var b={};return b.x=a.pointers[0].clientX,b.y=a.pointers[0].clientY,b};this.pinchScrollZoom=function(a,b){var d,e,f,g,i,j,k,l=b/F,m=null,n=!0,p=!1,s=!1,u=t.connectTrendWindows,v=D,w=!D||!E;if(F=b,y=a,O(),1>b){if(k=H,!D&&!E)return}else{if(!(b>1))return;k=G}for(c?(d=y.x-h.left,e=h.height-(y.y-h.top)):(e=h.width-(y.x-h.left),d=y.y-h.top),u?g=t.getXAxes(!0):(g=J.getXAxes(),j=J.name),i=g.length,f=0;i>f;f++)m=g[f],m.zoomByScale(d,l)&&(p=!0);for(g=J.getYAxes(),i=g.length,f=0;i>f;f++)m=g[f],m.zoomByScale(e,l)&&(s=!0);s&&t.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&J.relativeAxis.zoomByScale(e,l),(p||s)&&(X(),(k===G&&w||k===H&&(!D||!E))&&(t.scrollbarMode===L.Always?(p&&(u&&0!==J.index?t.enableScrollbarEvents(k):k===G?(r.enable(),q.getState()||t.showRuler||t.showStatisticRuler||o.enableScrollbarEvents()):(r.disable(),q.getState()||t.showRuler||t.showStatisticRuler||o.disableScrollbarEvents())),s&&(k===G?(q.enable(),(!t.connectTrendWindows||0===J.index)&&r.getState()||t.showRuler||t.showStatisticRuler||o.enableScrollbarEvents()):(q.disable(),(!t.connectTrendWindows||0===J.index)&&r.getState()||t.showRuler||t.showStatisticRuler||o.disableScrollbarEvents()))):t.scrollbarMode===L.WhenNeccessary&&(t.redrawForScrollbars=!0)),u&&p&&t.setAllXAxesZoom(J.name,D-v),t.redrawForScrollbars?(t.update(),t.redrawForScrollbars=!1):u?t.resetDrawableTrendWindows(p,s,J.index):J.resetTrendWindow(p,s),t.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(p?(t.requestHistoricalData(!0,j),t.timeAxisDrawn=!0):n=!1),t.rulerControl&&(t.showRuler||t.showStatisticRuler)&&n&&t.calculateRulerData())},this.onPinchScrollEnd=function(){F=1},this.onSingleTap=function(a){var b=G,c=a.pointers[0];"mouse"===a.pointerType&&c.which===G&&(c.altKey||c.shiftKey)&&(b=H),y=Y(a),O(),t.zoomInOut?R(b):t.zoomInOutX?S(b,!0):t.zoomInOutY&&T(b,!0)},this.twoFingerSingleTap=function(a,b){y=b?a:Y(a),O(),t.zoomInOut?R(H):t.zoomInOutX?S(H,!0):t.zoomInOutY&&T(H,!0)},this.onPan=function(a){a.preventDefault();var b,d,e,f,g=null,h=null,i=t.connectTrendWindows?t.getXAxes(!0):J.getXAxes(),j=J.getYAxes(),k=[],l=[],m=[],n=[],o=[];if(t.zoomArea)a.eventType===p.INPUT_MOVE?(y=Y(a),O(),B||(C=y,C.x-=a.deltaX,C.y-=a.deltaY,U()),V()):a.eventType===p.INPUT_END&&W();else if(t.moveTrendArea)if(a.eventType===p.INPUT_MOVE){if(d=Y(a),z=a.deltaX-z,A=a.deltaY-A,y.x=d.x-z,y.y=d.y-A,z=a.deltaX,A=a.deltaY,c?z:A){for(f=!0,e=0;e<i.length;e++)g=i[e],b=c?g.getValueFromPosition(d.x)-g.getValueFromPosition(y.x):g.getValueFromPosition(d.y)-g.getValueFromPosition(y.y),g.currentEndValue=g.currentEndValue-b,g.currentBeginValue=g.currentBeginValue-b,g.zoomInOutCount>0&&(g.endValueBuffer=g.endValueBuffer-b,g.startValueBuffer=g.startValueBuffer-b),t.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&g.requestHistoricalData(b,l,k,n,m,o),g.visible&&(g.calculateGrid(),g.trendWindowDrawable&&(g.updateTicks(),g.showLabels&&g.updateLabels()));m.length&&t.sendDomainLogicRead(l,k,n,m,o,5)}if(c?A:z)for(t.trendObjectType===PWC.HmiAC.TrendObjectType.Online?(j.push(J.relativeAxis),void 0===f&&(f=!1)):f=!0,e=0;e<j.length;e++)h=j[e],c?h.calculateAxisMoveEndValues(d.y,y.y):h.calculateAxisMoveEndValues(d.x,y.x),h.invalidated=!0,h.visible&&(h.calculateGrid(),h.updateTicks(),h.showLabels&&h.updateLabels());t.connectTrendWindows?t.resetDrawableTrendWindows():J.resetTrendWindow(),t.rulerControl&&(t.showRuler||t.showStatisticRuler)&&f&&t.calculateRulerData(),k=[],l=[],m=[],n=[],o=[]}else z=0,A=0},this.setIsLeftOrRight=function(a){c=a,t.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(this.relativeAxis.axisType=t.axisTypeEnum.yAxis,this.relativeAxis.setAxisAlignment(t.alignmentEnum,a),this.relativeAxis.align=c?"Right":"Left"),o.setIsLeftOrRight(a)},this.init=function(a,d){if(a){var h,j=PWC.Lib.Canvas.Converters;this.propTrendWindow=a,this.foregroundTrendGrid=1===I.getPropPart(a,"TrendWindow","ForegroundTrendGrid")?!0:!1,this.name=I.getPropPart(a,"TrendWindow","Name"),this.propTrendWindowIndex=I.getPropPart(a,"TrendWindow","Index"),void 0===a.Index&&0===this.propTrendWindowIndex&&(h=d.getTrendWindowCount())>0&&(this.propTrendWindowIndex=h),this.horizontalGrid=1===I.getPropPart(a,"TrendWindow","HorizontalGrid")?!0:!1,this.verticalGrid=1===I.getPropPart(a,"TrendWindow","VerticalGrid")?!0:!1,this.visible=1===I.getPropPart(a,"TrendWindow","Visible")?!0:!1,this.spacePortion=I.getPropPart(a,"TrendWindow","SpacePortion"),t=d,b=t.SVGParent.createSVGPoint(),c=d.isLeftOrRight,i=t.getLineWidth(),this.lineColor=d.getLineColor(),this.coarseGrid=1===I.getPropPart(a,"TrendWindow","CoarseGrid")?!0:!1,this.coarseGridColor=I.getPropPart(a,"TrendWindow","CoarseGridColor",j.enumConverter.Color),this.fineGrid=1===I.getPropPart(a,"TrendWindow","FineGrid")?!0:!1,this.fineGridColor=I.getPropPart(a,"TrendWindow","FineGridColor",j.enumConverter.Color),this.backColor=I.getPropPart(a,"TrendWindow","BackColor",j.enumConverter.Color),this.useBackColor=1===I.getPropPart(a,"TrendWindow","UseBackColor")?!0:!1,this.rulerStyle=I.getPropPart(a,"TrendWindow","RulerStyle"),this.rulerWidth=I.getPropPart(a,"TrendWindow","RulerWidth"),this.rulerColor=I.getPropPart(a,"TrendWindow","RulerColor",j.enumConverter.Color),this.statisticRulerStyle=I.getPropPart(a,"TrendWindow","StatisticRulerStyle"),this.statisticRulerWidth=I.getPropPart(a,"TrendWindow","StatisticRulerWidth"),this.statisticRulerColor=I.getPropPart(a,"TrendWindow","StatisticRulerColor",j.enumConverter.Color),a.partid&&(this.partId=I.getPropPart(a,"TrendWindow","partid")),g=t.getControlName()+"_"+this.name.replace(/\s+/g,"").replace(/\(/g,"_ob_").replace(/\)/g,"_cb_").replace(/\\/g,"_bs_").replace(/\'/g,"_sq_").replace(/\"/g,"_dq_"),e=g+"_clipPath",f=g+"_eventRect",K=new PWC.HmiAC.RulerView(t,this,g),u=PWC.HmiAC.svgShape.CreateSvgElement("g",{id:g+"_HorizontalMajorGridLines","clip-path":"url(#"+e+")",stroke:this.coarseGridColor}),x=PWC.HmiAC.svgShape.CreateSvgElement("g",{id:g+"_HorizontalMinorGridLines","clip-path":"url(#"+e+")",stroke:this.fineGridColor}),v=PWC.HmiAC.svgShape.CreateSvgElement("g",{id:g+"_VerticalMajorGridLines","clip-path":"url(#"+e+")",stroke:this.coarseGridColor}),w=PWC.HmiAC.svgShape.CreateSvgElement("g",{id:g+"_VerticalMinorGridLines","clip-path":"url(#"+e+")",stroke:this.fineGridColor})}this.relativeAxis=new PWC.HmiAC.RelativeAxis,this.relativeAxis.init(t,this.name,t.axisTypeEnum.yAxis),this.relativeAxis.visible=t.showRelativeAxis,o=new PWC.HmiAC.TrendWindowEventManager(t,this,g,K),d=null},this.getBackColor=function(){return this.useBackColor?this.backColor:t.backColor},this.setLayoutSuccess=function(a){this.trendWindowDrawn!==a&&(this.trendWindowDrawn=a,t.setTrendWindowLayoutSuccess(this.name,a))},this.getTrends=function(){var a,b,c=[],d=this.name,e=t.getTrendCount();for(a=0;e>a;++a)b=t.getTrend(a),null!==b&&b.trendWindow===d&&c.push(b);return c},this.getXAxes=function(){var a,b,c=[],d=this.name,e=t.getXAxisCount();for(a=0;e>a;++a)b=t.getXAxis(a),null!==b&&b.trendWindow===d&&c.push(b);return c},this.getYAxes=function(){var a,b,c=[],d=this.name,e=t.getYAxisCount();for(a=0;e>a;++a)b=t.getYAxis(a),null!==b&&b.trendWindow===d&&c.push(b);return c},this.getAxesZoomed=function(){var a,b,c,d=0,e=0;if(t.scrollbarMode===L.Always?(d=1,e=1):t.scrollbarMode===L.WhenNeccessary&&(d=D,e=t.yAxesScrollbar),t.connectTrendWindows&&t.scrollbarMode!==L.No)if(0!==this.index)d=0;else if(0===d)for(a=t.getXAxes(!0),c=a.length,b=0;c>b&&!(d=a[b].zoomInOutCount>0);b++);return{xZoomed:d,yZoomed:e}},this.setXZoomCount=function(a){D+=a},this.resetZoomCount=function(){t.scrollbarMode===PWC.HmiAC.ScrollbarMode.Always&&(D>0&&(!t.connectTrendWindows||0===this.index)&&r.disable(),E>0&&q.disable()),D=0,E=0,F=1},this.drawGridLines=function(a){var b,d,f,g,h,j,k,l="",n="",o=s.top+i/2,p=s.left+i/2,q=a.axisTicks,r=PWC.HmiAC.svgShape.CreateSvgElement,y=PWC.Lib.jQL.getElementsByClassName,z=a.name.replace(/ /g,"_");switch(a.align){case t.alignmentEnum.Top:case t.alignmentEnum.Bottom:for(k=c?this.verticalGrid:this.horizontalGrid,g=0;g<q.length;++g)d=p+q[g].position,f=s.top+s.height-i/2,l+=g%2===0?d+","+o+" "+d+","+f+" ":d+","+f+" "+d+","+o+" ",q[g].isMajor&&(b=r("line",{"stroke-width":1,stroke:"inherit",x1:d,y1:o,x2:d,y2:f,"class":"coarseGridClass "+z,"stroke-opacity":"1","shape-rendering":"crispEdges"}),v.appendChild(b));this.coarseGrid&&k?v.setAttribute("visibility","inherit"):v.setAttribute("visibility","hidden"),h=y(w,z,"polyline"),0===h.length?(h=r("polyline",{points:l.trim(),"stroke-width":1,stroke:"inherit",fill:"none","class":"coarsePolyline "+z,"clip-path":"url(#"+e+")","stroke-opacity":"1","shape-rendering":"crispEdges"}),w.appendChild(h)):(h[0].setAttributeNS(null,"points",l.trim()),h[0].setAttributeNS(null,"clip-path","url(#"+e+")")),this.fineGrid&&k?w.setAttribute("visibility","inherit"):w.setAttribute("visibility","hidden");
break;case t.alignmentEnum.Left:case t.alignmentEnum.Right:for(k=c?this.horizontalGrid:this.verticalGrid,g=0;g<q.length;++g)d=s.left+s.width-i/2,f=o+q[g].position,n+=g%2===0?p+","+f+" "+d+","+f+" ":d+","+f+" "+p+","+f+" ",q[g].isMajor&&(b=r("line",{"stroke-width":1,stroke:"inherit",x1:p,y1:f,x2:d,y2:f,"class":"coarseGridClass "+z,"stroke-opacity":"1","shape-rendering":"crispEdges"}),u.appendChild(b));this.coarseGrid&&k?u.setAttribute("visibility","inherit"):u.setAttribute("visibility","hidden"),j=y(x,z,"polyline"),0===j.length?(j=r("polyline",{points:n.trim(),"stroke-width":1,stroke:"inherit",fill:"none","class":"coarsePolyline "+z,"clip-path":"url(#"+e+")","stroke-opacity":"1","shape-rendering":"crispEdges"}),x.appendChild(j)):(j[0].setAttributeNS(null,"points",n.trim()),j[0].setAttributeNS(null,"clip-path","url(#"+e+")")),this.fineGrid&&k?x.setAttribute("visibility","inherit"):x.setAttribute("visibility","hidden")}m.appendChild(x),m.appendChild(w),m.appendChild(u),m.appendChild(v),b=null,j=null,h=null},this.draw=function(){var b,c,h=0,i="none",n=t.getLineWidth(),q=!1,r=PWC.HmiAC.svgShape.CreateSvgElement;this.useBackColor&&(i=this.backColor),b=t.getLineColor(),h=n,m=PWC.HmiAC.svgShape.CreateSvgElement("g",{id:g+"trendWindowElements",appendTo:a}),k=PWC.HmiAC.svgShape.CreateSvgElement("g",{id:g+"eventFocusElements",appendTo:a}),c=r("defs",{appendTo:m}),d=r("clipPath",{id:e,appendTo:c}),l=r("rect",{fill:i,"fill-opacity":1,stroke:b,"stroke-width":h,title:this.name,"class":"lineColorClass",id:g+"_rect"}),j=r("rect",{id:f,"data-tif-id":f,stroke:"none","fill-opacity":0}),(q=t.screenItem.gfxWebLib.appMode===PWC.Lib.AppMode.RUNTIME)&&(p=t.Hammer,o.initHammer()),t.isZooming?this.enableTrendAreaMove():t.online||this.enableDisablePinchAndScroll(!0),m.appendChild(l),k.appendChild(j),q&&o.drawRulerAndTooltip(),this.update(),c=null},this.update=function(){var a,b,c,e,f,g,i,k,m,o=new PWC.HmiAC.TagList,p=new PWC.HmiAC.TagList,q=PWC.HmiAC.svgShape.SetAttributes;for(d.lastChild&&d.removeChild(d.lastChild),n=PWC.HmiAC.svgShape.CreateSvgElement("rect",{rect:h,appendTo:d}),q(l,{rect:s,"stroke-width":t.getLineWidth()}),q(j,{rect:h}),K.update();u.firstChild;)u.removeChild(u.firstChild);for(;x.firstChild;)x.removeChild(x.firstChild);for(;v.firstChild;)v.removeChild(v.firstChild);for(;w.firstChild;)w.removeChild(w.firstChild);if(this.trendWindowDrawn){if(a=this.getYAxes(),b=this.getXAxes(),f=Q(),f.length>0){for(i=0;i<f.length;i++){for(c=f[i].getXAxis(),e=f[i].getYAxis(),g=0;g<b.length;g++)if(m=b[g],m.name===c&&m.visible){o.tryAdd(m);break}for(g=0;g<a.length;g++)if(k=a[g],k.name===e&&k.visible){p.tryAdd(k);break}if(this.foregroundTrendGrid)break}for(g=0;g<o.items.length;g++)this.drawGridLines(o.items[g]);for(g=0;g<p.items.length;g++)this.drawGridLines(p.items[g])}o.clear(),o=null,p.clear(),p=null}},this.drawScrollbars=function(){o.drawScrollbars(D,E)},this.updateScrollbars=function(){o.updateScrollbars(D,E)},this.drawHorizScrollbar=function(a){return o.drawHorizScrollbar(a,D)},this.drawVertScrollbar=function(){return o.drawVertScrollbar(E)},this.updateHorizScrollbar=function(){return o.updateHorizScrollbar(D)},this.updateVertScrollbar=function(){return o.updateVertScrollbar(E)},this.enableScrollbarEvents=null,this.enableDisablePinchAndScroll=null,this.setScrollbarDim=null,this.setScrollbarRef=function(a,b){a&&(r=a),b&&(q=b)},this.setRect=function(a){h=new PWC.HmiAC.RECT,i=t.getLineWidth(),h.width=a.width-i,h.height=a.height-i,h.left=a.left+i/2,h.top=a.top+i/2,s=a},this.getClipPathId=function(){return e},this.getEventRectId=function(){return f},this.getRect=function(){return h},this.setSVG=function(b){a=b,a.setAttribute("id",g)},this.getSVG=function(){return a},this.getEventSVG=function(){return k},this.getElement=function(){return m},this.getDrawableAreaRect=function(){return n},this.getEventRect=function(){return j},this.getTrendViewLineColor=function(){return t.getLineColor()},this.getRedrawForScrollbars=function(){return t.redrawForScrollbars},this.getTrendViewLineWidth=function(){return t.getLineWidth()},this.getIsLeftOrRight=function(){return c},this.cleanUp=function(){k&&t.screenItem.gfxWebLib.appMode===PWC.Lib.AppMode.RUNTIME&&o.cleanUp()},this.enableTrendAreaMove=null,this.disableTrendAreaMove=function(a,b){var c,d,e,f;if(o.disableTrendAreaMove(b),a===!1&&Q().length>0){for(c=this.getYAxes(),f=c.length,e=0;f>e;e++)d=c[e],0!==d.zoomInOutCount||t.zoomButtonClicked!==PWC.HmiAC.ZoomAndMoveButtons.ZoomMove&&!t.online||d.invalidate(),d.endValueBuffer2&&(d.endValueBuffer=d.endValueBuffer2,d.startValueBuffer=d.startValueBuffer2,d.endValueBuffer2=null,d.startValueBuffer2=null);if(t.trendObjectType===PWC.HmiAC.TrendObjectType.Online)0!==d.zoomInOutCount||t.zoomButtonClicked!==PWC.HmiAC.ZoomAndMoveButtons.ZoomMove&&!t.online||J.relativeAxis.invalidate(),d.endValueBuffer2&&(J.relativeAxis.endValueBuffer=J.relativeAxis.endValueBuffer2,J.relativeAxis.startValueBuffer=J.relativeAxis.startValueBuffer2,J.relativeAxis.endValueBuffer2=null,J.relativeAxis.startValueBuffer2=null);else for(c=this.getXAxes(),f=c.length,e=0;f>e;e++)d=c[e],0===d.zoomInOutCount&&d.invalidate();this.resetTrendWindow()}},this.reDraw=function(a,b){var d,e,f,g,h,j,k,l,m=PWC.Lib.jQL.getElementsByClassName,n=Q();if(null!==a&&(c?(k=v,l=w):(k=u,l=x)),null!==b&&(c?(k=u,l=x):(k=v,l=w)),this.trendWindowDrawn){if(i=t.getLineWidth(),null!==n&&n.length>0)for(h=0;h<n.length&&(null!==a&&n[h].getXAxis()===a&&(f=t.getXAxisByName(a),j=a.replace(/ /g,"_"),m(k,j,"line").remove(),f.visible&&this.drawGridLines(f)),null!==b&&n[h].getYAxis()===b&&(f=t.getYAxisByName(b),j=b.replace(/ /g,"_"),m(k,j,"line").remove(),f.visible&&this.drawGridLines(f)),!this.foregroundTrendGrid);h++);for(d=n.length-1;d>=0;d--)e=n[d],t.trendObjectType===PWC.HmiAC.TrendObjectType.Function?(g=!1,t.trendTagListsSaved&&e.oldTagList&&(g=!0),a&&e.getXAxis()===a&&e.recalculateX(g),b&&e.getYAxis()===b&&e.recalculateY(g)):t.online?(a&&e.getXAxis()===a&&e.recalculateX(),b&&(e.getYAxis()===b||t.showRelativeAxis)&&e.recalculateY()):(a&&e.getXAxis()===a||b&&(e.getYAxis()===b||t.showRelativeAxis))&&e.recalculate(),e.draw(g)}},this.resetTrendWindow=function(a,b){var c,d,e,f,g,h,i=Q();if(this.resetGridLines(),t.trendObjectType===PWC.HmiAC.TrendObjectType.Function){if(a)for(D=0,e=t.connectTrendWindows?t.getXAxes(!0):this.getXAxes(),f=e.length,c=0;f>c;c++)d=e[c],d.zoomInOutCount>D&&(D=d.zoomInOutCount);if(b)for(E=0,e=this.getYAxes(),f=e.length,c=0;f>c;c++)d=e[c],d.zoomInOutCount>E&&(E=d.zoomInOutCount)}for(c=i.length-1;c>=0;c--)g=i[c],h=!1,t.trendTagListsSaved&&g.oldTagList&&(h=!0),void 0===g.recalculate?(g.recalculateX(h),g.recalculateY(h)):g.recalculate(h),g.updateTrend(h);t.scrollbarMode!==L.No&&(!a||t.connectTrendWindows&&0!==this.index||this.drawHorizScrollbar(),b&&this.drawVertScrollbar())},this.resetGridLines=function(){for(var a,b,c,d,e=Q(),f=new PWC.HmiAC.TagList,g=new PWC.HmiAC.TagList;u.firstChild;)u.removeChild(u.firstChild);for(;v.firstChild;)v.removeChild(v.firstChild);if(null!==e&&e.length>0){for(c=0;c<e.length&&(a=t.getXAxisByName(e[c].getXAxis()),b=t.getYAxisByName(e[c].getYAxis()),a&&a.visible&&f.tryAdd(a),b&&b.visible&&g.tryAdd(b),!this.foregroundTrendGrid);c++);for(c=0;c<f.items.length;c++)d=f.items[c],this.drawGridLines(d);for(c=0;c<g.items.length;c++)d=g.items[c],this.drawGridLines(d)}f.clear(),f=null,g.clear(),g=null},this.setRulerValue=function(a){var b,c=Q(),d=c.length,e=[],f=PWC.HmiAC.RulerControlColumnType;if(a===!1)e=!1;else switch(t.rulerControlColumnType){case f.Ruler:e.push(K.getVertRulerPos()),t.trendObjectType===PWC.HmiAC.TrendObjectType.Function&&e.push(K.getHorizRulerPos());break;case f.StatisticArea:case f.StatisticResult:e.push(K.getStatisticRulerPos());break;default:return}for(b=0;d>b;b++)c[b].calculateRulerValue(e)},this.hideRuler=function(){K.hideRuler(),P()&&!t.showStatisticRuler&&o.disableScrollbarEvents()},this.showRuler=function(){K.showRuler(),P()&&!t.showStatisticRuler&&o.enableScrollbarEvents()},this.hideStatisticRuler=function(){K.hideStatisticRuler(),P()&&!t.showRuler&&o.disableScrollbarEvents()},this.showStatisticRuler=function(){K.showStatisticRuler(),P()&&!t.showRuler&&o.enableScrollbarEvents()},this.updateRulerColor=function(){K.updateColor(this.getBackColor())},this.OnUpdate=function(a,b,d){var e,f,h,i,j=PWC.HmiAC.TrendWindowPropId,k=!1,l=t.SVGParent,m=PWC.Lib.Canvas.Converters,n=m.enumConverter.Color,o=PWC.HmiAC.Common.HelperUtil;switch(a){case j.Index:this.propTrendWindowIndex=b,M("Index",b,d);break;case j.Name:return t.getTrendWindowByName(b);case j.Visible:var p,q,r,s;if(N("Visible",b,d),this.visible=b,p=this.getTrends(),r=p.length,b)for(q=0;r>q;q++)s=p[q],s.valueAxis&&s.timeAxis&&!s.tagInvalid||t.addToDisconnectedSources(s.name,s.dataSource.Tag);else for(q=0;r>q;q++)t.removeFromDisconnectedSources(p[q].name);PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection=!0,t.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(D>0&&(k=!0),t.requestHistoricalData(k,name),t.timeAxisDrawn=!0);break;case j.RulerStyle:d&&(b=PWC.HmiAC.RulerStyle[b]),M("RulerStyle",b,d),this.rulerStyle=b,K.onUpdate(a);break;case j.RulerColor:d?(h=b,i=o.hexStrToDecColor(b)):(h=m.convertTo(n,b),i=b),M("RulerColor",i,d),this.rulerColor=h,K.onUpdate(a);break;case j.RulerWidth:this.rulerWidth=parseInt(b,10),M("RulerWidth",this.rulerWidth,d),K.onUpdate(a);break;case j.StatisticRulerStyle:d&&(b=PWC.HmiAC.RulerStyle[b]),M("StatisticRulerStyle",b,d),this.statisticRulerStyle=b,K.onUpdate(a);break;case j.StatisticRulerColor:d?(h=b,i=o.hexStrToDecColor(b)):(h=m.convertTo(n,b),i=b),this.statisticRulerColor=h,M("StatisticRulerColor",i,d),K.onUpdate(a);break;case j.StatisticRulerWidth:this.statisticRulerWidth=parseInt(b,10),M("StatisticRulerWidth",this.statisticRulerWidth,d),K.onUpdate(a);break;case j.HorizontalGrid:N("HorizontalGrid",b,d),this.horizontalGrid=b,c?(f=x,e=u):(f=w,e=v),this.horizontalGrid?(this.fineGrid&&f.setAttribute("visibility","inherit"),this.coarseGrid&&e.setAttribute("visibility","inherit")):(f.setAttribute("visibility","hidden"),e.setAttribute("visibility","hidden"));break;case j.VerticalGrid:N("VerticalGrid",b,d),c?(f=w,e=v):(f=x,e=u),this.verticalGrid=b,this.verticalGrid?(this.fineGrid&&f.setAttribute("visibility","inherit"),this.coarseGrid&&e.setAttribute("visibility","inherit")):(f.setAttribute("visibility","hidden"),e.setAttribute("visibility","hidden"));break;case j.CoarseGrid:N("CoarseGrid",b,d),this.coarseGrid=b,this.coarseGrid?(this.verticalGrid&&v.setAttribute("visibility","inherit"),this.horizontalGrid&&u.setAttribute("visibility","inherit")):(v.setAttribute("visibility","hidden"),u.setAttribute("visibility","hidden"));break;case j.FineGrid:N("FineGrid",b,d),this.fineGrid=b,this.fineGrid?(this.horizontalGrid&&x.setAttribute("visibility","inherit"),this.verticalGrid&&w.setAttribute("visibility","inherit")):(x.setAttribute("visibility","hidden"),w.setAttribute("visibility","hidden"));break;case j.CoarseGridColor:d?(h=b,i=o.hexStrToDecColor(b)):(h=m.convertTo(n,b),i=b),M("CoarseGridColor",i,d),this.coarseGridColor=h,this.fineGridColor=h,u.setAttribute("stroke",this.coarseGridColor),v.setAttribute("stroke",this.coarseGridColor);break;case j.FineGridColor:d?(h=b,i=o.hexStrToDecColor(b)):(h=m.convertTo(n,b),i=b),M("FineGridColor",i,d),this.fineGridColor=h,x.setAttribute("stroke",this.fineGridColor),w.setAttribute("stroke",this.fineGridColor);break;case j.ForegroundTrendGrid:N("ForegroundTrendGrid",b,d),this.foregroundTrendGrid=b,PWC.HmiAC.PostPropertyUpdate.Update=!0;break;case j.BackColor:d?(h=b,i=o.hexStrToDecColor(b)):(h=m.convertTo(n,b),i=b),M("BackColor",i,d),this.backColor=h,this.useBackColor?(l.getElementById(g+"_rect").setAttribute("fill",b),K.updateColor(b)):K.updateColor(t.backColor);break;case j.UseBackColor:N("UseBackColor",b,d),this.useBackColor=b,this.useBackColor?(l.getElementById(g+"_rect").setAttribute("fill",this.backColor),K.updateColor(this.backColor)):(l.getElementById(g+"_rect").setAttribute("fill","none"),K.updateColor(t.backColor));break;case j.SpacePortion:this.spacePortion=parseInt(b,10),M("SpacePortion",this.spacePortion,d),t.getDrawableTrendWindow().length>1&&(PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection=!0)}e=null,f=null,l=null},this.cleanUp=function(){p=u=v=s=b=w=x=j=l=m=k=n=y=q=r=null,o.cleanUp(),o=null,K.cleanUp(),K=null,this.relativeAxis.cleanUp(),this.relativeAxis=this.propTrendWindow=J=a=h=j=d=t=null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.LimitValuesDialog=function(){"use strict";var a,b,c,d;this.type="LimitValuesDialog",this.data={okButtonId:"OkayBtn",cancelButtonId:"CancelBtn"},this.create=function(e,f){var g,h;return b=f.subscribe(this.type),a=b.topLevelScreenWindowDiv,c=b.textbib,d=PWC.Components.GenericDialog.Content.ObjectTypes.getHandler(b.handlerName),this.data.lowLimitLabel=c.getText("TBID_LimitValues_LowLimit"),this.data.highLimitLabel=c.getText("TBID_LimitValues_HighLimit"),this.data.uncertainStatusLabel=c.getText("TBID_LimitValues_Uncertain"),this.data.colorLabel=c.getText("TBID_LimitValues_Color"),this.data.valueLabel=c.getText("TBID_LimitValues_Value"),this.data.cancelButtonVal=c.getText("TBID_TrendPB_General_GeneralCancelButton"),this.data.okButtonVal=c.getText("TBID_TrendPB_General_GeneralOKButton"),h={type:this.type,rtoid:e,appDir:b.appDir,parentDiv:a},g=this.createControl(h)},this.getData=function(){return this.data.dialogData={},this.data.dialogData=d.getLimitValueData(),this.data},this.update=function(a,b){return d.setLimitValuesData(b),!1},this.clean=function(){var c=document.getElementById("LimitValuesDialog"),e=document.getElementById("LimitValues_divModal");a&&c&&(a.removeChild(c),e&&a.removeChild(e),a=null),b=null,d=null}},PWC.HmiAC.LimitValuesDialog.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.LimitValuesDialog,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("LimitValuesDialog",new PWC.HmiAC.LimitValuesDialog)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TagDialog=function(){"use strict";var a,b,c,d,e,f,g,h,i,j=this;this.type="TagDialog",this.data={okButtonId:"CloseBtn",cancelButtonId:"CancelBtn",showTagButtonId:"showTagBtn"},this.create=function(h,j){var k,l;return e=parseInt(h,10),b=j.subscribe(this.type,{setTagData:this.setTagData}),g=b.tagBrowser,a=b.topLevelScreenWindowDiv,c=b.textbib,i=j,f=PWC.Components.GenericDialog.Content.ObjectTypes.getHandler(b.handlerName),d=b.getTagParentDetails(e),this.data.showTagButtonVal=c.getText("TBID_TagDialog_ShowTagDialog"),this.data.cancelButtonVal=c.getText("TBID_TagDialog_Cancel"),this.data.okButtonVal=c.getText("TBID_TagDialog_OK"),this.data.tagNameLabelVal=c.getText("TBID_TagDialog_TagName"),this.data.cycleTimeLabelVal=c.getText("TBID_TagDialog_CycleTime"),l={type:this.type,rtoid:h,appDir:b.appDir,parentDiv:a},k=this.createControl(l)},this.getData=function(){var a,b,c,g=PWC.HmiAC.CycleTime,i=[];this.data.dialogData={},b=f.getTagData(e);for(c in g)i.push(c);return a=d.parentName+"-"+d.cycleTimePropId+"_"+b.parentIndex,h=d.parentName+"-"+d.tagNamePropId+"_"+b.parentIndex,b.TagDataSourceType===PWC.HmiAC.DataSourceType.OnlineTags&&(this.data.dialogData={tagName:b.Tag,cycleTimeId:a,tagNameId:h,selectedValue:i[b.cycleTime],cycleTime:i}),this.data},this.update=function(a,c){var d=[],g=[];return c.length&&a.target.id===this.data.showTagButtonId?(b.gfxWebLib.connection.handler=PWC.Core.Connection,c.splice(c.length-1),d[0]=[0],g[0]=[{Left:10,Top:10,Width:900,Height:500,TitleBarText:"BrowsingView",ShowCaption:1,BorderEnable:1}],b.gfxWebLib.connection.sendDomainLogicEvent(b.parentRtoid,3,d,g)):f.setTagData(c,e),!1},this.setTagData=function(a){var b;b=angular.element(document.getElementById("tagDialogFieldset")).scope(),j.data.dialogData.tagName=a,b.$apply(),b.onChange({target:{id:j.data.dialogData.tagNameId,value:a}})},this.clean=function(){var c=document.getElementById("TagDialog"),d=document.getElementById("TagDialog_divModal");a&&c&&(a.removeChild(c),d&&a.removeChild(d),a=null),b=null,f=null}},PWC.HmiAC.TagDialog.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.TagDialog,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("TagDialog",new PWC.HmiAC.TagDialog)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertyBrowser=function(){"use strict";var a,b,c,d,e,f,g=PWC.HmiAC.ControlType,h=PWC.HmiAC.ElementId,i=[],j=!0,k="dummy",l=[],m=[],n=[],o="#000000",p=function(a,d,e,f,g){var h,i,j;return a?(h=q("parentId name pId value controlType"),i=c.getConfig().get(e),j=b.get(d,a),new h(a,e,d,j,f,g)):new(h=q("name pId type"))(e,d,f)},q=function(a){function b(){for(c=0;e>c;c++)this[d[c]]=arguments[c]}var c,d=a.split(" "),e=d.length;return b},r=function(){var b=[],c=d.gfxWebLib.textbib,e=d.gfxWebLib.connection.getAppDir(),f="templates/commontabs/";return W(),b=z(),b=b.concat(s()),a.trendObjectType===PWC.HmiAC.TrendObjectType.Online?(b=b.concat(u()),b=b.concat(t(h.YAxis)),b=b.concat(v()),b=b.concat(y())):a.trendObjectType===PWC.HmiAC.TrendObjectType.Function&&(b=b.concat(t(h.XAxis)),b=b.concat(t(h.YAxis)),b=b.concat(v()),b=b.concat(y())),b=b.concat(PWC.HmiAC.PopulateStatusBarList.getList(h.StatusBar,c,d.screenItem.props.Statusbar,e+f+"statusbar.html")),b=b.concat(PWC.HmiAC.PopulateToolBarList.getList(h.ToolBar,c,d.screenItem.props.Toolbar,e+f+"toolbar.html"))},s=function(b){var c,d,e=PWC.HmiAC.TrendWindowPropId,i=h.TrendWindow,j=[],k=f.TrendWindowProp,l=[];if(l.push(p(null,h.TrendWindow,"Trend Window","complex")),b?j.push(b):j=a.getTrendWindow(),d=j.length,0!==d)for(c=0;d>c;c++)a.trendWindowToUpdate=b?b:a.getTrendWindow(c),l.push(p(null,i,j[c].name,"subcomplex")),l.push(p(i,e.Name,k.Name,g.Collection)),l.push(p(i,e.Visible,k.Visible,g.Bool)),a.trendObjectType===PWC.HmiAC.TrendObjectType.Function?(l.push(p(i,e.HorizontalGrid,k.YGrid,g.Bool)),l.push(p(i,e.VerticalGrid,k.XGrid,g.Bool))):(l.push(p(i,e.HorizontalGrid,k.HorizontalGrid,g.Bool)),l.push(p(i,e.VerticalGrid,k.VerticalGrid,g.Bool))),l.push(p(i,e.SpacePortion,k.SpacePortion,g.WInt)),l.push(p(i,e.CoarseGrid,k.CoarseGrid,g.Bool)),l.push(p(i,e.CoarseGridColor,k.CoarseGridColor,g.Color)),l.push(p(i,e.FineGrid,k.FineGrid,g.Bool)),l.push(p(i,e.FineGridColor,k.FineGridColor,g.Color)),l.push(p(i,e.BackColor,k.BackColor,g.Color)),l.push(p(i,e.UseBackColor,k.UseBackColor,g.Bool)),l.push(p(i,e.ForegroundTrendGrid,k.ForegroundTrendGrid,g.Bool)),l.push(p(i,e.TrendWindow,k.TrendWindow,g.ReadOnly)),l.push(p(i,e.RulerLayer,k.RulerLayer,g.ReadOnly)),l.push(p(i,e.Ruler,k.Ruler,g.ReadOnly)),l.push(p(i,e.RulerForStatisticsArea,k.RulerForStatisticsArea,g.ReadOnly)),l.push(p(i,e.RulerStyle,k.Effects,g.Collection)),l.push(p(i,e.GridLines,k.GridLines,g.ReadOnly)),l.push(p(i,e.RulerColor,k.Color,g.Color)),l.push(p(i,e.RulerWidth,k.Weight,g.SInt)),l.push(p(i,e.StatisticRulerStyle,k.Effects,g.Collection)),l.push(p(i,e.StatisticRulerColor,k.Color,g.Color)),l.push(p(i,e.StatisticRulerWidth,k.Weight,g.SInt));else l=l.concat(D());return l},t=function(b,c){var d,e,i=PWC.HmiAC.AxisPropId,j=[],k=f.YAxisProp,l=[];if(b===h.YAxis?(c?j.push(c):j=a.getYAxes(),l.push(p(null,h.YAxis,"YAxis","complex"))):b===h.XAxis&&(j=a.getXAxes(),l.push(p(null,h.XAxis,"XAxis","complex"))),e=j.length,0!==e)for(d=0;e>d;d++)b===h.YAxis&&(a.yAxisToUpdate=c?c:a.getYAxis(d),l.push(p(null,h.YAxis,j[d].name,"subcomplex")),a.trendObjectType===PWC.HmiAC.TrendObjectType.Function&&l.push(p(b,i.Name,k.FunctionTrendYAxes,g.Collection))),b===h.XAxis&&(a.xAxisToUpdate=a.getXAxis(d),l.push(p(null,h.XAxis,j[d].name,"subcomplex")),a.trendObjectType===PWC.HmiAC.TrendObjectType.Function&&l.push(p(b,i.Name,k.FunctionTrendXAxes,g.Collection))),a.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&l.push(p(b,i.Name,k.Name,g.Collection)),l.push(p(b,i.TrendWindow,k.TrendWindow,g.ReadOnly)),l.push(p(b,i.Alignment,k.Align,g.Collection)),l.push(p(b,i.Visible,k.Visible,g.Bool)),l.push(p(b,i.Color,k.Color,g.Color)),l.push(p(b,i.InTrendColor,k.InTrendColor,g.Bool)),l.push(p(b,i.FineGrid,k.FineGrid,g.Bool)),l.push(p(b,i.CoarseGrid,k.CoarseGrid,g.Bool)),l.push(p(b,i.BeginValue,k.BeginValue,g.Float)),l.push(p(b,i.EndValue,k.EndValue,g.Float)),l.push(p(b,i.ShowLabels,k.ShowLabels,g.Bool)),l.push(p(b,i.ShowAllLabels,k.ShowAllLabels,g.Bool)),l.push(p(b,i.AutoRange,k.AutoRange,g.Bool)),l.push(p(b,i.DisplayName,k.Label,g.Text)),l.push(p(b,i.Use,k.Use,g.Text)),l.push(p(b,i.Show,k.Show,g.Text)),l.push(p(b,i.ExponentialNotation,k.ExponentialNotation,g.Text)),l.push(p(b,i.ObjectName,k.ObjectName,g.Text)),l.push(a.trendObjectType===PWC.HmiAC.TrendObjectType.Online?p(b,i.ScalingType,k.Scaling,g.Collection):p(b,i.ScalingType,k.Scaling,g.Text)),l.push(p(b,i.DecimalPrecision,k.Precisions,g.Text)),l.push(p(b,i.AutoDecimalPrecision,k.AutoPrecisions,g.Text)),l.push(p(b,i.ValueRange,k.ValueRange,g.Text)),l.push(p(b,i.StartAndEndValueMsg,k.StartAndEndValueMsg,g.Text)),l.push(p(b,i.Effects,k.Effects,g.Text)),l.push(p(b,i.GridProperties,k.GridProperties,g.Text)),l.push(p(b,i.UserScaling,k.UserScaling,g.Text)),l.push(p(b,i.AreaNames,k.AreaNames,g.Text)),0===a.textOrientation||1===a.textOrientation?(l.push(p(b,i.LeftToRightAlign,k.Align,g.Collection)),l.push(p(b,i.TopToBottomAlign,k.Align,g.Collection))):(l.push(p(b,i.TopToBottomAlign,k.Align,g.Collection)),l.push(p(b,i.LeftToRightAlign,k.Align,g.Collection))),l.push(p(b,i.NegativeMsg,k.NegativeMsg,g.Text)),l.push(p(b,i.LogarithmMsgCaption,k.LogarithmMsgCaption,g.Text)),l.push(p(b,i.InValidNumberMsg,k.InValidNumberMsg,g.Text)),l.push(p(b,i.LogarithmicValidNumberRangeMsg,k.LogarithmicValidNumberRangeMsg,g.Text)),l.push(p(b,i.LogarithmicInvalidNegNumberMsg,k.LogarithmicInvalidNegNumberMsg,g.Text)),l.push(p(b,i.LinearMsgCaption,k.LinearMsgCaption,g.Text)),l.push(p(b,i.InValidNumberCaption,k.InValidNumberCaption,g.Text)),l.push(p(b,i.NegativeLogarithmMsgCaption,k.NegativeLogarithmMsgCaption,g.Text)),l.push(p(b,i.NegativeLogarithmicValidNumberRangeMsg,k.NegativeLogarithmicValidNumberRangeMsg,g.Text)),l.push(p(b,i.NegativeLogarithmicInvalidNegNumberMsg,k.NegativeLogarithmicInvalidNegNumberMsg,g.Text));else l=l.concat(C(b));return l},u=function(b){var c,d,e=PWC.HmiAC.AxisPropId,i=[],j=h.XAxis,k=f.XAxisProp,l=[];if(b?i.push(b):i=a.getXAxes(),d=i.length,l.push(p(null,h.XAxis,"XAxis","complex")),0!==d)for(c=0;d>c;c++)a.xAxisToUpdate=b?b:a.getXAxis(c),l.push(p(null,j,i[c].name,"subcomplex")),l.push(p(j,e.Name,k.Name,g.Collection)),l.push(p(j,e.TrendWindow,k.TrendWindow,g.ReadOnly)),l.push(p(j,e.Alignment,k.Align,g.Collection)),l.push(p(j,e.Visible,k.Visible,g.Bool)),l.push(p(j,e.Color,k.Color,g.Color)),l.push(p(j,e.InTrendColor,k.InTrendColor,g.Bool)),l.push(p(j,e.FineGrid,k.FineGrid,g.Bool)),l.push(p(j,e.CoarseGrid,k.CoarseGrid,g.Bool)),l.push(p(j,e.ShowLabels,k.ShowLabels,g.Bool)),l.push(p(j,e.ShowAllLabels,k.ShowAllLabels,g.Bool)),l.push(p(j,e.Online,k.Online,g.Bool)),l.push(p(j,e.RangeType,k.RangeType,g.Collection)),l.push(p(j,e.BeginTime,k.BeginTimeUTC,g.DateTime)),l.push(p(j,e.EndTime,k.EndTimeUTC,g.DateTime)),l.push(p(j,e.TimeRangeBase,k.RangeBase,g.Collection)),l.push(p(j,e.TimeRangeFactor,k.RangeFactor,g.WInt)),l.push(p(j,e.PointCount,k.MeasurePoints,g.WInt)),l.push(p(j,e.TimeFormat,k.TimeFormat,g.Collection)),l.push(p(j,e.DateFormat,k.DateFormat,g.Collection)),l.push(p(j,e.ShowDate,k.ShowDate,g.Bool)),l.push(p(j,e.DisplayName,k.Label,g.Text)),l.push(p(j,e.TimeRange,k.TimeRange,g.Text)),l.push(p(j,e.ObjectName,k.ObjectName,g.Text)),l.push(p(j,e.Effects,k.Effects,g.Text)),l.push(p(j,e.Refresh,k.Refresh,g.Text)),l.push(p(j,e.StartTimeMsg,k.StartTimeMsg,g.Text)),l.push(p(j,e.MeasurementPointMsg,k.MeasurementPointMsg,g.Text)),l.push(p(j,e.TimeRangeMsg,k.TimeRangeMsg,g.Text)),0===a.textOrientation||1===a.textOrientation?(l.push(p(j,e.LeftToRightAlign,k.Align,g.Collection)),l.push(p(j,e.TopToBottomAlign,k.Align,g.Collection))):(l.push(p(j,e.TopToBottomAlign,k.Align,g.Collection)),l.push(p(j,e.LeftToRightAlign,k.Align,g.Collection)));else l=l.concat(B());return l},v=function(b){var c,d,e=PWC.HmiAC.TrendPropId,i=[],j=h.Trend,k=f.TrendProp,l=[];if(b?i.push(b):i=a.getTrend(),d=i.length,l.push(p(null,j,"Trend","complex")),0!==d)for(c=0;d>c;c++)a.trendToUpdate=b?b:a.getTrend(c),l.push(p(null,j,i[c].name,"subcomplex")),l.push(p(j,e.Name,k.Name,g.Collection)),l.push(p(j,e.Visible,k.Visible,g.Bool)),l.push(p(j,e.LineColor,k.Color,g.Color)),l.push(p(j,e.LineStyle,k.LineStyle,g.Collection)),l.push(p(j,e.LineWidth,k.LineWidth,g.WInt)),l.push(p(j,e.PointStyle,k.PointStyle,g.Collection)),l.push(p(j,e.Mode,k.TrendStyle,g.Collection)),l.push(p(j,e.PointWidth,k.PointWidth,g.WInt)),l.push(p(j,e.PointColor,k.PointColor,g.Color)),l.push(p(j,e.FillStyle,k.Fill,g.Bool)),l.push(p(j,e.FillColor,k.FillColor,g.Color)),a.trendObjectType===PWC.HmiAC.TrendObjectType.Online?l=l.concat(w()):a.trendObjectType===PWC.HmiAC.TrendObjectType.Function&&(l=l.concat(x()));else l=l.concat(A());return l},w=function(){var a=h.Trend,b=f.TrendProp,c=PWC.HmiAC.TrendPropId,d=[];return d.push(p(a,c.TrendWindow,b.TrendWindow,g.ReadOnly)),d.push(p(a,c.TimeAxis,b.TimeAxis,g.ReadOnly)),d.push(p(a,c.ValueAxis,b.ValueAxis,g.ReadOnly)),d.push(p(a,c.TagName,b.TagName,g.ReadOnly)),d.push(p(a,c.TagDataSourceType,b.DataSource,g.Collection)),d.push(p(a,c.DataConnection,b.DataConnection,g.ReadOnly)),d.push(p(a,c.Effects,b.Effects,g.ReadOnly)),d.push(p(a,c.DisplayName,b.Label,g.ReadOnly)),d.push(p(a,c.ObjectName,b.ObjectName,g.ReadOnly)),d.push(p(a,c.TagNameButton,b.TagButtonValue,g.ReadOnly)),d.push(p(a,c.CycleTime,void 0,g.ReadOnly)),d.push(p(a,c.LimitValuesButton,b.LimitValuesButtonValue,g.ReadOnly)),d.push(p(a,c.LowLimit,b.LimitValuesButtonValue,g.Bool)),d.push(p(a,c.LowLimitColor,b.LimitValuesButtonValue,g.Color)),d.push(p(a,c.LowLimitValue,b.LimitValuesButtonValue,g.Int)),d.push(p(a,c.HighLimit,b.LimitValuesButtonValue,g.Bool)),d.push(p(a,c.HighLimitColor,b.LimitValuesButtonValue,g.Color)),d.push(p(a,c.HighLimitValue,b.LimitValuesButtonValue,g.Int)),d.push(p(a,c.UncertainQuality,b.LimitValuesButtonValue,g.Bool)),d.push(p(a,c.UncertainQualityColor,b.LimitValuesButtonValue,g.Color)),d},x=function(){var a=h.Trend,b=f.TrendProp,c=PWC.HmiAC.TrendPropId,d=[];return d.push(p(a,c.XAxis,b.XAxis,g.ReadOnly)),d.push(p(a,c.YAxis,b.YAxis,g.ReadOnly)),d.push(p(a,c.TagNameX,b.TagNameX,g.ReadOnly)),d.push(p(a,c.TagNameY,b.TagNameY,g.ReadOnly)),d.push(p(a,c.PointCount,b.MeasurePoints,g.WInt)),d.push(p(a,c.BeginTime,b.BeginTimeUTC,g.DateTime)),d.push(p(a,c.EndTime,b.EndTimeUTC,g.DateTime)),d.push(p(a,c.TimeRangeFactor,b.TimeRangeFactor,g.SInt)),d.push(p(a,c.TimeRangeBase,b.TimeRangeBase,g.Collection)),d.push(p(a,c.RangeType,b.RangeType,g.Collection)),d.push(p(a,c.TrendWindow,b.TrendWindow,g.ReadOnly)),d.push(p(a,c.TagDataSourceType,b.DataSource,g.Collection)),d.push(p(a,c.DataConnection,b.DataConnection,g.Text)),d.push(p(a,c.Effects,b.Effects,g.Text)),d.push(p(a,c.DisplayName,b.Label,g.Text)),d.push(p(a,c.ObjectName,b.ObjectName,g.Text)),d.push(p(a,c.TagName,b.TagName,g.Text)),d.push(p(a,c.Refresh,b.Refresh,g.Text)),d.push(p(a,c.TimeRange,b.TimeRange,g.Text)),d.push(p(a,c.Setting,b.Setting,g.Text)),d.push(p(a,c.StartTimeMsg,b.StartTimeMsg,g.Text)),d.push(p(a,c.MeasurementPointMsg,b.MeasurementPointMsg,g.Text)),d.push(p(a,c.TimeRangeMsg,b.TimeRangeMsg,g.Text)),d.push(p(a,c.TagNameButton,b.TagButtonValue,g.ReadOnly)),d.push(p(a,c.TagXNameButton,b.TagButtonValue,g.ReadOnly)),d.push(p(a,c.TagYNameButton,b.TagButtonValue,g.ReadOnly)),d.push(p(a,c.CycleTimeX,void 0,g.ReadOnly)),d.push(p(a,c.CycleTimeY,void 0,g.ReadOnly)),d},y=function(){var a=h.Font,b=f.FontProp,c=PWC.HmiAC.FontPropId,d=[];return d.push(p(null,a,"Font","complex")),d.push(p(a,c.FontName,b.FontName,g.Collection)),d.push(p(a,c.FontArray,b.FontArray,g.Collection)),d.push(p(a,c.FontSize,b.FontSize,g.WInt)),d.push(p(a,c.FontBold,b.FontBold,g.Bool)),d.push(p(a,c.FontItalic,b.FontItalic,g.Bool)),d.push(p(a,c.FontStrikeOut,b.FontStrikeOut,g.Bool)),d.push(p(a,c.FontUnderline,b.FontUnderline,g.Bool)),d.push(p(a,c.FontProperties,b.FontProperties,g.Text)),d.push(p(a,c.Effects,b.Effects,g.Text)),d.push(p(a,c.SampleText,b.SampleText,g.Text)),d},z=function(){var a=[],b=h.TrendView,c=PWC.HmiAC.TrendViewPropId,d=f.TrendViewProp;return a.push(p(null,b,"TrendView","complex")),a.push(p(b,c.GeneralTab,d.GeneralTab,g.ReadOnly)),a.push(p(b,c.TrendTab,d.TrendTab,g.ReadOnly)),a.push(p(b,c.TrendWindowTab,d.TrendWindowTab,g.ReadOnly)),a.push(p(b,c.TimeAxesTab,d.TimeAxesTab,g.ReadOnly)),a.push(p(b,c.ValueAxesTab,d.ValueAxesTab,g.ReadOnly)),a.push(p(b,c.FontTab,d.FontTab,g.ReadOnly)),a.push(p(b,c.ToolBarTab,d.ToolBarTab,g.ReadOnly)),a.push(p(b,c.StatusBarTab,d.StatusBarTab,g.ReadOnly)),a.push(p(b,c.OnlineConfiguration,d.OnlineConfiguration,g.ReadOnly)),a.push(p(b,c.Export,d.Export,g.ReadOnly)),a.push(p(b,c.BorderWidth,d.BorderWidth,g.WInt)),a.push(p(b,c.LineWidth,d.LineWidth,g.WInt)),a.push(p(b,c.LineColor,d.Windowseparaterlines,g.Color)),a.push(p(b,c.BorderColor,d.Border,g.Color)),a.push(p(b,c.Background,d.Background,g.Color)),a.push(p(b,c.TimeBase,d.TimeBase,g.Collection)),a.push(p(b,c.Orientation,d.TextOrientation,g.Collection)),a.push(p(b,c.ScrollbarMode,d.ScrollbarMode,g.Collection)),a.push(p(b,c.Window,d.Window,g.ReadOnly)),a.push(p(b,c.WindowTitle,d.WindowTitle,g.ReadOnly)),a.push(p(b,c.Text,d.Text,g.ReadOnly)),a.push(p(b,c.Movable,d.Movable,g.ReadOnly)),a.push(p(b,c.Closable,d.Closable,g.ReadOnly)),a.push(p(b,c.Sizable,d.Sizable,g.ReadOnly)),a.push(p(b,c.Style,d.Style,g.ReadOnly)),a.push(p(b,c.CurrentPrintJob,d.CurrentPrintJob,g.ReadOnly)),a.push(p(b,c.Effects,d.Effects,g.ReadOnly)),a.push(p(b,c.Properties,d.Properties,g.ReadOnly)),a.push(p(b,c.ConnectTrendWindows,d.ConnectTrendWindow,g.Bool)),a.push(p(b,c.OpenPicture,d.OpenPicture,g.ReadOnly)),a.push(p(b,c.Online,d.Startingupdate,g.Bool)),a.push(p(b,c.ShowRuler,d.ShowRuler,g.Bool)),a.push(p(b,c.LoadDataImmediately,d.LoadDataFromArchive,g.Bool)),a.push(p(b,c.DataConnection,d.DataConnection,g.ReadOnly)),a.push(p(b,c.XAxes,d.XAxes,g.ReadOnly)),a.push(p(b,c.YAxes,d.YAxes,g.ReadOnly)),a.push(p(b,c.UseTrendNameAsLabel,d.UseTrendNameAsLabel,g.Bool)),a},A=function(){var b,c=h.Trend,d=f.TrendProp,e=PWC.HmiAC.TrendPropId,i=q("parentId pId name value controlType"),j=[];return j.push(p(null,c,k,"subcomplex")),j.push(new i(c,e.Name,d.Name,b,g.ReadOnly)),j.push(new i(c,e.Visible,d.Visible,b,g.ReadOnly)),j.push(new i(c,e.LineColor,d.Color,o,g.ReadOnly)),j.push(new i(c,e.LineStyle,d.LineStyle,b,g.ReadOnly)),j.push(new i(c,e.LineWidth,d.LineWidth,b,g.ReadOnly)),j.push(new i(c,e.PointStyle,d.PointStyle,b,g.ReadOnly)),j.push(new i(c,e.Mode,d.TrendStyle,b,g.ReadOnly)),j.push(new i(c,e.PointWidth,d.PointWidth,b,g.ReadOnly)),j.push(new i(c,e.PointColor,d.PointColor,o,g.ReadOnly)),j.push(new i(c,e.FillStyle,d.Fill,b,g.ReadOnly)),j.push(new i(c,e.FillColor,d.FillColor,o,g.ReadOnly)),a.trendObjectType===PWC.HmiAC.TrendObjectType.Online?(j.push(new i(c,e.TrendWindow,d.TrendWindow,b,g.ReadOnly)),j.push(new i(c,e.TimeAxis,d.TimeAxis,b,g.ReadOnly)),j.push(new i(c,e.ValueAxis,d.ValueAxis,b,g.ReadOnly)),j.push(new i(c,e.TagName,d.TagName,b,g.ReadOnly)),j.push(new i(c,e.TagDataSourceType,d.DataSource,b,g.ReadOnly)),j.push(new i(c,e.DataConnection,d.DataConnection,b,g.ReadOnly)),j.push(new i(c,e.Effects,d.Effects,b,g.ReadOnly)),j.push(new i(c,e.DisplayName,d.Label,b,g.ReadOnly)),j.push(new i(c,e.ObjectName,d.ObjectName,b,g.ReadOnly))):a.trendObjectType===PWC.HmiAC.TrendObjectType.Function&&(j.push(new i(c,e.XAxis,d.XAxis,b,g.ReadOnly)),j.push(new i(c,e.YAxis,d.YAxis,b,g.ReadOnly)),j.push(new i(c,e.TagNameX,d.TagNameX,b,g.ReadOnly)),j.push(new i(c,e.TagNameY,d.TagNameY,b,g.ReadOnly)),j.push(new i(c,e.PointCount,d.MeasurePoints,b,g.ReadOnly)),j.push(new i(c,e.BeginTime,d.BeginTimeUTC,b,g.ReadOnly)),j.push(new i(c,e.EndTime,d.EndTimeUTC,b,g.ReadOnly)),j.push(new i(c,e.TimeRangeFactor,d.TimeRangeFactor,b,g.ReadOnly)),j.push(new i(c,e.TimeRangeBase,d.TimeRangeBase,b,g.ReadOnly)),j.push(new i(c,e.RangeType,d.RangeType,b,g.ReadOnly)),j.push(new i(c,e.TrendWindow,d.TrendWindow,b,g.ReadOnly)),j.push(new i(c,e.TagDataSourceType,d.DataSource,b,g.ReadOnly)),j.push(new i(c,e.DataConnection,d.DataConnection,b,g.ReadOnly)),j.push(new i(c,e.Effects,d.Effects,b,g.ReadOnly)),j.push(new i(c,e.DisplayName,d.Label,b,g.ReadOnly)),j.push(new i(c,e.ObjectName,d.ObjectName,b,g.ReadOnly)),j.push(new i(c,e.TagName,d.TagName,b,g.ReadOnly)),j.push(new i(c,e.Refresh,d.Refresh,b,g.ReadOnly)),j.push(new i(c,e.TimeRange,d.TimeRange,b,g.ReadOnly)),j.push(new i(c,e.Setting,d.Setting,b,g.ReadOnly)),j.push(new i(c,e.StartTimeMsg,d.StartTimeMsg,b,g.ReadOnly)),j.push(new i(c,e.MeasurementPointMsg,d.MeasurementPointMsg,b,g.ReadOnly)),j.push(new i(c,e.TimeRangeMsg,d.TimeRangeMsg,b,g.ReadOnly))),j
},B=function(){var a,b=h.XAxis,c=f.XAxisProp,d=PWC.HmiAC.AxisPropId,e=q("parentId pId name value controlType"),i=[];return i.push(p(null,b,k,"subcomplex")),i.push(new e(b,d.Name,c.Name,a,g.ReadOnly)),i.push(new e(b,d.TrendWindow,c.TrendWindow,a,g.ReadOnly)),i.push(new e(b,d.Alignment,c.Align,a,g.ReadOnly)),i.push(new e(b,d.Visible,c.Visible,a,g.ReadOnly)),i.push(new e(b,d.Color,c.Color,o,g.ReadOnly)),i.push(new e(b,d.InTrendColor,c.InTrendColor,a,g.ReadOnly)),i.push(new e(b,d.FineGrid,c.FineGrid,a,g.ReadOnly)),i.push(new e(b,d.CoarseGrid,c.CoarseGrid,a,g.ReadOnly)),i.push(new e(b,d.ShowLabels,c.ShowLabels,a,g.ReadOnly)),i.push(new e(b,d.ShowAllLabels,c.ShowAllLabels,a,g.ReadOnly)),i.push(new e(b,d.Online,c.Online,a,g.ReadOnly)),i.push(new e(b,d.RangeType,c.RangeType,a,g.ReadOnly)),i.push(new e(b,d.BeginTime,c.BeginTimeUTC,a,g.ReadOnly)),i.push(new e(b,d.EndTime,c.EndTimeUTC,a,g.ReadOnly)),i.push(new e(b,d.TimeRangeBase,c.RangeBase,a,g.ReadOnly)),i.push(new e(b,d.TimeRangeFactor,c.RangeFactor,a,g.ReadOnly)),i.push(new e(b,d.PointCount,c.MeasurePoints,a,g.ReadOnly)),i.push(new e(b,d.TimeFormat,c.TimeFormat,a,g.ReadOnly)),i.push(new e(b,d.DateFormat,c.DateFormat,a,g.ReadOnly)),i.push(new e(b,d.ShowDate,c.ShowDate,a,g.ReadOnly)),i.push(new e(b,d.DisplayName,c.Label,a,g.ReadOnly)),i.push(new e(b,d.TimeRange,c.TimeRange,a,g.ReadOnly)),i.push(new e(b,d.ObjectName,c.ObjectName,a,g.ReadOnly)),i.push(new e(b,d.Effects,c.Effects,a,g.ReadOnly)),i.push(new e(b,d.Refresh,c.Refresh,a,g.ReadOnly)),i.push(new e(b,d.StartTimeMsg,c.StartTimeMsg,a,g.ReadOnly)),i.push(new e(b,d.MeasurementPointMsg,c.MeasurementPointMsg,a,g.ReadOnly)),i.push(new e(b,d.TimeRangeMsg,c.TimeRangeMsg,a,g.ReadOnly)),i},C=function(b){var c,d=PWC.HmiAC.AxisPropId,e=f.YAxisProp,i=q("parentId pId name value controlType"),j=[];return j.push(p(null,h.YAxis,k,"subcomplex")),b===h.YAxis&&a.trendObjectType===PWC.HmiAC.TrendObjectType.Function&&j.push(new i(b,d.Name,e.FunctionTrendYAxes,c,g.ReadOnly)),b===h.XAxis&&a.trendObjectType===PWC.HmiAC.TrendObjectType.Function&&j.push(new i(b,d.Name,e.FunctionTrendXAxes,c,g.ReadOnly)),a.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&j.push(new i(b,d.Name,e.Name,c,g.ReadOnly)),j.push(new i(b,d.TrendWindow,e.TrendWindow,c,g.ReadOnly)),j.push(new i(b,d.Alignment,e.Align,c,g.ReadOnly)),j.push(new i(b,d.Visible,e.Visible,c,g.ReadOnly)),j.push(new i(b,d.Color,e.Color,o,g.ReadOnly)),j.push(new i(b,d.InTrendColor,e.InTrendColor,c,g.ReadOnly)),j.push(new i(b,d.FineGrid,e.FineGrid,c,g.ReadOnly)),j.push(new i(b,d.CoarseGrid,e.CoarseGrid,c,g.ReadOnly)),j.push(new i(b,d.BeginValue,e.BeginValue,c,g.ReadOnly)),j.push(new i(b,d.EndValue,e.EndValue,c,g.ReadOnly)),j.push(new i(b,d.ShowLabels,e.ShowLabels,c,g.ReadOnly)),j.push(new i(b,d.ShowAllLabels,e.ShowAllLabels,c,g.ReadOnly)),j.push(new i(b,d.AutoRange,e.AutoRange,c,g.ReadOnly)),j.push(new i(b,d.DisplayName,e.Label,c,g.ReadOnly)),j.push(new i(b,d.Use,e.Use,c,g.ReadOnly)),j.push(new i(b,d.Show,e.Show,c,g.ReadOnly)),j.push(new i(b,d.ExponentialNotation,e.ExponentialNotation,c,g.ReadOnly)),j.push(new i(b,d.ObjectName,e.ObjectName,c,g.ReadOnly)),j.push(new i(b,d.Scaling,e.Scaling,c,g.ReadOnly)),j.push(new i(b,d.DecimalPrecision,e.Precisions,c,g.ReadOnly)),j.push(new i(b,d.AutoDecimalPrecision,e.AutoPrecisions,c,g.ReadOnly)),j.push(new i(b,d.ValueRange,e.ValueRange,c,g.ReadOnly)),j.push(new i(b,d.StartAndEndValueMsg,e.StartAndEndValueMsg,c,g.ReadOnly)),j.push(new i(b,d.Effects,e.Effects,c,g.ReadOnly)),j.push(new i(b,d.GridProperties,e.GridProperties,c,g.ReadOnly)),j.push(new i(b,d.UserScaling,e.UserScaling,c,g.ReadOnly)),j.push(new i(b,d.AreaNames,e.AreaNames,c,g.ReadOnly)),j},D=function(){var b,c=[],d=h.TrendWindow,e=f.TrendWindowProp,i=PWC.HmiAC.TrendWindowPropId,j=q("parentId pId name value controlType");return c.push(p(null,d,k,"subcomplex")),c.push(new j(d,i.Name,e.Name,b,g.ReadOnly)),c.push(new j(d,i.Visible,e.Visible,b,g.ReadOnly)),a.trendObjectType===PWC.HmiAC.TrendObjectType.Function?(c.push(new j(d,i.HorizontalGrid,e.YGrid,b,g.ReadOnly)),c.push(new j(d,i.VerticalGrid,e.XGrid,b,g.ReadOnly))):(c.push(new j(d,i.HorizontalGrid,e.HorizontalGrid,b,g.ReadOnly)),c.push(new j(d,i.VerticalGrid,e.VerticalGrid,b,g.ReadOnly))),c.push(new j(d,i.SpacePortion,e.SpacePortion,b,g.ReadOnly)),c.push(new j(d,i.CoarseGrid,e.CoarseGrid,b,g.ReadOnly)),c.push(new j(d,i.CoarseGridColor,e.CoarseGridColor,o,g.ReadOnly)),c.push(new j(d,i.FineGrid,e.FineGrid,b,g.ReadOnly)),c.push(new j(d,i.FineGridColor,e.FineGridColor,o,g.ReadOnly)),c.push(new j(d,i.BackColor,e.BackColor,o,g.ReadOnly)),c.push(new j(d,i.UseBackColor,e.UseBackColor,b,g.ReadOnly)),c.push(new j(d,i.ForegroundTrendGrid,e.ForegroundTrendGrid,b,g.ReadOnly)),c.push(new j(d,i.TrendWindow,e.TrendWindow,b,g.ReadOnly)),c.push(new j(d,i.RulerLayer,e.RulerLayer,b,g.ReadOnly)),c.push(new j(d,i.Ruler,e.Ruler,b,g.ReadOnly)),c.push(new j(d,i.RulerForStatisticsArea,e.RulerForStatisticsArea,b,g.ReadOnly)),c.push(new j(d,i.Effects,e.Effects,b,g.ReadOnly)),c.push(new j(d,i.GridLines,e.GridLines,b,g.ReadOnly)),c.push(new j(d,i.Color,e.Color,o,g.ReadOnly)),c.push(new j(d,i.Weight,e.Weight,b,g.ReadOnly)),c.push(new j(d,i.StatisticRulerStyle,e.Effects,b,g.ReadOnly)),c.push(new j(d,i.StatisticRulerColor,e.Color,o,g.ReadOnly)),c.push(new j(d,i.StatisticRulerWidth,e.Weight,b,g.ReadOnly)),c},E=function(b,d,e,f){var g,h,i,j,k,l=null,m=PWC.HmiAC.ElementId;switch(isNaN(d)&&-1!==d.indexOf("_")&&(h=d.split("_"),d=parseInt(h[0],10),g=parseInt(h[1],10)),f){case m.Trend:a.trendToUpdate=a.getTrend(g);break;case m.XAxis:a.xAxisToUpdate=a.getXAxis(g);break;case m.YAxis:a.yAxisToUpdate=a.getYAxis(g);break;case m.TrendWindow:a.trendWindowToUpdate=a.getTrendWindow(g);break;case m.StatusBar:isNaN(g)||(d=g+"-"+d);break;case m.ToolBar:isNaN(g)||(d=g+"-"+d)}if(l=a.updateProperty(f,d,e,!0))switch(l===PWC.HmiAC.TrendViewPropId.Orientation,f){case m.Trend:j=c.data[4],i=a.trendToUpdate.name;break;case m.TrendWindow:j=c.data[1],j.props[0].regex=a.trendWindowToUpdate.name;break;case m.TrendView:j=c.data[0];break;case m.XAxis:j=c.data[2],j.props[0].regex=a.xAxisToUpdate.name;break;case m.YAxis:j=c.data[3],j.props[0].regex=a.yAxisToUpdate.name;break;case m.StatusBar:j=c.data[6],k=j.subArray[j.selectedIndex+1],k.props[3].value===!0&&(k.props[1].value=k.props[8].value)}return l},F=function(a,b){for(var c in a)if(c===b)return a[c]},G=function(a){var b=-1,c=PWC.HmiAC.ElementId;switch(a){case c.Trend:b=4;break;case c.TrendWindow:b=1;break;case c.XAxis:b=2;break;case c.YAxis:b=3}return b},H=function(a,b,d,e){var g,h,i,j=[],k=G(a);switch(j=c.data[k].subArray,g=c.data[k].selectedIndex,b){case f.ButtonValueProps.Up:if(0===g)return!1;h=g-1;break;case f.ButtonValueProps.Down:if(g===j.length-1)return!1;h=g+1;break;default:return}M(e,g,b),i=j[g],j[g]=j[h],j[h]=i,c.data[k].selectedIndex=h},I=function(b){var d,e=G(b),f=c.data[e].subArray,g=[],h=f.length;for(d=0;h>d;d++)g.push(f[d].tabName);a.reArrangeElements(g,b)},J=function(){var a,b,e=d.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),f=document.createElement("div");e.appendChild(f),b=c.data.errorMsg.split(":"),b.length>1&&(a=b[0],b=b[1]),a||(b=b[0]),PWC.Components.GenericDialog.ShowWarning(b,f,a,function(){return j=!0,!1}),j=!1},K=function(a){var b,d=c.data[0].subArray[c.data[0].selectedIndex].props.slice(0,9),e=d.length,f=!1;for(b=0;e>b;b++)if(d[b].name===a){f=!0;break}return f},L=function(a){var b,c=l.length,d=-1;for(b=0;c>b;b++)if(a===l[b].name){d=b;break}return d},M=function(a,b,c){var d,e,g,h,i=a.length,j=[];for(j=a.slice(0),d=0;i>d;d++)if(e=j[d],e.updatedValue!==f.ButtonValueProps.New&&e.updatedValue!==f.ButtonValueProps.Remove&&(g=e.elemId.split("_"),h=parseInt(g[1]),h===b))switch(c){case f.ButtonValueProps.Up:a[d].elemId=g[0]+"_"+(h-1);break;case f.ButtonValueProps.Down:a[d].elemId=g[0]+"_"+(h+1)}},N=function(a,b,e){var g,i,j,k,o,q=G(a),r=[];switch(i=c.data[q],g=i.selectedIndex,a){case h.Trend:b?(m.length>0&&d.removeTrend(m),r=[],c.data[G(a)].subArray.length||(r=v())):(k=i.subArray[g].tabName,o=L(k),-1!==o?l.splice(o,1):m.push(k),n.splice(n.indexOf(k),1),d.setPreDefTrendColorCount(i.subArray[g].props[2].value,!1),i.subArray.splice(g,1),M(e,g,f.ButtonValueProps.Remove),i.selectedIndex=g?g-1:g,i.subArray.length||(r.push(p(null,h.Trend,"Trend","complex")),j=Y(r.concat(A())),i.subArray.push(j[0].subArray[0])));break;case h.TrendWindow:b?(m.length>0&&d.removeTrendWindow(m),r=[],c.data[G(a)].subArray.length||(r=s())):(k=i.subArray[g].tabName,o=L(k),-1!==o?l.splice(o,1):m.push(k),n.splice(n.indexOf(k),1),O(q,!1,a),i.subArray.splice(g,1),M(e,g,f.ButtonValueProps.Remove),i.selectedIndex=g?g-1:g,i.subArray.length||(r.push(p(null,h.TrendWindow,"Trend Window","complex")),j=Y(r.concat(D())),i.subArray.push(j[0].subArray[0])));break;case h.XAxis:b?(m.length>0&&d.removeTimeAxis(m),r=[],c.data[G(a)].subArray.length||(r=u()),O(q,!1,a)):(k=i.subArray[g].tabName,o=L(k),-1!==o?l.splice(o,1):m.push(k),n.splice(n.indexOf(k),1),O(q,!1,a),i.subArray.splice(g,1),M(e,g,f.ButtonValueProps.Remove),i.selectedIndex=g?g-1:g,i.subArray.length||(r.push(p(null,h.XAxis,"XAxis","complex")),j=Y(r.concat(B())),i.subArray.push(j[0].subArray[0])));break;case h.YAxis:b?(m.length>0&&d.removeValueAxis(m),r=[],c.data[G(a)].subArray.length||(r=t(h.YAxis)),O(q,!1,a)):(k=i.subArray[g].tabName,o=L(k),-1!==o?l.splice(o,1):m.push(k),n.splice(n.indexOf(k),1),O(q,!1,a),i.subArray.splice(g,1),M(e,g,f.ButtonValueProps.Remove),i.selectedIndex=g?g-1:g,i.subArray.length||(r.push(p(null,h.YAxis,"YAxis","complex")),j=Y(r.concat(C())),i.subArray.push(j[0].subArray[0])))}b&&(PWC.HmiAC.PostPropertyUpdate.Redraw=!0,r.length&&(j=Y(r),c.data[q].subArray.push(j[0].subArray[0])))},O=function(a,b,d){var e,f,g,i,j,k,l,n,o,p=c.data[a].subArray,q={},r=[];for(f=p.length,j=c.data[a].subArray[f-1].tabName,e=0;f>e;e++)if(q=p[e],q.props[0].value)if(b){for(k=m.length,l=0;k>l;l++)-1!==(o=q.props[0].value.indexOf(m[l]))&&q.props[0].value.splice(o,1);q.props[0].value.push(j)}else{switch(j=p[c.data[a].selectedIndex].tabName,q.props[0].value.splice(q.props[0].value.indexOf(j),1),r=c.data[G(h.Trend)].subArray,k=r.length,d){case h.TrendWindow:for(g=11,n=c.data[G(h.XAxis)].subArray,l=0;l<n.length;l++)i=n[l],i.props[1].value===j&&(i.props[1].value="");for(n=c.data[G(h.YAxis)].subArray,l=0;l<n.length;l++)i=n[l],i.props[1].value===j&&(i.props[1].value="");break;case h.XAxis:g=12;break;case h.YAxis:g=13}for(l=0;k>l;l++)i=r[l],i.props[g].value===j&&(i.props[g].value="")}},P=function(b,e){var f,g,i,j,m,o,p,q,r,w,x,y,z,A=G(b),B=!1,C=!0;switch(o=c.data[A].subArray.length,b){case h.Trend:if(x=l.length,e){if(x>0){for(w=0;x>w;w++)for(p=0;o>p;p++)if(m=l[w],j=c.data[A].subArray[p],m.name===j.tabName){m.dataSource.Tag=m.propTrend.DataSource.Tag=j.props[14].value,m.dataSource.cycleTime=+j.props[21].value,m.propTrend.DataSource.UpdateCycle=m.propTrend.DataSource.UpdateCycle.split("."),m.propTrend.DataSource.UpdateCycle[1]=m.dataSource.cycleTime,m.dataSource.CycleTimeProp=m.propTrend.DataSource.UpdateCycle=m.propTrend.DataSource.UpdateCycle.join("."),q="Trend-"+PWC.HmiAC.TrendPropId.TagName+"_"+p,U(q),q="Trend-"+PWC.HmiAC.TrendPropId.CycleTime+"_"+p,U(q);break}a.addNewTrend(!0,l)}}else{for(i=1,z=d.gfxWebLib.textbib.getText("TBID_TrendPB_Trend_NewTrendName"),r=0;o>r;r++)g=z+i,-1!==n.indexOf(g)&&i++;g=z+i,j=a.addNewTrend(!1,g),B=!0,d.trendToUpdate=j,m=Y(v(j)),l.push(j),n.push(g),C=!1}break;case h.TrendWindow:if(e)l.length>0&&a.addNewTrendWindow(!0,l);else{for(i=1,z=d.gfxWebLib.textbib.getText("TBID_TrendPB_Trend_NewTrendWindowName"),r=0;o>r;r++)g=z+i,-1!==n.indexOf(g)&&i++;g=z+i,j=a.addNewTrendWindow(!1,g),B=!0,d.trendWindowToUpdate=j,m=Y(s(j)),l.push(j),n.push(g)}break;case h.XAxis:if(e)l.length>0&&a.addNewTimeAxis(!0,l);else{for(i=1,z=d.gfxWebLib.textbib.getText("TBID_TrendPB_Trend_NewTimeAxisName"),r=0;o>r;r++)g=z+i,-1!==n.indexOf(g)&&i++;g=z+i,f=PWC.HmiAC.CustomDateFormat.prototype.validateDate(Z(new Date)),j=a.addNewTimeAxis(!1,g,f),B=!0,m=Y(u(j)),l.push(j),n.push(g)}break;case h.YAxis:if(e)l.length>0&&a.addNewValueAxis(!0,l);else{for(i=1,z=d.gfxWebLib.textbib.getText("TBID_TrendPB_Trend_NewValueAxisName"),r=0;o>r;r++)g=z+i,-1!==n.indexOf(g)&&i++;g=z+i,j=a.addNewValueAxis(!1,g),B=!0,m=Y(t(h.YAxis,j)),l.push(j),n.push(g)}}B&&(y=c.data[A].subArray,1===o&&y[0].tabName===k&&(y.splice(0,1),o-=1),y.push(m[0].subArray[0]),c.data[A].selectedIndex=o,C&&O(A,!0,b))},Q=function(a){var b,d,e,f=G(a);for(b=c.data[f],e=b.subArray.length,n=[],d=0;e>d;d++)n.push(b.subArray[d].tabName)},R=function(a,b,d){var e=!1;switch(Q(b),a){case f.ButtonValueProps.Up:case f.ButtonValueProps.Down:H(b,a,!1,d);break;case f.TrendProp.LimitValuesButtonValue:c.showLimitValuesDialog();break;case f.ButtonValueProps.New:P(b,!1);break;case f.ButtonValueProps.Remove:N(b,!1,d);break;default:e=!0}return e},S=function(b,c){var d=!0;switch(b){case f.ButtonValueProps.Up:case f.ButtonValueProps.Down:I(c),a.redraw();break;case f.ButtonValueProps.New:P(c,!0),a.setDrawableTrends(),a.redraw();break;case f.ButtonValueProps.Remove:N(c,!0);break;default:d=!1}return d},T=function(a){var b,c,d,e,f=a.length,g=!1,i=a.slice();for(b=0;f>b;b++)c=i[b],d=c.elemId.split("-"),e=F(h,d[0].replace(" ","")),S(c.updatedValue,e)&&(g=!0);g&&W()},U=function(a){var b,c;for(b=i.length,c=0;b>c;c++)if(i[c].elemId===a){i.splice(c,1);break}},V=function(b,d){var e,g,h,j,k,l,m,n,o,p=PWC.HmiAC.ElementId,q=!1,r=!0,s=[];if(o=b.target||b.srcElement||b.currentElement,c.data.errorMsg)return J(),b.stopPropagation(),r=!1;if(c.data.errorMsg="",o.value===f.ButtonValueProps.Apply||o.value===f.ButtonValueProps.OK||K(o.id)){if(T(d),i.length>0){for(n=i.length,m=0;n>m;m++)d.push(i[m]);i=[]}for(n=d.length,m=0;n>m;m++)k=d[m],l=k.elemId.split("-"),h=l.length>1?-1!==l[1].indexOf("_")?l[1]:parseInt(l[1],10):l,e=k.updatedValue,j=F(p,l[0].replace(" ","")),j===p.StatusBar||j===p.ToolBar?(isNaN(h)&&-1!==h.indexOf("_")&&(l=h.split("_"),h=parseInt(l[1],10)+"-"+parseInt(l[0],10)),s.push({Id:h,value:e}),q=!0):k.updatedValue===f.ButtonValueProps.Remove||k.updatedValue===f.ButtonValueProps.New||k.updatedValue===f.ButtonValueProps.Up||k.updatedValue===f.ButtonValueProps.Down||E(b,h,e,j)}else e=o.value,l=o.id.split("-"),j=F(p,l[0].replace(" ","")),g=l[1].split("_")[0],e===f.TrendProp.TagButtonValue?(c.showTagDialog(l[1].split("_")[0]),r=!1):r=R(e,j,d);return q&&E(null,null,s,j),PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection?(a.createDrawableCollections(),PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection=!1):PWC.HmiAC.PostPropertyUpdate.Redraw?a.redraw():PWC.HmiAC.PostPropertyUpdate.Update&&a.update(),PWC.HmiAC.PostPropertyUpdate.Redraw=!1,PWC.HmiAC.PostPropertyUpdate.Update=!1,PWC.HmiAC.PostPropertyUpdate.Invalid=!1,PWC.HmiAC.PostPropertyUpdate.ErrorMsg="",r},W=function(){l=[],n=[],m=[]},X=function(b,c,e){var g=0,h=a.isLeftOrRight,i=a.alignmentEnum,j=PWC.HmiAC.TrendWindowPropId,k=new PWC.HmiAC.ToolBarPropertySet(d.gfxWebLib.textbib);switch(b){case f.TrendProp.LineStyle:g=parseInt(a.trendToUpdate.lineStyle,10);break;case f.TrendProp.PointStyle:g=parseInt(a.trendToUpdate.pointStyle,10);break;case f.TrendProp.RangeType:case f.XAxisProp.RangeType:a.trendToUpdate&&(g=void 0===a.trendToUpdate.rangeType?parseInt(a.xAxisToUpdate.rangeType,10):parseInt(a.trendToUpdate.rangeType,10));break;case f.YAxisProp.Scaling:g=a.yAxisToUpdate.scalingType;break;case f.TrendProp.TimeRangeBase:g=parseInt(a.trendToUpdate.timeRangeBase,10)-1;break;case f.TrendProp.TrendStyle:g=parseInt(a.trendToUpdate.trendStyle,10);break;case f.TrendProp.DataSource:a.trendObjectType===PWC.HmiAC.TrendObjectType.Function?g=parseInt(a.trendToUpdate.dataSourceY.TagDataSourceType,10):a.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(g=parseInt(a.trendToUpdate.dataSource.TagDataSourceType,10));break;case f.XAxisProp.Align:case f.YAxisProp.Align:case k.ToolBarProp.Alignment:c===PWC.HmiAC.ElementId.XAxis?a.xAxisToUpdate&&(a.xAxisToUpdate.align===(h?i.Top:i.Right)?g=1:a.xAxisToUpdate.align===(h?i.Bottom:i.Left)&&(g=0)):c===PWC.HmiAC.ElementId.YAxis?a.yAxisToUpdate&&(a.yAxisToUpdate.align===(h?i.Left:i.Bottom)?g=0:a.yAxisToUpdate.align===(h?i.Right:i.Top)&&(g=1)):g=parseInt(d.screenItem.props.Toolbar.Alignment,10);break;case f.XAxisProp.DateFormat:switch(a.xAxisToUpdate.dateFormat){case PWC.HmiAC.DateFormat.dd_MM_yy_Dot:g=1;break;case PWC.HmiAC.DateFormat.dd_MM_yyyy_Dot:g=2;break;case PWC.HmiAC.DateFormat.dd_MM_yy_Slash:g=3;break;case PWC.HmiAC.DateFormat.dd_MM_yyyy_Slash:g=4;break;default:g=0}break;case f.XAxisProp.TimeFormat:switch(a.xAxisToUpdate.timeFormat){case PWC.HmiAC.TimeFormat.HH_mm_ss:g=1;break;case PWC.HmiAC.TimeFormat.HH_mm_ss_ms:g=2;break;case PWC.HmiAC.TimeFormat.hh_mm_ss__tt:g=3;break;case PWC.HmiAC.TimeFormat.hh_mm_ss_ms__tt:g=4;break;default:g=0}break;case f.XAxisProp.RangeBase:g=parseInt(a.xAxisToUpdate.rangeBase,10)-1;break;case f.TrendViewProp.TimeBase:g=parseInt(a.timeBase,10);break;case f.TrendViewProp.TextOrientation:g=parseInt(a.textOrientation,10);break;case f.TrendViewProp.ScrollbarMode:g=parseInt(a.scrollbarMode,10);break;case f.FontProp.FontName:g=Object.keys(PWC.HmiAC.FontType).indexOf(a.trendViewFont.fontName),void 0===g&&(g=PWC.HmiAC.FontType.Tahoma);break;case f.FontProp.FontSize:g=a.trendViewFont.fontSize;break;case f.FontProp.FontArray:g=1;break;case f.TrendWindowProp.Effects:e===j.RulerStyle?g=a.trendWindowToUpdate.rulerStyle:e===j.StatisticRulerStyle&&(g=a.trendWindowToUpdate.statisticRulerStyle)}return k=null,g},Y=function(b){var d,e,f,h,i,j,l,m,n,o,p,q,s,t=PWC.HmiAC.PropertyType,u=Object.keys(g),v=[],w={},x={},y=PWC.HmiAC.ElementId;for(d=b?b:r(),f=d.length,h=0;f>h;++h)if(i=d[h].name,l=d[h].value,m=d[h].type,n=d[h].controlType,"complex"!==m)if("subcomplex"!==m){switch(j=c.getControlType(n),m=u[n-1],j){case t.text:e=c.getRegex(n),o={id:d[h].pId,type:j,name:i,value:l,regex:e};break;case t.combobox:p=X(i,d[h].parentId,d[h].pId),q=l[p],o={id:d[h].pId,type:j,name:i,value:l,regex:void 0!==q&&"object"!=typeof q?q:p};break;case t.dateTime:e=c.getRegex(n),o={id:d[h].pId,type:j,name:i,value:new Date(l),regex:e};break;case t.checkbox:o={id:d[h].pId,type:j,name:i,value:l?!0:!1,regex:null};break;default:o={id:d[h].pId,type:j,name:i,value:l,regex:null}}void 0===x.props&&(x.props=[]),x.props.push(o),o={}}else{switch(0!==Object.keys(x).length&&(w.subArray.push(x),x={}),x.tabName=i,x.id=d[h].pId,x.props=[],x.index=s,w.id){case y.TrendWindow:b||(a.trendWindowToUpdate=a.getTrendWindow(s));break;case y.XAxis:b||(a.xAxisToUpdate=a.getXAxis(s));break;case y.YAxis:b||(a.yAxisToUpdate=a.getYAxis(s));break;case y.Trend:b||(a.trendToUpdate=a.getTrend(s))}s++}else 0!==Object.keys(x).length&&(w.subArray.push(x),x={}),0!==Object.keys(w).length&&(v.push(w),w={}),w.tabName=i,w.id=d[h].pId,w.selectedIndex=0,w.subArray=[],s=0;return 0!==Object.keys(x).length&&(w.subArray.push(x),x={}),0!==Object.keys(w).length&&(v.push(w),w={}),v.errorMsg="",v.dummyTab=k,v},Z=function(b){var c,d="YYYY-MM-DD",e="hh:mm:ss",f=[],g={};return f.push(e),f.push(d),c=a.customFormat(b,f),g.date=c[1],g.time=c[0],g};this.init=function(b,g){d=g,e=b.replace(/\s+/g,""),a=g,c=this,f=new PWC.HmiAC.PropertySet(d.screenItem.gfxWebLib.textbib)},this.getControlType=function(a){var b,c=PWC.HmiAC.PropertyType,d=PWC.HmiAC.ControlType;switch(a){case d.Bool:b=c.checkbox;break;case d.Color:b=c.color;break;case d.Collection:b=c.combobox;break;case d.Toggle:b=c.button;break;case d.ReadOnly:b=c.readonly;break;case d.DateTime:b=c.dateTime;break;default:b=c.text}return b},this.getRegex=function(a){var b=null,c=PWC.HmiAC.ControlType;switch(a){case c.Int:b=/^[-+]?[0-9]*$/;break;case c.SInt:b=/^\+?[1-9]\d*$/;break;case c.WInt:b=/^\+?[0-9]\d*$/;break;case c.Float:b=[],b.push(/^[-+Ee.\d]$/),b.push(/^(([-+]?((\d+.)?\d+)?([eE]{1}[-+]?){1}\d+)|([-+]?\d*(.\d+)?))$/);break;case c.FloatPositive:b=/^[0-9.]+$/;break;case c.DateTime:b=[],b.push(/^(((0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9])|((0[0-9]|1[0-9]|2[0-3]):[0-5][0-9].*(000)))$/),b.push(/^((1[7-9])|([2-9][0-9]))[0-9]{2}-((0[1-9])|(1[0-2]))-((0[1-9])|([1-2][0-9])|(3[0-1]))$/)}return b},this.setTagData=function(a,b){var c,d,e,f,g=a.length,h=PWC.HmiAC.TrendPropId;for(c=0;g>c;c++)switch(f=a[c],i.push(f),d=f.elemId.split("-")[1],e=parseInt(d.split("_")[0],10),b){case h.TagNameButton:e===h.TagName?this.data[4].subArray[this.data[4].selectedIndex].props[14].value=f.updatedValue:e===h.CycleTime&&(this.data[4].subArray[this.data[4].selectedIndex].props[21].value=PWC.HmiAC.CycleTime[f.updatedValue]);break;case h.TagXNameButton:e===h.TagNameX?this.data[4].subArray[this.data[4].selectedIndex].props[13].value=f.updatedValue:e===h.CycleTimeX&&(this.data[4].subArray[this.data[4].selectedIndex].props[37].value=PWC.HmiAC.CycleTime[f.updatedValue]);break;case h.TagYNameButton:e===h.TagNameY?this.data[4].subArray[this.data[4].selectedIndex].props[14].value=f.updatedValue:e===h.CycleTimeY&&(this.data[4].subArray[this.data[4].selectedIndex].props[38].value=PWC.HmiAC.CycleTime[f.updatedValue])}},this.getTagData=function(a){var b,c,d,e=PWC.HmiAC.TrendPropId;switch(a){case e.TagNameButton:b=this.data[4].subArray[this.data[4].selectedIndex].props[14].value,c=this.data[4].subArray[this.data[4].selectedIndex].props[21].value,d=PWC.HmiAC.DataSourceType[this.data[4].subArray[this.data[4].selectedIndex].props[15].regex];break;case e.TagXNameButton:b=this.data[4].subArray[this.data[4].selectedIndex].props[13].value,c=this.data[4].subArray[this.data[4].selectedIndex].props[37].value,d=PWC.HmiAC.DataSourceType[this.data[4].subArray[this.data[4].selectedIndex].props[22].regex];break;case e.TagYNameButton:b=this.data[4].subArray[this.data[4].selectedIndex].props[14].value,c=this.data[4].subArray[this.data[4].selectedIndex].props[38].value,d=PWC.HmiAC.DataSourceType[this.data[4].subArray[this.data[4].selectedIndex].props[22].regex]}return{Tag:b,cycleTime:c,TagDataSourceType:d,parentIndex:this.data[4].selectedIndex}},this.getLimitValueData=function(){return{lowLimit:Object.create(this.data[4].subArray[this.data[4].selectedIndex].props[23]),lowLimitColor:Object.create(this.data[4].subArray[this.data[4].selectedIndex].props[24]),lowLimitValue:Object.create(this.data[4].subArray[this.data[4].selectedIndex].props[25]),highLimit:Object.create(this.data[4].subArray[this.data[4].selectedIndex].props[26]),highLimitColor:Object.create(this.data[4].subArray[this.data[4].selectedIndex].props[27]),highLimitValue:Object.create(this.data[4].subArray[this.data[4].selectedIndex].props[28]),uncertainQuality:Object.create(this.data[4].subArray[this.data[4].selectedIndex].props[29]),uncertainQualityColor:Object.create(this.data[4].subArray[this.data[4].selectedIndex].props[30]),parentIndex:this.data[4].selectedIndex,parentName:this.data[4].tabName}},this.setLimitValuesData=function(a){var b,c,d,e,f=a.length,g=PWC.HmiAC.TrendPropId;for(b=0;f>b;b++)switch(e=a[b],i.push(e),c=e.elemId.split("-")[1],d=parseInt(c.split("_")[0],10)){case g.LowLimit:this.data[4].subArray[this.data[4].selectedIndex].props[23].value=e.updatedValue;break;case g.LowLimitColor:this.data[4].subArray[this.data[4].selectedIndex].props[24].value=e.updatedValue;break;case g.LowLimitValue:this.data[4].subArray[this.data[4].selectedIndex].props[25].value=parseInt(e.updatedValue,10);break;case g.HighLimit:this.data[4].subArray[this.data[4].selectedIndex].props[26].value=e.updatedValue;break;case g.HighLimitColor:this.data[4].subArray[this.data[4].selectedIndex].props[27].value=e.updatedValue;break;case g.HighLimitValue:this.data[4].subArray[this.data[4].selectedIndex].props[28].value=parseInt(e.updatedValue,10);break;case g.UncertainQuality:this.data[4].subArray[this.data[4].selectedIndex].props[29].value=e.updatedValue;break;case g.UncertainQualityColor:this.data[4].subArray[this.data[4].selectedIndex].props[30].value=e.updatedValue}},this.getConfig=function(){return b||(b=new this.Config),b},this.Config=function(){var b=function(a,b){var f;switch(b){case h.TrendView:f=c(a);break;case h.TrendWindow:f=d(a);break;case h.YAxis:f=e(a);break;case h.XAxis:f=g(a);break;case h.Trend:f=i(a);break;case h.Font:f=j(a)}return f},c=function(b){var c,d,e=PWC.HmiAC.TrendViewPropId;switch(b){case e.BorderWidth:c=a.getBorderWidth();break;case e.LineWidth:c=a.getLineWidth();break;case e.LineColor:c=a.getLineColor();break;case e.BorderColor:c=a.getBorderColor();break;case e.Background:c=a.getBackColor();break;case e.TimeBase:c=[];for(d in PWC.HmiAC.TimeBase)c.push(d);break;case e.Orientation:c=[];for(d in PWC.HmiAC.TextOrientation)c.push(d);break;case e.ScrollbarMode:c=[];for(d in PWC.HmiAC.ScrollbarMode)c.push(d);break;case e.ConnectTrendWindows:c=a.connectTrendWindows;break;case e.Online:c=a.online;break;case e.ShowRuler:c=a.showRuler;break;case e.LoadDataImmediately:c=a.loadDataImmediately;break;case e.UseTrendNameAsLabel:c=a.useTrendNameAsLabel}return c},d=function(b){var c,d,e,f,g=PWC.HmiAC.TrendWindowPropId;switch(b){case g.Name:for(e=a.getTrendWindowCount(),c=[],f=0;e>f;f++)c.push(a.getTrendWindow(f).name);break;case g.Visible:c=a.trendWindowToUpdate.visible;break;case g.ForegroundTrendGrid:c=a.trendWindowToUpdate.foregroundTrendGrid;break;case g.HorizontalGrid:c=a.trendWindowToUpdate.horizontalGrid;break;case g.VerticalGrid:c=a.trendWindowToUpdate.verticalGrid;break;case g.SpacePortion:c=a.trendWindowToUpdate.spacePortion;break;case g.FineGrid:c=a.trendWindowToUpdate.fineGrid;break;case g.CoarseGrid:c=a.trendWindowToUpdate.coarseGrid;break;case g.FineGridColor:c=a.trendWindowToUpdate.fineGridColor;break;case g.CoarseGridColor:c=a.trendWindowToUpdate.coarseGridColor;break;case g.BackColor:c=a.trendWindowToUpdate.backColor;break;case g.UseBackColor:c=a.trendWindowToUpdate.useBackColor;break;case g.RulerStyle:case g.StatisticRulerStyle:c=[];for(d in PWC.HmiAC.RulerStyle)c.push(d);break;case g.RulerColor:c=a.trendWindowToUpdate.rulerColor;break;case g.RulerWidth:c=a.trendWindowToUpdate.rulerWidth;break;case g.StatisticRulerColor:c=a.trendWindowToUpdate.statisticRulerColor;break;case g.StatisticRulerWidth:c=a.trendWindowToUpdate.statisticRulerWidth}return c},e=function(b){var c,d,e,g,h=PWC.HmiAC.AxisPropId;switch(b){case h.Name:for(c=[],e=a.getYAxisCount(),d=0;e>d;d++)c.push(a.getYAxis(d).name);break;case h.TrendWindow:c=a.yAxisToUpdate.trendWindow;break;case h.LeftToRightAlign:c=[],c.push({index:0,value:a.alignmentEnum.Left}),c.push({index:1,value:a.alignmentEnum.Right});break;case h.TopToBottomAlign:c=[],c.push({index:0,value:a.alignmentEnum.Top}),c.push({index:1,value:a.alignmentEnum.Bottom});break;case h.Alignment:c=[],c.push(a.alignmentEnum.Left),c.push(a.alignmentEnum.Right),c.push(a.alignmentEnum.Bottom),c.push(a.alignmentEnum.Top);break;case h.Visible:c=a.yAxisToUpdate.visible;break;case h.Color:c=a.yAxisToUpdate.color;break;case h.InTrendColor:c=a.yAxisToUpdate.inTrendColor;break;case h.ShowAllLabels:c=a.yAxisToUpdate.showAllLabels;break;case h.ShowLabels:c=a.yAxisToUpdate.showLabels;break;case h.AutoRange:c=a.yAxisToUpdate.autoRange;break;case h.DecimalPrecision:c=a.yAxisToUpdate.decimalPrecision;break;case h.AutoDecimalPrecision:c=a.yAxisToUpdate.autoPrecision;break;case h.ExponentialNotation:c=a.yAxisToUpdate.exponentialFormat;break;case h.Index:c=a.yAxisToUpdate.index;break;case h.BeginValue:c=a.yAxisToUpdate.axisBeginValue;break;case h.EndValue:c=a.yAxisToUpdate.axisEndValue;break;case h.FineGrid:c=a.yAxisToUpdate.FineGrid;break;case h.CoarseGrid:c=a.yAxisToUpdate.CoarseGrid;break;case h.DisplayName:c=a.yAxisToUpdate.Label;break;case h.ScalingType:c=[];for(g in PWC.HmiAC.ScalingType)c.push(g);break;case h.LogarithmMsgCaption:c=f.YAxisProp.LogarithmMsgCaption;break;case h.InValidNumberMsg:c=f.YAxisProp.InValidNumberMsg;break;case h.LogarithmicValidNumberRangeMsg:c=f.YAxisProp.LogarithmicValidNumberRangeMsg;break;case h.LogarithmicInvalidNegNumberMsg:c=f.YAxisProp.LogarithmicInvalidNegNumberMsg;break;case h.LinearMsgCaption:c=f.YAxisProp.LinearMsgCaption;break;case h.InValidNumberCaption:c=f.YAxisProp.InValidNumberCaption}return c},g=function(b){var c,d,e,f,g=PWC.HmiAC.AxisPropId;switch(b){case g.LeftToRightAlign:c=[],c.push({index:0,value:a.alignmentEnum.Bottom}),c.push({index:1,value:a.alignmentEnum.Top});break;case g.TopToBottomAlign:c=[],c.push({index:0,value:a.alignmentEnum.Left}),c.push({index:1,value:a.alignmentEnum.Right});break;case g.Alignment:c=[],c.push(a.alignmentEnum.Bottom),c.push(a.alignmentEnum.Top),c.push(a.alignmentEnum.Left),c.push(a.alignmentEnum.Right);break;case g.BeginTime:c=a.timeBase===PWC.HmiAC.TimeBase.UTC?a.xAxisToUpdate.BeginTimeUTC+6e4*new Date(a.xAxisToUpdate.BeginTimeUTC).getTimezoneOffset():a.xAxisToUpdate.BeginTimeUTC;break;case g.Color:c=a.xAxisToUpdate.color;break;case g.DateFormat:c=[];for(e in PWC.HmiAC.DateFormat)c.push(PWC.HmiAC.DateFormat[e]);break;case g.EndTime:c=a.timeBase===PWC.HmiAC.TimeBase.UTC?a.xAxisToUpdate.EndTimeUTC+6e4*new Date(a.xAxisToUpdate.EndTimeUTC).getTimezoneOffset():a.xAxisToUpdate.EndTimeUTC;break;case g.Index:c=a.xAxisToUpdate.index;break;case g.InTrendColor:c=a.xAxisToUpdate.inTrendColor;break;case g.PointCount:c=a.xAxisToUpdate.measurementPoint;break;case g.Online:c=a.xAxisToUpdate.refresh;break;case g.Name:for(c=[],f=a.getXAxisCount(),d=0;f>d;d++)c.push(a.getXAxis(d).name);break;case g.TimeRangeBase:c=[];for(e in PWC.HmiAC.RangeBase)c.push(e);break;case g.TimeRangeFactor:c=a.xAxisToUpdate.rangeFactor;break;case g.RangeType:c=[];for(e in PWC.HmiAC.RangeType)c.push(e);break;case g.ShowAllLabels:c=a.xAxisToUpdate.showAllLabels;break;case g.ShowDate:c=a.xAxisToUpdate.showDate;break;case g.ShowLabels:c=a.xAxisToUpdate.showLabels;break;case g.TimeFormat:c=[];for(e in PWC.HmiAC.TimeFormat)c.push(PWC.HmiAC.TimeFormat[e]);break;case g.TrendWindow:c=a.xAxisToUpdate.trendWindow;break;case g.Visible:c=a.xAxisToUpdate.visible;break;case g.BeginValue:c=a.xAxisToUpdate.axisBeginValue;break;case g.EndValue:c=a.xAxisToUpdate.axisEndValue;break;case g.FineGrid:c=a.xAxisToUpdate.FineGrid;break;case g.CoarseGrid:c=a.xAxisToUpdate.CoarseGrid;break;case g.DisplayName:c=a.xAxisToUpdate.Label;break;case g.AutoRange:c=a.xAxisToUpdate.autoRange;break;case g.DecimalPrecision:c=a.xAxisToUpdate.decimalPrecision;break;case g.AutoDecimalPrecision:c=a.xAxisToUpdate.autoPrecision;break;case g.ExponentialNotation:c=a.xAxisToUpdate.exponentialFormat}return c},i=function(b){var c,d,e,g,h=PWC.HmiAC.TrendPropId;switch(b){case h.Name:for(c=[],e=a.getTrendCount(),g=0;e>g;g++)c.push(a.getTrend(g).name);break;case h.DisplayName:c=a.trendToUpdate.displayName;break;case h.TrendWindow:c=a.trendToUpdate.trendWindow;break;case h.Visible:c=a.trendToUpdate.visibility;break;case h.LineColor:c=a.trendToUpdate.color;break;case h.LineStyle:c=[];for(d in PWC.HmiAC.LineStyle)c.push(d);break;case h.FillStyle:c=a.trendToUpdate.fill;break;case h.PointStyle:c=[];for(d in PWC.HmiAC.PointStyle)c.push(d);break;case h.Mode:c=[];for(d in PWC.HmiAC.TrendStyle)c.push(d);break;case h.PointWidth:c=a.trendToUpdate.pointWidth;break;case h.DisplayName:c=a.trendToUpdate.label;break;case h.ExtendedColorSet:c="Not Implemented";break;case h.PointColor:c=a.trendToUpdate.pointColor;break;case h.FillColor:c=a.trendToUpdate.fillColor;break;case h.LineWidth:c=a.trendToUpdate.lineWidth;break;case h.RangeType:c=[];for(d in PWC.HmiAC.RangeType)c.push(d);break;case h.TimeRangeFactor:c=a.trendToUpdate.timeRangeFactor;break;case h.TimeRangeBase:c=[];for(d in PWC.HmiAC.RangeBase)c.push(d);break;case h.BeginTime:c=a.timeBase===PWC.HmiAC.TimeBase.UTC?a.trendToUpdate.beginTimeUTC+6e4*new Date(a.trendToUpdate.beginTimeUTC).getTimezoneOffset():a.trendToUpdate.beginTimeUTC;break;case h.EndTime:c=a.timeBase===PWC.HmiAC.TimeBase.UTC?a.trendToUpdate.endTimeUTC+6e4*new Date(a.trendToUpdate.endTimeUTC).getTimezoneOffset():a.trendToUpdate.endTimeUTC;break;case h.PointCount:c=a.trendToUpdate.pointCount;break;case h.Actualize:c=a.trendToUpdate.actualize;break;case h.TimeAxis:c=a.trendToUpdate.timeAxis;break;case h.ValueAxis:c=a.trendToUpdate.valueAxis;break;case h.XAxis:c=a.trendToUpdate.xAxis;break;case h.YAxis:c=a.trendToUpdate.yAxis;break;case h.TagDataSourceType:c=[];for(d in PWC.HmiAC.DataSourceType)c.push(d);
break;case h.TagName:a.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(c=a.trendToUpdate.dataSource.Tag);break;case h.TagNameX:c=a.trendToUpdate.dataSourceX.Tag;break;case h.TagNameY:c=a.trendToUpdate.dataSourceY.Tag;break;case h.CycleTime:c=a.trendToUpdate.dataSource.cycleTime;break;case h.CycleTimeX:c=a.trendToUpdate.dataSourceX.cycleTime;break;case h.CycleTimeY:c=a.trendToUpdate.dataSourceY.cycleTime;break;case h.TagNameButton:case h.TagXNameButton:case h.TagYNameButton:c=f.TrendProp.TagButtonValue;break;case h.LimitValuesButton:c=f.TrendProp.LimitValuesButtonValue;break;case h.LowLimit:c=a.trendToUpdate.lowLimit;break;case h.LowLimitValue:c=a.trendToUpdate.lowLimitValue;break;case h.LowLimitColor:c=a.trendToUpdate.lowLimitColor;break;case h.HighLimit:c=a.trendToUpdate.highLimit;break;case h.HighLimitValue:c=a.trendToUpdate.highLimitValue;break;case h.HighLimitColor:c=a.trendToUpdate.highLimitColor;break;case h.UncertainQuality:c=a.trendToUpdate.uncertainQuality;break;case h.UncertainQualityColor:c=a.trendToUpdate.uncertainQualityColor}return c},j=function(b){var c,d=PWC.HmiAC.FontPropId;switch(b){case d.FontName:c=Object.keys(PWC.HmiAC.FontType);break;case d.FontSize:c=a.trendViewFont.fontSize;break;case d.FontArray:c=Object.keys(PWC.HmiAC.FontSize);break;case d.FontBold:c=a.trendViewFont.fontBold;break;case d.FontItalic:c=a.trendViewFont.fontItalic;break;case d.FontStrikeOut:c=a.trendViewFont.fontStrikeOut;break;case d.FontUnderline:c=a.trendViewFont.fontUnderline}return c};return{get:b}},this.showTagDialog=function(b){var c,d,e,f,g,h,i;i=document.createElement("div"),i.setAttribute("id","TagDialog"),c=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),a.trendToUpdate=a.getTrend(this.data[4].selectedIndex),c.appendChild(i),f={Width:250,Height:200,ShowCaption:1,Caption:a.screenItem.gfxWebLib.textbib.getText("TBID_TagDialog_Caption")},g={name:"TagDialog",eventHandler:null,sourceItem:a.ISource,rtoid:b},e=new PWC.Components.GenericDialog.Content.Angular,h=e.createContent(g),d=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",i,f),d.showModal(h)},this.showLimitValuesDialog=function(){var b,c,d,e,g,h,i;i=document.createElement("div"),i.setAttribute("id","LimitValuesDialog"),b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),a.trendToUpdate=a.getTrend(this.data[4].selectedIndex),b.appendChild(i),e={Width:275,Height:330,ShowCaption:1,Caption:f.TrendProp.LimitValuesButtonValue},g={name:"LimitValuesDialog",eventHandler:null,sourceItem:a.ISource,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(a.screenItem,"LimitValuesDialog")},d=new PWC.Components.GenericDialog.Content.Angular,h=d.createContent(g),c=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",i,e),c.showModal(h)},this.create=function(a,b,c){var d;return this.eventHandler=c?c:V,b.trendObjectType===PWC.HmiAC.TrendObjectType.Function?this.type="FunctionTrendPropertyBrowser":b.trendObjectType===PWC.HmiAC.TrendObjectType.Online&&(this.type="PropertyBrowser"),this.init(a,b),d={type:this.type,rtoid:a,appDir:b.gfxWebLib.connection.getAppDir(),parentDiv:b.screenItem.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},this.dialog=this.createControl(d),this.dialog},this.getData=function(){return this.data=Y(),this.data},this.update=function(a,b){return this.eventHandler(a,b)},this.clean=function(){var a,b,c;a=d.screenItem.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),b=document.getElementById("PropertyBrowser"),c=document.getElementById("PropertyBrowser_divModal"),a&&b&&j&&(a.removeChild(b),c&&a.removeChild(c),this.data=null,l=[],n=[],m=[],W())}},PWC.HmiAC.PropertyBrowser.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.PropertyBrowser,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("PropertyBrowser",new PWC.HmiAC.PropertyBrowser)}(),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("FunctionTrendPropertyBrowser",new PWC.HmiAC.PropertyBrowser)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.ShowTrendSelection=function(){"use strict";var a,b=null,c=11,d=6,e=2,f=5;this.data={downButtonId:"MoveDownBtn",upButtonId:"MoveUpBtn",closeButtonId:"CloseBtn",selectedIndex:null,pointStyleEnum:PWC.HmiAC.PointStyle},this.type="ShowTrendSelection",this.create=function(g,h){var i,j,k;return b=h.subscribe(this.type),a=b.topLevelScreenWindowDiv,k=b.textbib,this.data.headerName=k.getText("TBID_TrendPB_Trend_TrendName"),this.data.upButtonVal=k.getText("TBID_TrendPB_General_GeneralUpButton"),this.data.downButtonVal=k.getText("TBID_TrendPB_General_GeneralDownButton"),this.data.closeButtonVal=k.getText("TBID_TrendPB_General_GeneralCloseButton"),this.data.trendCoords=c-d+","+e+" "+c+","+e+" "+(c+d)+","+e,this.data.trendFillCoords=c-d+","+(e+f)+" "+(c-d)+","+e+" "+c+","+e+" "+(c+d)+","+e+" "+(c+d)+","+(e+f),j={type:this.type,rtoid:g,appDir:b.appDir,parentDiv:a},i=this.createControl(j)},this.getData=function(){var a,d,f,g,h,i,j,k=[],l=b.getTrend(),m=l.length,n=PWC.HmiAC.PointStyle,o=PWC.HmiAC.TrendStyle;for(this.data.selectedIndex=null,a=0;m>a;a++){switch(d=l[a],f=d.name.replace(/\s+/g,"")+"_",d.pointStyle){case n.NoPoint:g=0;break;case n.Square:g=d.pointWidth,i=c-g/2,j=e-g/2;break;case n.Dot:g=1,i=c,j=e;break;case n.Circle:g=d.pointWidth/2,i=c,j=e}h=d.trendStyle===o.None?0:d.lineWidth,k.push({trendName:d.name,id:f,trendColor:d.color,lineWidth:h,lineStyle:d.getLineStyle(),pointColor:d.pointColor,pointWidth:g,pointStyle:d.pointStyle,fill:d.fill,fillColor:d.fillColor,visibility:d.visibility,markerY:j,markerX:i})}return this.data.trendData=k,this.data},this.update=function(a,c){var d,e,f=a.currentTarget.id,g=this.data.trendData,h=this.data.selectedIndex;f===this.data.downButtonId?null!==h&&h!==g.length-1&&(d=g[h],g[h]=g[++h],g[h]=d,b.moveTrendDown(h-1)):f===this.data.upButtonId?h&&(d=g[h],g[h]=g[--h],g[h]=d,b.moveTrendDown(h)):(f=c[0].elemId,e=f.split("_"),e=e.pop(),b.setTrendVisibility(e,c[0].updatedValue)),this.data.selectedIndex=h},this.clean=function(){var c=document.getElementById("ShowTrendSelection"),d=document.getElementById("ShowTrendSelection_divModal");a&&c&&(a.removeChild(c),d&&a.removeChild(d),a=null),b=null}},PWC.HmiAC.ShowTrendSelection.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.ShowTrendSelection,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("ShowTrendSelection",new PWC.HmiAC.ShowTrendSelection)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.LayoutManager=function(a){var b=[],c=a,d="",e=function(){var a,d,e,f=c.getDrawableTrendWindowCount(),g=PWC.HmiAC.TrendArea;for(b=[],a=f-1;a>=0;--a)d=c.getDrawableTrendWindow(a),e=new g(d),b.push(e)},f=function(){var a,d,e,f,g,h=PWC.HmiAC.AxisArea,i=c.getXAxisCount();for(a=0;i>a;++a)for(e=c.getXAxis(a),d=0;d<b.length;++d)if(b[d].trendWindowArea.trendWindow.name===e.trendWindow){switch(f=b[d],g=new h(e),g.getAlignment()){case c.alignmentEnum.Bottom:f.bottomAxisArea.addAxisArea(g);break;case c.alignmentEnum.Top:f.topAxisArea.addAxisArea(g);break;case c.alignmentEnum.Left:f.leftAxisArea.addAxisArea(g);break;case c.alignmentEnum.Right:f.rightAxisArea.addAxisArea(g)}f=null}},g=function(){var a,d,e,f,g,h=PWC.HmiAC.AxisArea,i=c.getYAxisCount();if(c.trendObjectType===PWC.HmiAC.TrendObjectType.Online)for(d=0;d<b.length;++d)switch(f=b[d],g=new h(f.trendWindowArea.trendWindow.relativeAxis),g.getAlignment()){case c.alignmentEnum.Right:f.rightAxisArea.addAxisArea(g);break;case c.alignmentEnum.Bottom:f.bottomAxisArea.addAxisArea(g)}for(a=0;i>a;++a)for(e=c.getYAxis(a),d=0;d<b.length;++d)if(b[d].trendWindowArea.trendWindow.name===e.trendWindow)switch(f=b[d],g=new h(e),g.getAlignment()){case c.alignmentEnum.Left:f.leftAxisArea.addAxisArea(g);break;case c.alignmentEnum.Right:f.rightAxisArea.addAxisArea(g);break;case c.alignmentEnum.Bottom:f.bottomAxisArea.addAxisArea(g);break;case c.alignmentEnum.Top:f.topAxisArea.addAxisArea(g)}},h=function(a){var d,e,f,g,h,j,k,l,m,n,o,p,q,r=0,s=0,t=c.getLineWidth(),u=c.isLeftOrRight,v="",w=new PWC.HmiAC.RECT;if(w.height=c.getHeight(),w.width=c.getWidth(),w.left=c.getLeft(),w.top=c.getTop(),a)f=b;else for(f=[],d=0;d<b.length;++d)b[d].trendWindowArea.trendWindow.trendWindowDrawn&&f.push(b[d]);for(e=f.length,h=w.height+(e-1)*t,j=w.width+(e-1)*t,k=i(a),l=w.top,m=w.left,n=m+w.width,d=0;e>d;++d)g=f[d],u?(g.calculateAxisAreaWidth(),p=g.leftAxisArea.getWidth(),q=g.rightAxisArea.getWidth()):(g.calculateAxisAreaHeight(),p=g.topAxisArea.getHeight(),q=g.bottomAxisArea.getHeight()),p>r&&(r=p),q>s&&(s=q);for(d=0;e>d;++d)g=f[d],o=g.trendWindowArea.trendWindow,u?(w.height=o.spacePortion*h/k,d>0?(w.top=l-t,l+=w.height-t):(w.top=l,l+=w.height),g.leftAxisArea.setWidth(r),g.rightAxisArea.setWidth(s)):(w.width=o.spacePortion*j/k,d>0?(w.left=n-w.width+t,n-=w.width-t):(w.left=n-w.width,n-=w.width),g.topAxisArea.setHeight(r),g.bottomAxisArea.setHeight(s)),v+=g.calculateDim(w)?"1":"0",u?w.height=0:w.width=0;return v},i=function(a){var c,d,e=0;for(d=0;d<b.length;++d)c=b[d].trendWindowArea.trendWindow,(a||c.trendWindowDrawn)&&(e+=parseInt(c.spacePortion,10));return e},j=function(a){var c,d,e;for(c=0;c<b.length&&(e=b[c],!e.trendWindowArea.trendWindow.trendWindowDrawn||(d=PWC.HmiAC.svgShape.CreateSvgElement("g"),a.childNodes[0].appendChild(d),e.draw(d)!==!1));++c);},k=function(a){var c,d,e=h(a);if(e.indexOf("0")>-1&&"0"!==e){for(c=e.length,d=b.length-c,b[d].trendWindowArea.trendWindow.setLayoutSuccess(!1),c=b.length,d=++d;c>d;d++)b[d].trendWindowArea.trendWindow.setLayoutSuccess(!0);return k()}return e},l=function(a){return c?(e(),f(),g(),c.hasVerticalScrollbar(),d=k(!0),-1!==d.indexOf("1")?(d.length!==b.length?(c.createDrawableTrendsCollection(),c.allAreasDrawn=!1):c.allAreasDrawn=!0,j(a),!0):!1):void 0},m=function(){c.hasVerticalScrollbar();var a,e,f;if(f=k(!0),f!==d)return d=f,c.allAreasDrawn=d.length!==b.length?!1:!0,!1;for(a=0;a<b.length;++a)if(e=b[a],e.trendWindowArea.trendWindow.trendWindowDrawn&&e.update()===!1)return d;return!0},n=function(){var a,d;for(a=0;a<b.length;++a)d=b[a],d.cleanUp(),d=null;b=null,c=null};return{drawLayout:l,updateLayout:m,cleanUp:n}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.AxisArea=function(a){var b=a,c=10;this.calculateHeight=function(){var a=0;return a=b.rect.height=b.getNeededDimension(),b.rect.height&&(b.innerRect.height=b.rect.height-b.trendView.lineWidth),a},this.calculateWidth=function(){var a=0;return a=b.rect.width=b.getNeededDimension(),b.rect.width&&(b.innerRect.width=b.rect.width-b.trendView.lineWidth),a},this.getAlignment=function(){return b.align},this.getHeight=function(){return b.visible?b.rect.height:0},this.getWidth=function(){return b.visible?b.rect.width:0},this.draw=function(a){var c=!0;return b.svgParent=a,b.visible&&(c=b.draw()),c},this.update=function(){var a=!0;return b.visible&&(a=b.update()),a},this.setHeight=function(a){b.rect.height=a,a&&(b.innerRect.height=a-b.trendView.lineWidth)},this.setWidth=function(a){b.rect.width=a,a&&(b.innerRect.width=a-b.trendView.lineWidth)},this.setLeft=function(a){b.rect.left=a,b.innerRect.left=a+b.trendView.lineWidth/2},this.setTop=function(a){b.rect.top=a,b.innerRect.top=a+b.trendView.lineWidth/2},this.setTrendIndicatorRect=function(a,d){var e=b.trendView.isLeftOrRight;b.drawTrendIndicators=!1,b.trendIndicatorRect&&((e?a.height>b.trendView.lineWidth/2:a.width>b.trendView.lineWidth/2)&&(b.drawTrendIndicators=!0,b.trendIndicatorClipRect.height=e?a.height:b.innerRect.height,b.trendIndicatorClipRect.top=e?a.top:b.innerRect.top,b.trendIndicatorClipRect.left=e?b.innerRect.left:a.left,b.trendIndicatorClipRect.width=e?b.innerRect.width:a.width,b.trendIndicatorRect.height=b.trendIndicatorClipRect.height-2*c,b.trendIndicatorRect.top=b.trendIndicatorClipRect.top+c,b.trendIndicatorRect.left=b.trendIndicatorClipRect.left+c,b.trendIndicatorRect.width=b.trendIndicatorClipRect.width-2*c,b.trendIndicatorClipRect.height-=c,b.trendIndicatorClipRect.top+=c/2,b.trendIndicatorClipRect.left+=c/2,b.trendIndicatorClipRect.width-=c),b.setTrendIndicatorPoints(d))},this.cleanUp=function(){b=null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.AxisAreaCollection=function(a,b){var c=new PWC.HmiAC.RECT,d=[],e=a,f=b,g=function(){var a,b;for(c.height=0,a=0;a<d.length;++a)b=d[a],c.height+=b.calculateHeight();return c.height+=f/2,c.height},h=function(){return c.height},i=function(a){var b,e=0,g=d.length;switch(c.height=a,this.alignment){case PWC.HmiAC.Alignment.Right:case PWC.HmiAC.Alignment.Left:for(b=0;g>b;++b)d[b].setHeight(a);break;case PWC.HmiAC.Alignment.Top:case PWC.HmiAC.Alignment.Bottom:for(b=0;g-1>b;++b)e+=d[b].getHeight();g>0&&d[g-1].setHeight(a-e-f/2)}},j=function(){var a,b;for(c.width=0,a=0;a<d.length;++a)b=d[a],c.width+=b.calculateWidth();return c.width+=f/2,c.width},k=function(){return c.width},l=function(a){c.width=a;var b,e=0,g=d.length;switch(this.alignment){case PWC.HmiAC.Alignment.Right:case PWC.HmiAC.Alignment.Left:for(b=0;g-1>b;++b)e+=d[b].getWidth();g>0&&d[g-1].setWidth(a-e-f/2);break;case PWC.HmiAC.Alignment.Top:case PWC.HmiAC.Alignment.Bottom:for(b=0;g>b;++b)d[b].setWidth(a)}},m=function(){return c.left},n=function(a){var b,e=a;for(b=d.length-1;b>=0;--b)switch(this.alignment){case PWC.HmiAC.Alignment.Right:d[b].setLeft(e),e+=d[b].getWidth();break;case PWC.HmiAC.Alignment.Left:for(var g=e,h=0;b>h;h++)e+=d[h].getWidth();d[b].setLeft(e+f/2),e=g;break;case PWC.HmiAC.Alignment.Top:case PWC.HmiAC.Alignment.Bottom:d[b].setLeft(e)}c.left=a},o=function(){return c.top},p=function(a){var b,e,g,h=a;for(g=d.length-1;g>=0;--g)switch(this.alignment){case PWC.HmiAC.Alignment.Top:for(b=h,e=0;g>e;e++)h+=d[e].getHeight();d[g].setTop(h+f/2),h=b;break;case PWC.HmiAC.Alignment.Bottom:d[g].setTop(h),h+=d[g].getHeight();break;case PWC.HmiAC.Alignment.Right:case PWC.HmiAC.Alignment.Left:d[g].setTop(h)}c.top=a},q=function(a,b,e){var g,h=new PWC.HmiAC.RECT,i=0,j=f/2,k=3*j,l=!0;for(b>j?(i=b-k,e?h.top=c.top+c.height+j:h.left=c.left-b+j):a>j&&(i=a-k,e?h.top=c.top-a+j:(h.left=c.left+c.width+j,l=!1)),e?h.height=i:h.width=i,g=0;g<d.length;++g)d[g].setTrendIndicatorRect(h,l)},r=function(a){d.push(a)},s=function(a){var b;for(b=0;b<d.length;++b)if(!d[b].draw(a))return!1;return!0},t=function(a){var b;for(b=0;b<d.length;++b)if(!d[b].update(a))return!1;return!0},u=function(){var a;for(a=0;a<d.length;++a)d[a].cleanUp();d=null,c=null};return{getHeight:h,setHeight:i,calculateWidth:j,calculateHeight:g,getWidth:k,setWidth:l,getLeft:m,setLeft:n,getTop:o,setTop:p,setTrendIndicatorRect:q,addAxisArea:r,draw:s,update:t,alignment:e,cleanUp:u}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TrendArea=function(a){var b,c,d,e,f,g,h=a.getTrendViewLineWidth(),i=!0,j=17,k=new PWC.HmiAC.RECT;this.leftAxisArea=null,this.rightAxisArea=null,this.bottomAxisArea=null,this.topAxisArea=null,this.trendWindowArea=null,this.trendWindowArea=new PWC.HmiAC.TrendWindowArea(a),this.leftAxisArea=new PWC.HmiAC.AxisAreaCollection(PWC.HmiAC.Alignment.Left,h),this.rightAxisArea=new PWC.HmiAC.AxisAreaCollection(PWC.HmiAC.Alignment.Right,h),this.bottomAxisArea=new PWC.HmiAC.AxisAreaCollection(PWC.HmiAC.Alignment.Bottom,h),this.topAxisArea=new PWC.HmiAC.AxisAreaCollection(PWC.HmiAC.Alignment.Top,h),this.calculateAxisAreaWidth=function(){this.leftAxisArea.calculateWidth(),this.rightAxisArea.calculateWidth()},this.calculateAxisAreaHeight=function(){this.topAxisArea.calculateHeight(),this.bottomAxisArea.calculateHeight()},this.calculateDim=function(a){var b,c,d,e,f,g,l,m=null,n=null,o=null,p=null,q=null,r=null,s=0,t=0,u=this.trendWindowArea.trendWindow,v=u.getIsLeftOrRight();return h=u.getTrendViewLineWidth(),k.left=a.left,k.top=a.top,k.height=a.height,k.width=a.width,e=u.getAxesZoomed(),e.xZoomed&&(t=j+h),e.yZoomed&&(s=j+h),l=v?0:t,v?(c=this.bottomAxisArea.calculateHeight()+t,d=this.topAxisArea.calculateHeight(),f=this.leftAxisArea.getWidth()+t,g=this.rightAxisArea.getWidth()):(c=this.bottomAxisArea.getHeight()+s,d=this.topAxisArea.getHeight(),f=this.leftAxisArea.calculateWidth()+t,g=this.rightAxisArea.calculateWidth()),this.trendWindowArea.setHeight(a.height-(c+d)),this.trendWindowArea.setWidth(a.width-(this.leftAxisArea.getWidth()+this.rightAxisArea.getWidth()+(v?s:t))),b=this.trendWindowArea.rect,this.leftAxisArea.setHeight(b.height),this.rightAxisArea.setHeight(b.height),this.topAxisArea.setWidth(b.width),this.bottomAxisArea.setWidth(b.width),this.topAxisArea.setLeft(a.left+this.leftAxisArea.getWidth()+l),this.topAxisArea.setTop(a.top),this.leftAxisArea.setLeft(a.left+l),this.leftAxisArea.setTop(a.top+d),this.bottomAxisArea.setLeft(this.topAxisArea.getLeft()),this.bottomAxisArea.setTop(a.top+d+this.leftAxisArea.getHeight()),this.rightAxisArea.setLeft(this.topAxisArea.getLeft()+this.topAxisArea.getWidth()),this.rightAxisArea.setTop(this.leftAxisArea.getTop()),s&&(v?(q=a.height-(c+d)-h,n=a.top+d+h/2,m=this.rightAxisArea.getLeft()+this.rightAxisArea.getWidth()):(q=a.width-(this.leftAxisArea.getWidth()+this.rightAxisArea.getWidth()+t)-h,n=this.bottomAxisArea.getTop()+this.bottomAxisArea.getHeight(),m=a.left+this.leftAxisArea.getWidth()+l+h/2)),t&&(v?(r=a.width-(this.leftAxisArea.getWidth()+this.rightAxisArea.getWidth()+s)-h,p=this.bottomAxisArea.getTop()+this.bottomAxisArea.getHeight(),o=a.left+this.leftAxisArea.getWidth()+h/2):(r=a.height-(c+d)-h,p=a.top+d+h/2,o=a.left+h)),v?(e.xZoomed&&c-t-h/2===0&&(c=0),this.leftAxisArea.setTrendIndicatorRect(d,c,!0),this.rightAxisArea.setTrendIndicatorRect(d,c,!0)):(e.xZoomed&&f-t-h/2===0&&(f=0),this.bottomAxisArea.setTrendIndicatorRect(g,f,!1),this.topAxisArea.setTrendIndicatorRect(g,f,!1)),this.trendWindowArea.setLeft(a.left+this.leftAxisArea.getWidth()+l),this.trendWindowArea.setTop(a.top+d),(t||s)&&u.setScrollbarDim(m,n,o,p,q,r),b.isEmpty()?(this.trendWindowArea.setWidth(a.width),this.trendWindowArea.setHeight(a.height),i=!1,u.setLayoutSuccess(!1)):(u.setLayoutSuccess(!0),i=!0),i},this.draw=function(a){var j=new PWC.HmiAC.RECT,l=null,m=PWC.HmiAC.svgShape.CreateSvgElement,n=this.trendWindowArea.trendWindow.getTrendViewLineColor();return b=m("g"),c=m("g"),d=m("g"),e=m("g"),f=m("g"),h=this.trendWindowArea.trendWindow.getTrendViewLineWidth(),j.width=k.width-h,j.height=k.height-h,j.left=k.left+h/2,j.top=k.top+h/2,g=m("rect",{stroke:n,"stroke-width":h,rect:j,"class":"lineColorClass"}),i?(l=!1,this.bottomAxisArea.draw(c)&&this.topAxisArea.draw(b)&&this.leftAxisArea.draw(d)&&this.rightAxisArea.draw(e)&&(this.trendWindowArea.draw(f),this.trendWindowArea.trendWindow.drawScrollbars(),a.appendChild(g),a.appendChild(b),a.appendChild(c),a.appendChild(d),a.appendChild(e),a.appendChild(f),l=!0)):(this.trendWindowArea.draw(f),a.appendChild(f)),l},this.update=function(){var a=new PWC.HmiAC.RECT,j=!0;return h=this.trendWindowArea.trendWindow.getTrendViewLineWidth(),a.width=k.width-h,a.height=k.height-h,a.left=k.left+h/2,a.top=k.top+h/2,g&&(g.setAttributeNS(null,"x",a.left),g.setAttributeNS(null,"y",a.top),g.setAttributeNS(null,"height",a.height),g.setAttributeNS(null,"width",a.width),g.setAttributeNS(null,"stroke-width",h),i&&(this.bottomAxisArea.update(c)&&this.topAxisArea.update(b)&&this.leftAxisArea.update(d)&&this.rightAxisArea.update(e)?(this.trendWindowArea.update(f),this.trendWindowArea.trendWindow.getRedrawForScrollbars()?this.trendWindowArea.trendWindow.drawScrollbars():this.trendWindowArea.trendWindow.updateScrollbars()):j=!1)),j},this.cleanUp=function(){k=b=c=d=e=f=g=null,this.leftAxisArea.cleanUp(),this.rightAxisArea.cleanUp(),this.bottomAxisArea.cleanUp(),this.topAxisArea.cleanUp(),this.trendWindowArea.cleanUp(),this.leftAxisArea=this.rightAxisArea=this.bottomAxisArea=this.topAxisArea=this.trendWindowArea=null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.TrendWindowArea=function(a){var b=a,c=new PWC.HmiAC.RECT,d=function(a){c.height=a},e=function(a){c.width=a},f=function(a){c.left=a},g=function(a){c.top=a},h=function(){return c.height},i=function(){return c.width},j=function(){return c.left},k=function(){return c.top},l=function(a){b&&(b.setRect(c),b.setSVG(a),b.draw())},m=function(){b&&(b.setRect(c),b.update())},n=function(){b=c=null};return{draw:l,update:m,getTop:k,getLeft:j,getWidth:i,getHeight:h,setTop:g,setLeft:f,setWidth:e,setHeight:d,trendWindow:b,rect:c,cleanUp:n}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.RulerColumn=function(a){"use strict";PWC.HmiAC.RulerColumn.baseCtor.call(this);var b=PWC.Lib.Config.Properties,c="RulerViewColumn",d=a,e=24,f=this,g=Object.keys(PWC.HmiAC.RulerMessageBlockPropId),h=function(a,c){b.setPropPart(f.columnProp,a,c)};this.init=function(a){this.columnProp=a,this.displayName=b.getPropPart(a,c,"Name"),this.editableDisplayName=b.getPropPart(a,c,"DisplayName"),""===this.editableDisplayName&&(this.editableDisplayName=this.displayName),this.alignment=b.getPropPart(a,c,"Alignment"),this.lengthInChars=b.getPropPart(a,c,"Width"),this.width=void 0!==a.Width?d(this.lengthInChars):this.lengthInChars,this.showText=b.getPropPart(a,c,"ShowText"),this.showTitleText=b.getPropPart(a,c,"ShowTitleText"),this.visible=b.getPropPart(a,c,"Visible"),this.selected=1,this.index=b.getPropPart(a,c,"Index"),this.leadingZeros=b.getPropPart(a,c,"LeadingZeros"),this.exponentialFormat=b.getPropPart(a,c,"ExponentialFormat"),this.autoDecimalPrecision=b.getPropPart(a,c,"AutoDecimalPrecision"),this.decimalPrecision=b.getPropPart(a,c,"DecimalPrecision"),this.showIcon=b.getPropPart(a,c,"ShowIcon"),this.dateFormat=b.getPropPart(a,c,"DateFormat"),this.timeFormat=b.getPropPart(a,c,"TimeFormat"),this.showDate=b.getPropPart(a,c,"ShowDate"),this.source=b.getPropPart(a,c,"Source"),this.source>=7&&this.source<=20&&(this.useSourceFormat=b.getPropPart(a,c,"UseSourceFormat"))},this.update=function(a,b){var c,f=PWC.HmiAC.RulerMessageBlockPropId;switch(a){case f.Visible:this.visible=b,h(g[a],b);break;case f.Index:this.index=b,h(g[a],b);break;case f.DisplayName:0===b&&(b=this.displayName),b=b.split(" ").join(" "),this.editableDisplayName=b,h(g[a],b);break;case f.Alignment:this.alignment=b,h(g[a],b);break;case f.ShowText:this.showText=b,h(g[a],b);break;case f.ShowIcon:this.showIcon=b,h(g[a],b);break;case f.ShowTitleText:this.showTitleText=b,h(g[a],b);break;case f.Width:b=parseInt(b,10),c=d(b),this.width=c+e,this.lengthInChars=b,h(g[a],b);break;case f.TimeFormat:case f.DurationFormat:this.timeFormat=b,h(g[a],b);break;case f.DateFormat:this.dateFormat=b,h(g[a],b);break;case f.ShowDate:this.showDate=b,h(g[a],b);break;case f.ExponentialFormat:this.exponentialFormat=b,h(g[a],b);break;case f.DecimalPrecision:this.decimalPrecision=b,h(g[a],b);break;case f.AutoDecimalPrecision:this.autoDecimalPrecision=b,h(g[a],b);break;case f.UseSourceFormat:this.useSourceFormat=b,h(g[a],b)}}},PWC.HmiAC.RulerColumn.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.RulerColumn,PWC.Components.Grid.GridColumnModel);var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.RulerRow=function(){this.columns=[]};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.RulerControlView=function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n=PWC.Lib.Config.Properties,o=PWC.Lib.Canvas.Converters.enumConverter.Color,p=[],q=[],r=[],s=[],t=PWC.HmiAC.RulerControlColumnType,u=this,v=!0,w={},x=PWC.Lib.Canvas.Svg.getTextBBox,y={},z={},A={},B=PWC.HmiAC.Common.HelperUtil,C=!1,D=!1,E=!1,F=15,G=3,H=function(a,b){n.setProp(u.screenItem,a,b)},I=function(){var a,b=0,c=q.length;for(p=[],r=[],b;c>b;b++)a=q[b],a.visible&&(r.push(a),p.push({index:b}))},J=function(a,b){var c={},d=s[a].columns[p[b].index];return d&&(c.value=d.columnValue,c.style={},c.style.fill=d.style.fill,c.style.forecolor=d.style.forecolor),c},K=function(a,b){var c={},d=s[a].columns[p[b].index];return d&&(c=d.columnStyle),c},L=function(a){var b=Array.prototype.join.call({length:(a||-1)+1},"x");return x(w,b).width},M=function(){return u.rulerColumns.map(function(a){return a.displayName})},N=function(){return u.statisticAreaColumns.map(function(a){return a.displayName})},O=function(){return u.statisticResultColumns.map(function(a){return a.displayName})},P=function(a){var b,c,d,f,g=M(),h=N(),i=O();for(q=[],f=u.rulerColumns,-1!==g.indexOf(a)&&-1!==h.indexOf(a)&&-1!==i.indexOf(a)||-1!==g.indexOf(a)?q=u.rulerColumns:-1!==h.indexOf(a)&&-1!==i.indexOf(a)||-1!==h.indexOf(a)?q=u.statisticAreaColumns:(-1!==h.indexOf(a)&&-1!==i.indexOf(a)||-1!==i.indexOf(a))&&(q=u.statisticResultColumns),d=q.length,b=0;d>b;b++)if(q[b].displayName===a){c=q[b];break}e=c},Q=function(){var b=u.screenItem;a.autoCompleteColumns=1===n.getProp(b,"AutoCompleteColumns")?!0:!1,a.autoCompleteRows=1===n.getProp(b,"AutoCompleteRows")?!0:!1,a.autoSelectionColors=1===n.getProp(b,"AutoSelectionColors")?!0:!1,a.autoSelectionRectColor=1===n.getProp(b,"AutoSelectionRectColor")?!0:!1,a.autoSize=1===n.getProp(b,"AutoSize")?!0:!1,a.borderColor=n.getProp(b,"BorderColor",o),a.borderWidth=n.getProp(b,"BorderWidth"),a.cellSpaceBottom=n.getProp(b,"CellSpaceBottom"),a.cellSpaceLeft=n.getProp(b,"CellSpaceLeft"),a.cellSpaceRight=n.getProp(b,"CellSpaceRight"),a.cellSpaceTop=n.getProp(b,"CellSpaceTop"),a.columnReorder=1===n.getProp(b,"ColumnReorder")?!0:!1,a.columnResize=1===n.getProp(b,"ColumnResize")?!0:!1,a.columnTitleAlignment=n.getProp(b,"ColumnTitleAlignment"),a.columnTitles=1===n.getProp(b,"ColumnTitles")?!0:!1,a.gridLineWidth=n.getProp(b,"GridLineWidth"),a.height=n.getProp(b,"Height"),a.horizontalGridLines=1===n.getProp(b,"HorizontalGridLines")?!0:!1,a.horizontalScrollbarMode=n.getProp(b,"HorizontalScrollbarMode"),a.horizontalScrolling=1===n.getProp(b,"HorizontalScrolling")?!0:!1,a.iconSpace=n.getProp(b,"IconSpace"),a.left=n.getProp(b,"Left"),a.rowTitleAlignment=n.getProp(b,"RowTitleAlignment"),a.rowTitles=1===n.getProp(b,"RowTitles")?!0:!1,a.selectedCellColor=n.getProp(b,"SelectedCellColor",o),a.selectedCellForeColor=n.getProp(b,"SelectedCellForeColor",o),a.selectedRowColor=n.getProp(b,"SelectedRowColor",o),a.selectedRowForeColor=n.getProp(b,"SelectedRowForeColor",o),a.selectedTitleColor=n.getProp(b,"SelectedTitleColor",o),a.selectedTitleForeColor=n.getProp(b,"SelectedTitleForeColor",o),a.selectionColoring=n.getProp(b,"SelectionColoring"),a.selectionRect=n.getProp(b,"SelectionRect"),a.selectionRectColor=n.getProp(b,"SelectionRectColor",o),a.selectionRectWidth=n.getProp(b,"SelectionRectWidth"),a.selectionType=n.getProp(b,"SelectionType"),a.shortenCellContent=1===n.getProp(b,"ShortenCellContent")?!0:!1,a.shortenTitleContent=1===n.getProp(b,"ShortenTitleContent")?!0:!1,a.showSortIcon=1===n.getProp(b,"ShowSortIcon")?!0:!1,a.showSortIndex=1===n.getProp(b,"ShowSortIndex")?!0:!1,a.useSortKey=1===n.getProp(b,"ShowSortButton")?!0:!1,a.sortMode=n.getProp(b,"SortMode"),a.sortSequence=n.getProp(b,"SortSequence"),a.table3D=1===n.getProp(b,"Table3D")?!0:!1,a.tableColor=n.getProp(b,"TableColor",o),a.tableColor2=n.getProp(b,"TableColor2",o),a.tableDarkShadowColor=n.getProp(b,"TableDarkShadowColor",o),a.tableForeColor=n.getProp(b,"TableForeColor",o),a.tableForeColor2=n.getProp(b,"TableForeColor2",o),a.tableFontName=u.tableFont.fontName,a.tableFontSize=u.tableFont.fontSize,a.tableFontItalic=u.tableFont.fontItalic?!0:!1,a.tableFontBold=u.tableFont.fontBold?!0:!1,a.tableFontUnderline=u.tableFont.fontUnderline?!0:!1,a.tableFontStrikeOut=u.tableFont.fontStrikeOut?!0:!1,a.tableGridLineColor=n.getProp(b,"TableGridLineColor",o),a.tableLightShadowColor=n.getProp(b,"TableLightShadowColor",o),a.title3D=1===n.getProp(b,"Title3D")?!0:!1,a.titleColor=n.getProp(b,"TitleColor",o),a.titleDarkShadowColor=n.getProp(b,"TitleDarkShadowColor",o),a.titleForeColor=n.getProp(b,"TitleForeColor",o),a.titleFontName=u.titleFont.fontName,a.titleFontSize=u.titleFont.fontSize,a.titleFontItalic=u.titleFont.fontItalic?!0:!1,a.titleFontBold=u.titleFont.fontBold?!0:!1,a.titleFontUnderline=u.titleFont.fontUnderline?!0:!1,a.titleFontStrikeOut=u.titleFont.fontStrikeOut?!0:!1,a.titleGridLineColor=n.getProp(b,"TitleGridLineColor",o),a.titleLightShadowColor=n.getProp(b,"TitleLightShadowColor",o),a.top=n.getProp(b,"Top"),a.useSelectedTitleColor=1===n.getProp(b,"UseSelectedTitleColor")?!0:!1,a.useTableColor2=1===n.getProp(b,"UseTableColor2")?!0:!1,a.verticalGridLines=1===n.getProp(b,"VerticalGridLines")?!0:!1,a.verticalScrollbarMode=n.getProp(b,"VerticalScrollbarMode"),a.verticalScrolling=1===n.getProp(b,"VerticalScrolling")?!0:!1,a.visibleRowCount=n.getProp(b,"VisibleRowCount"),a.width=n.getProp(b,"Width"),a.useSourceBackColors=n.getProp(b,"UserSourceBackColors"),a.useSourceForeColors=n.getProp(b,"UserSourceForeColors"),a.sortUpImageURL=b.gfxWebLib.connection.getAppDir()+"content/Advanced/RulerView/sort_up.png",a.sortDownImageURL=b.gfxWebLib.connection.getAppDir()+"content/Advanced/RulerView/sort_down.png",w={FontSize:a.tableFontSize,FontName:a.tableFontName,FontItalic:a.tableFontItalic,FontStrikeOut:a.tableFontStrikeOut,FontBold:a.tableFontBold,FontUnderline:a.tableFontUnderline}},R=function(){c&&c.getRulerData(d)},S=function(b,e,f,g){var h,i=PWC.HmiAC.RulerScrollMode,j=PWC.HmiAC.RulerGeneralPropId,k=Object.keys(j),l=!0;switch(b){case j.HorizontalScrollbarMode:e=i[e],a.horizontalScrollbarMode=e,H(k[b],e);break;case j.VerticalScrollbarMode:e=i[e],a.verticalScrollbarMode=e,H(k[b],e);break;case j.UserSourceForeColors:e=e===!0?1:0,U("forecolor",e),H(k[b],e);break;case j.UserSourceBackColors:e=e===!0?1:0,U("fill",e),H(k[b],e);break;case j.AutoPosition:e?(e=1,c&&T(c.getSourceControlDimensions())):e=0,u.autoPosition=e,H(k[b],e);break;case j.AutoShow:e?(e=1,h=c?c.isSourceControlRulerEnabled():0):(e=0,h=!0),u.autoShow=e,u.enableDisable(h),H(k[b],e);break;case j.RulerWindow:u.setColumnHeaders(t.Ruler),R(),b=j.Mode,e=d,l=!1;break;case j.StatisticsAreaWindow:u.setColumnHeaders(t.StatisticArea),R(),b=j.Mode,e=d,l=!1;break;case j.StatisticsWindow:u.setColumnHeaders(t.StatisticResult),R(),b=j.Mode,e=d,l=!1;break;case j.Mode:u.setColumnHeaders(e),R(),l=!1;break;case j.SourceControl:c&&(c.unSubscribe(),c=null),u.sourceControl=e,H(k[b],e),u.sourceControl&&u.screenItem.gfxWebLib.screen.enumItems(u.screenItem.container,void 0,function(a){return u.setSourceInterface(a.ISource.subscribe(u.screenItem.type,u)),u.autoPosition&&T(c.getSourceControlDimensions()),u.autoShow&&u.enableDisable(c.isSourceControlRulerEnabled()?1:0),c.type===PWC.HmiAC.SourceControlType.TrendControl?u.setColumnHeaders(t.Ruler):c.type===PWC.HmiAC.SourceControlType.TableControl&&u.setColumnHeaders(t.StatisticArea),R(),!0},function(a){return a.props.Name===u.sourceControl?!0:void 0});break;case j.WindowMovingEnabled:e=e===!0?1:0,u.windowMovingEnabled=e,H(k[b],e);break;case j.WindowCloseEnabled:e=e===!0?1:0,u.windowCloseEnabled=e,H(k[b],e);break;case j.WindowSizingEnabled:e=e===!0?1:0,u.windowSizingEnabled=e,H(k[b],e);break;case j.Visible:e?(u.visible=1,H(k[b],1)):(u.visible=0,H(k[b],0));break;default:l=!1}return f&&k[b]&&(g[k[b]]=e),l},T=function(c,d){var e=c.top+c.height,f=d||{};v=D||c.left!==a.left||e!==a.top,a.width=c.width,a.left=c.left,a.top=e,H("Width",a.width),H("Left",a.left),H("Top",a.top),D===!1&&(f.Left=a.left,f.Top=a.top,f.Width=a.width,u.screenItem.handler.onChanged(u.screenItem,f),E=!0),b.onPropertyChange({width:a.width,left:a.left,top:a.top})},U=function(b,c){var d=0,e=0;if(a.gridColumns&&a.gridColumns.length>0)for(e=a.gridColumns.length,d=0;e>d;d++)"forecolor"===b?a.gridColumns[d].useColumnForeColor=c:"fill"===b&&(a.gridColumns[d].useColoumnBackgroundColor=c)},V=function(a,b,c,d){var e,f,g;for(e=Object.keys(c),f=e.length,g=0;f>g;g++)-1===a.indexOf(e[g])?(c[e[g]]=1,b[g].update(PWC.HmiAC.RulerMessageBlockPropId.Visible,1),b[g].update(PWC.HmiAC.RulerMessageBlockPropId.Index,d.indexOf(e[g]))):(c[e[g]]=0,b[g].update(PWC.HmiAC.RulerMessageBlockPropId.Visible,0))},W=function(a,b,c){var d,e,f;for(d=a.length,e=0;d>e;e++)f=c.indexOf(a[e].displayName),-1!==f?a[e].update(PWC.HmiAC.RulerMessageBlockPropId.Index,f):a[e].index=f},X=function(a,b,c,d,e){var f,g,h=PWC.HmiAC.ColumnListPropId,i={};switch(f=PWC.HmiAC.RulerControlColumnType,c){case f.Ruler:g=u.rulerColumns,i=y;break;case f.StatisticArea:g=u.statisticAreaColumns,i=z;break;case f.StatisticResult:g=u.statisticResultColumns,i=A
}switch(parseInt(a,10)){case h.Up:case h.Down:W(g,i,d);break;case h.MoveLeft:case h.MoveAllLeft:V(b,g,i,d);break;case h.MoveRight:case h.MoveAllRight:V(b,g,i,d)}u.setColumnHeaders(e),R()},Y=function(a,c){var d,e,f,g,i,j,k=s,l=k.length,m=[],n=[],o=a.slice(0);for(f=PWC.Lib.Canvas.Converters.convertFileTimeToJSTimeStamp,d=0;l>d;d++){for(j=k[d].columns.length,e=0;j>e;e++)if(k[d].columns[e].columnName===c.displayName){g=k[d].columns[e].columnValue,g&&""!==g&&(g=g.replace("i.",""),(2===g.indexOf(".")||2===g.indexOf("/"))&&(i=g.split(2===g.indexOf(".")?".":"/"),n=i[1],i[1]=i[0]+"/",i[0]=n+"/",i[3]&&(i[3]="."+i[3]),g=i.join(""),g=new Date(g),m=h(g,o)),c.showDate?0!==m.length&&(n=m[1]+" "+m[0]):n=m[0],k[d].columns[e].columnValue=n);break}n=null,o=a.slice(0)}b.load(k.length)},Z=function(a,b,c,d){var e,f,g=[];return c?(f=b,("automatic"===f.toLowerCase()||""===f)&&(f=k),e="automatic"===a.timeFormat.toLowerCase()||""===a.timeFormat?l:a.timeFormat):d&&(e=b,("automatic"===e.toLowerCase()||""===e)&&(e=l),f="automatic"===a.dateFormat.toLowerCase()||""===a.dateFormat?k:a.dateFormat),g[0]=e,g[1]=a.showDate?f:"",g},$=function(a,b){var c,d,e=[];return b?("automatic"===a.timeFormat.toLowerCase()||""===a.timeFormat?(d=l,e[0]=d):e[0]=a.timeFormat,"automatic"===a.dateFormat.toLowerCase()||""===a.dateFormat?(c=k,e[1]=c):e[1]=a.dateFormat):("automatic"===a.timeFormat.toLowerCase()||""===a.timeFormat?(d=l,e[0]=d):e[0]=a.timeFormat,e[1]=""),e},_=function(a,c){var d,e,f,g,h,i=s,j=i.length,k=PWC.HmiAC.FormatDuration;for("automatic"===a.toLowerCase()||""===a?(a=m,f=k.getAutomaticDurationFormat):f=k.getCustomDurationFormat,d=0;j>d;d++)for(g=i[d].columns.length,e=0;g>e;e++)i[d].columns[e].columnName===c.displayName&&(h=i[d].columns[e].columnValue,""!==h&&(i[d].columns[e].columnValue="s"!==a?f(a,h):h));b.load(i.length)},ab=function(a,b,c,d){c&&(d&&d.func?c(d.func(a,b,d.param1,d.param2),a):c(b,a))},bb=function(a,b,c,d,e,f){var g,h,i,j=PWC.HmiAC.RulerViewPartType,k=PWC.HmiAC.RulerControlColumns,l=Object.keys(PWC.HmiAC.RulerMessageBlockPropId);for(h=u.rulerColumns,i=h.length,g=0;i>g;g++)if(h[g].displayName===a){h[g].update(b,c),ab(h[g],c,e,f),d&&cb(j.RulerColumns+"."+k[a],l[b],c);break}for(h=u.statisticAreaColumns,i=h.length,g=0;i>g;g++)if(h[g].displayName===a){h[g].update(b,c),ab(h[g],c,e,f),d&&cb(j.StatisticAreaColumns+"."+k[a],l[b],c);break}for(h=u.statisticResultColumns,i=h.length,g=0;i>g;g++)if(h[g].displayName===a){h[g].update(b,c),ab(h[g],c,e,f),d&&cb(j.StatisticResultColumns+"."+k[a],l[b],c);break}return!0},cb=function(a,b,c){u.screenItem.gfxWebLib.connection.sendPartPropertyByName(u.screenItem.rtoid,a,b,c,!1,!1)},db=function(a,b,c){var f,g,h,i=PWC.HmiAC.RulerMessageBlockPropId,j=!1;switch(g=b.split(","),b=g[0],f=g[1],P(f),h=e,a){case i.Alignment:g=c?PWC.HmiAC.DefaultAlignment[b]:b,j=bb(f,a,g,c);break;case i.ShowText:c&&(b="true"===b?1:0),j=bb(f,a,b,c);break;case i.ShowIcon:c&&(b="true"===b?1:0),j=bb(f,a,b,c);break;case i.ShowTitleText:c&&(b="true"===b?1:0),j=bb(f,a,b,c);break;case i.Width:j=bb(f,a,g,c);break;case i.AutoDecimalPrecision:c&&(b="true"===b?1:0),j=bb(f,a,b,c);break;case i.UseSourceFormat:c&&(b="true"===b?1:0),j=bb(f,a,b,c);break;case i.TimeFormat:bb(f,a,b,c,Y,{func:Z,param1:!1,param2:!0});break;case i.DateFormat:bb(f,a,b,c,Y,{func:Z,param1:!0,param2:!1});break;case i.ShowDate:c&&(b="true"===b?1:0),bb(f,a,b,c,Y,{func:$,param1:!0,param2:!1}),j=!0;break;case i.DecimalPrecision:g=parseInt(b,10),j=bb(f,a,b,c);break;case i.ExponentialFormat:c&&(b="true"===b?1:0),j=bb(f,a,b,c);break;case i.DurationFormat:bb(f,a,b,c,_)}j&&(u.setColumnHeaders(d),R())},eb=function(){var a={};return PWC.Lib.HmiTypes.HmiObject.getRelPosToTLSW(u.screenItem.container,a),a.adaptScreenToWindowFactor},fb=function(){u.screenItem.container.type===PWC.Lib.HmiTypes.HmiObjectTypes.TYPE_HMI_SCREEN&&u.screenItem.container.container.type===PWC.Lib.HmiTypes.HmiObjectTypes.TYPE_HMI_TOPLEVELSCREENWINDOW?b.setAdoptGridToScreen(!1):b.setAdoptGridToScreen(!0,eb)};this.initialize=function(c,e){var p,q,r,s,t,u=PWC.HmiAC.RulerColumn,v=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar;if(B.setMaxDecimalandPowerLength(F,G),this.isInitialized=!0,this.screenItem=c,this.rulerControlProps=c.props,this.tableFont=new PWC.HmiAC.FontPart("TableFont"),this.titleFont=new PWC.HmiAC.FontPart("TitleFont"),g=new PWC.Lib.GfxWebLib(c.gfxWebLib.appMode,c.gfxWebLib.appType,{basePath:c.gfxWebLib.connection.getAppDir(),imagePath:c.gfxWebLib.connection.getImageUrl()}),g.rootDiv=c.gfxWebLib.rootDiv,this.showScrollbars=c.props.ShowScrollBars,f=c,this.name=c.rtoid.replace(/\s+/g,"")+n.getProp(c,"Name"),this.id=c.rtoid.replace(/\s+/g,"")+"RulerControl"+this.name,d=n.getProp(c,"Mode"),this.authorization=n.getProp(c,"Authorization"),this.autoPosition=n.getProp(c,"AutoPosition"),this.autoShow=n.getProp(c,"AutoShow"),this.backColor=n.getProp(c,"BackColor",o),this.cycleUsage=n.getProp(c,"CycleUsage"),this.enabled=n.getProp(c,"Enabled"),this.exportDelimiter=n.getProp(c,"ExportDelimiter"),this.exportDirectoryName=n.getProp(c,"ExportDirectoryName"),this.exportDirectoryNameChangeable=n.getProp(c,"ExportDirectoryNameChangeable"),this.exportFileName=n.getProp(c,"ExportFileName"),this.exportFileNameChangeable=n.getProp(c,"ExportFileNameChangeable"),this.exportFormat=n.getProp(c,"ExportFormat"),this.exportSelection=n.getProp(c,"ExportSelection"),this.exportShowDialog=n.getProp(c,"ExportShowDialog"),this.flashing=n.getProp(c,"Flashing"),this.groupParent=n.getProp(c,"GroupParent"),this.layer=n.getProp(c,"Layer"),this.objectState=n.getProp(c,"ObjectState"),this.parent=n.getProp(c,"Parent"),this.persistence=n.getProp(c,"Persistence"),this.persistenceAuthorization=n.getProp(c,"PersistenceAuthorization"),this.persistenceType=n.getProp(c,"PersistenceType"),this.printJob=n.getProp(c,"PrintJob"),this.rotationAngle=n.getProp(c,"RotationAngle"),this.rotationCenterLeft=n.getProp(c,"RotationCenterLeft"),this.rotationCenterTop=n.getProp(c,"RotationCenterTop"),this.rulerColumns=[],t=n.getProp(c,"RulerColumns"),q=t.length)for(p=0;q>p;p++)s=new u(L),s.init(t[p]),void 0===t[p].Index&&(s.index=p),y[s.displayName]=1,this.rulerColumns.push(s);if(this.statisticAreaColumns=[],t=n.getProp(c,"StatisticAreaColumns"),q=t.length)for(p=0;q>p;p++)s=new u(L),s.init(t[p]),void 0===t[p].Index&&(s.index=p),z[s.displayName]=1,this.statisticAreaColumns.push(s);if(this.statisticResultColumns=[],t=n.getProp(c,"StatisticResultColumns"),q=t.length)for(p=0;q>p;p++)s=new u(L),s.init(t[p]),void 0===t[p].Index&&(s.index=p),A[s.displayName]=1,this.statisticResultColumns.push(s);this.sourceControl=n.getProp(c,"SourceControl"),this.statusbar=n.getProp(c,"Statusbar"),this.tabIndex=n.getProp(c,"TabIndex"),this.tabIndexAlpha=n.getProp(c,"TabIndexAlpha"),this.tableFont.initialize(c),this.timeBase=n.getProp(c,"TimeBase"),this.titleBarStyle=n.getProp(c,"TitleBarStyle"),this.titleBarText=n.getProp(c,"TitleBarText"),this.titleFont.initialize(c),this.toolTipText=n.getProp(c,"ToolTipText"),this.toolbar=n.getProp(c,"Toolbar"),this.transparency=n.getProp(c,"Transparency"),this.type=n.getProp(c,"Type"),this.typeName=n.getProp(c,"TypeName"),this.useSourceBackColors=n.getProp(c,"UserSourceBackColors"),this.useSourceForeColors=n.getProp(c,"UserSourceForeColors"),this.customFormat=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(this.timeBase),this.visible=n.getProp(c,"Visible"),D=!0,this.enableDisable(!1),D=!1,this.windowMaximizeEnabled=n.getProp(c,"WindowMaximizeEnabled"),this.windowCloseEnabled=n.getProp(f,"WindowCloseEnabled"),this.windowMovingEnabled=n.getProp(f,"WindowMovingEnabled"),this.windowSizingEnabled=n.getProp(f,"WindowSizingEnabled"),v.enable(c,"Print",!1),v.enable(c,"ShowHelp",!1),v.enable(c,"Export",!1),a=new PWC.Components.Grid.GridModel,i=f.gfxWebLib,j=i.textbib,k=j.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,l=j.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,m=j.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Duration").f,h=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(this.timeBase),Q(),r=new PWC.Components.Grid.IGridHost,r.getCellData=J,r.getCellStyle=K,b=new PWC.Components.Grid.GridControl(e,this.id),fb(),b.init(a,r,i.appMode),b.pause(),this.setColumnHeaders(d)},this.getSelection=function(){var a=[];return a=b.getSelection()},this.displayData=function(a,c){var e,f,g,h,i,j,k=PWC.HmiAC.ColumnData,l=PWC.HmiAC.RulerRow,m=a.length,o=r.length;if(d===c||void 0===c||null===c){for(s=[],i=0;m>i;i++){for(e=new l,h=a[i],j=0;o>j;j++)f=new k,g=r[j],f.columnName=g.displayName,f.columnValue=h[g.displayName],n.getProp(u.screenItem,"UserSourceForeColors")&&(f.style.forecolor=h.foreColor),n.getProp(u.screenItem,"UserSourceBackColors")&&(f.style.fill=h.backColor),e.columns.push(f);s.push(e)}s.length&&b.load(s.length)}},this.updateCell=function(a,c){var e,f,g,h,i,j,k,l,m,n,o,p=PWC.HmiAC.RulerControlColumns.Name,q=s.length,r=!1;switch(d){case t.Ruler:g=this.rulerColumns;break;case t.StatisticArea:g=this.statisticAreaColumns;break;case t.StatisticResult:g=this.statisticResultColumns}for(k=g.length,i=0;k>i;i++)if(j=g[i],j.source===p&&(f=i),j.source===c.source&&(h=j.displayName),void 0!==f&&void 0!==h){o=!0;break}if(o){for(m=a.length,n=0;m>n;n++){for(l=a[n],i=0;q>i;i++)if(s[i].columns[f].columnValue===l){e=s[i].columns;break}if(e)for(q=e.length,i=0;q>i;i++)if(e[i].columnName===h){e[i].columnValue=c.value,r=!0;break}}r&&b.load(s.length)}},this.enableDisable=function(a,b){E=!1,a||!this.autoShow?(this.visible=1,a?b&&this.autoPosition&&T(b,{Visible:1}):c?c.getRulerData():C=!0):this.visible=0,H("Visible",this.visible),(D||E)===!1&&this.screenItem.handler.onChanged(this.screenItem,{Visible:this.visible})},this.getColumns=function(a){var b,c,e,f,g=a?a:d;if(this.visible){switch(f=[],g){case t.Ruler:b=this.rulerColumns;break;case t.StatisticArea:b=this.statisticAreaColumns;break;case t.StatisticResult:b=this.statisticResultColumns;break;default:b=this.rulerColumns}for(e=b.length,c=0;e>c;c++)b[c].visible&&f.push(b[c])}else f=!1;return f},this.setColumnHeaders=function(a){var c,e,f,g,h=PWC.Lib.HmiTypes.Advanced.HmiWindow.ToolBar;switch(q=[],d=a,H("Mode",d),d){case t.Ruler:e=this.rulerColumns,this.selectedRulerWindow=PWC.HmiAC.ColumnsListButton.RulerWindow,h.check(this.screenItem,"ShowRuler",!0),h.check(this.screenItem,"ShowStatisticRuler",!1),h.check(this.screenItem,"CalculateStatistic",!1),f=y;break;case t.StatisticArea:e=this.statisticAreaColumns,this.selectedRulerWindow=PWC.HmiAC.ColumnsListButton.RulerStatisticArea,h.check(this.screenItem,"ShowRuler",!1),h.check(this.screenItem,"ShowStatisticRuler",!0),h.check(this.screenItem,"CalculateStatistic",!1),f=z;break;case t.StatisticResult:e=this.statisticResultColumns,this.selectedRulerWindow=PWC.HmiAC.ColumnsListButton.RulerStatisticResult,h.check(this.screenItem,"ShowRuler",!1),h.check(this.screenItem,"ShowStatisticRuler",!1),h.check(this.screenItem,"CalculateStatistic",!0),f=A;break;default:e=this.rulerColumns}for(g=e.length,c=0;g>c;c++)f[e[c].displayName]&&q.push(e[c]);q.sort(function(a,b){return a.index-b.index}),I(),b.onPropertyChange({gridColumns:r})},this.setSourceInterface=function(a){c=a,""===u.sourceControl?PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.text(u.screenItem,"SourceControl","No source"):PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar.text(u.screenItem,"SourceControl","Source: "+u.sourceControl),C&&(c.getRulerData(c.isSourceControlRulerEnabled()?d:void 0),C=!1)},this.resize=function(c,d){d?this.autoPosition&&T(c):(a.height!==c.height||a.width!==c.width)&&b.onPropertyChange({height:c.height,width:c.width})},this.move=function(c){c?this.autoPosition&&(a.left=c.left,a.top=c.top+c.height,H("Left",a.left),H("Top",a.top),this.screenItem.handler.onChanged(this.screenItem,{Left:a.left,Top:a.top}),v=!0,b.onPropertyChange({left:a.left,top:a.top})):v||this.screenItem.props.Left===a.left&&this.screenItem.props.Top===a.top||!this.autoPosition?v&&(v=!1):(this.autoPosition=0,H("AutoPosition",0))},this.onToolbarButton=function(b,c){var d,e,h,i,j,k,l,m;switch(c){case"ShowPropertyDialog":m=document.createElement("div"),m.setAttribute("id","PropertyBrowser"),l=g.topLevelScreenWindow.getTopLevelScreenWindowDiv(),l.appendChild(m),f.props.table=a,e=new PWC.Components.GenericDialog.Content.Angular,h={Width:511,Height:715,Caption:"Ruler PropertyBrowser"},j={name:"RulerPropertyBrowser",eventHandler:null,sourceItem:f,rtoid:PWC.Lib.HmiTypes.Utils.mkGuid(f,"RulerPropertyBrowser")},i=e.createContent(j),setTimeout(function(){k=l.getElementsByClassName("pwcPBTabs")[0],k&&new PWC.Components.GenericDialog.Content.TabView(k,{start:5})},100),d=PWC.Components.GenericDialog.Frame.Factory.getFrame("HtmlDiv",m,h),d.showModal(i);break;case"ShowRuler":this.setColumnHeaders(t.Ruler),R();break;case"ShowStatisticRuler":this.setColumnHeaders(t.StatisticArea),R();break;case"CalculateStatistic":this.setColumnHeaders(t.StatisticResult),R()}},this.getCurrentColType=function(){return d},this.getMessageBlockDetails=function(){return e},this.setMessageBlockDetails=function(a){return P(a)},this.onUpdate=function(b,c,d,e,g,h,i,j){var k,l=PWC.HmiAC.RulerElementId,m=!1,n={};switch(D=!0,b){case l.General:m=S(c,d,i,j);break;case l.Parameter:m=PWC.HmiAC.UpdateParameterTab.update(this.screenItem,c,d,a,i,j);break;case l.Columns:X(c,d,e,g,h);break;case l.Selection:m=PWC.HmiAC.UpdateSelectionTab.update(this.screenItem,c,d,a,i,j);break;case l.StatusBar:PWC.HmiAC.UpdateStatusBarTab.update(d,!0,this.screenItem);break;case l.ToolBar:PWC.HmiAC.UpdateToolBarTab.update(d,!1,this.screenItem);break;case l.Font:case l.TitleFont:b===l.Font?k=this.tableFont:b===l.TitleFont&&(k=this.titleFont),n={connection:f.gfxWebLib.connection,rtoid:f.rtoid},m=PWC.HmiAC.UpdateFontTab.update(n,b,c,d,k.font,l,a,i),k.OnUpdate(c,d);break;case l.Effects:m=PWC.HmiAC.UpdateEffectsTab.update(this.screenItem,c,d,a,i,j);break;case l.Blocks:m=db(c,d,i)}return D=!1,m},this.onServerUpdate=function(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p=PWC.HmiAC.RulerViewPartType,q=PWC.HmiAC.RulerElementId,r=Object.keys(PWC.HmiAC.RulerControlColumns),s=!1;if(d){switch(k=d.split(":"),h=k[0].split("."),l=k[1],j=h[0],i=parseInt(h[1],10),j){case p.RulerColumns:case p.StatisticResultColumns:case p.StatisticAreaColumns:n=r[i],o=q.Blocks,m=PWC.HmiAC.RulerMessageBlockPropId;break;case"TableFont":o=q.Font,m=PWC.HmiAC.FontPropId;break;case"TitleFont":o=q.TitleFont,m=PWC.HmiAC.FontPropId}for(f in c)g=c[f],n&&(g=g+","+n),this.onUpdate(o,m[f],g,void 0,void 0,void 0,!1)&&(s=!0)}else for(f in c)void 0!==(e=PWC.HmiAC.RulerGeneralPropId[f])?this.onUpdate(q.General,e,c[f],void 0,void 0,void 0,!1)&&(s=!0):void 0!==(e=PWC.HmiAC.EffectsPropId[f])?this.onUpdate(q.Effects,e,c[f],void 0,void 0,void 0,!1)&&(s=!0):void 0!==(e=PWC.HmiAC.SelectionPropId[f])?this.onUpdate(q.Selection,e,c[f],void 0,void 0,void 0,!1)&&(s=!0):void 0!==(e=PWC.HmiAC.ParameterPropId[f])&&this.onUpdate(q.Parameter,e,c[f],void 0,void 0,void 0,!1)&&(s=!0);s&&b.onPropertyChange()},this.onPropertyChange=function(){b.onPropertyChange()},this.onCleanUp=function(){b.unInit(),c&&c.unSubscribe(),c=p=q=r=s=a=b=w=null}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.RulerPropertyBrowser=function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m=0,n=!1,o=!0,p=function(a,b,e,f){var g,h,i;return a?(g=q("parentId name pId value controlType"),h=d.getConfig().get(b),i=c.get(b,a),new g(a,b,e,i,f)):new(g=q("name pId value type"))(b,e,i,f)},q=function(a){function b(){for(c=0;e>c;c++)this[d[c]]=arguments[c]}var c,d=a.split(" "),e=d.length;return b},r=function(){var b=[],c=a.gfxWebLib.connection.getAppDir(),d="templates/commontabs/",e=a.gfxWebLib.textbib;return m=0,b=s(),b=b.concat(PWC.HmiAC.PopulateParameterList.getList(h.Parameter,a.props.table,e,c+d+"parameter.html")),b=b.concat(PWC.HmiAC.PopulateSelectionList.getList(h.Selection,a.props.table,e,c+d+"selection.html")),b=b.concat(PWC.HmiAC.PopulateEffectsList.getList(h.Effects,a.props.table,e,c+d+"effects.html",{borderColor:a.props.BorderColor,borderWidth:a.props.BorderWidth})),b=b.concat(t()),b=b.concat(u()),b=b.concat(PWC.HmiAC.PopulateFontList.getList(h,a,c+d+"font.html")),b=b.concat(PWC.HmiAC.PopulateStatusBarList.getList(h.StatusBar,e,a.props.Statusbar,c+d+"statusbar.html")),b=b.concat(PWC.HmiAC.PopulateToolBarList.getList(h.ToolBar,e,a.props.Toolbar,c+d+"toolbar.html"))},s=function(){var a=PWC.HmiAC.RulerGeneralPropId,b=h.General,c=f.RulerGeneralProperties,d=f.RulerTabNames,e=[];return e.push(p(null,d.GeneralTabName,b,"complex")),e.push(p(b,c.RulerViewLabelWindowTitle)),e.push(p(b,c.RulerViewLabelStyle)),e.push(p(b,c.RulerViewLabelRowScrollbar)),e.push(p(b,c.RulerViewLabelColumnScrollbar)),e.push(p(b,c.RulerViewLabelWindow)),e.push(p(b,c.RulerViewLabelText)),e.push(p(b,c.RulerViewLabelMovable,a.WindowMovingEnabled,g.Bool)),e.push(p(b,c.RulerViewLabelClosable,a.WindowCloseEnabled,g.Bool)),e.push(p(b,c.RulerViewLabelSizable,a.WindowSizingEnabled,g.Bool)),e.push(p(b,c.RulerViewLabelPrintJob)),e.push(p(b,c.RulerViewLabelProperties)),e.push(p(b,c.RulerViewLabelSource)),e.push(p(b,c.RulerViewLabelType)),e.push(p(b,c.RulerViewLabelApplyFontColors)),e.push(p(b,c.RulerViewLabelApplyBackgroundColors)),e.push(p(b,c.RulerViewLabelAutoHide)),e.push(p(b,c.RulerViewLabelAutoPositioning)),e.push(p(b,c.RulerViewLabelRulerWindow,a.RulerWindow,g.Bool)),e.push(p(b,c.RulerViewLabelStatisticsWindow,a.StatisticsAreaWindow,g.Bool)),e.push(p(b,c.RulerViewLabelStatisticsAreaWindow,a.StatisticsWindow,g.Bool)),e.push(p(b,c.RulerViewVerticalScrollbarMode,a.VerticalScrollbarMode,g.Collection)),e.push(p(b,c.RulerViewHorizontalScrollbarMode,a.HorizontalScrollbarMode,g.Collection)),e.push(p(b,c.RulerViewFontColor,a.UserSourceForeColors,g.Bool)),e.push(p(b,c.RulerViewBackgroundColor,a.UserSourceBackColors,g.Bool)),e.push(p(b,c.RulerViewAutomaticHide,a.AutoShow,g.Bool)),e.push(p(b,c.RulerViewAutomaticPositioning,a.AutoPosition,g.Bool)),e.push(p(null,d.GeneralTabName)),e.push(p(null,d.ParameterTabName)),e.push(p(null,d.BlocksTabName)),e.push(p(null,d.ColumnsTabName)),e.push(p(null,d.EffectsTabName)),e.push(p(null,d.SelectionTabName)),e.push(p(null,d.FontTabName)),e.push(p(null,d.ToolbarTabName)),e.push(p(null,d.StatusBarTabName)),e},t=function(){var a,b=PWC.HmiAC.ColumnListPropId,c=h.Columns,d=[],e=f.RulerColumnLists,i=PWC.HmiAC.RulerControlColumnType;return d.push(p(null,f.RulerTabNames.ColumnsTabName,c,"complex")),a=Object.keys(i),d.push(p(c,e.Name,b.Name,g.Text)),d.push(p(c,e.Up,b.Up,g.Toggle)),d.push(p(c,e.Down,b.Down,g.Toggle)),d.push(p(c,e.MoveLeft,b.MoveLeft,g.Toggle)),d.push(p(c,e.MoveAllLeft,b.MoveAllLeft,g.Toggle)),d.push(p(c,e.MoveRight,b.MoveRight,g.Toggle)),d.push(p(c,e.MoveAllRight,b.MoveAllRight,g.Toggle)),d.push(p(c,e.RulerViewColumnListLabelExistingColumns)),d.push(p(c,e.RulerViewColumnsListLabelSelectedColumns)),d.push(p(c,e.RulerViewColumnsListLabelWindow)),d.push(p(c,e.RulerViewColumnsListLabelRulerWindow,b.RulerSelectedColumns,g.Bool)),d.push(p(c,e.RulerViewColumnsListLabelRulerStatisticsAreaWindow,b.RulerStatisticArea,g.Bool)),d.push(p(c,e.RulerViewColumnsListLabelStatisticsWindow,b.RulerStatisticResult,g.Bool)),d.push(p(null,a[0],i.Ruler,"subcomplex")),d.push(p(c,e.RulerSelectedColumns,b.RulerSelectedColumns,g.Collection)),d.push(p(c,e.RulerExistingColumns,b.RulerExistingColumns,g.Collection)),d.push(p(null,a[1],i.StatisticArea,"subcomplex")),d.push(p(c,e.RulerSelectedStatisticAreaColumns,b.RulerStatisticArea,g.Collection)),d.push(p(c,e.RulerStatisticAreaExistingColumns,b.RulerStatisticAreaExistingColumns,g.Collection)),d.push(p(null,a[2],i.StatisticResult,"subcomplex")),d.push(p(c,e.RulerSelectedStatisticResultColumns,b.RulerStatisticResult,g.Collection)),d.push(p(c,e.RulerStatisticResultExistingColumns,b.RulerStatisticResultExistingColumns,g.Collection)),d},u=function(){var b,c,d=a.props.RulerColumns,e=a.props.StatisticAreaColumns,j=a.props.StatisticResultColumns,k=PWC.HmiAC.RulerMessageBlockPropId,l=h.Blocks,m=f.RulerBlocks,n=[];for(i=d.concat(e,j),i=i.sort(function(a,b){return a.Name>b.Name?1:a.Name<b.Name?-1:0}),c=i.length,b=0;c-1>b;b++)i[b].Name===i[b+1].Name&&delete i[b];for(i=i.filter(function(a){return"undefined"!=typeof a}),c=i.length,n.push(p(null,f.RulerTabNames.BlocksTabName,l,"complex")),b=0;c>b;b++)n.push(p(null,i[b].Name,l,"subcomplex")),a.rulerControl.setMessageBlockDetails(i[b].Name),n.push(p(l,m.RulerViewColumnNames,k.ColumnNames,g.Collection)),n.push(p(l,m.RulerViewObjectName,k.ObjectName,g.Text)),n.push(p(l,m.RulerViewLabel,k.Label,g.Text)),n.push(p(l,m.RulerViewAlignment,k.Alignment,g.Collection)),n.push(p(l,m.RulerViewLengthInChars,k.Width,g.WInt)),n.push(p(l,m.RulerViewContentAsText,k.ShowText,g.Bool)),n.push(p(l,m.RulerViewTitleAsText,k.ShowTitleText,g.Bool)),n.push(p(l,m.RulerViewTimeFormat,k.TimeFormat,g.Collection)),n.push(p(l,m.RulerViewDateFormat,k.DateFormat,g.Collection)),n.push(p(l,m.RulerViewShowDate,k.ShowDate,g.Bool)),n.push(p(l,m.RulerViewShowMessageColors,k.UseRulerColors,g.Bool)),n.push(p(l,m.RulerViewTimeFormat,k.TimeFormat,g.Collection)),n.push(p(l,m.RulerViewDateFormat,k.DateFormat,g.Collection)),n.push(p(l,m.RulerViewVisible,k.Visible,g.Bool)),n.push(p(l,m.RulerViewLabelContentAsIcon,k.ShowIcon,g.Bool)),n.push(p(l,m.RulerViewDurationFormat,k.DurationFormat,g.Collection)),n.push(p(l,m.RulerViewNoOfDigits,k.Digits,g.WInt)),n.push(p(l,m.RulerViewExponentialNotation,k.ExponentialFormat,g.Bool)),n.push(p(l,m.RulerViewAutomaticDecimalPlaces,k.AutoDecimalPrecision,g.Bool)),n.push(p(l,m.RulerViewDecimalPlaces,k.DecimalPrecision,g.WInt)),n.push(p(l,m.RulerViewSource,k.Source,g.Bool)),n.push(p(l,m.RulerViewUseSourceFormat,k.UseSourceFormat,g.Bool));return n.push(p(null,null,null,"subcomplex")),n.push(p(l,m.RulerViewLabelAvailableMessageBlocks)),n.push(p(l,m.RulerViewLabelDisplay)),n.push(p(l,m.RulerViewLabelContentAsText)),n.push(p(l,m.RulerViewLabelContentAsIcon)),n.push(p(l,m.RulerViewLabelTitleAsText)),n.push(p(l,m.RulerViewLabelTitleAsIcon)),n.push(p(l,m.RulerViewLabelObjectName)),n.push(p(l,m.RulerViewLabelLabel)),n.push(p(l,m.RulerViewLabelTextID)),n.push(p(l,m.RulerViewLabelAlignment)),n.push(p(l,m.RulerViewLabelLengthInChars)),n.push(p(l,m.RulerViewLabelShowMessageColors)),n.push(p(l,m.RulerViewLabelSelectableInSelectionDialog)),n.push(p(l,m.RulerViewLabelFlashingOn)),n.push(p(l,m.RulerViewLabelFormat)),n.push(p(l,m.RulerViewLabelTimeFormat)),n.push(p(l,m.RulerViewLabelDateFormat)),n.push(p(l,m.RulerViewLabelShowDate)),n.push(p(l,m.RulerViewLabelApplyProjectSetting)),n.push(p(l,m.RulerViewLabelDurationFormat)),n.push(p(l,m.RulerViewLabelNoOfDigits)),n.push(p(l,m.RulerViewLabelDecimalPlaces)),n.push(p(l,m.RulerViewLabelExponentialNotation)),n.push(p(l,m.RulerViewLabelAutomaticDecimalPlaces)),n.push(p(l,m.RulerViewLabelNoFormat)),n.push(p(l,m.RulerViewLabelApplyFromSource)),n},v=function(a,b){for(var c in a)if(c===b)return a[c]},w=function(){var b,c=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),d=document.createElement("div");d.setAttribute("id","warningDiv"),d.setAttribute("class","noselection"),c.appendChild(d),b={Caption:"Format",WindowMovingEnabled:!0,FrameCloseCallBack:function(){o=!0},Height:160,Width:465},j=new PWC.Components.GenericDialog.Frame.HtmlDiv,j.createFrame(d,b),j.showModal(y(),x)},x=function(a){var b=a.target||a.srcElement||a.currentTarget;"warningOkBtn"===b.id&&(o=!0,j.close())},y=function(){var b,c,d,e,f,g,h,i=a.gfxWebLib.textbib;return g=document.createElement("div"),g.setAttribute("style","width:100%"),b=document.createElement("table"),b.setAttribute("style","padding-left: 27px; width:100%;"),e=document.createElement("img"),e.src=a.gfxWebLib.connection.getAppDir()+"content/Advanced/AlarmView/warning.png",c=document.createElement("tr"),d=document.createElement("td"),d.setAttribute("style","padding-top: 30px;"),d.appendChild(e),c.appendChild(d),d=document.createElement("td"),d.setAttribute("style","padding-top: 25px;"),d.appendChild(document.createTextNode(i.getText("TBID_RulerCtrl_MessageBlock_DecimalPrecision_Format"))),c.appendChild(d),b.appendChild(c),g.appendChild(b),h=document.createElement("div"),h.setAttribute("style","width:100%; height:45px;padding-top:22px;background-color: #F2F2F2;"),f=document.createElement("input"),f.type="button",f.setAttribute("style","float:right;"),f.setAttribute("id","warningOkBtn"),f.value=i.getText("TBID_RulerCtrl_MessageBlock_OK"),h.appendChild(f),g.appendChild(h),g},z=function(a){var b=0,c=!1,d=i.length;for(b=0;d>b;b++)if(i[b].Name===a){c=!0;break}return c},A=function(b,c){var e,g,h,i,j,k,l,m,p,q,r,s=PWC.HmiAC.RulerElementId,t=!1,u=!1,x={},y=!1,A=c.length,C=[];for(o=!0,b.target?(m=b.target.value,q=b.target.id):b.srcElement?(m=b.srcElement.defaultValue,q=b.srcElement.id):(m=b.currentTarget.defaultValue,q=b.currentTarget.id),l=A-1;l>=0;l--){if(j=c[l],k=j.elemId.split("-"),h=k.length>1?-1!==k[1].indexOf("_")?k[1]:parseInt(k[1],10):k,e=j.updatedValue,i=v(PWC.HmiAC.RulerElementId,k[0].replace(" ","")),isNaN(h)&&-1!==h.indexOf("_")?(k=h.split("_"),h=k[0],p=parseInt(""===k[1]?0:k[1],10),i===s.StatusBar||i===s.ToolBar?isNaN(p)||(h=p+"-"+h):h=parseInt(h,10)):(p=0,h=parseInt(h,10)),s.Blocks===i&&("string"==typeof e&&(t=z(e.trim())),parseInt(this.data[5].subArray[this.data[5].selectedIndex].props[19].value,10)>15)){"Blocks"!==q&&(w(),o=!1),b.stopPropagation(),t=!1;break}if(s.Columns===i&&"Apply"!==m&&"OK"!==m){this.modify(b,j,c),A=c.length,(0!==A||n||m!==f.RulerGeneralProperties.MoveUp&&m!==f.RulerGeneralProperties.MoveDown)&&(0!==A||n||"StatisticArea"!==m&&"Ruler"!==m&&"StatisticResult"!==m)&&(0!==A||n)?A>0&&n&&(t=!1):t=!0;break}if("Apply"===m||"OK"===m){switch(i){case s.Blocks:e+=","+d.data[5].subArray[p].tabName;break;case s.General:C.push({Id:h,value:e});break;case s.Columns:r=d.data[4].selectedIndex,e=d.data[4].subArray[p+1].props[1].value,g=d.data[4].subArray[p+1].props[0].value;break;case s.StatusBar:case s.ToolBar:C.push({Id:h,value:e}),u=!0}u||B(b,h,e,i,p,g,r,x)&&(y=!0),n=!1,t=!0}}return u&&B(null,null,C,i),x&&(s.Blocks!==i&&s.Font!==i&&s.TitleFont!==i&&s.StatusBarFont!==i&&a.gfxWebLib.connection.sendPropertiesByName(a.rtoid,x,!1,!1),y&&a.rulerControl.onPropertyChange()),t},B=function(b,c,d,e,f,g,h,i){return a.rulerControl.onUpdate(e,c,d,f,g,h,!0,i)},C=function(c){var d,e,g,h,i,j,n,o=f.RulerGeneralProperties,p=f.RulerBlocks,q=a.gfxWebLib.textbib,r=new PWC.HmiAC.SelectionPropertySet(q).SelectionProps,s=new PWC.HmiAC.ToolBarPropertySet(q),t=new PWC.HmiAC.FontPropertySet(q).FontProp,u=new PWC.HmiAC.ParameterPropertySet(q).ParameterProperties,v={Font:"Font",FontName:"fontName",FontSize:"FontSize",FontBold:"FontBold",FontItalic:"FontItalic",FontUnderline:"FontUnderline",FontStrikeOut:"FontStrikeOut"};switch(c){case o.RulerViewVerticalScrollbarMode:d=b.getProp(a,"VerticalScrollbarMode");break;case o.RulerViewHorizontalScrollbarMode:d=b.getProp(a,"HorizontalScrollbarMode");break;case u.ColumnTitleAlignment:d=b.getProp(a,"ColumnTitleAlignment");break;case u.RowTitleAlignment:d=b.getProp(a,"RowTitleAlignment");break;case u.SortByColumnHeader:d=b.getProp(a,"SortMode");break;case u.MouseClickSort:d=b.getProp(a,"SortSequence");break;case p.RulerViewAlignment:e=a.rulerControl.getMessageBlockDetails(),d=void 0!==e?e.alignment:0;break;case p.RulerViewTimeFormat:if(e=a.rulerControl.getMessageBlockDetails(),void 0!==e)switch(e.timeFormat){case PWC.HmiAC.TimeFormat.HH_mm_ss:d=1;break;case PWC.HmiAC.TimeFormat.HH_mm_ss_ms:d=2;break;case PWC.HmiAC.TimeFormat.hh_mm_ss__tt:d=3;break;case PWC.HmiAC.TimeFormat.hh_mm_ss_ms__tt:d=4;break;default:d=0}else d=0;break;case p.RulerViewDateFormat:if(e=a.rulerControl.getMessageBlockDetails(),void 0!==e)switch(e.dateFormat){case PWC.HmiAC.DateFormat.dd_MM_yy_Dot:d=1;break;case PWC.HmiAC.DateFormat.dd_MM_yyyy_Dot:d=2;break;case PWC.HmiAC.DateFormat.dd_MM_yy_Slash:d=3;break;case PWC.HmiAC.DateFormat.dd_MM_yyyy_Slash:d=4;break;default:d=0}else d=0;break;case p.RulerViewFlashingTypes:e=a.rulerControl.getMessageBlockDetails(),d=void 0!==e&&void 0!==e.flashingTypes?e.flashingTypes:0;break;case p.RulerViewDurationFormat:if(e=a.rulerControl.getMessageBlockDetails(),g=PWC.HmiAC.DurationFormat,void 0!==e)switch(e.timeFormat){case g.d_H_mm_ss:d=1;break;case g.H_mm_ss:d=2;break;case g.m_ss:d=3;break;case g.s:d=4;break;default:d=0}else d=0;break;case r.SelectableRows:d=b.getProp(a,"SelectionType");break;case r.SelectionBorder:d=b.getProp(a,"SelectionRect");break;case r.SelectionColorFor:d=b.getProp(a,"SelectionColoring");break;case r.SelectionBorderAutoColor:h=1===b.getProp(a,"AutoSelectionRectColor")?!0:!1,d=h?0:1;break;case r.SelectionBorderColor:d=b.getProp(a,"SelectionRectColor",l);break;case r.SelectionBorderWidth:d=b.getProp(a,"SelectionRectWidth");break;case r.SelectionAutoColor:i=1===b.getProp(a,"AutoSelectionColors")?!0:!1,d=i?0:1;break;case r.SelectedCellForeColor:d=b.getProp(a,"SelectedCellForeColor",l);break;case r.SelectedBackground:d=b.getProp(a,"SelectedCellColor",l);break;case r.SelectedRowForeColor:d=b.getProp(a,"SelectedRowForeColor",l);break;case r.SelectedRowBackgroundColor:d=b.getProp(a,"SelectedRowColor",l);break;case t.FontName:j=b.getPropPart(k.tableFont,v.Font,v.FontName),n=b.getPropPart(k.titleFont,v.Font,v.FontName),0===m?(d=Object.keys(PWC.HmiAC.FontType).indexOf(j),m++):1===m?(d=Object.keys(PWC.HmiAC.FontType).indexOf(a.props.Statusbar.Font.FontName),m++):2===m&&(d=Object.keys(PWC.HmiAC.FontType).indexOf(n),m++),(void 0===d||-1===d)&&(d=PWC.HmiAC.FontType.Tahoma);break;case t.FontSize:d=b.getPropPart(k.tableFont,v.Font,v.FontSize);break;case t.FontArray:d=1;break;case s.ToolBarProp.Alignment:d=parseInt(a.props.Toolbar.Alignment,10);break;default:d=null}return s=u=t=null,d},D=function(){var b,c,e,f,h,i,j,k,l,m,n,o=r(),p=[],q={},s={},t=PWC.HmiAC.PropertyType;for(k=Object.keys(g),o=r(),b=o.length,k=Object.keys(g),c=0;b>c;++c)if(e=o[c].name,f=o[c].value,j=o[c].type,i=o[c].controlType,"complex"!==j)if("subcomplex"!==j){switch(m=d.getControlType(i)){case t.text:h=d.getRegex(i),l={id:o[c].pId,type:m,name:e,value:f,regex:h};break;case t.combobox:l={id:o[c].pId,type:m,name:e,value:f,regex:f[C(e)]};break;case t.checkbox:l={id:o[c].pId,type:m,name:e,value:f};break;default:l={id:o[c].pId,type:m,name:e,value:f,regex:null}}void 0===s.props&&(s.props=[]),s.props.push(l),l={}}else 0!==Object.keys(s).length&&(q.subArray.push(s),s={}),s.tabName=e,s.id=o[c].pId,s.props=[],s.index=n,q.id===PWC.HmiAC.RulerElementId.Blocks&&a.rulerControl.setMessageBlockDetails(e),n++;else 0!==Object.keys(s).length&&(q.subArray.push(s),s={}),0!==Object.keys(q).length&&(p.push(q),q={}),q.tabName=e,q.id=o[c].pId,q.selectedIndex=a.rulerControl.getCurrentColType(),q.selectedIndex2=-2,q.arrayElement="",q.selectedRight="",q.selectedLeft="",q.subArray=[],n=0;return 0!==Object.keys(s).length&&(q.subArray.push(s),s={}),0!==Object.keys(q).length&&(p.push(q),q={}),p},E=function(a,b){var c,d=0,e=-1,f=a.slice(),g=b.slice();if(b){if(d=b.length,d===a.length)return f=[];for(c=0;d>c;c++)e=f.indexOf(g[c]),-1!==e&&f.splice(e,1);return f}},F=function(){var a,b,c;a=d.data[4].subArray[d.data[4].selectedIndex+1].props[0].value,c=d.data[4].selectedRight,null!==c&&""!==c&&(b=d.data[4].subArray[d.data[4].selectedIndex+1].props[1].value,a=E(a,c),d.data[4].subArray[d.data[4].selectedIndex+1].props[0].value=a,b.push.apply(b,c),d.data[4].selectedLeft=c,d.data[4].selectedRight=null)},G=function(){var a,b;a=d.data[4].subArray[d.data[4].selectedIndex+1].props[0].value,b=d.data[4].subArray[d.data[4].selectedIndex+1].props[1].value,b.push.apply(b,a),d.data[4].subArray[d.data[4].selectedIndex+1].props[0].value=[],d.data[4].selectedLeft=b,d.data[4].selectedRight=null},H=function(){var a,b,c;a=d.data[4].subArray[d.data[4].selectedIndex+1].props[0].value,c=d.data[4].selectedLeft,null!==c&&""!==c&&(b=d.data[4].subArray[d.data[4].selectedIndex+1].props[1].value,b=E(b,c),d.data[4].subArray[d.data[4].selectedIndex+1].props[1].value=b,b.push.apply(a,c),d.data[4].selectedRight=c,d.data[4].selectedLeft=null)},I=function(){var a,b;a=d.data[4].subArray[d.data[4].selectedIndex+1].props[0].value,b=d.data[4].subArray[d.data[4].selectedIndex+1].props[1].value,d.data[4].subArray[d.data[4].selectedIndex+1].props[1].value=[],b.push.apply(a,b),d.data[4].selectedRight=a,d.data[4].selectedLeft=null
},J=function(a){var b,c,e,f,g,h,i,j,k,l=PWC.HmiAC.ColumnsListButton;if(c=d.data[4].subArray[d.data[4].selectedIndex+1].props[0].value,b=d.data[4].selectedRight,k=c.length,e=b.length,0!==c.length)if(a===l.MoveUp)for(j=-1,f=0;e>f&&(h=c.indexOf(b[f]),0!==h);f++)g=h+j,i=c[g],c[g]=b[f],c[h]=i;else for(j=1,f=e-1;f>=0&&(h=c.indexOf(b[f]),g=h+j,g!==k);f--)i=c[g],c[g]=b[f],c[h]=i},K=function(a,b){var c,d,e,f,g=[];for(c=0;b-1>c;c++)for(d=c+1;b>d;d++)a[c].index>a[d].index&&(e=a[c],a[c]=a[d],a[d]=e);for(c=0;b>c;c++)f=a[c].displayName,(void 0===a[c].visible||a[c].visible)&&g.push(f);return g},L=function(a,b){var c,d,e=[];for(c=0;b>c;c++)d=a[c].displayName,void 0===a[c].visible||a[c].visible||e.push(d);return e};this.create=function(a,b,c){var d;return this.eventHandler=c?c:A,this.type="RulerPropertyBrowser",this.init(b),d={type:this.type,rtoid:a,appDir:b.gfxWebLib.connection.getAppDir(),parentDiv:b.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv()},this.dialog=this.createControl(d),this.dialog},this.getData=function(){return this.data=D(),this.data},this.update=function(a,b){return this.eventHandler(a,b)},this.modify=function(a,b){var c=PWC.HmiAC.ColumnsListButton;switch(b.updatedValue){case c.MoveLeft:F();break;case c.MoveAllLeft:G();break;case c.MoveRight:H();break;case c.MoveAllRight:I();break;case c.MoveDown:J(c.MoveDown);break;case c.MoveUp:J(c.MoveUp)}},this.clean=function(){var b,c,d;b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById("PropertyBrowser"),d=document.getElementById("PropertyBrowser_divModal"),b&&c&&o&&(b.removeChild(c),d&&b.removeChild(d))},this.init=function(c){a=c,d=this,g=PWC.HmiAC.ControlType,h=PWC.HmiAC.RulerElementId,f=new PWC.HmiAC.RulerPropertySet(a.gfxWebLib.textbib),k=a.rulerControl,b=PWC.Lib.Config.Properties,l=PWC.Lib.Canvas.Converters.enumConverter.Color},this.getControlType=function(a){var b,c=PWC.HmiAC.PropertyType,d=PWC.HmiAC.ControlType;switch(a){case d.Bool:b=c.checkbox;break;case d.Color:b=c.color;break;case d.Collection:b=c.combobox;break;case d.Toggle:b=c.button;break;case d.ReadOnly:b=c.readonly;break;default:b=c.text}return b},this.getRegex=function(a){var b=null,c=PWC.HmiAC.ControlType;switch(a){case c.Int:b=/^[-+]?[0-9]*$/;break;case c.SInt:b=/^\+?[1-9]\d*$/;break;case c.WInt:b=/^\+?[0-9]\d*$/;break;case c.Float:b=/^[-+]?[0-9]*\.?[0-9]+$/;break;case c.FloatPositive:b=/^[0-9.]+$/}return b},this.getConfig=function(){return c||(c=new this.Config),c},this.Config=function(){var c=function(a,b){var c;switch(b){case h.General:c=d(a);break;case h.Columns:c=g(a);break;case h.Blocks:c=j(a)}return c},d=function(c){var d,e,g,h,i=[],j=f.RulerGeneralProperties;switch(c){case j.RulerViewVerticalScrollbarMode:case j.RulerViewHorizontalScrollbarMode:for(e in PWC.HmiAC.RulerScrollMode)i.push(e);d=i;break;case j.RulerViewLabelWindowTitle:for(g in PWC.HmiAC.RulerWindowTitle)i.push(g);d=i;break;case j.RulerViewLabelStyle:for(h in PWC.HmiAC.RulerViewWindowStyle)i.push(h);d=i;break;case j.RulerViewFontColor:d=b.getProp(a,"UserSourceForeColors");break;case j.RulerViewBackgroundColor:d=b.getProp(a,"UserSourceBackColors");break;case j.RulerViewAutomaticHide:d=b.getProp(a,"AutoShow");break;case j.RulerViewAutomaticPositioning:d=b.getProp(a,"AutoPosition");break;case j.RulerViewLabelSource:d=k.sourceControl;break;case j.RulerViewLabelRulerWindow:d=!0;break;case j.RulerViewLabelStatisticsWindow:d=!1;break;case j.RulerViewLabelStatisticsAreaWindow:d=!1;break;case j.RulerViewLabelMovable:d=k.windowMovingEnabled;break;case j.RulerViewLabelClosable:d=k.windowCloseEnabled;break;case j.RulerViewLabelSizable:d=k.windowSizingEnabled}return d},g=function(b){var c,d=[],g=[],h=[],i=k.rulerColumns.slice(0),j=k.statisticAreaColumns.slice(0),l=k.statisticResultColumns.slice(0),m=i.length,n=j.length,o=l.length,p=f.RulerColumnLists;switch(b){case p.RulerSelectedColumns:c=d=K(i,m),e=a.rulerControl.rulerColumns.slice(0);break;case p.RulerExistingColumns:c=d=L(i,m);break;case p.RulerSelectedStatisticAreaColumns:c=g=K(j,n);break;case p.RulerStatisticAreaExistingColumns:c=g=L(j,n);break;case p.RulerSelectedStatisticResultColumns:c=h=K(l,o);break;case p.RulerStatisticResultExistingColumns:c=h=L(l,o);break;case p.RulerViewColumnsListLabelRulerWindow:c=!0;break;case p.RulerViewColumnsListLabelRulerStatisticsAreaWindow:c=!1;break;case p.RulerViewColumnsListLabelStatisticsWindow:c=!1;break;case p.RulerViewColumnsListSelectedWindowType:c=a.rulerControl.selectedRulerWindow}return c},j=function(b){var c,d,e,g,h,j,k,l,m=[],n=[],o=[],p=[],q=a.rulerControl.getMessageBlockDetails(),r=f.RulerBlocks,s=[];switch(b){case r.RulerViewColumnNames:for(e=i.length,d=0;e>d;d++)k=""===i[d].Name||void 0===i[d].Name?i[d].Name:i[d].Name,m.push(k);c=m;break;case r.RulerViewAlignment:for(g in PWC.HmiAC.DefaultAlignment)n.push(g);c=n;break;case r.RulerViewObjectName:void 0!==q&&(c=q.displayName);break;case r.RulerViewLengthInChars:void 0!==q&&(c=q.lengthInChars);break;case r.RulerViewContentAsText:void 0!==q&&(c=q.showText?!0:!1);break;case r.RulerViewLabelContentAsIcon:void 0!==q&&(c=q.showIcon?!0:!1);break;case r.RulerViewTitleAsText:void 0!==q&&(c=q.showTitleText?!0:!1);break;case r.RulerViewTimeFormat:for(h in PWC.HmiAC.TimeFormat)o.push(PWC.HmiAC.TimeFormat[h]);c=o;break;case r.RulerViewDateFormat:for(j in PWC.HmiAC.DateFormat)p.push(PWC.HmiAC.DateFormat[j]);c=p;break;case r.RulerViewShowDate:void 0!==q&&(c=q.showDate?!0:!1);break;case r.RulerViewSource:void 0!==q&&(c=q.source?!0:!1);break;case r.RulerViewDurationFormat:for(l in PWC.HmiAC.DurationFormat)s.push(PWC.HmiAC.DurationFormat[l]);c=s;break;case r.RulerViewShowMessageColors:break;case r.RulerViewVisible:void 0!==q&&(c=q.visible?!0:!1);break;case r.RulerViewNoOfDigits:c=q.leadingZeros;break;case r.RulerViewExponentialNotation:c=Boolean(q.exponentialFormat);break;case r.RulerViewAutomaticDecimalPlaces:c=Boolean(q.autoDecimalPrecision);break;case r.RulerViewDecimalPlaces:c=q.decimalPrecision;break;case r.RulerViewUseSourceFormat:void 0!==q&&(c=q.useSourceFormat?!0:!1)}return c};return{get:c}}},PWC.HmiAC.RulerPropertyBrowser.prototype={},PWC.HmiAC.Design.Inheritance.Extend(PWC.HmiAC.RulerPropertyBrowser,PWC.Components.GenericDialog.Content.ContentBase),function(){PWC.Components.GenericDialog.Content.ObjectTypes.addHandler("RulerPropertyBrowser",new PWC.HmiAC.RulerPropertyBrowser)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.RulerPropertySet=function(a){this.RulerGeneralProperties={RulerViewSource:a.getText("TBID_RulerCtrl_General_Label_Source"),RulerViewHorizontalScrollbarMode:a.getText("TBID_RulerCtrl_General_ColumnScrollbar"),RulerViewVerticalScrollbarMode:a.getText("TBID_RulerCtrl_General_RowScrollbar"),RulerViewLabelWindow:a.getText("TBID_RulerCtrl_General_Label_Window"),RulerViewLabelWindowTitle:a.getText("TBID_RulerCtrl_General_Label_WindowTitle"),RulerViewLabelText:a.getText("TBID_RulerCtrl_General_Label_Text"),RulerViewLabelStyle:a.getText("TBID_RulerCtrl_General_Label_Style"),RulerViewLabelMovable:a.getText("TBID_RulerCtrl_General_Label_Movable"),RulerViewLabelClosable:a.getText("TBID_RulerCtrl_General_Label_Closable"),RulerViewLabelSizable:a.getText("TBID_RulerCtrl_General_Label_Sizable"),RulerViewLabelRowScrollbar:a.getText("TBID_RulerCtrl_General_Label_RowScrollbar"),RulerViewLabelColumnScrollbar:a.getText("TBID_RulerCtrl_General_Label_ColumnScrollbar"),RulerViewLabelPrintJob:a.getText("TBID_RulerCtrl_General_Label_PrintJob"),RulerViewLabelProperties:a.getText("TBID_RulerCtrl_General_Label_Properties"),RulerViewLabelSource:a.getText("TBID_RulerCtrl_General_Label_Source"),RulerViewLabelType:a.getText("TBID_RulerCtrl_General_Label_Type"),RulerViewLabelApplyFontColors:a.getText("TBID_RulerCtrl_General_Label_ApplyFontColors"),RulerViewLabelApplyBackgroundColors:a.getText("TBID_RulerCtrl_General_Label_ApplyBackgroundColors"),RulerViewLabelAutoHide:a.getText("TBID_RulerCtrl_General_Label_AutoHide"),RulerViewLabelAutoPositioning:a.getText("TBID_RulerCtrl_General_Label_AutoPositioning"),RulerViewLabelRulerWindow:a.getText("TBID_RulerCtrl_General_Label_RulerWindow"),RulerViewLabelStatisticsAreaWindow:a.getText("TBID_RulerCtrl_General_Label_StatisticsAreaWindow"),RulerViewLabelStatisticsWindow:a.getText("TBID_RulerCtrl_General_Label_StatisticsWindow"),RulerViewFontColor:a.getText("TBID_RulerCtrl_General_FontColor"),RulerViewBackgroundColor:a.getText("TBID_RulerCtrl_General_BackgorundColor"),RulerViewAutomaticHide:a.getText("TBID_RulerCtrl_General_AutoHide"),RulerViewAutomaticPositioning:a.getText("TBID_RulerCtrl_General_AutoPositioning"),MoveUp:a.getText("TBID_TrendPB_ValueAxes_ValueAxesUpButton"),MoveDown:a.getText("TBID_TrendPB_ValueAxes_ValueAxesDownButton")},this.RulerSelectionProperties={SelectableRows:a.getText("TBID_RulerCtrl_Selection_SelectableRows"),SelectionBorder:a.getText("TBID_RulerCtrl_Selection_SelectionBorder"),SelectionBorderColor:a.getText("TBID_RulerCtrl_Selection_SelectionBorderColor"),SelectionBorderWidth:a.getText("TBID_RulerCtrl_Selection_SelectionBorderWidth"),SelectionBorderAutoColor:a.getText("TBID_RulerCtrl_Selection_SelectionBorderAutoColor"),SelectionColorFor:a.getText("TBID_RulerCtrl_Selection_SelectionColorFor"),SelectionAutoColor:a.getText("TBID_RulerCtrl_Selection_SelectionAutoColor"),SelectedCellForeColor:a.getText("TBID_RulerCtrl_Selection_SelectedCellForeColor"),SelectedBackground:a.getText("TBID_RulerCtrl_Selection_SelectedBackground"),SelectedRowForeColor:a.getText("TBID_RulerCtrl_Selection_SelectedRowForeColor"),SelectedRowBackgroundColor:a.getText("TBID_RulerCtrl_Selection_SelectedRowBackgroundColor"),RulerViewLabelSelection:a.getText("TBID_RulerCtrl_Selection_Label_Selection"),RulerViewLabelSelectableRows:a.getText("TBID_RulerCtrl_Selection_Label_SelectableRows"),RulerViewLabelSelectionBorder:a.getText("TBID_RulerCtrl_Selection_Label_SelectionBorder"),RulerViewLabelAutomaticColorAssignment:a.getText("TBID_RulerCtrl_Selection_Label_AutomaticColorAssignment"),RulerViewLabelColor:a.getText("TBID_RulerCtrl_Selection_Label_Color"),RulerViewLabelWeight:a.getText("TBID_RulerCtrl_Selection_Label_Weight"),RulerViewLabelSelectionColors:a.getText("TBID_RulerCtrl_Selection_Label_SelectionColors"),RulerViewLabelSelectionColorsFor:a.getText("TBID_RulerCtrl_Selection_Label_SelectionColorsFor"),RulerViewLabelSelectionCell:a.getText("TBID_RulerCtrl_Selection_Label_SelectionCell"),RulerViewLabelSelectionRow:a.getText("TBID_RulerCtrl_Selection_Label_SelectionRow"),RulerViewLabelBackground:a.getText("TBID_RulerCtrl_Selection_Label_Background"),RulerViewLabelFont:a.getText("TBID_RulerCtrl_Selection_Label_Font")},this.RulerBlocks={RulerViewColumnNames:a.getText("TBID_RulerCtrl_MessageBlock_ColumnNames"),RulerViewObjectName:a.getText("TBID_RulerCtrl_MessageBlock_ObjectName"),RulerViewLabel:a.getText("TBID_RulerCtrl_MessageBlock_Label"),RulerViewAlignment:a.getText("TBID_RulerCtrl_MessageBlock_MessageBlockAlignment"),RulerViewLengthInChars:a.getText("TBID_RulerCtrl_MessageBlock_LengthInChars"),RulerViewContentAsText:a.getText("TBID_RulerCtrl_MessageBlock_ContentAsText"),RulerViewTitleAsText:a.getText("TBID_RulerCtrl_MessageBlock_TitleAsText"),RulerViewTimeFormat:a.getText("TBID_RulerCtrl_MessageBlock_TimeFormat"),RulerViewDateFormat:a.getText("TBID_RulerCtrl_MessageBlock_DateFormat"),RulerViewShowDate:a.getText("TBID_RulerCtrl_MessageBlock_ShowDate"),RulerViewShowMessageColors:a.getText("TBID_RulerCtrl_MessageBlock_ShowMessageColors"),RulerViewFlashingOn:a.getText("TBID_RulerCtrl_MessageBlock_FlashingOn"),RulerViewFlashingTypes:a.getText("TBID_RulerCtrl_MessageBlock_FlashingTypes"),RulerViewVisible:a.getText("TBID_RulerCtrl_MessageBlock_Visible"),RulerViewSource:a.getText("TBID_RulerCtrl_MessageBlock_Source"),RulerViewUseSourceFormat:a.getText("TBID_RulerCtrl_MessageBlock_UseSourceFormat"),RulerViewDurationFormat:a.getText("TBID_RulerCtrl_MessageBlock_DurationFormat"),RulerViewNoOfDigits:a.getText("TBID_RulerCtrl_MessageBlock_NoOfDigits"),RulerViewDecimalPlaces:a.getText("TBID_RulerCtrl_MessageBlock_DecimalPlaces"),RulerViewExponentialNotation:a.getText("TBID_RulerCtrl_MessageBlock_ExponentialNotation"),RulerViewAutomaticDecimalPlaces:a.getText("TBID_RulerCtrl_MessageBlock_AutomaticDecimalPlaces"),RulerViewLabelAvailableMessageBlocks:a.getText("TBID_RulerCtrl_MessageBlock_Label_AvailableMessageBlocks"),RulerViewLabelDisplay:a.getText("TBID_RulerCtrl_MessageBlock_Label_Display"),RulerViewLabelContentAsText:a.getText("TBID_RulerCtrl_MessageBlock_Label_ContentAsText"),RulerViewLabelContentAsIcon:a.getText("TBID_RulerCtrl_MessageBlock_Label_ContentAsIcon"),RulerViewLabelTitleAsText:a.getText("TBID_RulerCtrl_MessageBlock_Label_TitleAsText"),RulerViewLabelTitleAsIcon:a.getText("TBID_RulerCtrl_MessageBlock_Label_TitleAsIcon"),RulerViewLabelObjectName:a.getText("TBID_RulerCtrl_MessageBlock_Label_ObjectName"),RulerViewLabelLabel:a.getText("TBID_RulerCtrl_MessageBlock_Label_Label"),RulerViewLabelTextID:a.getText("TBID_RulerCtrl_MessageBlock_Label_TextID"),RulerViewLabelAlignment:a.getText("TBID_RulerCtrl_MessageBlock_Label_Alignment"),RulerViewLabelLengthInChars:a.getText("TBID_RulerCtrl_MessageBlock_Label_LengthInChars"),RulerViewLabelShowMessageColors:a.getText("TBID_RulerCtrl_MessageBlock_Label_ShowMessageColors"),RulerViewLabelSelectableInSelectionDialog:a.getText("TBID_RulerCtrl_MessageBlock_Label_SelectableInSelectionDialog"),RulerViewLabelFlashingOn:a.getText("TBID_RulerCtrl_MessageBlock_Label_FlashingOn"),RulerViewLabelFormat:a.getText("TBID_RulerCtrl_MessageBlock_Label_Format"),RulerViewLabelTimeFormat:a.getText("TBID_RulerCtrl_MessageBlock_Label_TimeFormat"),RulerViewLabelDateFormat:a.getText("TBID_RulerCtrl_MessageBlock_Label_DateFormat"),RulerViewLabelShowDate:a.getText("TBID_RulerCtrl_MessageBlock_Label_ShowDate"),RulerViewLabelApplyProjectSetting:a.getText("TBID_RulerCtrl_MessageBlock_Label_ApplyProjectSetting"),RulerViewLabelDurationFormat:a.getText("TBID_RulerCtrl_MessageBlock_Label_DurationFormat"),RulerViewLabelNoOfDigits:a.getText("TBID_RulerCtrl_MessageBlock_Label_NoOfDigits"),RulerViewLabelDecimalPlaces:a.getText("TBID_RulerCtrl_MessageBlock_Label_DecimalPlaces"),RulerViewLabelExponentialNotation:a.getText("TBID_RulerCtrl_MessageBlock_Label_ExponentialNotation"),RulerViewLabelAutomaticDecimalPlaces:a.getText("TBID_RulerCtrl_MessageBlock_Label_AutomaticDecimalPlaces"),RulerViewLabelNoFormat:a.getText("TBID_RulerCtrl_MessageBlock_Label_NoFormat"),RulerViewLabelApplyFromSource:a.getText("TBID_RulerCtrl_MessageBlock_Label_Applyfromsource")},this.RulerColumnLists={Name:a.getText("TBID_RulerCtrl_ColumnList_Name"),RulerSelectedColumns:a.getText("TBID_RulerCtrl_ColumnList_RulerSelectedColumns"),RulerSelectedStatisticAreaColumns:a.getText("TBID_RulerCtrl_ColumnList_RulerSelectedStatisticAreaColumns"),RulerSelectedStatisticResultColumns:a.getText("TBID_RulerCtrl_ColumnList_RulerSelectedStatisticResultColumns"),RulerExistingColumns:a.getText("TBID_RulerCtrl_ColumnList_RulerExistingColumns"),RulerStatisticAreaExistingColumns:a.getText("TBID_RulerCtrl_ColumnList_RulerStatisticAreaExistingColumns"),RulerStatisticResultExistingColumns:a.getText("TBID_RulerCtrl_ColumnList_RulerStatisticResultExistingColumns"),RulerViewColumnsListSelectedWindowType:a.getText("TBID_RulerCtrl_ColumnList_Selected_Window_Type"),Up:a.getText("TBID_RulerCtrl_ColumnList_Up"),Down:a.getText("TBID_RulerCtrl_ColumnList_Down"),MoveLeft:a.getText("TBID_RulerCtrl_ColumnList_MoveLeft"),MoveAllLeft:a.getText("TBID_RulerCtrl_ColumnList_MoveAllLeft"),MoveRight:a.getText("TBID_RulerCtrl_ColumnList_MoveRight"),MoveAllRight:a.getText("TBID_RulerCtrl_ColumnList_MoveAllRight"),RulerViewColumnListLabelExistingColumns:a.getText("TBID_RulerCtrl_ColumnList_Label_ExistingColumns"),RulerViewColumnsListLabelSelectedColumns:a.getText("TBID_RulerCtrl_ColumnList_Label_SelectedColumns"),RulerViewColumnsListLabelWindow:a.getText("TBID_RulerCtrl_ColumnList_Label_Window"),RulerViewColumnsListLabelRulerWindow:a.getText("TBID_RulerCtrl_ColumnList_Label_RulerWindow"),RulerViewColumnsListLabelRulerStatisticsAreaWindow:a.getText("TBID_RulerCtrl_ColumnList_Label_StatisticsAreaWindow"),RulerViewColumnsListLabelStatisticsWindow:a.getText("TBID_RulerCtrl_ColumnList_Label_StatisticsWindow"),RulerTempSelectedColumns:a.getText("TBID_RulerCtrl_ColumnList_RulerTempSelectedColumns"),RulerTempExistingColumns:a.getText("TBID_RulerCtrl_ColumnList_RulerTempExistingColumns")},this.RulerTabNames={GeneralTabName:a.getText("TBID_HmiWindowPB_Tab_General"),ParameterTabName:a.getText("TBID_HmiWindowPB_Tab_Parameter"),BlocksTabName:a.getText("TBID_RulerCtrl_TabNameLabel_MessageBlocks"),ColumnsTabName:a.getText("TBID_RulerCtrl_TabNameLabel_MessageLists"),EffectsTabName:a.getText("TBID_HmiWindowPB_Tab_Effects"),SelectionTabName:a.getText("TBID_HmiWindowPB_Tab_Selection"),FontTabName:a.getText("TBID_HmiWindowPB_Tab_Font"),ToolbarTabName:a.getText("TBID_HmiWindowPB_Tab_ToolBar"),StatusBarTabName:a.getText("TBID_HmiWindowPB_Tab_StatusBar")},this.StatusBarProp={Name:"Name",BackColor:a.getText("TBID_HmiWindowPB_Statusbar_Backgroundcolor"),ForeColor:a.getText("TBID_HmiWindowPB_Statusbar_Fontcolor"),StatusbarElements:a.getText("TBID_HmiWindowPB_Statusbar_StatusbarElements"),UseBackColor:a.getText("TBID_HmiWindowPB_Statusbar_Show"),Visible:a.getText("TBID_HmiWindowPB_Statusbar_Showstatusbar"),ShowToolTips:a.getText("TBID_HmiWindowPB_Statusbar_Tooltips"),StatusbarAttribute:a.getText("TBID_HmiWindowPB_Statusbar_StatusbarAttribute"),StatusbarElementSizeMsg:a.getText("TBID_HmiWindowPB_Statusbar_StatusbarElementSizeMsg")},this.StatusBarElementProp={AutoSize:a.getText("TBID_HmiWindowPB_Statusbar_Automatic"),Id:a.getText("TBID_HmiWindowPB_Statusbar_Objectid"),Icon:"Icon",Index:"Index",Name:a.getText("TBID_HmiWindowPB_Statusbar_Objectname"),Text:"Text",ToolTipText:"ToolTipText",UserDefined:"UserDefined",Visible:"Visible",Width:a.getText("TBID_HmiWindowPB_Statusbar_Widthinpixel"),Offset:"Offset",Position:"Position",DefaultWidth:"DefaultWidth"}};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.RulerElementId={Effects:95,General:96,Blocks:97,Columns:98,Selection:99,StatusBar:100,ToolBar:101,Font:102,TitleFont:103,StatusBarFont:104,Parameter:105},PWC.HmiAC.RulerViewPartType={RulerColumns:"RulerColumns",StatisticResultColumns:"StatisticResultColumns",StatisticAreaColumns:"StatisticAreaColumns"},PWC.HmiAC.RulerGeneralPropId={WindowTitle:0,Style:1,VerticalScrollbarMode:2,HorizontalScrollbarMode:3,UserSourceForeColors:4,UserSourceBackColors:5,RulerWindow:6,StatisticsAreaWindow:7,StatisticsWindow:8,AutoPosition:9,AutoShow:10,Mode:11,SourceControl:12,WindowMovingEnabled:13,WindowCloseEnabled:14,WindowSizingEnabled:15,Visible:16},PWC.HmiAC.RulerSelectionPropId={SelectionType:0,SelectionRect:1,SelectionRectColor:2,SelectionRectWidth:3,AutoSelectionRectColor:4,SelectionColoring:5,AutoSelectionColors:6,SelectedCellForeColor:7,SelectedCellColor:8,SelectedRowForeColor:9,SelectedRowColor:10,SelectionColorFor:11,SelectionBorder:12},PWC.HmiAC.RulerMessageBlockPropId={ColumnNames:0,ObjectName:1,Label:2,Alignment:3,Width:4,ShowText:5,ShowTitleText:6,TimeFormat:7,DateFormat:8,ShowDate:9,UseRulerColors:10,FlashingOn:11,FlashingTypes:12,Visible:13,Selected:14,Index:15,ShowIcon:16,DurationFormat:17,DecimalPrecision:18,AutoDecimalPrecision:19,ExponentialFormat:20,LeadingZeros:21,Digits:22,Source:23,UseSourceFormat:24,DisplayName:25},PWC.HmiAC.ColumnListPropId={Name:0,MoveRight:1,MoveAllRight:2,MoveLeft:3,MoveAllLeft:4,Up:5,Down:6,RulerSelectedColumns:7,RulerExistingColumns:8,RulerStatisticArea:9,RulerStatisticResult:10,RulerStatisticAreaExistingColumns:11,RulerStatisticResultExistingColumns:12,RulerSelectedWindowType:13,RulerTempExistingColumns:14,RulerTempSelectedColumns:15},PWC.HmiAC.ColumnsListButton={MoveLeft:"<",MoveAllLeft:"<<",MoveRight:">",MoveAllRight:">>",MoveUp:"Up",MoveDown:"Down",RulerWindow:"Ruler",RulerStatisticArea:"StatisticArea",RulerStatisticResult:"StatisticResult",SelectedColumnName:"selectedColumnName",ExistingColumnName:"ExistingColumnName"},PWC.HmiAC.RulerScrollMode={No:0,WhenNecessary:1,Always:2},PWC.HmiAC.RulerWindowTitle={None:0,Normal:1,Narrow:2},PWC.HmiAC.RulerViewWindowStyle={Project_setting:0,Classic:1,Standard:2,Basic_process_control:3},PWC.HmiAC.RulerColumnHeaderAlignment={Left:0,Center:1,Right:2,JustifyToTableContent:3},PWC.HmiAC.RowLabelAlignment={Left:0,Centered:1,Right:2},PWC.HmiAC.SortByColumnHeader={No:0,WithClick:1,WithDoubleClick:2},PWC.HmiAC.SortOrderOnMouseClick={UpDownNone:0,UpDown:1},PWC.HmiAC.RulerSelectionColorFor={None:0,Cell:1,Row:2,CellAndRow:3},PWC.HmiAC.RulerSelectionBorder={None:0,Cell:1,Row:2};var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.HmiTypes=PWC.HmiAC.HmiTypes||{},PWC.HmiAC.HmiTypes.HmiAlarmControl=function(){"use strict";return{DOM_TYPE:"html",onInit:function(a){var b=new PWC.HmiAC.AlarmView(a);a.alarmControl=b,b.initialize(),PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.Info,"AlarmControl:onInit() Initialized")},onChanged:function(a,b,c){var d=a.alarmControl;void 0!==d&&d.OnServerChange(b,c)},onDLSendData:function(a,b,c){var d=a.alarmControl;if(d)switch(b){case PWC.HmiAC.Notifications.OnAlarm:d.isInitialNotification(c),PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.Info,"AlarmControl:onDLSendData() Alarm Data Initialized");break;case PWC.HmiAC.Notifications.OnServerState:d.onServerState(c);break;case PWC.HmiAC.Notifications.OnRefreshComplete:c.InitialNotification&&d.emptyGridData()}},onStatusbarElement:function(a,b){var c=a.alarmControl;c&&c.onStatusbarElement(b)},onResized:function(a){var b=a.alarmControl;b&&b.reInitialize(a)},onToolbarButton:function(a,b){var c=a.alarmControl;c.onToolbarButton(a,b)},onCleanUp:function(a){var b=a.alarmControl;b&&(b.onCleanUp(),b=null,a.alarmControl=null)},onFlashing:function(a){a.alarmControl.handleFlashing(a)},onFocusOut:function(a){var b=a.alarmControl;null!==b&&b.onFocusOut()},onFocus:function(a){var b=a.alarmControl;null!==b&&b.onFocus()}}}(),function(){PWC.Lib.HmiTypes.Advanced.HmiControlTypes.addHandler("AlarmView",PWC.HmiAC.HmiTypes.HmiAlarmControl)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.HmiTypes=PWC.HmiAC.HmiTypes||{},PWC.HmiAC.HmiTypes.HmiFunctionTrendControl=function(){"use strict";return{DOM_TYPE:"svg",onInit:function(a){var b,c=[],d=a.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,e=a.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,f=PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar;c.push(d),c.push(e),((b=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(a,"Date"))&&b.Visible||(b=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(a,"Time"))&&b.Visible)&&(a._TimeTimerId=window.setInterval(function(){var b,d;b=new Date,d=a.trendControl.customFormat(b,c.slice(0)),f.text(a,"Time",d[0]),f.text(a,"Date",d[1]),f.tooltip(a,"Time",d[0]),f.tooltip(a,"Date",d[1])},1e3));var g,h;h=new PWC.HmiAC.FunctionTrendView,g=PWC.Lib.Canvas.Svg.createSvgElement("g",{}),h.initialize(a,g),a.control.domNode=g,a.control.domSvgParent.appendChild(g),a.trendControl=h,a.ISource=h.ISource},onChanged:function(a,b,c){var d,e,f,g,h,i,j,k,l=a.trendControl,m=null,n=PWC.HmiAC.TrendViewPartType;if(l){if(c){j=c.split(":"),g=j[0].split("."),k=j[1],i=g[0],h=parseInt(g[1],10),l.setObjectToUpdate(i,h);for(m in b)switch(e=m,f=b[m],i){case n.Trends:k?(k=k.split(".")[0],d=PWC.HmiAC.TrendPropId[k][e]):d=PWC.HmiAC.TrendPropId[e],l.updateProperty(PWC.HmiAC.ElementId.Trend,d,f,!1);break;case n.TrendWindows:d=PWC.HmiAC.TrendWindowPropId[e],l.updateProperty(PWC.HmiAC.ElementId.TrendWindow,d,f,!1);break;case n.XAxes:d=PWC.HmiAC.AxisPropId[e],l.updateProperty(PWC.HmiAC.ElementId.XAxis,d,f,!1);break;case n.YAxes:d=PWC.HmiAC.AxisPropId[e],l.updateProperty(PWC.HmiAC.ElementId.YAxis,d,f,!1)}}else for(m in b)e=m,f=b[m],d=PWC.HmiAC.TrendViewPropId[e],void 0!==d&&l.updateProperty(PWC.HmiAC.ElementId.TrendView,d,f,!1);PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection?(l.createDrawableCollections(),PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection=!1):PWC.HmiAC.PostPropertyUpdate.Redraw?l.redraw():PWC.HmiAC.PostPropertyUpdate.Update&&l.update(),PWC.HmiAC.PostPropertyUpdate.Redraw=!1,PWC.HmiAC.PostPropertyUpdate.Update=!1,PWC.HmiAC.PostPropertyUpdate.Invalid=!1,PWC.HmiAC.PostPropertyUpdate.ErrorMsg=""}},onDLSendData:function(a,b,c){var d=a.trendControl;if(d)switch(b){case 0:void 0!==c.ValuesArray&&"[empty]"!==c.ValuesArray&&d.onRead(c);break;case 1:if(void 0===c.ValuesArray||"[empty]"===c.ValuesArray||void 0===c.ValuesArray[0]||"[empty]"===c.ValuesArray[0])return;d.onHistoricalRead(c);break;case 3:a.ISource.subscribe("BrowsingView").setSelectedTag(c.TagSelected)}},onResized:function(a){var b=a.trendControl;b&&b.resize(a.control)},onMoved:function(a){var b=a.trendControl;b&&b.move()},onToolbarButton:function(a,b){var c=a.trendControl;c.onToolbarButton(a,b)},onCleanUp:function(a){a._TimeTimerId&&window.clearInterval(a._TimeTimerId);var b=a.trendControl;b&&(b.onCleanUp(),b=null,a.trendControl=null,a.ISource=null,a.control.domSvgParent&&a.control.domSvgParent.removeChild(a.control.domNode),a.control.domNode=null)}}}(),function(){PWC.Lib.HmiTypes.Advanced.HmiControlTypes.addHandler("FunctionTrendView",PWC.HmiAC.HmiTypes.HmiFunctionTrendControl)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.HmiTypes=PWC.HmiAC.HmiTypes||{},PWC.HmiAC.HmiTypes.HmiOnlineTrendControl=function(){"use strict";return{DOM_TYPE:"svg",onInit:function(a){var b,c,d,e,f=[],g=a.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,h=a.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,i=PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar;f.push(g),f.push(h),b=new PWC.HmiAC.OnlineTrendView,c=PWC.Lib.Canvas.Svg.createSvgElement("g",{}),b.initialize(a,c),a.control.domNode=c,a.control.domSvgParent.appendChild(c),a.trendControl=b,a.ISource=b.ISource,d=b.timeBase,((e=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(a,"Date"))&&e.Visible||(e=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(a,"Time"))&&e.Visible)&&(a._TimeTimerId=window.setInterval(function(){var b,c;c=new Date,b=a.trendControl.customFormat(c,f.slice(0)),i.text(a,"Time",b[0]),i.text(a,"Date",b[1]),i.tooltip(a,"Time",b[1]),i.tooltip(a,"Date",b[1])},1e3)),b=g=h=null},onCreatePart:function(a,b,c){var d=a.trendControl;d.partCreated(b,c)},onDeletePart:function(a,b){var c=a.trendControl;c.partDeleted(b)},onChanged:function(a,b,c){var d,e,f,g,h,i,j,k,l=a.trendControl,m=null,n=PWC.HmiAC.TrendViewPartType;if(l){if(c){j=c.split(":"),g=j[0].split("."),k=j[1],i=g[0],h=parseInt(g[1],10),l.setObjectToUpdate(i,h);for(m in b)switch(e=m,f=b[m],i){case n.Trends:k?(k=k.split(".")[0],d=PWC.HmiAC.TrendPropId[k][e]):d=PWC.HmiAC.TrendPropId[e],l.updateProperty(PWC.HmiAC.ElementId.Trend,d,f,!1);break;case n.TrendWindows:d=PWC.HmiAC.TrendWindowPropId[e],l.updateProperty(PWC.HmiAC.ElementId.TrendWindow,d,f,!1);break;case n.TimeAxes:d=PWC.HmiAC.AxisPropId[e],l.updateProperty(PWC.HmiAC.ElementId.XAxis,d,f,!1);break;case n.ValueAxes:d=PWC.HmiAC.AxisPropId[e],l.updateProperty(PWC.HmiAC.ElementId.YAxis,d,f,!1)}}else for(m in b)e=m,f=b[m],d=PWC.HmiAC.TrendViewPropId[e],void 0!==d&&l.updateProperty(PWC.HmiAC.ElementId.TrendView,d,f,!1);PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection?(l.createDrawableCollections(),PWC.HmiAC.PostPropertyUpdate.CreateDrawableCollection=!1):PWC.HmiAC.PostPropertyUpdate.Redraw?l.redraw():PWC.HmiAC.PostPropertyUpdate.Update&&l.update(),PWC.HmiAC.PostPropertyUpdate.Redraw=!1,PWC.HmiAC.PostPropertyUpdate.Update=!1,PWC.HmiAC.PostPropertyUpdate.Invalid=!1,PWC.HmiAC.PostPropertyUpdate.ErrorMsg=""}},onDLSendData:function(a,b,c){var d=a.trendControl;if(d)switch(b){case 0:"[empty]"!==c.ValuesArray&&d.onRead(c);break;case 1:if("[empty]"===c.ValuesArray||"[empty]"===c.ValuesArray[0])return;d.onHistoricalRead(c);break;case 3:a.ISource.subscribe("BrowsingView").setSelectedTag(c.TagSelected);break;default:d.onTimer(c)}},onResized:function(a){var b=a.trendControl;b&&b.resize(a.control)},onMoved:function(a){var b=a.trendControl;b&&b.move()},onToolbarButton:function(a,b){var c=a.trendControl;c.onToolbarButton(a,b)},onCleanUp:function(a){a._TimeTimerId&&window.clearInterval(a._TimeTimerId);var b=a.trendControl;b&&(b.onCleanUp(),b=null,a.trendControl=null,a.ISource=null,a.control.domSvgParent&&a.control.domSvgParent.removeChild(a.control.domNode),a.control.domNode=null)}}}(),function(){PWC.Lib.HmiTypes.Advanced.HmiControlTypes.addHandler("TrendView",PWC.HmiAC.HmiTypes.HmiOnlineTrendControl)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.HmiTypes=PWC.HmiAC.HmiTypes||{},PWC.HmiAC.HmiTypes.HmiRulerControl=function(){"use strict";return{DOM_TYPE:"svg",onInit:function(a){var b,c,d,e,f=[],g=a.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,h=a.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,i=PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar,j=PWC.Lib.Canvas.Svg.createSvgElement("g",{});f.push(g),f.push(h),b=new PWC.HmiAC.RulerControlView,b.initialize(a,j),a.control.domNode=j,a.control.domSvgParent.appendChild(j),a.rulerControl=b,((c=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(a,"Date"))&&c.Visible||(c=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(a,"Time"))&&c.Visible||(d=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(a,"SelectedRow"))&&d.Visible||(e=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(a,"SelectedColumn"))&&e.Visible)&&(a._TimeTimerId=window.setInterval(function(){var b,c,d,e="",g="";d=new Date,b=a.rulerControl.customFormat(d,f.slice(0)),c={},c=a.rulerControl.getSelection(),null!==c.selectedCellRowIndex?(e=c.selectedCellRowIndex+1,e=e.toString(),i.text(a,"SelectedRow","Row : "+e),i.tooltip(a,"SelectedRow","Row : "+e)):(i.text(a,"SelectedRow",""),i.tooltip(a,"SelectedRow","")),null!==c.selectedCellColumnIndex?(g=c.selectedCellColumnIndex+1,g=g.toString(),i.text(a,"SelectedColumn","Column : "+g),i.tooltip(a,"SelectedColumn","Column : "+g)):(i.text(a,"SelectedColumn",""),i.tooltip(a,"SelectedColumn","")),i.text(a,"Time",b[0]),i.text(a,"Date",b[1]),i.tooltip(a,"Time",b[0]),i.tooltip(a,"Date",b[1])},1e3))},onChanged:function(a,b,c){var d=a.rulerControl;d&&d.onServerUpdate(a,b,c)},onResized:function(a){var b=a.rulerControl;b&&b.resize(a.control)},onMoved:function(a){var b=a.rulerControl;b&&b.move()},onToolbarButton:function(a,b){var c=a.rulerControl;c.onToolbarButton(a,b)},onScreenItemsInitialized:function(a){a.props.SourceControl&&a.gfxWebLib.screen.enumItems(a.container,this,function(b){return a.rulerControl.setSourceInterface(b.ISource.subscribe(a.type,a.rulerControl)),!0},function(b){return b.props.Name===a.props.SourceControl?!0:void 0})},onCleanUp:function(a){a._TimeTimerId&&window.clearInterval(a._TimeTimerId);var b=a.rulerControl;b&&(b.onCleanUp(),b=null,a.rulerControl=null,a.control.domSvgParent&&a.control.domSvgParent.removeChild(a.control.domNode),a.control.domNode=null)}}}(),function(){PWC.Lib.HmiTypes.Advanced.HmiControlTypes.addHandler("RulerView",PWC.HmiAC.HmiTypes.HmiRulerControl)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.HmiTypes=PWC.HmiAC.HmiTypes||{},PWC.HmiAC.HmiTypes.HmiTableControl=function(){"use strict";return{DOM_TYPE:"html",onInit:function(a){var b,c,d,e,f=[],g=a.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Time").f,h=a.gfxWebLib.textbib.getLocaliziedDateTimeFormat("TBID_NML_DF_Default_Date").f,i=PWC.Lib.HmiTypes.Advanced.HmiWindow.StatusBar,j=PWC.HmiAC.StatusBarButtons,k=a.gfxWebLib.textbib,l=function(){var b,c;c=new Date,b=a.tableControl.customFormat(c,f.slice(0)),i.text(a,"Time",b[0]),i.text(a,"Date",b[1]),i.tooltip(a,"Time",b[0]),i.tooltip(a,"Date",b[1]),b=c=null};f.push(g),f.push(h),b=new PWC.HmiAC.TableView(a),c=PWC.Lib.Canvas.Svg.createSvgElement("g",{}),b.initialize(a,c),a.control.domNode=c,a.control.domSvgParent.appendChild(c),a.tableControl=b,a.ISource=b.ISource,d=b.tableModel.timeBase,((e=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(a,"Date"))&&e.Visible||(e=PWC.Lib.HmiTypes.Advanced.findStatusbarEelementByName(a,"Time"))&&e.Visible)&&(a._TimeTimerId=window.setInterval(l,1e3)),i.tooltip(a,"SelectedRow",k.getText("TBID_TableCtrl_Statusbar_SelectedRow")),i.tooltip(a,"SelectedColumn",k.getText("TBID_TableCtrl_Statusbar_SelectedColumn")),d===PWC.HmiAC.TimeBase.UTC?(i.icon(a,j.TimeBase,PWC.HmiAC.StatusBarIcons.TIMEBASE_UTC),i.tooltip(a,j.TimeBase,k.getText("TBID_TableCtrl_UTC"))):(i.icon(a,j.TimeBase,PWC.HmiAC.StatusBarIcons.TIMEBASE_LOCAL),i.tooltip(a,j.TimeBase,k.getText("TBID_TableCtrl_LocalTimeZone")))
},onChanged:function(a,b,c){a.tableControl.onServerPropertyUpdate(b,c)},onDLSendData:function(a,b,c){var d=a.tableControl;if(d)switch(b){case 0:"[empty]"!==c.ValuesArray&&(d.initializeRowData(c),PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.Info,"TableControl:onDLSendData() Table Data Initialized"));break;case 1:"[empty]"!==c.ValuesArray&&(d.initializeHistoricData(c),PWC.Lib.Debug.consolLog(PWC.Lib.Debug.enumTraceMode.Info,"TableControl:onDLSendData() Table Data Initialized"));break;case 5:d.createOperatorMessage();break;case 6:d.displayWarningDialog("TBID_ReadOnlyLicense","TBID_TableCtrl_Note_Caption")}c=null},onResized:function(a){var b=a.tableControl;b.resize(a.control)},onMoved:function(a){var b=a.tableControl;b&&b.move()},onToolbarButton:function(a,b){var c=a.tableControl;c.onToolbarButton(a,b)},onCleanUp:function(a){var b=a.tableControl;b&&(b.onCleanUp(),b=null)},onFocusOut:function(){},onFocus:function(){}}}(),function(){PWC.Lib.HmiTypes.Advanced.HmiControlTypes.addHandler("TableView",PWC.HmiAC.HmiTypes.HmiTableControl)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.HmiTypes=PWC.HmiAC.HmiTypes||{},PWC.HmiAC.HmiTypes.HmiOnlineTablePropertyBrowser=function(){"use strict";var a=null;return{DOM_TYPE:"html",onInit:function(b){a=new PWC.HmiAC.OnlineTablePropertyBrowser,a.init(b)},onChanged:function(){},onDLSendData:function(){},onResized:function(a){$("#"+a.rtoid.replace(/\s+/g,"")+"TreeView").width(a.control.width).height(a.control.height)},onToolbarButton:function(){},onCleanUp:function(b){var c=document.getElementById("ID_TopLevelScreenWindow0_Div"),d=document.getElementById(b.props.propertyBrowserId);c&&d&&c.removeChild(d),a=null}}}(),function(){PWC.Lib.HmiTypes.Advanced.HmiControlTypes.addHandler("TablePropertyBrowser",PWC.HmiAC.HmiTypes.HmiOnlineTablePropertyBrowser)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.HmiTypes=PWC.HmiAC.HmiTypes||{},PWC.HmiAC.HmiTypes.HmiTagBrowserControl=function(){"use strict";var a,b=PWC.Components.TagBrowser.DLDataReceivedTypes;return{DOM_TYPE:"svg",onInit:function(b){var c,d;a=new PWC.Components.TagBrowser.TagBrowserOnlineView(b),a.initialize(),a.createOuterDivs(),a.createWidthSeperator(),b._tagBrowserControl=a,c=b.gfxWebLib.rootDiv,d=document.createElement("div"),d.setAttribute("id","frameOverylayDiv_tagBrowser"),d.setAttribute("class","frameOverylayDiv"),d.setAttribute("style","filter: alpha(opacity = 70);background: #666666 50% 50% repeat;opacity: .3;filter: Alpha(Opacity=50);position: fixed;top: 0;left: 0;width: 100%;height: 100%;"),c.appendChild(d),setTimeout(function(){c.appendChild(b.domNode),b.oldDomParent=b.domParent,b.domParent=c},1)},onChanged:function(){},onDLSendData:function(c,d,e){var f="*";if(a)switch(d){case b.DataSourceArray:"[empty]"!==e.DataSourceArray&&(a.createTopLayout(e.DataSourceArray,a.eventsHandler,f),a.assignInitialTreeData(e.DataSourceArray),a.createTagGridLayout());break;case b.TreeViewCount:e.ObjectCount>0&&a.requestDisplayData(e.ObjectCount,PWC.Components.TagBrowser.RequestType.TreeView);break;case b.ListViewCount:a.calculateViewPort(e);break;case b.TreeViewData:a.modifyTreeView(e);break;case b.ListViewData:a.createTreeView(),a.renderTagGridData(e)}},onResized:function(b){a&&(b.props.Height>=350&&b.props.Width>=600?a.resize(b.control):b.props.Height<350&&b.props.Width>=600?(b.handler.onChanged(b,{Height:350}),a.resize(b.control)):b.props.Height>=350&&b.props.Width<600?(b.handler.onChanged(b,{Width:600}),a.resize(b.control)):(b.handler.onChanged(b,{Height:350,Width:600}),a.resize(b.control)))},onToolbarButton:function(b,c){a.onToolbarButton(b,c)},onCleanUp:function(b){var c;b._TimeTimerId&&window.clearInterval(b._TimeTimerId),a&&(a.onCleanUp(),a=null,b.tagBrowserOnlineControl=null),b.domParent=b.oldDomParent,b.oldDomParent.appendChild(b.domNode),c=b.gfxWebLib.rootDiv,b.gfxWebLib.rootDiv.removeChild(b.gfxWebLib.rootDiv.lastChild)}}}(),function(){PWC.Lib.HmiTypes.Advanced.HmiControlTypes.addHandler("BrowsingView",PWC.HmiAC.HmiTypes.HmiTagBrowserControl)}();var PWC=PWC||{};PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.HmiTypes=PWC.HmiAC.HmiTypes||{},PWC.HmiAC.HmiTypes.HmiWindow=function(){"use strict";return{DOM_TYPE:"html",onInit:function(){},onChanged:function(){},onDLSendData:function(){},onResized:function(){},onToolbarButton:function(){},onCleanUp:function(a){var b=a.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),c=document.getElementById(a.domParent.id+"_divModal"),d=a.domParent;b&&d&&(b.removeChild(d),c&&b.removeChild(c))}}}(),function(){PWC.Lib.HmiTypes.Advanced.HmiControlTypes.addHandler("HmiWindow",PWC.HmiAC.HmiTypes.HmiWindow)}();
// SIG // Begin signature block
// SIG // MIIhgAYJKoZIhvcNAQcCoIIhcTCCIW0CAQExDzANBglg
// SIG // hkgBZQMEAgEFADB3BgorBgEEAYI3AgEEoGkwZzAyBgor
// SIG // BgEEAYI3AgEeMCQCAQEEEBDgyQbOONQRoqMAEEvTUJAC
// SIG // AQACAQACAQACAQACAQAwMTANBglghkgBZQMEAgEFAAQg
// SIG // BNQrsMDlmC5NjEM9X/s2+nxY2Zz0/wMD3KYS1litT7mg
// SIG // gg/PMIIE0DCCA7igAwIBAgIQOZ3Mut88LP5C4fl5xqLU
// SIG // 8TANBgkqhkiG9w0BAQsFADB/MQswCQYDVQQGEwJVUzEd
// SIG // MBsGA1UEChMUU3ltYW50ZWMgQ29ycG9yYXRpb24xHzAd
// SIG // BgNVBAsTFlN5bWFudGVjIFRydXN0IE5ldHdvcmsxMDAu
// SIG // BgNVBAMTJ1N5bWFudGVjIENsYXNzIDMgU0hBMjU2IENv
// SIG // ZGUgU2lnbmluZyBDQTAeFw0xODAyMDEwMDAwMDBaFw0y
// SIG // MDA0MDEyMzU5NTlaMGgxCzAJBgNVBAYTAkRFMRswGQYD
// SIG // VQQIDBJCYWRlbi1Xw7xydHRlbWJlcmcxEjAQBgNVBAcM
// SIG // CUthcmxzcnVoZTETMBEGA1UECgwKU2llbWVucyBBRzET
// SIG // MBEGA1UEAwwKU2llbWVucyBBRzCCASIwDQYJKoZIhvcN
// SIG // AQEBBQADggEPADCCAQoCggEBAMqbX9kvRnz5BKBSFX05
// SIG // NakWJkaS1Cu0OutPZE1MNOZEVy/FPUDBOofIjUBC6Fhd
// SIG // Oqpy6KgOJPUy6JFnUzWW0TXhM20l/B/ZnKZXZCtiVEvd
// SIG // Tnee6kKx+nZHv9JfnC3RDrzawDzfLPky6Q6xdGAU6UE/
// SIG // tNYNOfrdy6JoeygMGNhG/9xsLd1r2xhqAmTmVo9J9Vvx
// SIG // dpXdAzeP53b34dUg30Hc65gLysYWILp4GWKlmSrk387u
// SIG // Q7x/TrBA6vBqh81l0azNbdCnAqB1I1OhVVkXqTkte7LA
// SIG // bzzVtOx+lWvq6XqHq/Wsh6Y92nohCNmoh7TwF0HbYNvg
// SIG // kBehrDAOIyZL8x8CAwEAAaOCAV0wggFZMAkGA1UdEwQC
// SIG // MAAwDgYDVR0PAQH/BAQDAgeAMCsGA1UdHwQkMCIwIKAe
// SIG // oByGGmh0dHA6Ly9zdi5zeW1jYi5jb20vc3YuY3JsMGEG
// SIG // A1UdIARaMFgwVgYGZ4EMAQQBMEwwIwYIKwYBBQUHAgEW
// SIG // F2h0dHBzOi8vZC5zeW1jYi5jb20vY3BzMCUGCCsGAQUF
// SIG // BwICMBkMF2h0dHBzOi8vZC5zeW1jYi5jb20vcnBhMBMG
// SIG // A1UdJQQMMAoGCCsGAQUFBwMDMFcGCCsGAQUFBwEBBEsw
// SIG // STAfBggrBgEFBQcwAYYTaHR0cDovL3N2LnN5bWNkLmNv
// SIG // bTAmBggrBgEFBQcwAoYaaHR0cDovL3N2LnN5bWNiLmNv
// SIG // bS9zdi5jcnQwHwYDVR0jBBgwFoAUljtT8Hkzl699g+8u
// SIG // K8zKt4YecmYwHQYDVR0OBBYEFD+VtGjup25LSOgUWp8s
// SIG // 8L/aTV+1MA0GCSqGSIb3DQEBCwUAA4IBAQAhTUNxlQfy
// SIG // haNdArFHX6D+Svi9uRsyU8H+8/cJ85iCxCj3Xi2QawrB
// SIG // 5APqtdhIoH0/ceyG289Xt+hHnLZoG/SSFk18V6Lv2QAI
// SIG // htkyXkrI9/3B8EW/94o0OKxNNebDP6HW6F6ZA0W19YKX
// SIG // 6PxndYmP7+w0xLnwKKu7D4zI++E1UlIlJ/AugedlEVZP
// SIG // vv/rAA3chUXiB8I9HvY7yz3TeEDKdt179AUneAH54dKO
// SIG // wUNo7Ycf8CW7ztx+gb41Lz2GDRdI74CdwINennV79sh3
// SIG // dr+EFeXn/bQoaKxr1C2tvKDh1uPVYhePNMdcXSDkwOlJ
// SIG // YpD9XAc50uTYylshdf+VWgTFMIIFWTCCBEGgAwIBAgIQ
// SIG // PXjX+XZJYLJhffTwHsqGKjANBgkqhkiG9w0BAQsFADCB
// SIG // yjELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDlZlcmlTaWdu
// SIG // LCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBO
// SIG // ZXR3b3JrMTowOAYDVQQLEzEoYykgMjAwNiBWZXJpU2ln
// SIG // biwgSW5jLiAtIEZvciBhdXRob3JpemVkIHVzZSBvbmx5
// SIG // MUUwQwYDVQQDEzxWZXJpU2lnbiBDbGFzcyAzIFB1Ymxp
// SIG // YyBQcmltYXJ5IENlcnRpZmljYXRpb24gQXV0aG9yaXR5
// SIG // IC0gRzUwHhcNMTMxMjEwMDAwMDAwWhcNMjMxMjA5MjM1
// SIG // OTU5WjB/MQswCQYDVQQGEwJVUzEdMBsGA1UEChMUU3lt
// SIG // YW50ZWMgQ29ycG9yYXRpb24xHzAdBgNVBAsTFlN5bWFu
// SIG // dGVjIFRydXN0IE5ldHdvcmsxMDAuBgNVBAMTJ1N5bWFu
// SIG // dGVjIENsYXNzIDMgU0hBMjU2IENvZGUgU2lnbmluZyBD
// SIG // QTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEB
// SIG // AJeDHgAWryyx0gjE12iTUWAecfbiR7TbWE0jYmq0v1ob
// SIG // UfejDRh3aLvYNqsvIVDanvPnXydOC8KXyAlwk6naXA1O
// SIG // pA2RoLTsFM6RclQuzqPbROlSGz9BPMpK5KrA6DmrU8wh
// SIG // 0MzPf5vmwsxYaoIV7j02zxzFlwckjvF7vjEtPW7ctZlC
// SIG // n0thlV8ccO4XfduL5WGJeMdoG68ReBqYrsRVR1PZszLW
// SIG // oQ5GQMWXkorRU6eZW4U1V9Pqk2JhIArHMHckEU1ig7a6
// SIG // e2iCMe5lyt/51Y2yNdyMK29qclxghJzyDJRewFZSAEjM
// SIG // 0/ilfd4v1xPkOKiE1Ua4E4bCG53qWjjdm9sCAwEAAaOC
// SIG // AYMwggF/MC8GCCsGAQUFBwEBBCMwITAfBggrBgEFBQcw
// SIG // AYYTaHR0cDovL3MyLnN5bWNiLmNvbTASBgNVHRMBAf8E
// SIG // CDAGAQH/AgEAMGwGA1UdIARlMGMwYQYLYIZIAYb4RQEH
// SIG // FwMwUjAmBggrBgEFBQcCARYaaHR0cDovL3d3dy5zeW1h
// SIG // dXRoLmNvbS9jcHMwKAYIKwYBBQUHAgIwHBoaaHR0cDov
// SIG // L3d3dy5zeW1hdXRoLmNvbS9ycGEwMAYDVR0fBCkwJzAl
// SIG // oCOgIYYfaHR0cDovL3MxLnN5bWNiLmNvbS9wY2EzLWc1
// SIG // LmNybDAdBgNVHSUEFjAUBggrBgEFBQcDAgYIKwYBBQUH
// SIG // AwMwDgYDVR0PAQH/BAQDAgEGMCkGA1UdEQQiMCCkHjAc
// SIG // MRowGAYDVQQDExFTeW1hbnRlY1BLSS0xLTU2NzAdBgNV
// SIG // HQ4EFgQUljtT8Hkzl699g+8uK8zKt4YecmYwHwYDVR0j
// SIG // BBgwFoAUf9Nlp8Ld7LvwMAnzQzn6Aq8zMTMwDQYJKoZI
// SIG // hvcNAQELBQADggEBABOFGh5pqTf3oL2kr34dYVP+nYxe
// SIG // DKZ1HngXI9397BoDVTn7cZXHZVqnjjDSRFph23Bv2iEF
// SIG // wi5zuknx0ZP+XcnNXgPgiZ4/dB7X9ziLqdbPuzUvM1io
// SIG // klbRyE07guZ5hBb8KLCxR/Mdoj7uh9mmf6RWpT+thC4p
// SIG // 3ny8qKqjPQQB6rqTog5QIikXTIfkOhFf1qQliZsFay+0
// SIG // yQFMJ3sLrBkFIqBgFT/ayftNTI/7cmd3/SeUx7o1DohJ
// SIG // /o39KK9KEr0Ns5cF3kQMFfo2KwPcwVAB8aERXRTl4r0n
// SIG // S1S+K4ReD6bDdAUK75fDiSKxH3fzvc1D1PFMqT+1i4Sv
// SIG // ZPLQFCEwggWaMIIDgqADAgECAgphGZPkAAAAAAAcMA0G
// SIG // CSqGSIb3DQEBBQUAMH8xCzAJBgNVBAYTAlVTMRMwEQYD
// SIG // VQQIEwpXYXNoaW5ndG9uMRAwDgYDVQQHEwdSZWRtb25k
// SIG // MR4wHAYDVQQKExVNaWNyb3NvZnQgQ29ycG9yYXRpb24x
// SIG // KTAnBgNVBAMTIE1pY3Jvc29mdCBDb2RlIFZlcmlmaWNh
// SIG // dGlvbiBSb290MB4XDTExMDIyMjE5MjUxN1oXDTIxMDIy
// SIG // MjE5MzUxN1owgcoxCzAJBgNVBAYTAlVTMRcwFQYDVQQK
// SIG // Ew5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNp
// SIG // Z24gVHJ1c3QgTmV0d29yazE6MDgGA1UECxMxKGMpIDIw
// SIG // MDYgVmVyaVNpZ24sIEluYy4gLSBGb3IgYXV0aG9yaXpl
// SIG // ZCB1c2Ugb25seTFFMEMGA1UEAxM8VmVyaVNpZ24gQ2xh
// SIG // c3MgMyBQdWJsaWMgUHJpbWFyeSBDZXJ0aWZpY2F0aW9u
// SIG // IEF1dGhvcml0eSAtIEc1MIIBIjANBgkqhkiG9w0BAQEF
// SIG // AAOCAQ8AMIIBCgKCAQEAryQICCl6NZ5gDKrnSztO3Hy8
// SIG // PEUcuyvg/ikC+VcIo2SFFSf18a3IMYldIugqqqZCs4/4
// SIG // uVW3sbdLs/6PfgdX7O9D22ZiFWHPYA2k2N744MNiCD1U
// SIG // E+tJyllUhSblK48bn+v1oZHCM0nYQ2NqUkvSj+hwUU3R
// SIG // iWl7x3D2s9wSdNt7XUtW05a/FXehsPSiJfKvHJJnGOX0
// SIG // BgTvkLnkAOTdOrUZ/wK69Dzu4IvrN4vs9Nes8vbwPa/d
// SIG // dZEzGR0cQMt0JBkhk9kU/qwqUseP1QRJ5I1jR4g8aYPL
// SIG // /ke9K35PxZWuDp3U0UPAZ3PjFAh+5T+fc7gzCs9dPzSH
// SIG // loruU+glFQIDAQABo4HLMIHIMBEGA1UdIAQKMAgwBgYE
// SIG // VR0gADAPBgNVHRMBAf8EBTADAQH/MAsGA1UdDwQEAwIB
// SIG // hjAdBgNVHQ4EFgQUf9Nlp8Ld7LvwMAnzQzn6Aq8zMTMw
// SIG // HwYDVR0jBBgwFoAUYvsKIVt/Q24R2glUUGv10pZx8Z4w
// SIG // VQYDVR0fBE4wTDBKoEigRoZEaHR0cDovL2NybC5taWNy
// SIG // b3NvZnQuY29tL3BraS9jcmwvcHJvZHVjdHMvTWljcm9z
// SIG // b2Z0Q29kZVZlcmlmUm9vdC5jcmwwDQYJKoZIhvcNAQEF
// SIG // BQADggIBAIEqghaMNGcr5QPrNHuMoqNQivRVhvEejI6u
// SIG // fe4DGc5ylRhIrWIR/SD9P0cGAVri4G+MFSxOPGpQbAs2
// SIG // o896DZxCvFz4GdVg42nm4iNBZ4xog3Yrj5OjKrV/vln7
// SIG // qcmyJo/KovOCG5g+kZUnl4Zh7ltdB2vNhqjiZYCo4hXi
// SIG // sr4jBWq6DPNHk02spIwHeTnAYRI6BQ2Jo+yfV4mE++zK
// SIG // fEdmFJHYtg8ZXea4Sqy8R8hxQ5bmMiCl3HeG/Tzji3Hb
// SIG // e5sD/LcdMmTrFlKgQ6P6Lq1Zkk58x/IzQkg4UTp8OMcb
// SIG // JCIoQB4aRh8X2xj38Cc1bLhj2c25ZF0rpV7vxim08sf4
// SIG // IcwEulf9Abarxmf559OZf/T1Ivpy9f3/OhxCOqH5gBil
// SIG // 7o0c1GaeRQH+qu7/+xePMPfxzSnFney11UkAPYW4y7uT
// SIG // OidqScAwrmbJ9yMoMnb5pINWyEjOWpaqoMwMxH+0jpev
// SIG // beNUJ8OfhsDW5HMIlwXb0FRiXgNIwtWff6dmjNCdsE/U
// SIG // 05hfS3rJf7IpUtASgMcPVLYeZ83GoGwRA4TTSHXnKv6w
// SIG // O24KOqZrdpkFo/F3aGEzFEcG/FN/Ur2SFFxKJGpnjK+N
// SIG // kKrQ9nkhG5MmfMPOHr2IOJKuRcYZaklQswX4rlk3imol
// SIG // A5SxWYFQ6LqDgLcjNfR2uWcdWRitII2UMYIRCTCCEQUC
// SIG // AQEwgZMwfzELMAkGA1UEBhMCVVMxHTAbBgNVBAoTFFN5
// SIG // bWFudGVjIENvcnBvcmF0aW9uMR8wHQYDVQQLExZTeW1h
// SIG // bnRlYyBUcnVzdCBOZXR3b3JrMTAwLgYDVQQDEydTeW1h
// SIG // bnRlYyBDbGFzcyAzIFNIQTI1NiBDb2RlIFNpZ25pbmcg
// SIG // Q0ECEDmdzLrfPCz+QuH5ecai1PEwDQYJYIZIAWUDBAIB
// SIG // BQCgfDAQBgorBgEEAYI3AgEMMQIwADAZBgkqhkiG9w0B
// SIG // CQMxDAYKKwYBBAGCNwIBBDAcBgorBgEEAYI3AgELMQ4w
// SIG // DAYKKwYBBAGCNwIBFTAvBgkqhkiG9w0BCQQxIgQg5cth
// SIG // 7/FIjbBYGBnXRM7e1ujJw5sI/mFoayukcu6BbuUwDQYJ
// SIG // KoZIhvcNAQEBBQAEggEAKGgLGzGiJegOSwnxIClFhAFW
// SIG // Hwy0QFO80TaY1rYS0QzIxb6877eLR6T7KzLciwQ/aXlp
// SIG // gSfSswVeftEyy8PA6wNsNv3jioTaLO8zDJ0RDG0o1/Pg
// SIG // b5g5SarPtgJCy0dxVxn/djnjWgU92EXbay+6Ict3iYSi
// SIG // vC4rcEKd3NthNzkU8P90ivHX3YuHhQV41oHDzCOjO0BE
// SIG // 2X59HQLBsdGO/AywZGqAak4E/GqnZwDk+2hlHdt9oAe0
// SIG // ZXKR4EueWcx51MVegpNubQvLo5IRSl5XrUzDxUbo7Ihc
// SIG // ug1//qAIViTYyWj9eu6gflUjsa241c5bFqbubC5LNHQO
// SIG // S0OfNXu6d6GCDsgwgg7EBgorBgEEAYI3AwMBMYIOtDCC
// SIG // DrAGCSqGSIb3DQEHAqCCDqEwgg6dAgEDMQ8wDQYJYIZI
// SIG // AWUDBAIBBQAwdwYLKoZIhvcNAQkQAQSgaARmMGQCAQEG
// SIG // CWCGSAGG/WwHATAxMA0GCWCGSAFlAwQCAQUABCAd/pd7
// SIG // hK1Yxy1XNj4w2ne64SHNszz76nXDGBuYZryD4QIQKYoM
// SIG // ZxwvFtlgHtYUpc9cPhgPMjAxODA5MjUwNzUwMjdaoIIL
// SIG // uzCCBoIwggVqoAMCAQICEAnA/EbIBEITtVmLryhPTkEw
// SIG // DQYJKoZIhvcNAQELBQAwcjELMAkGA1UEBhMCVVMxFTAT
// SIG // BgNVBAoTDERpZ2lDZXJ0IEluYzEZMBcGA1UECxMQd3d3
// SIG // LmRpZ2ljZXJ0LmNvbTExMC8GA1UEAxMoRGlnaUNlcnQg
// SIG // U0hBMiBBc3N1cmVkIElEIFRpbWVzdGFtcGluZyBDQTAe
// SIG // Fw0xNzAxMDQwMDAwMDBaFw0yODAxMTgwMDAwMDBaMEwx
// SIG // CzAJBgNVBAYTAlVTMREwDwYDVQQKEwhEaWdpQ2VydDEq
// SIG // MCgGA1UEAxMhRGlnaUNlcnQgU0hBMiBUaW1lc3RhbXAg
// SIG // UmVzcG9uZGVyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A
// SIG // MIIBCgKCAQEAnpWYajQ7cxuofvzHvilpicdoJkZfPY1i
// SIG // c4eBo6Gc8LdbJDdaktT0Wdd2ieTc1Sfw1Wa8Cu60KzFn
// SIG // rFjFSpFZK0UeCQHWZLNZ7o1mTfsjXswQDQuKZ+9SrqAI
// SIG // kMJS9/WotW6bLHud57U++3jNMlAYv0C1TIy7V/SgTxFF
// SIG // bEJCueWv1t/0p3wKaJYP0l8pV877HTL/9BGhEyL7Esvv
// SIG // 11PS65fLoqwbHZ1YIVGCwsLe6is/LCKE0EPsOzs/R8T2
// SIG // VtxFN5i0a3S1Wa94V2nIDwkCeN3YU8GZ22DEnequr+B+
// SIG // hkpcqVhhqF50igEoaHJOp4adtQJSh3BmSNOO74EkzNzY
// SIG // ZQIDAQABo4IDODCCAzQwDgYDVR0PAQH/BAQDAgeAMAwG
// SIG // A1UdEwEB/wQCMAAwFgYDVR0lAQH/BAwwCgYIKwYBBQUH
// SIG // AwgwggG/BgNVHSAEggG2MIIBsjCCAaEGCWCGSAGG/WwH
// SIG // ATCCAZIwKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LmRp
// SIG // Z2ljZXJ0LmNvbS9DUFMwggFkBggrBgEFBQcCAjCCAVYe
// SIG // ggFSAEEAbgB5ACAAdQBzAGUAIABvAGYAIAB0AGgAaQBz
// SIG // ACAAQwBlAHIAdABpAGYAaQBjAGEAdABlACAAYwBvAG4A
// SIG // cwB0AGkAdAB1AHQAZQBzACAAYQBjAGMAZQBwAHQAYQBu
// SIG // AGMAZQAgAG8AZgAgAHQAaABlACAARABpAGcAaQBDAGUA
// SIG // cgB0ACAAQwBQAC8AQwBQAFMAIABhAG4AZAAgAHQAaABl
// SIG // ACAAUgBlAGwAeQBpAG4AZwAgAFAAYQByAHQAeQAgAEEA
// SIG // ZwByAGUAZQBtAGUAbgB0ACAAdwBoAGkAYwBoACAAbABp
// SIG // AG0AaQB0ACAAbABpAGEAYgBpAGwAaQB0AHkAIABhAG4A
// SIG // ZAAgAGEAcgBlACAAaQBuAGMAbwByAHAAbwByAGEAdABl
// SIG // AGQAIABoAGUAcgBlAGkAbgAgAGIAeQAgAHIAZQBmAGUA
// SIG // cgBlAG4AYwBlAC4wCwYJYIZIAYb9bAMVMB8GA1UdIwQY
// SIG // MBaAFPS24SAd/imu0uRhpbKiJbLIFzVuMB0GA1UdDgQW
// SIG // BBThpzJK7gEhKH1U1fIHkm60Bw89hzBxBgNVHR8EajBo
// SIG // MDKgMKAuhixodHRwOi8vY3JsMy5kaWdpY2VydC5jb20v
// SIG // c2hhMi1hc3N1cmVkLXRzLmNybDAyoDCgLoYsaHR0cDov
// SIG // L2NybDQuZGlnaWNlcnQuY29tL3NoYTItYXNzdXJlZC10
// SIG // cy5jcmwwgYUGCCsGAQUFBwEBBHkwdzAkBggrBgEFBQcw
// SIG // AYYYaHR0cDovL29jc3AuZGlnaWNlcnQuY29tME8GCCsG
// SIG // AQUFBzAChkNodHRwOi8vY2FjZXJ0cy5kaWdpY2VydC5j
// SIG // b20vRGlnaUNlcnRTSEEyQXNzdXJlZElEVGltZXN0YW1w
// SIG // aW5nQ0EuY3J0MA0GCSqGSIb3DQEBCwUAA4IBAQAe8EGC
// SIG // Mq7t8bQ1E9xQwtWXriIinQ4OrzPTTP18v28BEaeUZSJc
// SIG // xiKhyIlSa5qMc1zZXj8y3hZgTIs2/TGZCr3BhLeNHe+J
// SIG // JhMFVvNHzUdbrYSyOK9qI7VF4x6IMkaA0remmSL9wXjP
// SIG // 9YvYDIwFCe5E5oDVbXDMn1MeJ90qSN7ak2WtbmWjmafC
// SIG // QA5zzFhPj0Uo5byciOYozmBdLSVdi3MupQ1bUdqaTv9Q
// SIG // BYko2vJ4u9JYeI1Ep6w6AJF4aYlkBNNdlt8qv/mlTCyT
// SIG // /+aK3YKs8dKzooaawVWJVmpHP/rWM5VDNYkFeFo6adoi
// SIG // uARD029oNTZ6FD5F6Zhkhg8TDCZKMIIFMTCCBBmgAwIB
// SIG // AgIQCqEl1tYyG35B5AXaNpfCFTANBgkqhkiG9w0BAQsF
// SIG // ADBlMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNl
// SIG // cnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29t
// SIG // MSQwIgYDVQQDExtEaWdpQ2VydCBBc3N1cmVkIElEIFJv
// SIG // b3QgQ0EwHhcNMTYwMTA3MTIwMDAwWhcNMzEwMTA3MTIw
// SIG // MDAwWjByMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGln
// SIG // aUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQu
// SIG // Y29tMTEwLwYDVQQDEyhEaWdpQ2VydCBTSEEyIEFzc3Vy
// SIG // ZWQgSUQgVGltZXN0YW1waW5nIENBMIIBIjANBgkqhkiG
// SIG // 9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvdAy7kvNj3/dqbqC
// SIG // mcU5VChXtiNKxA4HRTNREH3Q+X1NaH7ntqD0jbOI5Je/
// SIG // YyGQmL8TvFfTw+F+CNZqFAA49y4eO+7MpvYyWf5fZT/g
// SIG // m+vjRkcGGlV+Cyd+wKL1oODeIj8O/36V+/OjuiI+GKwR
// SIG // 5PCZA207hXwJ0+5dyJoLVOOoCXFr4M8iEA91z3FyTgqt
// SIG // 30A6XLdR4aF5FMZNJCMwXbzsPGBqrC8HzP3w6kfZiFBe
// SIG // /WZuVmEnKYmEUeaC50ZQ/ZQqLKfkdT66mA+Ef58xFNat
// SIG // 1fJky3seBdCEGXIX8RcG7z3N1k3vBkL9olMqT4UdxB08
// SIG // r8/arBD13ays6Vb/kwIDAQABo4IBzjCCAcowHQYDVR0O
// SIG // BBYEFPS24SAd/imu0uRhpbKiJbLIFzVuMB8GA1UdIwQY
// SIG // MBaAFEXroq/0ksuCMS1Ri6enIZ3zbcgPMBIGA1UdEwEB
// SIG // /wQIMAYBAf8CAQAwDgYDVR0PAQH/BAQDAgGGMBMGA1Ud
// SIG // JQQMMAoGCCsGAQUFBwMIMHkGCCsGAQUFBwEBBG0wazAk
// SIG // BggrBgEFBQcwAYYYaHR0cDovL29jc3AuZGlnaWNlcnQu
// SIG // Y29tMEMGCCsGAQUFBzAChjdodHRwOi8vY2FjZXJ0cy5k
// SIG // aWdpY2VydC5jb20vRGlnaUNlcnRBc3N1cmVkSURSb290
// SIG // Q0EuY3J0MIGBBgNVHR8EejB4MDqgOKA2hjRodHRwOi8v
// SIG // Y3JsNC5kaWdpY2VydC5jb20vRGlnaUNlcnRBc3N1cmVk
// SIG // SURSb290Q0EuY3JsMDqgOKA2hjRodHRwOi8vY3JsMy5k
// SIG // aWdpY2VydC5jb20vRGlnaUNlcnRBc3N1cmVkSURSb290
// SIG // Q0EuY3JsMFAGA1UdIARJMEcwOAYKYIZIAYb9bAACBDAq
// SIG // MCgGCCsGAQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2Vy
// SIG // dC5jb20vQ1BTMAsGCWCGSAGG/WwHATANBgkqhkiG9w0B
// SIG // AQsFAAOCAQEAcZUS6VGHVmnN793afKpjerN4zwY3QITv
// SIG // S4S/ys8DAv3Fp8MOIEIsr3fzKx8MIVoqtwU0HWqumfgn
// SIG // oma/Capg33akOpMP+LLR2HwZYuhegiUexLoceywh4tZb
// SIG // LBQ1QwRostt1AuByx5jWPGTlH0gQGF+JOGFNYkYkh2OM
// SIG // kVIsrymJ5Xgf1gsUpYDXEkdws3XVk4WTfraSZ/tTYYmo
// SIG // 9WuWwPRYaQ18yAGxuSh1t5ljhSKMYcp5lH5Z/IwP42+1
// SIG // ASa2bKXuh1Eh5Fhgm7oMLSttosR+u8QlK0cCCHxJrhO2
// SIG // 4XxCQijGGFbPQTS2Zl22dHv1VjMiLyI2skuiSpXY9aaO
// SIG // UjGCAk0wggJJAgEBMIGGMHIxCzAJBgNVBAYTAlVTMRUw
// SIG // EwYDVQQKEwxEaWdpQ2VydCBJbmMxGTAXBgNVBAsTEHd3
// SIG // dy5kaWdpY2VydC5jb20xMTAvBgNVBAMTKERpZ2lDZXJ0
// SIG // IFNIQTIgQXNzdXJlZCBJRCBUaW1lc3RhbXBpbmcgQ0EC
// SIG // EAnA/EbIBEITtVmLryhPTkEwDQYJYIZIAWUDBAIBBQCg
// SIG // gZgwGgYJKoZIhvcNAQkDMQ0GCyqGSIb3DQEJEAEEMBwG
// SIG // CSqGSIb3DQEJBTEPFw0xODA5MjUwNzUwMjdaMC8GCSqG
// SIG // SIb3DQEJBDEiBCANNzVEpmDKDdTvnOkt3Rcmi7OgTghT
// SIG // IcxFhbKpxhlw3zArBgsqhkiG9w0BCRACDDEcMBowGDAW
// SIG // BBRAAZFHXJiJHeuhBK9HCRtettTLyzANBgkqhkiG9w0B
// SIG // AQEFAASCAQAB9SWOoio5GHwjTka8wbBxqHRhVO06Jwko
// SIG // E0jC28Be5kfYFwt5vn9a4BFUi7lppF1+OEtkxkDfKu02
// SIG // sdUa4A3aqOhdlBbDYJHkhtbOL9ioq43YDT/muFx8NmM+
// SIG // h/+383EsZZsMtllAYgTllivsarTYcK6NYwXr0xVW+3A6
// SIG // DutPyuoj8STgT4ZRNUTsohL9NcjdRs9aAhCms3j74wR/
// SIG // N5XVEI9qFfFet42mi/HzjB101S6uObiq+vNW2vXMabUZ
// SIG // LD09UIiV6H8a8v1fUdxl3uBgxwOOQQjXPeqjqehBqmtt
// SIG // kaMoXFuLzuP9BnaQBSncnKVoaaCBGRLCQZGiXU7Rd7mH
// SIG // End signature block
